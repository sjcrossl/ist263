(self.webpackChunk_learn_ultra_apps_ultra=self.webpackChunk_learn_ultra_apps_ultra||[]).push([[81557],{928617:function(e,t,n){var r={"./ar-sa/_combined":[572265,57608],"./ar-sa/_combined.json":[572265,57608],"./az-az/_combined":[687370,5177],"./az-az/_combined.json":[687370,5177],"./cs-cz/_combined":[910387,62250],"./cs-cz/_combined.json":[910387,62250],"./cy-gb/_combined":[122469,74324],"./cy-gb/_combined.json":[122469,74324],"./da-dk/_combined":[116848,36399],"./da-dk/_combined.json":[116848,36399],"./de-de/_combined":[300358,5021],"./de-de/_combined.json":[300358,5021],"./en-au/_combined":[440959,26726],"./en-au/_combined.json":[440959,26726],"./en-gb/_combined":[457464,46063],"./en-gb/_combined.json":[457464,46063],"./en-us-k12/_combined":[883354,29433],"./en-us-k12/_combined.json":[883354,29433],"./en-us-pro/_combined":[130527,38582],"./en-us-pro/_combined.json":[130527,38582],"./en-us/_combined":[172845,72845],"./en-us/_combined.json":[172845,72845],"./en/_combined":[684056,81543],"./en/_combined.json":[684056,81543],"./es-es/_combined":[959112,36983],"./es-es/_combined.json":[959112,36983],"./fr-ca/_combined":[588064,48199],"./fr-ca/_combined.json":[588064,48199],"./fr-fr/_combined":[715080,25495],"./fr-fr/_combined.json":[715080,25495],"./he-il/_combined":[791240,89223],"./he-il/_combined.json":[791240,89223],"./it-it/_combined":[76270,1541],"./it-it/_combined.json":[76270,1541],"./ja-jp/_combined":[304709,87692],"./ja-jp/_combined.json":[304709,87692],"./ko-kr/_combined":[31263,58102],"./ko-kr/_combined.json":[31263,58102],"./ms-my/_combined":[869734,54381],"./ms-my/_combined.json":[869734,54381],"./nb-no/_combined":[517219,96226],"./nb-no/_combined.json":[517219,96226],"./nl-nl/_combined":[889988,28795],"./nl-nl/_combined.json":[889988,28795],"./nn-no/_combined":[873455,89022],"./nn-no/_combined.json":[873455,89022],"./pl-pl/_combined":[509276,48515],"./pl-pl/_combined.json":[509276,48515],"./pt-br/_combined":[645448,3935],"./pt-br/_combined.json":[645448,3935],"./pt-pt/_combined":[659228,65763],"./pt-pt/_combined.json":[659228,65763],"./ru-ru/_combined":[810510,2565],"./ru-ru/_combined.json":[810510,2565],"./sv-se/_combined":[820348,93950],"./sv-se/_combined.json":[820348,93950],"./th-th/_combined":[988692,16731],"./th-th/_combined.json":[988692,16731],"./tr-tr/_combined":[374120,71287],"./tr-tr/_combined.json":[374120,71287],"./uk-ua/_combined":[28486,62509],"./uk-ua/_combined.json":[28486,62509],"./zh-cn/_combined":[274215,87214],"./zh-cn/_combined.json":[274215,87214],"./zh-tw/_combined":[776875,88514],"./zh-tw/_combined.json":[776875,88514]};function i(e){if(!n.o(r,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],i=t[0];return n.e(t[1]).then(function(){return n.t(i,17)})}i.keys=function(){return Object.keys(r)},i.id=928617,e.exports=i},828601:function(e,t,n){var r={"./ar-AE/_combined.json":[517130,97087],"./ar-SA/_combined.json":[782932,84533],"./ar/_combined.json":[633871,53184],"./cs-CZ/_combined.json":[488282,16123],"./cs/_combined.json":[485210,40183],"./cy-GB/_combined.json":[849012,15033],"./cy/_combined.json":[890588,24957],"./da-DK/_combined.json":[444317,52890],"./da/_combined.json":[372099,42072],"./de-DE/_combined.json":[293599,77096],"./de/_combined.json":[36743,61084],"./en-AU/_combined.json":[287706,60471],"./en-GB/_combined.json":[536965,81770],"./en-US/_combined.json":[723580,37093],"./en/_combined.json":[945039,52072],"./es-ES/_combined.json":[523465,83066],"./es/_combined.json":[534316,34429],"./fr-CA/_combined.json":[315269,91018],"./fr-FR/_combined.json":[682141,56374],"./fr/_combined.json":[84116,53961],"./he-IL/_combined.json":[866973,20990],"./he/_combined.json":[864163,42776],"./it-IT/_combined.json":[146287,55872],"./it/_combined.json":[784793,96078],"./ja-JP/_combined.json":[605572,31821],"./ja/_combined.json":[989269,33574],"./ko-KR/_combined.json":[544318,3991],"./ko/_combined.json":[162142,10627],"./ms/_combined.json":[711140,80949],"./nb-NO/_combined.json":[772410,32883],"./nb/_combined.json":[407324,60497],"./nl-NL/_combined.json":[463285,15870],"./nl/_combined.json":[99646,18527],"./nn-NO/_combined.json":[232870,66335],"./nn/_combined.json":[398328,41485],"./pl-PL/_combined.json":[840329,85482],"./pl/_combined.json":[501004,70529],"./pt-BR/_combined.json":[852969,92458],"./pt-PT/_combined.json":[696793,56890],"./pt/_combined.json":[60596,8553],"./ru-RU/_combined.json":[308803,75396],"./ru/_combined.json":[176825,15690],"./sv-SE/_combined.json":[620454,22659],"./sv/_combined.json":[558677,38042],"./th-TH/_combined.json":[77865,14418],"./th/_combined.json":[837428,8905],"./tr-TR/_combined.json":[619881,14706],"./tr/_combined.json":[700146,12691],"./zh-Hans-CN/_combined.json":[108357,17574],"./zh-Hans/_combined.json":[999079,30796],"./zh-Hant-TW/_combined.json":[528166,97967],"./zh-Hant/_combined.json":[636946,17987],"./zh/_combined.json":[756102,56007]};function i(e){if(!n.o(r,e))return Promise.resolve().then(function(){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],i=t[0];return n.e(t[1]).then(function(){return n.t(i,17)})}i.keys=function(){return Object.keys(r)},i.id=828601,e.exports=i},782785:function(e,t,n){"use strict";var r=n(514041);t.A=({contentId:e,fileId:t,filePreviewUrl:n})=>r.createElement("a",{"data-ally-content-id":e,"data-ally-file-eid":t,"data-ally-file-preview-url":n,style:{display:"none"}})},919985:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r,i,o=n(514041),s=n(528128),a=n(629119),l=n(374980),u=n(777730);(r=i||(i={}))[r.ScoreIndicator=0]="ScoreIndicator",r[r.AlternativeFormats=1]="AlternativeFormats",t.A=({contentRef:e,widgetType:t,text:n,ariaLabel:r,iconSize:d})=>{let c={"data-ally-content-ref":e},p={},m=o.useRef(null),g=o.useRef(null),E="components.directives.allyWidget";r&&(p["aria-label"]=r),n||(p.style={width:"100%"}),p.style={display:"none"};let h=(0,u.useAnalyticsAugmentEventOnElement)(u.AnalyticsEventTypes.CLICK_EVENT,()=>{},E+".score"),y=o.useCallback(e=>{h(e)},[h]),f=(0,u.useAnalyticsAugmentEventOnElement)(u.AnalyticsEventTypes.HOVER_EVENT,()=>{},E+".score"),b=o.useCallback(e=>{f(e)},[f]),I=(0,u.useAnalyticsAugmentEventOnElement)(u.AnalyticsEventTypes.CLICK_EVENT,()=>{},E+".alternative"),A=o.useCallback(e=>{I(e)},[I]),v=(0,u.useAnalyticsAugmentEventOnElement)(u.AnalyticsEventTypes.HOVER_EVENT,()=>{},E+".alternative"),S=o.useCallback(e=>{v(e)},[v]),_=o.useCallback(e=>{m.current&&m.current.removeEventListener("click",y),e&&e.addEventListener("click",y,!0),m.current=e},[y]),T=o.useCallback(e=>{g.current&&g.current.removeEventListener("click",A),e&&e.addEventListener("click",A,!0),g.current=e},[A]);switch(o.useEffect(()=>()=>{m.current&&m.current.removeEventListener("click",y),g.current&&g.current.removeEventListener("click",A)},[y,A]),t){case i.ScoreIndicator:if(c["data-ally-invoke"]="instructorfeedback",c["data-ally-show"]="instructorfeedback",!n)return o.createElement("span",{...c,...p,"data-ally-scoreindicator":"circle",ref:_,onMouseOver:b,"data-analytics-id":E+".score",onKeyDown:e=>{32===e.keyCode&&e.target.dispatchEvent(new Event("click"))}});break;case i.AlternativeFormats:if(c["data-ally-invoke"]="alternativeformats",c["data-ally-show"]="alternativeformats",r&&(c["data-ally-tooltip"]="",p.title=r),!n)return o.createElement("button",{...c,...p,ref:T,onMouseOver:S,"data-analytics-id":E+".alternative"},"medium"===d?o.createElement(a.AllyDownload,{id:"icon-solid-medium-ally-download"}):o.createElement(s.AllyDownload,{id:"icon-solid-small-ally-download"}))}return o.createElement(l.AnalyticsLink,{...p,...c,analyticsId:"components.directives.allyWidget.link"},n)}},773095:function(e,t,n){"use strict";n.d(t,{A:function(){return t6}});var r=n(514041),i=n(843144),o=n(939067),s=/*#__PURE__*/n.n(o),a=n(959869),l=/*#__PURE__*/n.n(a),u=n(309546),d=n(745256),c=n(457561),p=n(553853),m=n(704684),g=n(813834),E=/*#__PURE__*/n.n(g),h=n(501043),y=n(880537),f=n(350437),b=n(820151);let I=c.A.import("parchment");var A=class extends h.Ay{constructor(e,t){super(e,t),this.quill.root.addEventListener("cut",this.onCut.bind(this))}convert(e){let t=this.isHTMLManuallyLoaded;if(e?this.isHTMLManuallyLoaded=!0:delete this.isHTMLManuallyLoaded,e&&(e=e.replace("<pre></pre>","<pre>&nbsp;</pre>")),!e&&!t){Array.from(this.container.querySelectorAll("img")).forEach(e=>("string"!=typeof e.src||/^(blob|data|file):.*/.test(e.src)&&void 0===e.attributes["data-mathml"])&&e.remove()),Array.from(this.container.querySelectorAll("span.sr-only")).forEach(e=>"Wirisformula"===e.previousSibling.className&&e.remove()),Array.from(this.container.querySelectorAll('[data-bbtype="image"]')).forEach(e=>("string"!=typeof e.getAttribute("href")||/^(blob|data|file):.*/.test(e.getAttribute("href")))&&e.remove()),this.container.innerHTML=this.container.innerHTML.replace(/<br\s?\/?>\r?\n/g,"<br>");let e=this.container.querySelector("pre");e&&!this.isCodeBlockButtonActive()&&e.appendChild(document.createElement("br")),Array.from(this.container.querySelectorAll('[data-bbtype="attachment"]')).forEach(e=>{e.setAttribute("data-bbtype","reinsertAttachment"),e.getAttribute("href").includes("/sessions/")&&e.remove()}),Array.from(this.container.querySelectorAll("[data-bbfile]")).forEach(e=>{e.parentNode.insertBefore(document.createElement("p").appendChild(document.createElement("br")),e)}),Array.from(this.container.querySelectorAll("table")).forEach(e=>{!function(e){let t=e.rows.length;for(let n=0;n<t;n++){let t=e.rows[n],r=t.cells,i=r.length,o=0;for(let s=0;s<i;s++){let i=r[o],s=i.getAttribute("rowspan"),a=i.getAttribute("colspan");if(null!==s){let t=Math.min(s-1,e.rows.length-(n+1));for(let r=0;r<t;r++){let t=e.rows[n+r+1],i=o<t.cells.length?o:-1,s=t.insertCell(i);a&&s.setAttribute("colSpan",a)}}if(null!==a){let e=a-1;for(let n=0;n<e;n++)t.insertCell(o);o+=e}o+=1}}}(e)})}return this.handleCodeBlockFormatting(t),super.convert(e)}onPaste(e){if(e.defaultPrevented||!this.quill.isEnabled())return;let t=this.quill.getSelection(),n=new(E())().retain(t.index).delete(t.length),r=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(c.A.sources.SILENT),setTimeout(()=>{n=n.concat(this.convert());let e="",i=this.quill.scroll.length(),o=null;if(n.ops.forEach(e=>{var t;(null===(t=e.attributes)||void 0===t?void 0:t.color)==="transparent"&&delete e.attributes.color}),i-t.index>1&&(n.ops.forEach(t=>{var n;(null===(n=t.attributes)||void 0===n?void 0:n.color)==="#ffffff"&&(t.insert=" \n",e+=" ")}),e.length>0)){let r=this.quill.getLeaf(t.index)[0],i="text"===r.statics.blotName;for(;null!=r&&!(r instanceof y.A||r instanceof f.A);)o=r,r=r.parent;if(["TD","TH"].includes(r.domNode.nodeName)){for(;null!=r&&!(r instanceof f.A);)o=r,r=r.parent;t.index=this.quill.getIndex(o.next),n.ops[0].retain=t.index}i&&0!==t.index&&(this.quill.insertText(t.index,"\n","silent"),n.ops[0].retain+=1,t.index+=1),o=o.next,r.insertBefore(I.create("text","\n"),o),n.ops.push({delete:2}),this.quill.insertText(t.index,e,"silent")}if(this.quill.updateContents(n,c.A.sources.USER),o){let e=this.quill.getIndex(o);-1===e&&(e=this.quill.getIndex(o.next)),this.quill.setSelection(e,c.A.sources.USER)}else this.quill.focus(),this.quill.setSelection(n.length()-t.length,c.A.sources.USER);this.quill.scrollingContainer.scrollTop=r,this.quill.focus(),this.quill.notifyPluginsOfPropChanges()},1)}onCut(e){if(e.defaultPrevented||!this.quill.isEnabled())return;let t=this.quill.getSelection();setTimeout(()=>{this.quill.setSelection(t.index,c.A.sources.SILENT)},1)}dangerouslyReplaceHTML(e){let t=this._formatBbmlText(e);return this.quill.setContents(this.convert(t))}dangerouslyPasteHTML(e,t){let n=this._formatBbmlText(t);super.dangerouslyPasteHTML(e,n)}handleCodeBlockFormatting(e){if(e&&this.isCodeBlockButtonActive()){let e=this.quill.getLength();this.quill.insertText(e,"\n","silent"),this.quill.setSelection(e,0)}}isCodeBlockButtonActive(){return this.quill.getFormat(this.quill.selection.savedRange.index)[b.A.blotName]}_formatBbmlText(e){let t=e.replace(/[\n]\s*/g,"");return(t=t.replace(/<h(\d)\s*><\/h\d\s*>/g,"<h$1><br></h$1>")).replace(/<h(\d)\s*\/>/g,"<h$1><br></h$1>")}},v=n(976657),S=n(186765),_=class extends v.A{undo(){if(!this.stack)return;this.stack.undo=this.stack.undo.filter(e=>!e.redo.ops.find(e=>{var t;return null===(t=e.attributes)||void 0===t?void 0:t.td})&&!e.undo.ops.find(e=>{var t;return null===(t=e.attributes)||void 0===t?void 0:t.td}));let e=this.undoAroundTables(this.stack.undo);e.length>0&&(e[e.length-1].undo.ops=e[e.length-1].undo.ops.filter(e=>0!==e.retain),this.stack.undo=e),super.undo()}redo(){}getTableIndexes(){let e=this.quill.root.getElementsByTagName("table"),t=[];for(let n=0;n<e.length;n++){let r=e[n],i=S.Ay.find(r),o=this.quill.getIndex(i),s=o+i.length();t.push({index:o,endIndex:s})}return t}getLastSetOfOps(e){let t=[];for(let n=e.length-1;n>=0;n--){let r=e.pop();if(t=[r,...t],r.retain)break;0!==n||r.retain||(t=[{retain:0},...t])}return t}getOpsLength(e){let t=0;return e.forEach(e=>{var n,r,i,o;t+=null!==(n=e.retain)&&void 0!==n?n:0,t+=null!==(i=null===(r=e.insert)||void 0===r?void 0:r.length)&&void 0!==i?i:0,t+=null!==(o=e.delete)&&void 0!==o?o:0}),t}addOffsetToTableIndexes(e,t){e.forEach(e=>{e.index+=t,e.endIndex+=t})}undoAroundTables(e){var t,n;let r=null===(t=e[e.length-1])||void 0===t?void 0:t.undo.ops,i=this.getTableIndexes();if(0===i.length||!r)return e;for(;i.length>0;){let e=i.shift(),t=this.getLastSetOfOps(r),o=this.getOpsLength(r);for(;t.length>0;){let s=t.shift();if(void 0!==s.retain)o+s.retain===e.index?(t.length>0&&(void 0!==t[0].attributes?t[0].attributes={...null===(n=t[0])||void 0===n?void 0:n.attributes,...s.attributes}:t[0].delete?r.push(s):t[0].attributes=s.attributes||{},t.length>1&&t[1].insert&&(delete t[1].insert,t[1].retain=1)),r.push(...t),t.length=0):o+s.retain>e.index&&s.retain<e.endIndex?(s.retain=s.retain+e.endIndex-e.index+1,r.push(s,...t),t.length=0):s.retain+o<e.index?(o+=s.retain,0!==s.retain&&r.push(s)):(r.push(s,...t),t.length=0);else if(s.delete){if(s.delete+o>e.index){let n=s.delete+o-e.index;s.delete=s.delete-n,r.push(s,{retain:e.endIndex-e.index+1},{delete:n},...t),t.length=0}else o+=s.delete,r.push(s)}else s.insert&&("\n"===s.insert?this.addOffsetToTableIndexes(i,1):(o+=s.insert.length,this.addOffsetToTableIndexes(i,s.insert.length)),r.push(s))}}return e}},T=n(573147),O=n(336339),C=n(168698);let R=S.Ay.import("parchment");class L extends T.A{static register(){S.Ay.register(C.nA,!0),S.Ay.register(C.nd,!0),S.Ay.register(C.Hj,!0),S.Ay.register(C.BF,!0),S.Ay.register(C.K3,!0),S.Ay.register(C.cg,!0)}constructor(...e){super(...e),this.listenBalanceTables()}balanceTables(){let e=this.quill.scroll.descendants(C.K3),t=this.checkTablesMerge(e);if(0===t.length)return;e=e.filter(e=>t.includes(e.formats().table));for(let t=e.length-1;t>=0;t--){let n=e[t],r=n.children.tail;for(;r.prev;)this.quill.scroll.insertBefore(r.prev,n);let i=r.children.tail,o=n.prev;for(;o&&!o.formats().tablebr&&!o.prev.formats().table;)i.insertBefore(o,i.children.head),o=n.prev;i.children.tail.remove(),n.next.domNode.remove(),this.quill.scroll.removeChild(n.next)}e[e.length-1].next||this.quill.scroll.appendChild(R.create("text","\n"));let n=null,r=null;e.forEach(e=>{let t=e.children.head,i=t.formats();if(n!==i.tr)n=i.tr,r=t;else{let e=t.children.head;r.appendChild(e)}});let i=null,o=null;e.forEach(e=>{let t=e.formats();if(i!==t.table)i=t.table,o=e;else{let t=e.children.head;o.appendChild(t)}})}checkTablesMerge(e=this.quill.scroll.descendants(C.K3)){let t=[],n=[];for(let r=0;r<e.length;r++){let i=e[r].domNode.getAttribute("table_id");t.includes(i)&&!n.includes(i)&&n.push(i),e[r].prev.formats().tablebr||n.includes(i)||n.push(i),t.push(i)}return n}deleteColumn(){let[e,,t]=this.getTable();if(null==t)return;let n=e.children.tail.children.head instanceof C.nd;if(!t.next&&t.prev){let e=t.prev.getIndexAndOffset()[1];this.quill.setSelection(e,S.Ay.sources.SILENT)}e.deleteColumn(t.getIndexAndOffset()[0]),n&&this.updateHeaderCol(!0),this.quill.update(S.Ay.sources.USER)}deleteRow(){let[,e,t]=this.getTable();if(null==e)return;let n=e.children.tail instanceof C.nd,r=t.getIndexAndOffset()[0],i=0,o=null,s=!1;for(!e.next&&e.prev?o=e.prev.children.head:e.next||e.prev?o=e.next.children.head:(o=e.children.head,s=!0);o.next&&i<r&&!s;)o=o.next,i+=1;this.quill.setSelection(o.getIndexAndOffset()[1],S.Ay.sources.SILENT),e.remove(),n&&this.updateHeaderRow(!0),this.quill.update(S.Ay.sources.USER)}deleteTable(){var e;let[t]=this.getTable();if(null==t)return;let n=t.offset()-1;(null===(e=t.prev)||void 0===e?void 0:e.statics.blotName)===C.cg.blotName&&t.prev.domNode.getAttribute("table_id")===t.domNode.getAttribute("table_id")&&t.prev.remove(),t.remove(),this.quill.update(S.Ay.sources.USER),this.quill.setSelection(n,S.Ay.sources.SILENT)}getTable(e=this.quill.getSelection()){if(null==e)return[null,null,null,-1];let[t,n]=this.quill.getLine(e.index),r=this.getCellOfContent(t);if(null==r)return[null,null,null,-1];let i=r.parent;return[i.parent,i,r,n]}getCells(){let[e]=this.getTable();return e?e.getCells():[]}getCellOfContent(e){if(!e)return null;let t=e.parent;for(;t;){if(t.statics.blotName===C.nA.blotName||t.statics.blotName===C.nd.blotName)return t;t=t.parent}return null}getTableData(e=!1,t=!1,n=this.quill.getSelection()){let r=this.getTable(n)[0],i=this.getTableColumnsCount(r),o=this.getTableRowsCount(r);if(e!==t)return{columnCount:i,rowCount:o,headerRow:e,headerColumn:t};let s=this.getTableHeadersValue(e,t);return{columnCount:i,rowCount:o,headerRow:s.row,headerColumn:s.column}}getTableColumnsCount(e){return 0>=this.getTableRowsCount(e)||!e.children.head.children?0:e.children.head.children.length}getTableRowsCount(e){return(null==e?void 0:e.children)?e.children.length:0}getTableHeadersValue(e=!1,t=!1,n=this.quill.getSelection()){let r=this.getTable(n)[0],i={row:!1,column:!1},o=this.getTableColumnsCount(r),s=this.getTableRowsCount(r);return 0>=this.getTableRowsCount(r)||!r.children.head.children||(1===o&&1===s?!this.isHeaderCell(r.children.tail.children.head)||(i.row=e,i.column=t,e||t||(i.row=!0,t=!1)):1!==s||!(o>1)||e||t?1!==o||!(s>1)||e||t?(this.isHeaderCell(r.children.tail.children.head)&&(i.column=!0),this.isHeaderCell(r.children.head.children.tail)&&(i.row=!0)):(this.isHeaderCell(r.children.head.children.tail)&&(i.row=!0,i.column=!1),this.isHeaderCell(r.children.tail.children.head)&&(i.row=!1,i.column=!0)):(this.isHeaderCell(r.children.tail.children.head)&&(i.row=!1,i.column=!0),this.isHeaderCell(r.children.head.children.tail)&&(i.row=!0,i.column=!1))),i}isHeaderCell(e){return e.domNode.localName.toLowerCase()===C.nd.tagName.toLowerCase()}insertColumn(e){let t=this.quill.getSelection(),[n,r,i]=this.getTable(t);if(null==i)return;let o=i.getIndexAndOffset()[0];n.insertColumn(o,e),this.quill.update(S.Ay.sources.USER);let s=n.children.head.children.map(e=>e)[o+e];this.quill.setSelection(s.offset(this.quill.scroll),0,S.Ay.sources.SILENT)}insertColumnLeft(){this.insertColumn(0)}insertColumnRight(){this.insertColumn(1)}insertRow(e){let t=this.quill.getSelection(),[n,r,i]=this.getTable(t);if(null==i)return;let o=r.rowOffset()[0];n.insertRow(o,e),this.quill.update(S.Ay.sources.USER);let s=n.children.map(e=>e)[o+e].children.head;this.quill.setSelection(s.offset(this.quill.scroll),0,S.Ay.sources.SILENT)}insertRowAbove(){this.insertRow(0)}insertRowBelow(){this.insertRow(1)}insertColumns(e,t){let n=this.quill.getSelection(),[r,i]=this.getTable(n),o=r.getLastCell();if(null==o)return;let s=o.getIndexAndOffset()[0];for(let n=0;n<e;n++)r.insertColumn(s,t);this.quill.update(S.Ay.sources.USER);let a=i.rowOffset()[0];0===t&&(a+=1),this.quill.setSelection(n.index+a,n.length,S.Ay.sources.SILENT)}insertRows(e,t){let n=this.quill.getSelection(),[r]=this.getTable(n),i=r.getLastCell(),o=i.parent;if(null==i||null==o)return;let s=o.rowOffset()[0];for(let n=0;n<e;n++)r.insertRow(s,t);this.quill.update(S.Ay.sources.USER),1===t?this.quill.setSelection(n,S.Ay.sources.SILENT):this.quill.setSelection(n.index+o.children.length,n.length,S.Ay.sources.SILENT)}deleteColumns(e){let t=this.quill.getSelection(),[n,r,i]=this.getTable(t);if(null==i||null==r)return;let o=i.getIndexAndOffset()[0],s=r.children.length-1-e;for(let t=0;t<e;t++){let e=r.children.length-1;n.deleteColumn(e),this.quill.update(S.Ay.sources.USER)}if(s<o){let e=r.children.tail.getIndexAndOffset()[1];this.quill.setSelection(e,t.length,S.Ay.sources.SILENT)}this.quill.update(S.Ay.sources.USER)}deleteRows(e){let t=this.quill.getSelection(),[n,r,i]=this.getTable(t);if(null==i||null==r)return;let o=r.rowOffset()[0],s=i.getIndexAndOffset()[0],a=n.children.length-e-1;for(let t=0;t<e;t++)n.children.tail.remove(),this.quill.update(S.Ay.sources.USER);if(a<o){let e=n.children.tail.children.head;for(let t=0;t<s;t++)e=e.next;let r=e.getIndexAndOffset()[1];this.quill.setSelection(r,t.length,S.Ay.sources.SILENT)}this.quill.update(S.Ay.sources.USER)}insertTable(e,t,n,r){this.quill.history.cutoff();let i=this.quill.getSelection();if(null==i)return;let o=(0,C.fs)("table"),s=R.create(C.K3.blotName,o);for(let n=0;n<e;n++){let e=R.create(C.Hj.blotName,(0,C.fs)("row"));for(let n=0;n<t;n++){let t=R.create(C.nA.blotName,(0,C.fs)("cell")),n=R.create("block");n.appendChild(R.create("text","\n")),t.appendChild(n),e.appendChild(t)}s.appendChild(e)}s.updateHeaderCol(r),s.updateHeaderRow(n),this.insertBlot(i,s),s.parent.insertBefore(R.create(C.cg.blotName,o),s),this.quill.update(S.Ay.sources.USER);let a=this.quill.history.stack.undo.pop();this.quill.history.stack.undo.forEach(e=>{var t,n,r;let i=null!==(t=a.undo.ops[0].retain)&&void 0!==t?t:0,o=null!==(r=null!==(n=a.undo.ops[0].delete)&&void 0!==n?n:a.undo.ops[1].delete)&&void 0!==r?r:0;e.undo.ops.forEach(e=>{e.retain&&e.retain>=i&&(e.retain+=o)})}),i.index+=1,this.quill.setSelection(i)}editTable(e,t){let n=this.getTableData();if(null==this.quill.getSelection())return;let r=t-n.columnCount,i=e-n.rowCount;i>0?this.insertRows(i,1):i<0&&this.deleteRows(Math.abs(i)),r>0?this.insertColumns(r,1):r<0&&this.deleteColumns(Math.abs(r)),this.updateNullSelection()}insertBlot(e,t){let n=this.quill.getLeaf(e.index)[0],r=n.statics.blotName===O.A.blotName,i=null;for(;null!=n&&!(n instanceof y.A||n instanceof f.A);)i=n,n=n.parent;if(r){let e=R.create("text","\n");i.next?(n.insertBefore(e,i.next),n.insertBefore(t,i.next)):(n.appendChild(t),n.appendChild(e,i));return}n.insertBefore(t,i)}listenBalanceTables(){this.quill.on(S.Ay.events.SCROLL_OPTIMIZE,e=>{let t=!0;for(let n=0;n<e.length&&t;n++)["TH","TD","TR","TABLE"].includes(e[n].target.tagName)&&(this.balanceTables(),t=!1)})}updateHeaderRow(e){let t=this.getTable()[0],n=this.quill.getSelection();null!==t&&(t.updateHeaderRow(e),this.quill.setSelection(n))}updateHeaderCol(e){let t=this.getTable()[0],n=this.quill.getSelection();null!==t&&(t.updateHeaderCol(e),this.quill.setSelection(n))}updateNullSelection(){null===this.quill.getSelection()&&this.quill.setSelection(this.quill.selection.savedRange)}deltaHasTable(e){return e.ops.some(e=>e.attributes&&(e.attributes["table-container"]||e.attributes["table-cell"]))}deltaHasDangerousContent(e){let t=!1;for(let n=0;n<e.ops.length&&!t;n++){let r=e.ops[n];r.attributes&&(t=["header","src","list"].some(e=>Object.keys(r.attributes).includes(e))),!r.insert||t||(t=["inlineImage"].some(e=>Object.keys(r.insert).includes(e)))||(t=r.insert.includes("\n","cJ","\n","\f","\r"))}return t}}var D=n(540473),N=n(434369),P=n(957977),k=n(142873),w=n(361562),U=n(780195),M=/*#__PURE__*/n.n(U);let B=new(M()).Attributor.Style("custom-indent","padding-left",{scope:M().Scope.BLOCK}),G=new(M()).Attributor.Style("custom-indent-rtl","padding-right",{scope:M().Scope.BLOCK});var x=n(23988),q=n(730539),F=n(209919),V=n(715640),j=n(788778),K=n(685190),H=n(921266),Q=n(93571),Y=n(948960),$=n(501271),J=n(672089),z=n(745341);class W extends z.A{constructor(e,t){super(e,t),e.style.color=e.color;let n=this.replaceWith(new z.A(z.A.create()));return n.children.forEach(e=>{var t,r;null===(t=e.attributes)||void 0===t||t.copy(n),null===(r=e.unwrap)||void 0===r||r.call(e)}),this.remove(),n}}W.blotName="customColor",W.tagName="FONT";var Z=n(942867),X=n(165113);class ee extends z.A{static value(e){return(0,X.gu)(e,this.blotAttributes)}static formats(e){return(0,X.gu)(e,this.blotAttributes,!0)}format(e,t){return e===this.statics.blotName&&t?(0,X.Wp)(this.domNode,this.statics.blotAttributes,t):super.format(e,t)}}ee.blotName="inline",ee.tagName="span";var et=n(32219);class en extends et.zo{static value(e){return(0,X.gu)(e,this.blotAttributes)}static formats(e){return(0,X.gu)(e,this.blotAttributes,!0)}detach(){this.domNode.unmountComponent&&this.domNode.unmountComponent(),super.detach()}format(e,t){return e===this.statics.blotName&&t?(0,X.Wp)(this.domNode,this.statics.blotAttributes,t):super.format(e,t)}}en.blotName="embed",en.tagName="div";var er=n(28003);class ei extends er.A{static value(e){return(0,X.gu)(e,this.blotAttributes)}static formats(e){return(0,X.gu)(e,this.blotAttributes,!0)}detach(){this.domNode.unmountComponent&&this.domNode.unmountComponent(),super.detach()}format(e,t){return e===this.statics.blotName&&t?(0,X.Wp)(this.domNode,this.statics.blotAttributes,t):super.format(e,t)}}ei.blotName="embedInline",ei.tagName="span";var eo=n(452410),es=n(734506);class ea extends b.A{replaceWith(e){this.domNode.textContent=this.domNode.textContent,this.attach(),super.replaceWith(e)}highlight(e){let t=this.domNode.textContent;this.cachedText!==t&&((t.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=e(t),this.domNode.normalize(),this.attach()),this.cachedText=t)}static formats(){return!0}delta(){let e=this.domNode.textContent;if(e.endsWith("\n")&&(e=e.slice(0,-1)),(0,es.b)(this.parent)){let t=(0,es.W)(this.parent);return e.split("\n").reduce((e,n)=>e.insert(n).insert("\n",t),new(E()))}return e.split("\n").reduce((e,t)=>e.insert(t).insert("\n",this.formats()),new(E()))}format(e,t){if(e===this.statics.blotName&&t)return;let[n]=this.descendant(O.A,this.length()-1);null!=n&&n.deleteAt(n.length()-1,1),this.descendants(O.A).forEach(e=>{e.parent instanceof z.A&&e.parent.moveChildren(e.parent.parent,e.parent)}),super.format(e,t)}}ea.className="ql-syntax";let el=new(M()).Attributor.Class("token","hljs",{scope:M().Scope.INLINE});var eu=class extends eo.Ay{static register(){S.Ay.register(el,!0),S.Ay.register(ea,!0)}highlight(){if(this.quill.selection.composing)return;this.quill.update(S.Ay.sources.USER);let e=this.quill.getSelection();this.quill.scroll.descendants(b.A).forEach(e=>{e.highlight(this.options.highlight)}),this.quill.update(S.Ay.sources.SILENT),null!=e&&this.quill.hasFocus()&&this.quill.setSelection(e,S.Ay.sources.SILENT)}};let ed="bbml-editor.plugins";var ec=n(107870);let ep={inline:ee,embed:en,embedInline:ei},em={"formats/header":D.A,"formats/font":N.Ay,"formats/size":P.Ay,"formats/color":k.A,"formats/list":x.B8,"formats/list/item":x.Tj,"formats/align":q.Ay,"formats/bold":F.A,"formats/italic":V.A,"formats/underline":j.A,"formats/code-block":J.A,"formats/strike":K.A,"formats/superscript":H.A,"formats/subscript":Q.A,"formats/indent":m.b,"formats/lineheight":Y.Ay,"formats/direction":$.Ay,"formats/customcolor":W,"modules/clipboard":A,"modules/history":_,"modules/table":L,"modules/syntax":eu},eg=e=>{let t="formats/";Object.keys(e).forEach(n=>{if(n.startsWith(t)){let r=n.replace(t,"");Z.A.registerConverter(r,e[n])}})},eE=(e,t,n)=>{let r={},i={},o={},s=[];e.forEach(e=>{if(e.formatter){let n=e.formatter.blotName||e.pluginId;i[n]=class extends ep[e.formatter.type]{constructor(t,n){super(t,n),e.formatter.onBlotInit&&e.formatter.onBlotInit(t,this)}},i[n].create=n=>{let r=document.createElement(e.formatter.tagName);return e.formatter.renderDomNode(r,e.formatter.attributes,n,t)},i[n].blotAttributes=e.formatter.attributes,i[n].blotName=n,i[n].className=e.formatter.className||n,i[n].tagName=e.formatter.tagName,i[n].split=e.split,i[n].toBbML=e.toBbML,i[n].toBbMLAsync=e.toBbMLAsync,r[`formats/${n}`]=i[n]}if(e.module){let t=e.pluginId;o[`modules/${t}`]=e.module}if("function"==typeof e.onLoad)try{let t=e.onLoad(n);"function"==typeof t&&s.push(t)}catch(e){ec.mO.error(ed,e)}});let a={...em,...r,...o};return c.A.register(a,!0),eg(a),()=>{e.forEach(e=>{if("function"==typeof e.onUnload)try{e.onUnload()}catch(e){ec.mO.error(ed,e)}}),s.forEach(e=>{try{e()}catch(e){ec.mO.error(ed,e)}})}},eh=c.A.import("parchment");eh.register(w.G,B,G);var ey=c.A,ef=n(111896),eb=n(135770),eI=n(733496),eA=n(120002),ev=n(70284),eS=n(969273),e_=n(203559),eT=n(383928),eO=n(298222),eC=n(542511),eR=n(842021),eL=n(378969),eD=n(287711),eN=n(68176),eP=n(198170);ef.A.registerLanguage("c",eb.A),ef.A.registerLanguage("csharp",eI.A),ef.A.registerLanguage("cpp",eA.A),ef.A.registerLanguage("css",ev.A),ef.A.registerLanguage("go",eS.A),ef.A.registerLanguage("java",e_.A),ef.A.registerLanguage("javascript",eT.A),ef.A.registerLanguage("kotlin",eO.A),ef.A.registerLanguage("php",eC.A),ef.A.registerLanguage("python",eR.A),ef.A.registerLanguage("r",eL.A),ef.A.registerLanguage("ruby",eD.A),ef.A.registerLanguage("swift",eN.A),ef.A.registerLanguage("xml",eP.A);let ek=["td","th","tr","table","tablebr"];var ew={keyboard:{bindings:{tab:{key:9,prefix:/\t$/,handler:()=>{}},"remove tab":{key:9,shiftKey:!0,prefix:/\t$/,handler:()=>{}},"list autofill":{prefix:/^\s*?(\d+\.|-|\*)$/},contextBackspace:{key:"Backspace",shiftKey:null,context:{format:ek},handler:(e,t)=>{var n;if(!Array.isArray(t.format.td)&&(t.offset>0||!t.collapsed))return!0;let r=document.getSelection().baseNode;for(;!(null===(n=r.parentNode.classList)||void 0===n?void 0:n.contains("ql-editor"))&&![C.nd.tagName.toLowerCase(),C.nA.tagName.toLowerCase()].includes(r.parentNode.nodeName.toLowerCase());)r=r.parentNode;if(r.previousSibling&&"TABLE"===r.previousSibling.nodeName){document.getSelection().removeAllRanges();let e=document.createRange();return e.setStartBefore(r.previousSibling),e.setEnd(r.firstChild,0),document.getSelection().addRange(e),!1}return!!r.previousSibling||Array.isArray(t.format.td)&&(0===e.index||r.previousSibling.previousSibling)}},contextDelete:{key:"Delete",context:{format:ek},handler:(e,t)=>{if(!Array.isArray(t.format.td)&&(t.suffix.length>0||!t.collapsed))return!0;let n=document.getSelection().baseNode;if("#text"===n.nodeName&&(n=n.parentNode),n.nextSibling&&"TABLE"===n.nextSibling.nodeName){document.getSelection().removeAllRanges();let e=document.createRange();return e.setStartAfter(n.lastChild),e.setEnd(n.nextSibling.nextSibling.firstChild,0),document.getSelection().addRange(e),!1}return!!n.nextSibling}},shiftDelete:{key:"Delete",shiftKey:"true",context:{format:ek},handler:()=>!1},undoTables:{key:90,shortKey:"true",handler:(e,t)=>!t.format.table}}},history:{delay:1e3,maxStack:50,userOnly:!1},table:!0,syntax:{highlight:e=>ef.A.highlightAuto(e).value}};let eU=["\xb7","o","\xa7","v","\xd8","\xfc"],eM=(e,t)=>e.compose(new(E())().retain(e.length(),t)),eB=()=>Math.random().toString(36).slice(2,6),eG=(e,t,n)=>"string"!=typeof t?Object.keys(t).reduce((e,n)=>eG(e,n,t[n]),e):e.reduce((e,r)=>{if(r.attributes&&r.attributes[t])return e.push(r);if(r.attributes){let i=n?{[t]:n}:{};return e.insert(r.insert,{...i,...r.attributes})}let i=n&&("table-cell"===t||"table-head"===t)?{[t]:n}:{};return e.insert(r.insert,{...i,...r.attributes})},new(E())),ex={selector:Node.ELEMENT_NODE,func:(e,t)=>{let n=[];return t.ops.forEach(e=>{e.insert&&"string"==typeof e.insert&&n.push({insert:e.insert})}),t.ops=n,t}},eq=e=>(t,n)=>{let r=n&&n.ops&&n.ops[n.ops.length-1],i=r&&"string"==typeof r.insert&&"\n"===r.insert.slice(-1);return 0!==n.ops.length&&i||n.insert("\n"),eG(n,`table-${e}`,`${e}-${eB()}`)},eF=e=>{var t;let n=null;for(let r=e.length-1;r>=0;r--){let i=e[r];i.attributes&&"table-container"in i.attributes&&(n===i.attributes["table-head"]||n===i.attributes["table-cell"]?e.splice(r,1):(n=null!==(t=i.attributes["table-head"])&&void 0!==t?t:i.attributes["table-cell"],e.splice(r+1,0,{insert:" ",attributes:{color:"#ffffff",dummy:"true"}})))}return e},eV=e=>{let t=["table-container","tablebr","dummy"];return e.ops=e.ops.filter(e=>!e.attributes||t.reduce((t,n)=>t&&!(n in e.attributes),!0)),e},ej=[{selector:"li",func:(e,t)=>t.ops.length?eM(t):new(E())([{insert:"\n"}])},{selector:"h1",func:(e,t)=>eM(t,{header:4})},{selector:"h2",func:(e,t)=>eM(t,{header:4})},{selector:"h3",func:(e,t)=>eM(t,{header:4})},{selector:"del",func:(e,t)=>eM(t,{strike:!0})},{selector:"pre",func:(e,t)=>eM(t,{underline:!1,"code-block":!0})},{selector:"strike",func:(e,t)=>eM(t,{strike:!0})},{selector:'span[style*="line-through"]',func:(e,t)=>eM(t,{strike:!0})},{selector:'span[style*="underline"]',func:(e,t)=>eM(t,{underline:!0})},{selector:'span[style*="color: rgba(0, 0, 0, 0)"]',func:(e,t)=>eM(t,{color:""})},{selector:"table",func:(e,t)=>{let n=`table-${eB()}`,r=eG(eV(t),"table-container",n),i=" ";for(let e=0;e<r.ops.length;e++){let t=r.ops[e];if(t.attributes&&"table-container"in t.attributes){let n="\n"!==t.insert.length?t.insert:" \n";i+=" ",t.insert=i+"\n";let o=["table-container","table-row","table-cell","table-head"],s=Object.keys(t.attributes).filter(e=>!o.includes(e)).reduce((e,n)=>(e[n]=t.attributes[n],e),{});r.ops.splice(e,0,{insert:n,attributes:s}),e+=1,t.attributes=Object.keys(t.attributes).filter(e=>o.includes(e)).reduce((e,n)=>(e[n]=t.attributes[n],e),{})}}return r.ops.unshift({insert:"\n",attributes:{tablebr:n}}),r.ops=eF(r.ops),r}},{selector:"tr",func:(e,t)=>eG(t,"table-row",`row-${eB()}`)},{selector:"th",func:eq("head")},{selector:"td",func:eq("cell")},{selector:"p.MsoTitle",func:(e,t)=>eM(t,{header:4})},{selector:"p[class^=MsoListParagraph]",func:e=>{let t=eU.includes(e.textContent.charAt(0)),n=e.textContent.trim(),r=t?n.indexOf(e.textContent.charAt(0))+1:n.indexOf(".")+1;n=n.substring(r,n.length).replace(/\n/g," ").replace(/\u00a0/g," ").trim();let i=0,o=e.getAttribute("style");if(o){let e=o.match(/level(\d+)/);e&&(i=Number(e[1])-1)}let s=e.querySelector("a");if(s){let e=s.getAttribute("href"),r=s.textContent;return new(E())([{insert:n,attributes:{link:{href:e,text:r}}},{insert:"\n",attributes:{list:t?"bullet":"ordered",indent:i}}])}return new(E())().insert(n+"\n",{list:t?"bullet":"ordered",indent:i})}}],eK=e=>{let t=e.filter(e=>e&&e.formatter&&"embed"===e.formatter.type).map(e=>e.matchers),n=e=>t.length&&e.parentNode&&Array.from(e.parentNode.querySelectorAll(t)).indexOf(e)>-1;return(e,t)=>{let r=t&&t.ops&&t.ops[t.ops.length-1];return!(r&&"string"==typeof r.insert&&"\n"===r.insert.slice(-1))&&e.nextSibling&&n(e.nextSibling)&&t.insert("\n"),t}};var eH=n(85303);let eQ={EDITOR:"editor",TOOLBAR:"toolbar"},eY={CTRL:"ctrlKey",ALT:"altKey",SHIFT:"shiftKey",META:"metaKey"};class e${static hasModifierKey(e){return Object.keys(eY).some(t=>e[eY[t]])}static hasRegularKey(e){return!!e.keyCode}constructor(){this.keyDownEventScope=eQ.EDITOR,this.keyDownHandlers=[],this.enableEditorScope=this.enableEditorScope.bind(this),this.enableToolbarScope=this.enableToolbarScope.bind(this),this.inToolbarScope=this.inToolbarScope.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.addKeyDownHandler=this.addKeyDownHandler.bind(this)}enableEditorScope(){this.keyDownEventScope=eQ.EDITOR}enableToolbarScope(){this.keyDownEventScope=eQ.TOOLBAR}inToolbarScope(){return this.keyDownEventScope===eQ.TOOLBAR}handleKeyDown(e){let t=!1,n=this.constructor.hasModifierKey(e);return this.keyDownHandlers.forEach(r=>{r.scope!==this.keyDownEventScope||r.keyCode!==e.keyCode||(r.modifierName||n)&&!e[r.modifierName]||(r.callback(e),t=!0)}),t}addKeyDownHandler(e,t,n,r){return this.keyDownHandlers.push({keyCode:e,modifierName:t,callback:n,scope:r}),()=>{this.keyDownHandlers=this.keyDownHandlers.filter(i=>!(i.keyCode===e&&i.modifierName===t&&i.callback===n&&i.scope===r))}}}var eJ=n(171994);let ez=["insertLocalFile","math","image","video"];var eW=(e,t,n)=>{let r=[].concat(...e).reduce((e,t)=>e.some(e=>e.pluginId===t.pluginId)?e:e.concat(t),[]);return!function(e){let t=ez.map(t=>e.findIndex(e=>e.pluginId===t));if(t.length>0){for(let n=0;n<ez.length;n++)if(-1!==t[n]&&ez[n]!==e[n].pluginId){let r=e[n];e[n]=e[t[n]],e[t[n]]=r}}}(r),r.forEach(e=>{e.fileDropHandler&&n.registerDropHandler(e.fileDropHandler)}),r.filter(e=>e.buttonConfig&&e.buttonConfig.checkAvailabilityAsPromise).forEach(e=>{let n=e.buttonConfig;delete e.buttonConfig,n.checkAvailabilityAsPromise().then(r=>{r&&(e.buttonConfig=n,t())})}),r},eZ=(e,t)=>{let n={...e};return n.attachment&&t.insert&&t.insert["embedded-app"]&&delete n.attachment,e["embedded-app"]&&t.insert&&t.insert.attachment&&delete n["embedded-app"],n},eX=n(538642),e0=function(e,t,n,r){let i=[],o=t;function s(e,t){return n(!0),(0,eX.A)(e,t,o)}return{setLocaleProps:e=>{o=e},onFileDrop:t=>{if(t.preventDefault(),0===i.length)return;let n=[...t.dataTransfer.files];i.forEach(t=>{t(n,e,s,o.locale,r)}),t.dataTransfer.files?t.dataTransfer.files.clear():t.dataTransfer.clearData()},onFileDragOver:e=>{e.preventDefault()},registerDropHandler:e=>{"function"==typeof e&&0>i.findIndex(t=>t===e)&&i.push(e)},hasDropHandlers:()=>i.length>0}},e1=n(306978),e5=n(499921);let e8=o.shape({service:e5.Pc,indexMap:o.shape({get:o.func,has:o.func,set:o.func})}),e4={service:null,indexMap:new Map},e2="is-disabled";function e3(e,t){t&&!e.contains(e2)?e.add(e2):!t&&e.contains(e2)&&e.remove(e2)}let e6="is-read-only";function e9(e,t){t&&!e.contains(e6)?e.add(e6):!t&&e.contains(e6)&&e.remove(e6)}let e7="is-active";function te(e,t){t&&!e.contains(e7)?e.add(e7):!t&&e.contains(e7)&&e.remove(e7)}let tt="has-focus";function tn(e,t){t&&!e.contains(tt)?e.add(tt):!t&&e.contains(tt)&&e.remove(tt)}let tr="has-error";function ti(e,t){t&&!e.contains(tr)?e.add(tr):!t&&e.contains(tr)&&e.remove(tr)}let to="has-keyboard-focus";function ts(e,t){t&&!e.contains(to)?e.add(to):!t&&e.contains(to)&&e.remove(to)}var ta=n(165217),tl=n(777730),tu=function e(t,n,i,o){let s=function(e,t,n){let i=[];return r.Children.forEach(e,(e,t)=>{(r.Component.isPrototypeOf(e.type)||"function"==typeof e.type&&null!==e.type({...e.props,index:t,parentIndex:void 0})||!e.props.isHideable||e.props.isActive)&&i.push(e)}),i.length?i:null}(t);return r.Children.map(s,(t,s)=>{s+=o;let a={...n};return a.children=e(t.props.children,n,s,0),r.cloneElement(t,{...t.props,...a,index:s,parentIndex:i})})},td=n(689133),tc=e=>{let t;let n=e.filter(e=>!!t||!e.props.isHideable||(e.props.pluginButtons.some(n=>!!(td.Vp.some(t=>e.id===t.id&&n.id===t.id)&&n.isActive&&n.isActive(e.props.editorFormat))&&(t=e,!0)),!1));return t&&n.push(t),n};class tp{constructor(e,t,n,r,i){this.currentMenuIndex=-1,this.currentSubmenuIndex=-1,this.isSubmenuToolbar=!1,this.isSubToolbarOpen=!1,this.hasAdditionalToolbar=!1,this.isAdditionalToolbarVisible=!1,this.hasDisabledButtons=!1,this.toolbarButtons=e,this.additionalToolbarButtons=[],this.addKeyDownHandler=t,this.onClose=n,this.onChange=r,this.onResetSubmenu=i,this.events=[],this.resetAllMenus=this.resetAllMenus.bind(this),this.selectFirstButton=this.selectFirstButton.bind(this),this.updateToolbarButtons=this.updateToolbarButtons.bind(this),this.getMenuButtonCount=this.getMenuButtonCount.bind(this),this.getSubmenuButtonCount=this.getSubmenuButtonCount.bind(this),this.getIndexes=this.getIndexes.bind(this),this.setIndexes=this.setIndexes.bind(this),this.registerEventListeners=this.registerEventListeners.bind(this),this.destroy=this.destroy.bind(this),this.moveLeft=this.moveLeft.bind(this),this.moveRight=this.moveRight.bind(this),this.moveUp=this.moveUp.bind(this),this.moveDown=this.moveDown.bind(this),this.openSubmenu=this.openSubmenu.bind(this),this.forceOpenSubmenu=this.forceOpenSubmenu.bind(this),this.setSubmenuToolbar=this.setSubmenuToolbar.bind(this),this.setSubToolbarOpen=this.setSubToolbarOpen.bind(this),this.closeAllMenus=this.closeAllMenus.bind(this),this.closeAndResetAllMenus=this.closeAndResetAllMenus.bind(this),this.registerEventListeners()}updateToolbarButtons(e,t){if(t){this.additionalToolbarButtons=e;return}this.toolbarButtons=e,this.hasDisabledButtons=this.toolbarButtons.some(e=>{var t;return null===(t=null==e?void 0:e.props)||void 0===t?void 0:t.isButtonDisabled})}setOnAdditionalChange(e){this.onAdditionalChange=e}getMenuButtonCount(){return this.toolbarButtons?this.additionalToolbarButtons&&this.isAdditionalToolbarVisible?this.toolbarButtons.length+this.additionalToolbarButtons.length:this.toolbarButtons.length:0}getSubmenuButtonCount(e){var t,n;let r=this.toolbarButtons.length,i=r+this.additionalToolbarButtons.length;if(e>-1){if(e<r&&(null===(t=this.toolbarButtons[e])||void 0===t?void 0:t.props.children))return this.toolbarButtons[e].props.children.length;if(e>=r&&e<i&&(null===(n=this.additionalToolbarButtons[e])||void 0===n?void 0:n.props.children))return this.additionalToolbarButtons[e].props.children.length}return 0}getIndexes(){return{currentMenuIndex:this.currentMenuIndex,currentSubmenuIndex:this.currentSubmenuIndex}}setIndexes(e,t){this.currentMenuIndex=e,this.currentSubmenuIndex=t,this.onChange&&this.onChange(this.getIndexes()),this.onAdditionalChange&&this.onAdditionalChange(this.getIndexes())}resetAllMenus(...e){var t;this.collapseAllMenus(),null===(t=this.onClose)||void 0===t||t.call(this,...e)}collapseAllMenus(){this.setIndexes(-1,-1)}selectFirstButton(){var e;this.isAdditionalToolbarVisible&&this.isSubToolbarOpen&&this.onResetSubmenu();let t=0;this.hasDisabledButtons&&(null===(e=this.toolbarButtons[0])||void 0===e?void 0:e.props.isButtonDisabled)&&(t=this.getNextAvailableItem(0,this.getMenuButtonCount())),this.setIndexes(t,-1)}registerEventListeners(){let{addKeyDownHandler:e}=this,{TOOLBAR:t}=eQ,{SHIFT:n}=eY,r=(e,t="any")=>n=>{n.preventDefault(),n.stopPropagation();let{currentMenuIndex:r,currentSubmenuIndex:i}=this,o=this.getSubmenuButtonCount(r);return("any"===t||"main"===t&&-1===i||"main-no-children"===t&&-1===i&&0===o||"sub"===t&&-1!==i)&&e(n),!1};this.events.push(e(l().LEFT,null,r(this.moveLeft,"main"),t)),this.events.push(e(l().RIGHT,null,r(this.moveRight,"main"),t)),this.events.push(e(l().TAB,n,r(this.closeAndResetAllMenus,"main"),t)),this.events.push(e(l().TAB,n,r(this.closeAndResetAllMenus,"sub"),t)),this.events.push(e(l().TAB,null,r(this.closeAllMenus,"main"),t)),this.events.push(e(l().TAB,null,r(this.closeAndResetAllMenus,"sub"),t)),this.events.push(e(l().UP,null,r(this.moveUp,"sub"),t)),this.events.push(e(l().DOWN,null,r(this.moveDown,"sub"),t)),this.events.push(e(l().ESC,null,r(this.closeAllMenus),t))}destroy(){this.events.forEach(e=>e())}getPreviousAvailableItem(e,t){var n,r;for(let t=e-1;t>=0;t--)if(!(null===(n=this.toolbarButtons[t])||void 0===n?void 0:n.props.isButtonDisabled))return t;for(let n=t-1;n>e;n--)if(!(null===(r=this.toolbarButtons[n])||void 0===r?void 0:r.props.isButtonDisabled))return n;return e}moveLeft(){let{currentMenuIndex:e}=this,t=this.getMenuButtonCount();e=this.hasDisabledButtons?this.getPreviousAvailableItem(e,t):e-1<=-1?t-1:e-1,this.setIndexes(e,-1)}getNextAvailableItem(e,t){var n,r;for(let r=e+1;r<t;r++)if(!(null===(n=this.toolbarButtons[r])||void 0===n?void 0:n.props.isButtonDisabled))return r;for(let t=0;t<e;t++)if(!(null===(r=this.toolbarButtons[t])||void 0===r?void 0:r.props.isButtonDisabled))return t;return e}moveRight(){let{currentMenuIndex:e}=this,t=this.getMenuButtonCount();e=this.hasDisabledButtons?this.getNextAvailableItem(e,t):e+1===t?0:e+1,this.setIndexes(e,-1)}moveUp(){let{currentMenuIndex:e}=this,{currentSubmenuIndex:t}=this,n=this.getSubmenuButtonCount(e);n&&(t=t-1<=-1?n-1:t-1),this.setIndexes(e,t)}moveDown(){let{currentMenuIndex:e}=this,{currentSubmenuIndex:t}=this,n=this.getSubmenuButtonCount(e);n&&(t=t+1===n?0:t+1),this.setIndexes(e,t)}openSubmenu(e){let{currentMenuIndex:t,currentSubmenuIndex:n}=this,r=this.getSubmenuButtonCount(e);r&&t!==e&&-1!==n||r&&-1===n?this.setIndexes(e,0):this.closeAllMenus()}forceOpenSubmenu(e,t){this.setIndexes(e,t)}setAdditionalToolbar(e){this.hasAdditionalToolbar=e}setAdditionalToolbarVisible(e){this.isAdditionalToolbarVisible=e}setSubmenuToolbar(e){this.isSubmenuToolbar=e}setSubToolbarOpen(e){this.isSubToolbarOpen=e}closeAllMenus(){let{currentMenuIndex:e,currentSubmenuIndex:t,isSubmenuToolbar:n,isSubToolbarOpen:r,isAdditionalToolbarVisible:i}=this;if(-1===t){if(n){if(!this.isSubToolbarOpen&&i){this.resetAllMenus(!0);return}this.onResetSubmenu&&this.onResetSubmenu();return}if(!r){this.resetAllMenus(!0);return}}this.setIndexes(e,-1)}closeAndResetAllMenus(){this.resetAllMenus(!0)}}class tm extends r.Component{constructor(e){if(super(e),this.onNavigatorChange=this.onNavigatorChange.bind(this),e.sharedNavigator){this.navigator=e.sharedNavigator;let t=e.children.filter(e=>!e.props.isHideable);this.navigator.updateToolbarButtons(t,this.props.useSharedNavigator),this.navigator.setOnAdditionalChange(this.onNavigatorChange)}else this.navigator=new tp(e.children,e.addKeyDownHandler,e.toolbarActionComplete,this.onNavigatorChange,e.resetMenu),e.shareNavigator&&e.shareNavigator(this.navigator);this.state=this.navigator.getIndexes()}componentDidMount(){this.toolbarRoot.addEventListener("mousedown",eJ.jo),this.props.isSubmenuToolbar&&(this.props.hasKeyboardFocus||this.props.subToolbarFocusFirstButton)&&this.navigator.selectFirstButton()}UNSAFE_componentWillReceiveProps(e){let{currentMenuIndex:t}=this.state,{hasKeyboardFocus:n,editorHasTableSelected:r}=e,{useSharedNavigator:i}=this.props;this.navigator.setSubmenuToolbar(this.props.isSubmenuToolbar),this.navigator.setSubToolbarOpen(this.props.isSubToolbarOpen),this.navigator.setAdditionalToolbar(i),this.navigator.setAdditionalToolbarVisible(r),this.props.hasKeyboardFocus!==n&&n&&!i?this.navigator.selectFirstButton():this.props.hasKeyboardFocus===n||n?!1===this.props.hasKeyboardFocus&&-1!==t&&this.navigator.collapseAllMenus():this.navigator.resetAllMenus()}componentWillUnmount(){if(this.toolbarRoot.removeEventListener("mousedown",eJ.jo),this.props.isSubmenuToolbar&&this.toolbarRoot.contains(document.activeElement)&&!this.props.hasKeyboardFocus)try{this.props.toolbarActionComplete(!0)}catch(e){}this.props.useSharedNavigator||this.navigator.destroy()}onNavigatorChange(e){this.toolbarRoot&&this.setState(e)}render(){let e={toolbarActionComplete:this.navigator.resetAllMenus,openSubmenu:this.navigator.openSubmenu,forceOpenSubmenu:this.navigator.forceOpenSubmenu,closeAllMenus:this.navigator.closeAllMenus},t=0,n=[];this.props.useSharedNavigator?(n=this.props.children.filter(e=>!e.props.isHideable),t=this.navigator.getMenuButtonCount()-n.length):n=this.props.children.filter(e=>!!e);let i=tu(n,{...{...this.props,...this.state,...e}},null,t);this.navigator.updateToolbarButtons(tc(i),this.props.useSharedNavigator);let{toolbarId:o,editorId:s,t:a}=this.props,l=(0,u.A)({"bb-editor-toolbar no-select":!0,"is-disabled":this.props.isDisabled,"is-hidden":this.props.isHidden,"bb-editor-submenu-toolbar":this.props.isSubmenuToolbar});return r.createElement("div",{className:l,role:"toolbar","aria-label":a(`bbmlEditor.toolbar.${o}.axAriaText`),"aria-controls":s,ref:e=>{this.toolbarRoot=e}},i)}}tm.propTypes={children:s().array,addKeyDownHandler:s().func.isRequired,editorId:s().string,toolbarId:s().string,toolbarActionComplete:s().func.isRequired,hasKeyboardFocus:s().bool,isDisabled:s().bool,isRtl:s().bool,isSubmenuToolbar:s().bool,isSubToolbarOpen:s().bool,rootContentId:s().string,useSharedNavigator:s().bool,onModalOpen:s().func,subToolbarFocusFirstButton:s().bool},tm.defaultProps={children:null,editorId:null,toolbarId:"defaultToolbar",hasKeyboardFocus:!1,isDisabled:!1,isRtl:!1,isSubmenuToolbar:!1,isSubToolbarOpen:!1,rootContentId:null,useSharedNavigator:!1,subToolbarFocusFirstButton:!0};var tg=(0,ta.T)((0,tl.withAnalytics)(tm)),tE=n(304943),th=n(374980);let ty=()=>r.createElement("div",{className:"bb-editor-toolbar-button-separator"});var tf=n(86507),tb=n(440629);class tI extends r.Component{static newState(e){let t=e.isActive&&e.isActive(e.editorFormat),n=e.isButtonDisabled,r=!n&&e.hasKeyboardFocus&&-1===e.currentSubmenuIndex&&e.currentMenuIndex===e.index||e.hasKeyboardFocus&&e.currentSubmenuIndex>-1&&e.currentMenuIndex===e.parentIndex&&e.currentSubmenuIndex===e.index;return{isActive:t,isDisabled:n,hasKeyboardFocus:r,isSubmenuOpen:e.children&&e.currentMenuIndex===e.index&&e.currentSubmenuIndex>-1}}constructor(e){super(e),this.state=this.constructor.newState(e),this.focusOnCurrentButton=this.focusOnCurrentButton.bind(this),this.triggerAction=this.triggerAction.bind(this),this.containerClasses=this.containerClasses.bind(this),this.buttonClasses=this.buttonClasses.bind(this),this.buttonIconClasses=this.buttonIconClasses.bind(this),this.buttonNode=null,this.state.submenuStyles={}}componentDidMount(){this.focusOnCurrentButton(this.props)}UNSAFE_componentWillReceiveProps(e){let t=this.constructor.newState(e);this.setState(t,()=>this.focusOnCurrentButton(e))}componentDidUpdate(){this.adjustSubmenuPosition()}adjustSubmenuPosition(){if(this.containerRef){let e=this.containerRef.getElementsByClassName("bb-editor-toolbar-submenu")[0];if(!e||this.adjustingMenu)return;let t=this.containerRef.getBoundingClientRect(),n=this.props.getEditorRect(),r=e.getBoundingClientRect(),i=t.bottom+r.height,o=window.innerHeight||window.screen.height||document.body.offsetHeight,s=t.top+window.scrollY-r.height>=0,a={};n&&(r.left<n.left?a={right:r.left-n.left}:r.right>n.right&&(a={left:n.right-r.right})),i>o&&r.top>=0&&s?(this.adjustingMenu=!0,this.setState({submenuStyles:{...a,top:"auto"}},()=>{this.adjustingMenu=!1})):Object.keys(a).length>0&&(this.adjustingMenu=!0,this.setState({submenuStyles:a},()=>{this.adjustingMenu=!1}))}}focusOnCurrentButton(e){(e.currentMenuIndex===e.index&&-1===e.currentSubmenuIndex||e.currentMenuIndex===e.parentIndex&&e.currentSubmenuIndex===e.index)&&this.buttonNode&&this.buttonNode.focus()}triggerAction(e){if(e.preventDefault(),e.stopPropagation(),this.props.isDisabled||this.state.isDisabled||!this.props.onClick)this.props.isDisabled||this.state.isDisabled||this.setState({submenuStyles:{display:"relative"}},()=>{this.props.setEditorFocusStateToolbar(!1),this.props.openSubmenu(this.props.parentIndex||this.props.index)});else{let{buttonNode:e}=this,{isActive:t}=this.state,{editorFormat:n,editorLastContent:r,editorLastRawSelection:i,currentLocale:o,localize:s,isRtl:a}=this.props;this.props.isSubmenu&&this.props.forceOpenSubmenu(this.props.index,0);let l=this.props.bbEditorId;this.props.onClick({applyChange:(e,t)=>{this.props.applyChange(e,t),this.props.toolbarActionComplete(!e||this.props.hasKeyboardFocus)},quillModuleAction:e=>this.props.quillModuleAction(e),closeAllMenus:()=>this.props.closeAllMenus(),useSharedNavigator:!0,editorFormat:n,editorLastContent:r,editorLastRawSelection:i,isActive:t,locale:o,preventBlur:()=>{this.props.setEditorFocusStateToolbar(!0)},showModal:(e,t)=>(this.props.setEditorFocusStateToolbar(!0),(0,eX.A)(e,t,s.getLocalePropsForClone())),buttonNode:e,isRtl:a,bbEditorId:l,rootContentId:this.props.rootContentId,onModalOpen:this.props.onModalOpen})}return!1}containerClasses(){return(0,u.A)({"bb-editor-toolbar-button-container":!0,"bb-editor-toolbar-dropdown-container":this.state.isSubmenuOpen})}buttonClasses(){return(0,u.A)({"bb-editor-toolbar-button":!0,"bb-editor-toolbar-button--left-separator":this.props.leftSeparator,"bb-editor-toolbar-button--double-separator":this.props.doubleSeparator,"bb-editor-toolbar-button--non-separator":!this.props.separator&&!this.props.doubleSeparator&&!this.props.leftSeparator,"bb-editor-toolbar-button--main":null===this.props.parentIndex,"bb-editor-submenu-is-open":this.state.isSubmenuOpen||this.props.isToolbarOpen,"bb-editor-submenu-is-closed":!this.state.isSubmenuOpen||!this.props.isToolbarOpen,"is-disabled":this.props.isDisabled||this.state.isDisabled,"is-focused":this.state.hasKeyboardFocus,"bb-editor-toolbar-text":this.props.textOnly||!(this.props.iconName||this.props.iconComponent),"bb-editor-toolbar-icon-text":!this.props.textOnly&&!this.props.iconOnly&&(this.props.iconName||this.props.iconComponent),"bb-editor-toolbar-dropdown":this.props.children||this.props.isSubmenu&&!this.props.hiddenChevron,"bb-editor-submenu-button":this.props.isSubmenu,"bb-editor-submenu-button-active":this.props.isToolbarOpen,padded:!this.props.iconOnly&&!this.props.children,"text-active":this.state.isActive||this.state.isSubmenuOpen,[`${this.props.cssClass}-active`]:this.state.isActive,[`${this.props.cssClass}-normal`]:!this.state.isActive})}buttonIconClasses(){return(0,u.A)({icon:!!this.props.iconName,[`${this.props.iconName}-active-icon`]:this.props.iconName&&(this.state.isActive||this.state.isSubmenuOpen)||this.props.isToolbarOpen,[`${this.props.iconName}-normal-icon`]:this.props.iconName&&!this.state.isActive,"color-picker":this.props.isColorPicker})}buttonIcon(){if(null!==this.props.iconComponent){let e=this.props.iconComponent;return r.createElement(e,null)}return this.props.isColorPicker?r.createElement(tf.Ay,{color:this.props.color,cssClass:this.props.cssClass,editorFormat:this.props.editorFormat}):r.createElement(tb.f,null)}haspopup(){return this.props.isDialog?"dialog":this.props.children?!!this.props.children:null}innerButton(){let{isSubmenuOpen:e,isActive:t}=this.state,{analyticsEventAugmentor:n,children:i,localize:o,isSubmenu:s,isDialog:a,isToolbarOpen:l,isSubToolbarOpen:u,parentIndex:d,toggleButton:c}=this.props,p=this.buttonClasses(),m=this.buttonIconClasses(),g=this.haspopup(),E=n(tl.AnalyticsEventTypes.CLICK_EVENT,this.triggerAction,`editor.toolbar.${this.props.id}.button`);return r.createElement("button",{tabIndex:"-1","data-analytics-id":`editor.toolbar.${this.props.id}.button`,className:p,"aria-checked":d?t:null,"aria-expanded":s||i?e||l:null,"aria-controls":s&&(e||u)?this.props.id:null,"aria-haspopup":g,"aria-pressed":!(d||s||e||i||a)&&c?!!t:null,"aria-label":o.translate(`bbmlEditor.toolbar.${this.props.id}.axAriaText`),onClick:E,ref:e=>{this.buttonNode=e}},r.createElement("span",{"aria-hidden":"true"},this.props.textOnly||r.createElement("span",{className:m},this.buttonIcon()),this.props.iconOnly||o.translate(`bbmlEditor.toolbar.${this.props.id}.label`)))}render(){let{isSubmenuOpen:e,isActive:t,isToolbarOpen:n}=this.state,{localize:i,isHideable:o,separator:s}=this.props,a=this.containerClasses(),l=this.innerButton();return o&&!t?null:r.createElement("div",{role:"presentation",className:a,ref:e=>{this.containerRef=e}},(this.props.iconOnly||this.children)&&r.createElement(th.AnalyticsTooltip,{placement:"top",title:i.translate(`bbmlEditor.toolbar.${this.props.id}.label`)},l),!(this.props.iconOnly||this.children)&&l,e&&!n&&this.props.children&&r.createElement("ul",{id:this.props.id,role:"menu",className:"bb-editor-toolbar bb-editor-toolbar-submenu","aria-orientation":"horizontal",tabIndex:"-1",style:this.state.submenuStyles},this.props.children.map(e=>r.createElement("li",{key:e.key,role:"menuitemradio","aria-checked":e.props.isActive,tabIndex:"-1"},e))),s?r.createElement(ty,null):null)}}tI.propTypes={children:s().array,cssClass:s().string,iconName:s().string,iconComponent:s().object,iconOnly:s().bool,toggleButton:s().bool,isDisabled:s().bool,isHideable:s().bool,isRtl:s().bool,isSubmenu:s().bool,isToolbarOpen:s().bool,textOnly:s().bool,index:s().number,parentIndex:s().number,onClick:s().func,applyChange:s().func,quillModuleAction:s().func,toolbarActionComplete:s().func,openSubmenu:s().func,editorFormat:s().shape(),editorLastContent:s().arrayOf(s().shape({insert:s().oneOfType([s().string,s().object]),attributes:s().instanceOf(Object)})),editorLastRawSelection:s().shape(),id:s().string.isRequired,hasKeyboardFocus:s().bool,setEditorFocusStateToolbar:s().func,getEditorRect:s().func,isColorPicker:s().bool,color:s().string,rootContentId:s().string,...tE.A},tI.defaultProps={children:null,cssClass:"no-format",iconName:null,iconComponent:null,iconOnly:!1,toggleButton:!0,isDisabled:!1,isHideable:!1,isRtl:!1,isSubmenu:!1,isToolbarOpen:!1,textOnly:!1,index:-1,parentIndex:null,onClick:null,applyChange:null,quillModuleAction:null,toolbarActionComplete:null,openSubmenu:null,editorFormat:{},editorLastContent:[],editorLastRawSelection:new p.Q(0,0),hasKeyboardFocus:!1,setEditorFocusStateToolbar:null,getEditorRect:()=>null,isColorPicker:!1,color:null,onModalOpen:()=>null,rootContentId:null};let tA=(0,d.E)((0,tl.withAnalytics)(tI));var tv=n(990529),tS=n(865004);function t_(e){let t=(0,u.A)({"table-creator-cell":!0,selected:e.isSelected});return r.createElement("div",{className:"table-cell",role:"cell"},r.createElement("button",{index:e.index,tabIndex:"-1",className:t,"aria-labelledby":"tableGridCreator",onClick:()=>e.handleClick(e.rowIndex,e.columnIndex),onMouseEnter:()=>e.handleHover(e.rowIndex,e.columnIndex)}))}function tT(e){let[t,n]=(0,r.useState)({rowCount:0,columnCount:0}),i=(0,tS.W)(),o=(r,i)=>{e.quillModuleAction({module:"quill.table",action:"saved-selection"}),n({rowCount:r,columnCount:i}),e.quillModuleAction({module:"quill.table",action:"insert-table",rowCount:parseInt(t.rowCount,10)+1,columnCount:parseInt(t.columnCount,10)+1,headerRow:!1,headerColumn:!1})},s=(e,t)=>{n({rowCount:e,columnCount:t})};return r.createElement("div",{className:"table-creator"},r.createElement("span",{id:"tableGridCreator",className:"table-info"},i("bbmlEditor.toolbar.tableCreator.info",{rowCount:parseInt(t.rowCount,10)+1,columnCount:parseInt(t.columnCount,10)+1})),r.createElement("div",{"aria-labelledby":"tableGridCreator",role:"grid"},r.createElement("div",{className:"table-creator-grid",role:"row"},(()=>{let n=[];for(let i=0;i<10;i++)for(let a=0;a<10;a++)n.push(r.createElement(t_,{...e,index:10*i+a,key:`${i}_${a}`,rowIndex:i,columnIndex:a,isSelected:i<=t.rowCount&&a<=t.columnCount,handleHover:s,handleClick:o}));return n})())))}t_.propTypes={isSelected:s().bool.isRequired,rowIndex:s().number.isRequired,columnIndex:s().number.isRequired,index:s().number.isRequired,handleHover:s().func.isRequired,handleClick:s().func.isRequired},tT.propTypes={quillModuleAction:s().func.isRequired};var tO=(0,tl.withAnalytics)(tT);let tC=e=>{let{analyticsId:t,id:n,label:i,value:o}=e,s=(0,r.useRef)(null),a=(0,tS.W)();return(0,r.useEffect)(()=>{e.hasKeyboardFocus&&-1===e.currentSubmenuIndex&&e.currentMenuIndex===e.index&&s.current&&s.current.focus()}),r.createElement(th.AnalyticsFormControlLabel,{analyticsId:t,className:(0,u.A)({"bb-editor-toolbar-checkbox":!0,"is-focused":e.hasKeyboardFocus&&-1===e.currentSubmenuIndex&&e.currentMenuIndex===e.index}),label:a(`bbmlEditor.toolbar.${i}.label`),control:r.createElement(th.AnalyticsCheckbox,{analyticsId:t,id:n,className:"inner-checkbox",value:o,checked:o}),htmlFor:n,onChange:t=>{e.onChange(t,e)},ref:s})};tC.propTypes={id:s().string.isRequired,label:s().string.isRequired,hasKeyboardFocus:s().bool,index:s().number,value:s().bool,currentMenuIndex:s().number.isRequired,currentSubmenuIndex:s().number.isRequired,onChange:s().func.isRequired},tC.defaultProps={hasKeyboardFocus:!1,index:-1,currentSubmenuIndex:-1,value:!1};var tR=(0,tl.withAnalytics)(tC),tL=n(528128),tD=n(212840);function tN(e){let t;let{title:n,placement:i,ariaLabel:o}=e;return(0,r.useEffect)(()=>{e.hasKeyboardFocus&&-1===e.currentSubmenuIndex&&e.currentMenuIndex===e.index&&t&&t.focus()}),r.createElement(th.AnalyticsTooltip,{className:(0,u.A)({"is-focused":e.hasKeyboardFocus&&-1===e.currentSubmenuIndex&&e.currentMenuIndex===e.index}),title:n,placement:i},r.createElement(tD.AnalyticsIconButton,{className:"bb-editor-toolbar-tooltip-icon-button","aria-label":o,ref:e=>{t=e},analyticsId:"bbml-editor.toolbar.tooltip"},r.createElement(tL.Information,null)))}tN.propTypes={ariaLabel:s().string.isRequired,hasKeyboardFocus:s().bool,index:s().number,placement:s().string,title:s().string.isRequired},tN.defaultProps={hasKeyboardFocus:!1,index:-1,placement:"top"};var tP=(0,tl.withAnalytics)(tN);function tk(e){let{isSmallToolbar:t,tableHasHeaderColumn:n,tableHasHeaderRow:i}=e,o=(0,tS.W)();return(0,r.useEffect)(()=>{let t=e.quillModuleAction({module:"quill.table",action:"get-headers"});e.setHeaders(t.row,t.column)},[]),r.createElement(tg,{...tv.Bh,...e,isSubmenuToolbar:!0,subToolbarFocusFirstButton:!1},r.createElement(tA,{...tv.FZ,iconOnly:!0}),r.createElement(tA,{...tv.Qt,iconOnly:!0}),r.createElement(tA,{...tv.sj,iconOnly:!0}),r.createElement(tA,{...tv.ff,iconOnly:!0}),r.createElement(tA,{...tv.FC,iconOnly:!0}),r.createElement(tA,{...tv.EE,iconOnly:!0}),r.createElement(tA,{...tv.MM,iconOnly:!0}),r.createElement(tR,{id:"checkboxRow",label:"table-dialog-headers-row",value:i,onChange:(e,t)=>{t.quillModuleAction({module:"quill.table",action:"set-header-row",setHeader:e.target.checked}),e.target.checked||t.quillModuleAction({module:"quill.table",action:"set-header-col",setHeader:n}),t.setHeaders(e.target.checked,n)},isHideable:t}),r.createElement(tR,{id:"checkboxColumn",label:"table-dialog-headers-column",value:n,onChange:(e,t)=>{t.quillModuleAction({module:"quill.table",action:"set-header-col",setHeader:e.target.checked}),e.target.checked||t.quillModuleAction({module:"quill.table",action:"set-header-row",setHeader:i}),t.setHeaders(i,e.target.checked)},isHideable:t}),r.createElement(tP,{title:o("bbmlEditor.toolbar.table-dialog-tooltip.label"),placement:"top",ariaLabel:o("bbmlEditor.toolbar.table-dialog-tooltip.axAriaText"),isHideable:t}))}tk.propTypes={children:s().array,addKeyDownHandler:s().func.isRequired,editorId:s().string,toolbarActionComplete:s().func.isRequired,hasKeyboardFocus:s().bool,isDisabled:s().bool,isRtl:s().bool,isSubmenuToolbar:s().bool,isSubToolbarOpen:s().bool,isSmallToolbar:s().bool},tk.defaultProps={children:null,editorId:null,hasKeyboardFocus:!1,isDisabled:!1,isRtl:!1,isSubmenuToolbar:!1,isSubToolbarOpen:!1,isSmallToolbar:!1};var tw=(0,tl.withAnalytics)(tk);let tU={[td.y8.default]:{[td.XM.small]:["link","editAttachment","editYoutubeVideo","collab_video"],[td.XM.medium]:["link","insertImage","insertLocalFile","editAttachment","editYoutubeVideo","collab_video"],[td.XM.large]:["link","insertImage","insertLocalFile","editAttachment","editYoutubeVideo","collab_video"]},[td.y8.minimal]:{[td.XM.small]:["math","link","image","editAttachment","editYoutubeVideo","collab_video"],[td.XM.medium]:["math","link","image","editAttachment","editYoutubeVideo","collab_video"],[td.XM.large]:["math","link","image","editAttachment","editYoutubeVideo","collab_video"]}},tM=(e,t,n)=>e.filter(e=>!tU[t][n].some(t=>e.id===t)).length>0;var tB=(e,t,n)=>e.pluginButtons.filter(e=>!tU[t][n].some(t=>e.id===t)&&!e.isHidden).map(e=>r.createElement(tA,{...e}));function tG(e){let t=e.pluginButtons.find(e=>"link"===e.id);return t?r.createElement(tA,{...t,...e}):null}function tx(e){let t=e.pluginButtons.find(e=>"editAttachment"===e.id);return t?r.createElement(tA,{...t,...e}):null}function tq(e){let t=e.pluginButtons.find(e=>"editYoutubeVideo"===e.id);return t?r.createElement(tA,{...t,...e}):null}function tF(e){let t=e.pluginButtons.find(e=>"insertLocalFile"===e.id);return t?r.createElement(tA,{...t,...e}):null}function tV(e){let t=e.pluginButtons.find(e=>"insertImage"===e.id);return t?r.createElement(tA,{...t,...e}):null}function tj(e){let t=e.pluginButtons.find(e=>"collab_video"===e.id);return!t||t.isHidden?null:r.createElement(tA,{...t,...e})}tG.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired},tx.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired},tq.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired},tF.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired},tV.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired},tj.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired,isHidden:s().bool})).isRequired};let tK={None:"",TextOptionsMenu:"textOptionsMenu",ListMenu:"listMenu"};function tH(e){let[t,n]=(0,r.useState)(tK.None),[i,o]=(0,r.useState)(),s=e=>{n(t=>t===e?tK.None:e)},a=()=>{s(tK.None)};return r.createElement("div",null,r.createElement(tg,{...e,isSubToolbarOpen:t!==tK.None,resetMenu:a,shareNavigator:e=>{o(e)}},r.createElement(tA,{...tv.xJ,iconOnly:!0},tv._g.map(e=>r.createElement(tA,{key:e.key,...e,textOnly:!0}))),r.createElement(tA,{...tv.aW,iconOnly:!0},r.createElement(tA,{...tv.nY,textOnly:!0}),r.createElement(tA,{...tv.aT,textOnly:!0}),r.createElement(tA,{...tv.jO,textOnly:!0}),r.createElement(tA,{...tv.MS,textOnly:!0}),r.createElement(tA,{...tv.lr,textOnly:!0}),r.createElement(tA,{...tv.ZE,textOnly:!0}),r.createElement(tA,{...tv.Jn,textOnly:!0})),r.createElement(tA,{...tv.$C,iconOnly:!0},r.createElement(tA,{...tv.bv,textOnly:!0}),r.createElement(tA,{...tv.P_,textOnly:!0}),r.createElement(tA,{...tv.Pt,textOnly:!0,isActive:t=>t.size===P.Mq||!e.isRtl&&!t.size}),r.createElement(tA,{...tv.P1,textOnly:!0,isActive:t=>t.size===P.yR||e.isRtl&&!t.size}),r.createElement(tA,{...tv.EG,textOnly:!0}),r.createElement(tA,{...tv.Vw,textOnly:!0}),r.createElement(tA,{...tv.C_,textOnly:!0})),r.createElement(tA,{...tv.sk,iconOnly:!0,separator:!0},r.createElement(tA,{...tv.Vd}),r.createElement(tA,{...tv.Zz}),r.createElement(tA,{...tv.gq}),r.createElement(tA,{...tv.wj}),r.createElement(tA,{...tv.RH}),r.createElement(tA,{...tv.D})),r.createElement(tA,{...tv.yN,iconOnly:!0}),r.createElement(tA,{...tv.J2,iconOnly:!0}),r.createElement(tA,{...tv.z2,iconOnly:!0}),r.createElement(tA,{...tv.gJ,onClick:()=>s(tK.TextOptionsMenu),iconOnly:!0,isSubmenu:!0,hiddenChevron:!0,isToolbarOpen:t===tK.TextOptionsMenu,separator:!0}),e.editorHasTableSelected?r.createElement(tA,{...tv.j0,iconOnly:!0}):r.createElement(tA,{...tv.NC,iconOnly:!0},r.createElement(tO,{...e.quillModuleAction}),r.createElement(tA,{...tv._q,...e.closeAllMenus})),!e.editorHasCodeBlockSelected&&r.createElement(tA,{...tv.C1,iconOnly:!0},r.createElement(tA,{...tv.TU}),r.createElement(tA,{...tv.xd}),r.createElement(tA,{...tv.GY}),r.createElement(tA,{...tv.mT})),r.createElement(tA,{...tv.Zk,onClick:()=>s(tK.ListMenu),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===tK.ListMenu,separator:!0}),r.createElement(tA,{...tv.Vn,iconOnly:!0,isButtonDisabled:e.editorHasTableSelected}),r.createElement(tA,{...tv.N6,iconOnly:!0,separator:!0}),r.createElement(tG,{pluginButtons:e.pluginButtons,iconOnly:!0}),r.createElement(tF,{pluginButtons:e.pluginButtons,iconOnly:!0}),r.createElement(tV,{pluginButtons:e.pluginButtons,iconOnly:!0}),tM(e.pluginButtons,td.y8.default,td.XM.large)&&r.createElement(tA,{...tv.OL,onModalOpen:e.onModalOpen,iconOnly:!0},tB(e,td.y8.default,td.XM.large)),r.createElement(tj,{pluginButtons:e.pluginButtons,iconOnly:!0}),r.createElement(tx,{id:td.yx.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),r.createElement(tq,{id:td.oE.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0})),t===tK.TextOptionsMenu&&r.createElement(tg,{...e,...tv.xF,isSubmenuToolbar:!0,isSubToolbarOpen:t!==tK.None,resetMenu:a},r.createElement(tA,{...tv.n,iconOnly:!0}),r.createElement(tA,{...tv.Z3,iconOnly:!0}),r.createElement(tA,{...tv.E,iconOnly:!0}),r.createElement(tA,{...tv.w4,iconOnly:!0})),t===tK.ListMenu&&r.createElement(tg,{...e,...tv.nL,isSubmenuToolbar:!0,isSubToolbarOpen:t!==tK.None,resetMenu:a},r.createElement(tA,{...tv.Xy,iconOnly:!0}),r.createElement(tA,{...tv._J,iconOnly:!0}),r.createElement(tA,{...tv.aK,iconOnly:!0},r.createElement(tA,{...tv.vc,textOnly:!0}),r.createElement(tA,{...tv.hQ,textOnly:!0}),r.createElement(tA,{...tv.Ye,textOnly:!0}),r.createElement(tA,{...tv.oA,textOnly:!0})),e.isRtl&&!e.editorHasCodeBlockSelected&&r.createElement(tA,{...tv.Ag,iconOnly:!0,isActive:t=>t.direction===$.$f||!t.direction&&e.isRtl}),!e.editorHasCodeBlockSelected&&r.createElement(tA,{...tv.wi,iconOnly:!0,isActive:t=>t.direction===$.LD||!t.direction&&!e.isRtl}),!e.isRtl&&!e.editorHasCodeBlockSelected&&r.createElement(tA,{...tv.Ag,iconOnly:!0,isActive:t=>t.direction===$.$f||!t.direction&&e.isRtl})),e.editorHasTableSelected&&r.createElement(tw,{...e,useSharedNavigator:!0,sharedNavigator:i,isAdditionalToolbarVisible:e.editorHasTableSelected}))}tH.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired,editorHasTableSelected:s().bool,editorHasCodeBlockSelected:s().bool},tH.defaultProps={editorHasTableSelected:!1};let tQ={None:"",TextStylingMenu:"textStylingMenu",TextOptionsMenu:"textOptionsMenu",ListMenu:"listMenu"};function tY(e){let[t,n]=(0,r.useState)(tQ.None),[i,o]=(0,r.useState)(),s=e=>{n(t=>t===e?tQ.None:e)},a=()=>{s(tQ.None)};return r.createElement("div",null,r.createElement(tg,{...e,isSubToolbarOpen:t!==tQ.None,resetMenu:a,shareNavigator:e=>{o(e)}},r.createElement(tA,{...tv.bW,onClick:()=>s(tQ.TextStylingMenu),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===tQ.TextStylingMenu,separator:!0}),r.createElement(tA,{...tv.yN,iconOnly:!0}),r.createElement(tA,{...tv.J2,iconOnly:!0}),r.createElement(tA,{...tv.z2,iconOnly:!0}),r.createElement(tA,{...tv.gJ,onClick:()=>s(tQ.TextOptionsMenu),iconOnly:!0,isSubmenu:!0,hiddenChevron:!0,isToolbarOpen:t===tQ.TextOptionsMenu,separator:!0}),!e.editorHasCodeBlockSelected&&r.createElement(tA,{...tv.C1,iconOnly:!0},r.createElement(tA,{...tv.TU}),r.createElement(tA,{...tv.xd}),r.createElement(tA,{...tv.GY}),r.createElement(tA,{...tv.mT})),r.createElement(tA,{...tv.Zk,onClick:()=>s(tQ.ListMenu),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===tQ.ListMenu,separator:!0}),r.createElement(tA,{...tv.Vn,isButtonDisabled:e.editorHasTableSelected,iconOnly:!0}),r.createElement(tA,{...tv.N6,iconOnly:!0,separator:!0}),r.createElement(tG,{pluginButtons:e.pluginButtons,iconOnly:!0}),r.createElement(tF,{pluginButtons:e.pluginButtons,iconOnly:!0}),r.createElement(tV,{pluginButtons:e.pluginButtons,iconOnly:!0}),tM(e.pluginButtons,td.y8.default,td.XM.medium)&&r.createElement(tA,{...tv.OL,onModalOpen:e.onModalOpen,iconOnly:!0},tB(e,td.y8.default,td.XM.medium)),r.createElement(tj,{pluginButtons:e.pluginButtons,iconOnly:!0}),r.createElement(tx,{id:td.yx.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),r.createElement(tq,{id:td.oE.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0})),t===tQ.TextStylingMenu&&r.createElement(tg,{...tv.ND,...e,isSubmenuToolbar:!0,resetMenu:a},r.createElement(tA,{...tv.xJ,iconOnly:!0},tv._g.map(e=>r.createElement(tA,{key:e.key,...e,textOnly:!0}))),r.createElement(tA,{...tv.aW,iconOnly:!0},r.createElement(tA,{...tv.nY,textOnly:!0}),r.createElement(tA,{...tv.aT,textOnly:!0}),r.createElement(tA,{...tv.jO,textOnly:!0}),r.createElement(tA,{...tv.MS,textOnly:!0}),r.createElement(tA,{...tv.lr,textOnly:!0}),r.createElement(tA,{...tv.ZE,textOnly:!0}),r.createElement(tA,{...tv.Jn,textOnly:!0})),r.createElement(tA,{...tv.$C,iconOnly:!0},r.createElement(tA,{...tv.bv,textOnly:!0}),r.createElement(tA,{...tv.P_,textOnly:!0}),r.createElement(tA,{...tv.Pt,textOnly:!0,isActive:t=>t.size===P.Mq||!e.isRtl&&!t.size}),r.createElement(tA,{...tv.P1,textOnly:!0,isActive:t=>t.size===P.yR||e.isRtl&&!t.size}),r.createElement(tA,{...tv.EG,textOnly:!0}),r.createElement(tA,{...tv.Vw,textOnly:!0}),r.createElement(tA,{...tv.C_,textOnly:!0})),r.createElement(tA,{...tv.sk,iconOnly:!0},r.createElement(tA,{...tv.Vd}),r.createElement(tA,{...tv.Zz}),r.createElement(tA,{...tv.gq}),r.createElement(tA,{...tv.wj}),r.createElement(tA,{...tv.RH}),r.createElement(tA,{...tv.D}))),t===tQ.TextOptionsMenu&&r.createElement(tg,{...tv.xF,...e,isSubmenuToolbar:!0,isSubToolbarOpen:t!==tQ.None,resetMenu:a},r.createElement(tA,{...tv.n,iconOnly:!0}),r.createElement(tA,{...tv.Z3,iconOnly:!0}),r.createElement(tA,{...tv.E,iconOnly:!0}),r.createElement(tA,{...tv.w4,iconOnly:!0})),t===tQ.ListMenu&&r.createElement(tg,{...tv.nL,...e,isSubmenuToolbar:!0,isSubToolbarOpen:t!==tQ.None,resetMenu:a},r.createElement(tA,{...tv.Xy,iconOnly:!0}),r.createElement(tA,{...tv._J,iconOnly:!0}),r.createElement(tA,{...tv.aK,iconOnly:!0},r.createElement(tA,{...tv.vc,textOnly:!0}),r.createElement(tA,{...tv.hQ,textOnly:!0}),r.createElement(tA,{...tv.Ye,textOnly:!0}),r.createElement(tA,{...tv.oA,textOnly:!0})),e.editorHasTableSelected?r.createElement(tA,{...tv.j0,iconOnly:!0}):r.createElement(tA,{...tv.NC,iconOnly:!0},r.createElement(tO,{...e.quillModuleAction}),r.createElement(tA,{...tv._q,...e.closeAllMenus})),e.isRtl&&!e.editorHasCodeBlockSelected&&r.createElement(tA,{...tv.Ag,iconOnly:!0,isActive:t=>t.direction===$.$f||!t.direction&&e.isRtl}),!e.editorHasCodeBlockSelected&&r.createElement(tA,{...tv.wi,iconOnly:!0,isActive:t=>t.direction===$.LD||!t.direction&&!e.isRtl}),!e.isRtl&&!e.editorHasCodeBlockSelected&&r.createElement(tA,{...tv.Ag,iconOnly:!0,isActive:t=>t.direction===$.$f||!t.direction&&e.isRtl})),e.editorHasTableSelected&&r.createElement(tw,{...e,useSharedNavigator:!0,sharedNavigator:i,isAdditionalToolbarVisible:e.editorHasTableSelected}))}tY.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired,editorHasTableSelected:s().bool},tY.defaultProps={editorHasTableSelected:!1};var t$=n(683900);let tJ={None:"",TextStylingMenu:"textStylingMenu",TextOptionsMenu:"textOptionsMenu",ListMenu:"listMenu"};function tz(e){let[t,n]=(0,r.useState)(tJ.None),[i,o]=(0,r.useState)(),s=(0,t$.useTheme)(),a=(0,t$.useMediaQuery)(s.breakpoints.down("sm")),l=e=>{n(t=>t===e?tJ.None:e)},u=()=>{l(tJ.None)},d=a?tB(e,td.y8.default,td.XM.small).concat(r.createElement(tj,{pluginButtons:e.pluginButtons})):tB(e,td.y8.default,td.XM.small);return r.createElement("div",null,r.createElement(tg,{...e,isSubToolbarOpen:t!==tJ.None,resetMenu:u,shareNavigator:e=>{o(e)}},r.createElement(tA,{...tv.bW,onClick:()=>l(tJ.TextStylingMenu),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===tJ.TextStylingMenu,separator:!0}),r.createElement(tA,{...tv.gJ,onClick:()=>l(tJ.TextOptionsMenu),iconOnly:!0,isSubmenu:!0,hiddenChevron:!0,isToolbarOpen:t===tJ.TextOptionsMenu,separator:!0}),r.createElement(tA,{...tv.Zk,onClick:()=>l(tJ.ListMenu),iconOnly:!0,isSubmenu:!0,isToolbarOpen:t===tJ.ListMenu,separator:!0}),r.createElement(tA,{...tv.Vn,isButtonDisabled:e.editorHasTableSelected,iconOnly:!0}),r.createElement(tG,{pluginButtons:e.pluginButtons,iconOnly:!0}),e.pluginButtons.length>0&&r.createElement(tA,{...tv.OL,onModalOpen:e.onModalOpen,iconOnly:!0},d),!a&&r.createElement(tj,{pluginButtons:e.pluginButtons,iconOnly:!0}),r.createElement(tx,{id:td.yx.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),r.createElement(tq,{id:td.oE.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0})),t===tJ.TextStylingMenu&&r.createElement(tg,{...tv.ND,...e,isSubmenuToolbar:!0,resetMenu:u},r.createElement(tA,{...tv.xJ,iconOnly:!0},tv._g.map(e=>r.createElement(tA,{key:e.key,...e,textOnly:!0}))),r.createElement(tA,{...tv.aW,iconOnly:!0},r.createElement(tA,{...tv.nY,textOnly:!0}),r.createElement(tA,{...tv.aT,textOnly:!0}),r.createElement(tA,{...tv.jO,textOnly:!0}),r.createElement(tA,{...tv.MS,textOnly:!0}),r.createElement(tA,{...tv.lr,textOnly:!0}),r.createElement(tA,{...tv.ZE,textOnly:!0}),r.createElement(tA,{...tv.Jn,textOnly:!0})),r.createElement(tA,{...tv.$C,iconOnly:!0},r.createElement(tA,{...tv.bv,textOnly:!0}),r.createElement(tA,{...tv.P_,textOnly:!0}),r.createElement(tA,{...tv.Pt,textOnly:!0,isActive:t=>t.size===P.Mq||!e.isRtl&&!t.size}),r.createElement(tA,{...tv.P1,textOnly:!0,isActive:t=>t.size===P.yR||e.isRtl&&!t.size}),r.createElement(tA,{...tv.EG,textOnly:!0}),r.createElement(tA,{...tv.Vw,textOnly:!0}),r.createElement(tA,{...tv.C_,textOnly:!0})),r.createElement(tA,{...tv.sk,iconOnly:!0},r.createElement(tA,{...tv.Vd}),r.createElement(tA,{...tv.Zz}),r.createElement(tA,{...tv.gq}),r.createElement(tA,{...tv.wj}),r.createElement(tA,{...tv.RH}),r.createElement(tA,{...tv.D}))),t===tJ.TextOptionsMenu&&r.createElement(tg,{...tv.xF,...e,isSubmenuToolbar:!0,isSubToolbarOpen:t!==tJ.None,resetMenu:u},r.createElement(tA,{...tv.yN,iconOnly:!0}),r.createElement(tA,{...tv.J2,iconOnly:!0}),r.createElement(tA,{...tv.z2,iconOnly:!0}),r.createElement(tA,{...tv.n,iconOnly:!0}),r.createElement(tA,{...tv.Z3,iconOnly:!0}),r.createElement(tA,{...tv.E,iconOnly:!0}),r.createElement(tA,{...tv.N6,iconOnly:!0}),r.createElement(tA,{...tv.w4,iconOnly:!0})),t===tJ.ListMenu&&r.createElement(tg,{...tv.nL,...e,isSubmenuToolbar:!0,isSubToolbarOpen:t!==tJ.None,resetMenu:u},!e.editorHasCodeBlockSelected&&r.createElement(tA,{...tv.C1,iconOnly:!0},r.createElement(tA,{...tv.TU}),r.createElement(tA,{...tv.xd}),r.createElement(tA,{...tv.GY}),r.createElement(tA,{...tv.mT})),r.createElement(tA,{...tv.Xy,iconOnly:!0}),r.createElement(tA,{...tv._J,iconOnly:!0}),r.createElement(tA,{...tv.aK,iconOnly:!0},r.createElement(tA,{...tv.vc,textOnly:!0}),r.createElement(tA,{...tv.hQ,textOnly:!0}),r.createElement(tA,{...tv.Ye,textOnly:!0}),r.createElement(tA,{...tv.oA,textOnly:!0})),e.editorHasTableSelected?r.createElement(tA,{...tv.j0,iconOnly:!0}):r.createElement(tA,{...tv._q,iconOnly:!0}),e.isRtl&&!e.editorHasCodeBlockSelected&&r.createElement(tA,{...tv.Ag,iconOnly:!0,isActive:t=>t.direction===$.$f||!t.direction&&e.isRtl}),!e.editorHasCodeBlockSelected&&r.createElement(tA,{...tv.wi,iconOnly:!0,isActive:t=>t.direction===$.LD||!t.direction&&!e.isRtl}),!e.isRtl&&!e.editorHasCodeBlockSelected&&r.createElement(tA,{...tv.Ag,iconOnly:!0,isActive:t=>t.direction===$.$f||!t.direction&&e.isRtl})),e.editorHasTableSelected&&r.createElement(tw,{...e,isSmallToolbar:!0,useSharedNavigator:!0,sharedNavigator:i,isAdditionalToolbarVisible:e.editorHasTableSelected}))}tz.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired,editorHasTableSelected:s().bool},tz.defaultProps={editorHasTableSelected:!1};var tW=n(324203),tZ=e=>{let t=e.pluginButtons.find(e=>e.id===tW.HM);return t?r.createElement(tA,{...t,...e}):null};function tX(e){let t=e.pluginButtons.find(e=>"math"===e.id);return t?r.createElement(tA,{...t,...e}):null}tX.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired};let t0=e=>r.createElement(tg,{...e},r.createElement(tA,{...tv.yN,iconOnly:!0}),r.createElement(tA,{...tv.J2,iconOnly:!0}),r.createElement(tA,{...tv.z2,iconOnly:!0}),r.createElement(tX,{pluginButtons:e.pluginButtons,iconOnly:!0}),e.pluginButtons.length>0&&r.createElement(tA,{...tv.OL,onModalOpen:e.onModalOpen,iconOnly:!0,separator:!0},r.createElement(tG,{pluginButtons:e.pluginButtons}),r.createElement(tZ,{pluginButtons:e.pluginButtons}),tB(e,td.y8.minimal,td.XM.small),r.createElement(tj,{pluginButtons:e.pluginButtons})),r.createElement(tx,{id:td.yx.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),r.createElement(tq,{id:td.oE.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}));t0.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired};let t1=e=>r.createElement(tg,{...e},r.createElement(tA,{...tv.gJ,iconOnly:!0},r.createElement(tA,{...tv.yN}),r.createElement(tA,{...tv.J2}),r.createElement(tA,{...tv.z2})),r.createElement(tX,{pluginButtons:e.pluginButtons,iconOnly:!0}),e.pluginButtons.length>0&&r.createElement(tA,{...tv.OL,onModalOpen:e.onModalOpen,iconOnly:!0,separator:!0},r.createElement(tG,{pluginButtons:e.pluginButtons}),r.createElement(tZ,{pluginButtons:e.pluginButtons}),tB(e,td.y8.minimal,td.XM.small),r.createElement(tj,{pluginButtons:e.pluginButtons})),r.createElement(tx,{id:td.yx.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}),r.createElement(tq,{id:td.oE.id,pluginButtons:e.pluginButtons,iconOnly:!0,isHideable:!0}));t1.propTypes={pluginButtons:s().arrayOf(s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,iconName:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired})).isRequired};var t5=n(163785);let t8=e=>{let{onChange:t}=e,n=(0,t$.useTheme)(),i=(0,t$.useMediaQuery)(n.breakpoints.down("sm"));return(0,r.useEffect)(()=>{t(i)},[t,i]),null},t4="aria-additional-information";class t2 extends r.Component{constructor(e){super(e),this.setEditorContainer=e=>{this.editorContainer=e},this.setEditorRoot=e=>{this.editorRoot=e},this.handleSmallBreakpointChange=e=>{this.getPluginModules().forEach(t=>{"function"==typeof t.onBreakpointChange&&t.onBreakpointChange(e)})};let t=new p.Q(0,0);this.editorInitialContent=null,this.isBbmlDirty=!1,this.bbEditorId="BB_Editor_ID_"+(0,t5.v4)(),this.state={isApplyingChanges:!1,editorFormat:{text:"",selection:t},editorLastFormat:{},editorLastContent:[],editorLastSelection:t,editorLastRawSelection:t,toolbarHasKeyboardFocus:!1,editorHasKeyboardFocus:!1,editorHasMouseFocus:!1,editorHasTableSelected:!1,tableHasHeaderRow:!1,tableHasHeaderColumn:!1,toolbar:tz,editorHasCodeBlockSelected:!1,shouldShowTooltip:!1},this.quill=null,this.quillUnloadHandler=null,this.storedStack=null,this.editorContainer=null,this.editorRoot=null,this.keyDownHandler=new e$,this.onKeyDown=this.onKeyDown.bind(this),this.onKeyDownOutsideEditor=this.onKeyDownOutsideEditor.bind(this),this.onMouseDown=this.onMouseDown.bind(this),this.extendSelection=null,this.registerAccessibilityHandlers=this.registerAccessibilityHandlers.bind(this),this.unregisterAccessibilityHandlers=this.unregisterAccessibilityHandlers.bind(this),this.setToolbarKeyboardFocused=this.setToolbarKeyboardFocused.bind(this),this.setEditorKeyboardFocused=this.setEditorKeyboardFocused.bind(this),this.setEditorMouseFocused=this.setEditorMouseFocused.bind(this),this.updateAriaAttributes=this.updateAriaAttributes.bind(this),this.addAxLabels=this.addAxLabels.bind(this),this.editorContainsElement=this.editorContainsElement.bind(this),this.editorHasFocus=this.editorHasFocus.bind(this),this.editorHasKeyboardFocus=this.editorHasKeyboardFocus.bind(this),this.setEditorFocusState=this.setEditorFocusState.bind(this),this.setEditorFocusStateToolbar=this.setEditorFocusStateToolbar.bind(this),this.isEditorFocusState=this.isEditorFocusState.bind(this),this.editorFocusState=td.mn.BLURRED,this.onFocusHandler=this.onFocusHandler.bind(this),this.onFocusDebounce=null,this.onBlurHandler=this.onBlurHandler.bind(this),this.onBlurDebounce=null,this.initializeQuill=this.initializeQuill.bind(this),this.updateQuillEnable=this.updateQuillEnable.bind(this),this.updateQuillPlaceholder=this.updateQuillPlaceholder.bind(this),this.restoreQuillPlaceholder=this.restoreQuillPlaceholder.bind(this),this.unloadPlugins=this.unloadPlugins.bind(this),this.notifyPluginsOfPropChanges=this.notifyPluginsOfPropChanges.bind(this),this.onToolbarActionComplete=this.onToolbarActionComplete.bind(this),this.onEditorChange=this.onEditorChange.bind(this),this.getEditorSelection=this.getEditorSelection.bind(this),this.getEditorFormat=this.getEditorFormat.bind(this),this.updateFormatWithBlotSelection=this.updateFormatWithBlotSelection.bind(this),this.selectEmbeddedBlot=this.selectEmbeddedBlot.bind(this),this.unselectEmbeddedBlots=this.unselectEmbeddedBlots.bind(this),this.applyEditorChange=this.applyEditorChange.bind(this),this.applyChangeAndSetEditorFocused=this.applyChangeAndSetEditorFocused.bind(this),this.quillModuleAction=this.quillModuleAction.bind(this),this.setHeaders=this.setHeaders.bind(this),this.onBbMLInputChange=this.onBbMLInputChange.bind(this),this.onBbMLOutputChange=this.onBbMLOutputChange.bind(this),this.makeEmbedsEasierToEditAfter=this.makeEmbedsEasierToEditAfter.bind(this),this.updateToolbar=this.updateToolbar.bind(this),this.setToolbarState=this.setToolbarState.bind(this),this.getPluginButtons=this.getPluginButtons.bind(this),this.getEditorRect=this.getEditorRect.bind(this),this.onDragEnter=this.onDragEnter.bind(this),this.onDragLeave=this.onDragLeave.bind(this),this.onDrop=this.onDrop.bind(this),this.dragCount=0,this.fileDragDropUtil=e0(this.applyChangeAndSetEditorFocused,this.props.localize.getLocalePropsForClone(),this.setEditorFocusStateToolbar,this.props.onModalOpen),this.plugins=eW(e.plugins,()=>this.forceUpdate(),this.fileDragDropUtil)}componentDidMount(){this.initializeQuill(),this.registerAccessibilityHandlers(),this.updateToolbar(),window.addEventListener("resize",this.updateToolbar)}componentDidUpdate(e){let t=!e.isDisabled&&!e.isReadOnly,n=!this.props.isDisabled&&!this.props.isReadOnly;n===t||(this.updateQuillEnable(n),te(this.editorRoot.classList,n),n||(tn(this.editorRoot.classList,!1),ts(this.editorRoot.classList,!1))),this.props.placeholder!==e.placeholder&&this.updateQuillPlaceholder(this.props.placeholder),this.props.isDisabled!==e.isDisabled&&e3(this.editorRoot.classList,this.props.isDisabled),this.props.isReadOnly!==e.isReadOnly&&(e9(this.editorRoot.classList,this.props.isReadOnly),this.updateQuillPlaceholder(this.props.placeholder),this.quillModuleAction({module:"plugins",action:"read-only-change",value:this.props.isReadOnly})),this.props.errorMessage!==e.errorMessage&&ti(this.editorRoot.classList,!!this.props.errorMessage),this.updateAriaAttributes(e),(this.props.isReadOnly!==e.isReadOnly||this.props.isToolbarHidden!==e.isToolbarHidden||this.props.toolbarSet!==e.toolbarSet)&&this.updateToolbar(),(this.props.size!==e.size||Object.keys(this.props).some(t=>this.props[t]!==e[t]))&&((this.props.bbml!==e.bbml||this.isBbmlDirty)&&this.onBbMLInputChange(this.props.bbml),this.notifyPluginsOfPropChanges()),(this.props.currentLocale!==e.currentLocale||this.props.isRtl!==e.isRtl)&&this.fileDragDropUtil.setLocaleProps(this.props.localize.getLocalePropsForClone()),this.editorRoot.firstChild.classList.remove(`size-${e.size}`),this.setEditorSize();let r=this.state.editorHasKeyboardFocus||this.state.editorHasMouseFocus||this.state.toolbarHasKeyboardFocus;r!==this.state.shouldShowTooltip&&(r?this.setState({shouldShowTooltip:!0}):setTimeout(()=>{this.setState({shouldShowTooltip:!1})},50))}componentWillUnmount(){this.quill.history.clear(),this.unloadPlugins(),this.unregisterAccessibilityHandlers(),this.removeTimers(),window.removeEventListener("resize",this.updateToolbar),this.quill.off(c.A.events.EDITOR_CHANGE,this.onEditorChange),this.editorRoot.remove(),delete this.editorContainer,delete this.editorRoot,delete this.quill}removeTimers(){this.requestAnimationFrameID&&(window.cancelAnimationFrame(this.requestAnimationFrameID),this.requestAnimationFrameID=null),clearTimeout(this.extendSelection),clearTimeout(this.debounceWindowResizeToolbar),clearTimeout(this.onBlurDebounce),clearTimeout(this.onFocusDebounce),clearTimeout(this.axTooltipTimeout),clearTimeout(this.keyFocusTimeout),clearTimeout(this.autoSaveTimeout)}registerAccessibilityHandlers(){document.addEventListener("keydown",this.onKeyDownOutsideEditor),this.editorContainer.addEventListener("focusin",this.onFocusHandler),this.editorContainer.addEventListener("focusout",this.onBlurHandler),this.editorRoot.addEventListener("mousedown",this.onMouseDown),this.updateAriaAttributes(),this.keyDownHandler.addKeyDownHandler(l().F10,eY.ALT,this.setToolbarKeyboardFocused,eQ.EDITOR)}unregisterAccessibilityHandlers(){document.removeEventListener("keydown",this.onKeyDownOutsideEditor),this.editorContainer.removeEventListener("focusin",this.onFocusHandler),this.editorContainer.removeEventListener("focusout",this.onBlurHandler),this.editorRoot.removeEventListener("mousedown",this.onMouseDown)}addAxLabels(){let{editorId:e,ariaDescribedBy:t}=this.props,n=this.editorRoot.firstChild;this.editorRoot.querySelector(".ql-clipboard").setAttribute("aria-hidden","true"),e&&n.setAttribute("id",e),t&&n.setAttribute("aria-describedby",t),this.updateAriaLabels()}updateAriaLabels(){let{ariaLabelledBy:e,isReadOnly:t,isDisabled:n}=this.props,r=this.editorRoot.firstChild;if(!(!t&&!n)){r.removeAttribute("aria-labelledby"),r.removeAttribute("aria-label");return}r.setAttribute("aria-labelledby",`${e} ${this.bbEditorId}-editorLabel`)}updateAriaAttributes(e){let t=!1;!e||e.isReadOnly||e.isDisabled||(t=!0);let n=!this.props.isReadOnly&&!this.props.isDisabled;t!==n&&(n?(this.editorRoot.firstChild.setAttribute("role","textbox"),this.editorRoot.firstChild.setAttribute("aria-multiline","true"),this.editorRoot.firstChild.setAttribute("aria-required",this.props.ariaRequired?"true":"false")):(this.editorRoot.firstChild.removeAttribute("role"),this.editorRoot.firstChild.removeAttribute("aria-multiline"),this.editorRoot.firstChild.removeAttribute("aria-required")),this.updateAriaLabels());let r=this.shouldShowToolbar(),{ariaDescribedBy:i}=this.props;if(i){let e=r?`${i} ${t4}`:i;this.editorRoot.firstChild.setAttribute("aria-describedby",e)}}setToolbarKeyboardFocused(){this.keyDownHandler.enableToolbarScope(),this.setState({toolbarHasKeyboardFocus:!0,editorHasKeyboardFocus:!1,editorHasMouseFocus:!1}),tn(this.editorRoot.classList,!1),ts(this.editorRoot.classList,!1)}setEditorKeyboardFocused(e){this.keyDownHandler.enableEditorScope(),this.setState({toolbarHasKeyboardFocus:!1,editorHasKeyboardFocus:!0,editorHasMouseFocus:!1},"function"==typeof e?e:null),tn(this.editorRoot.classList,!0),ts(this.editorRoot.classList,!0)}setEditorMouseFocused(e){this.keyDownHandler.enableEditorScope(),this.setState({toolbarHasKeyboardFocus:!1},"function"==typeof e?e:null),tn(this.editorRoot.classList,!0),this.setState({editorHasMouseFocus:!0})}onMouseDown(e){this.editorHasFocus()&&!this.quill.hasFocus()&&this.onToolbarActionComplete(!this.toolbarHasFocus()),2===e.button&&(clearTimeout(this.extendSelection),this.extendTableSelection()),this.props.isDisabled||this.props.isReadOnly||setTimeout(()=>this.selectEmbeddedBlot(e.target))}onKeyDown(e){if(!this.props.isDisabled&&!this.props.isReadOnly){let t=this.keyDownHandler.handleKeyDown(e),n=e$.hasModifierKey(e),r=e$.hasRegularKey(e);clearTimeout(this.extendSelection),this.extendTableSelection(),e.keyCode===l().ENTER&&this.quill.history.cutoff(),(t||n&&r)&&this.onEditorChange(c.A.events.TEXT_CHANGE)}}onKeyDownOutsideEditor(e){e.keyCode!==l().TAB||this.props.isDisabled||this.props.isReadOnly||this.editorHasFocus()||(this.keyFocusTimeout=setTimeout(()=>{this.editorHasFocus()&&this.setEditorKeyboardFocused()}))}editorContainsElement(e,t){let n=this.editorContainer;return t&&(n=n.querySelector(t)),n&&n.contains(e)}toolbarHasFocus(){return(this.editorContainsElement(document.activeElement,".bb-editor-toolbar")||this.editorContainsElement(document.activeElement,".bb-editor-submenu-toolbar"))&&!this.props.isDisabled&&!this.props.isReadOnly}editorHasFocus(){return(this.editorContainsElement(document.activeElement)||this.quill.hasFocus())&&!this.props.isDisabled&&!this.props.isReadOnly}editorHasKeyboardFocus(){return this.editorHasFocus()&&(this.state.editorHasKeyboardFocus||this.editorRoot.classList.contains("has-keyboard-focus"))}onToolbarActionComplete(e=!1){var t,n;let r=!0===e?()=>this.quill.focus():()=>{};this.setEditorFocusState(td.mn.FOCUSED),this.state.toolbarHasKeyboardFocus?this.setEditorKeyboardFocused(r):this.setEditorMouseFocused(r),null===(n=(t=this.props).onFocus)||void 0===n||n.call(t)}setEditorFocusState(e){this.editorFocusState=e}setEditorFocusStateToolbar(e=!1){tn(this.editorRoot.classList,!1),e&&this.setEditorFocusState(td.mn.TOOLBAR)}isEditorFocusState(e){return this.editorFocusState===e}onBlurHandler(){clearTimeout(this.onBlurDebounce),clearTimeout(this.onFocusDebounce),this.editorContainer.removeEventListener("dragover",eJ.jo),this.onBlurDebounce=setTimeout(()=>{!this.editorHasFocus()&&this.isEditorFocusState(td.mn.FOCUSED)&&this.setState({toolbarHasKeyboardFocus:!1,editorHasKeyboardFocus:!1,editorHasMouseFocus:!1},()=>{this.getPluginModules().forEach(e=>{"function"==typeof e.onFormatChange&&e.onFormatChange(null)}),this.setEditorFocusState(td.mn.BLURRED),this.restoreQuillPlaceholder(),tn(this.editorRoot.classList,!1),ts(this.editorRoot.classList,!1),this.props.onBlur&&this.props.onBlur()})},100)}onFocusHandler(e){clearTimeout(this.onBlurDebounce),clearTimeout(this.onFocusDebounce),this.readOnly||this.editorContainer.addEventListener("dragover",eJ.jo),e&&e.target&&!this.props.isDisabled&&!this.props.isReadOnly&&(this.selectEmbeddedBlot(e.target),this.editorContainer.removeEventListener("focusin",this.onFocusHandler),e.target.focus({preventScroll:!0}),this.editorContainer.addEventListener("focusin",this.onFocusHandler)),this.onFocusDebounce=setTimeout(()=>{this.editorHasFocus()&&this.isEditorFocusState(td.mn.BLURRED)&&(window.getSelection().focusNode===this.editorRoot.firstChild&&this.quill.setSelection(0,0),this.setEditorFocusState(td.mn.FOCUSED),this.toolbarHasFocus()||(tn(this.editorRoot.classList,!0),this.setState({editorHasMouseFocus:!0})),this.editorHasKeyboardFocus()&&ts(this.editorRoot.classList,!0),this.toolbarHasFocus()||this.quill.hasFocus()||this.quill.focus(),this.props.onFocus&&this.props.onFocus())},100)}initializeQuill(){this.quillUnloadHandler=eE([...this.plugins],this.props,this.editorRoot),this.editorRoot.classList.add("bb-editor-container"),this.quill=new c.A(this.editorRoot,{placeholder:!this.props.isReadOnly&&this.props.placeholder,readOnly:this.props.isDisabled||this.props.isReadOnly,modules:{...ew,...this.getPluginModulesConfig()}}),this.getPluginModules().forEach(e=>{"function"==typeof e.onInit&&e.onInit(this.props.localize.getLocalePropsForClone(),this.applyEditorChange)}),this.quill.notifyPluginsOfPropChanges=this.notifyPluginsOfPropChanges.bind(this),this.editorRoot.firstChild.classList.add(td.sX),this.setEditorSize(),this.editorContainer.shouldEnableDemoMashup=!!this.props.plugins.reduce((e,t)=>t.length?[...e,...t]:[...e,t],[]).find(e=>e&&"demoMashup"===e.pluginId),this.editorContainer.shouldEnableDemoMashup&&(0,e1.U)(),this.addAxLabels(),this.props.disablePasteFormat?this.quill.clipboard.addMatcher(ex.selector,ex.func):ej.forEach(e=>{this.quill.clipboard.addMatcher(e.selector,e.func)}),function(e,t){t.forEach(n=>{if(n.matchers){let t;n.matchers.forEach(r=>{t="function"==typeof n.deltaModifier?n.deltaModifier:(e,t)=>{let r;let i=n.formatter&&n.formatter.blotName,o=i||n.pluginId;return(["embed","embedInline"].includes(n.formatter.type)?r={insert:{[o]:(0,X.gu)(e,n.formatter.attributes)},attributes:(0,X.gu)(e,n.formatter.attributes)}:"inline"===n.formatter.type&&((r={insert:e.textContent,attributes:(0,X.gu)(e,n.formatter.attributes)}).attributes[o]=(0,X.gu)(e,n.formatter.attributes)),"link"===i&&e.textContent&&e.textContent.trim().length)?eM(t,r.attributes):new(E())([r])},e.clipboard.addMatcher(r,t)})}e.clipboard.addMatcher(Node.TEXT_NODE,eK(t))})}(this.quill,this.plugins),te(this.editorRoot.classList,!this.props.isDisabled&&!this.props.isReadOnly),e3(this.editorRoot.classList,this.props.isDisabled),e9(this.editorRoot.classList,this.props.isReadOnly),ti(this.editorRoot.classList,!!this.props.errorMessage),this.onBbMLInputChange(this.props.bbml),this.notifyPluginsOfPropChanges(),this.quill.on(c.A.events.EDITOR_CHANGE,this.onEditorChange),this.quill.history.clear()}updateQuillEnable(e=!1){e&&!this.quill.isEnabled()?this.quill.enable(!0):!e&&this.quill.isEnabled()&&this.quill.enable(!1)}updateQuillPlaceholder(e){"string"==typeof e&&this.quill.root.setAttribute("data-placeholder",e)}restoreQuillPlaceholder(){1===this.quill.getContents().ops.length&&"string"==typeof this.quill.getContents().ops[0].insert&&"\n"===this.quill.getContents().ops[0].insert&&this.quill.setText("")}unloadPlugins(){var e;null===(e=this.quillUnloadHandler)||void 0===e||e.call(this),(0,eX.X)(this.bbEditorId,this.props.onModalOpen)}notifyPluginsOfPropChanges(){Array.from(this.editorRoot.querySelectorAll(".wants-props-update")).forEach(e=>{e.formatComponent&&e.formatComponent(this.props)})}onEditorChange(e,t,n,r){e!==c.A.events.SELECTION_CHANGE&&this.state.isApplyingChanges||e===c.A.events.SELECTION_CHANGE&&"silent"===r||e===c.A.events.TEXT_CHANGE&&"silent"===r||i.unstable_batchedUpdates(()=>{if(this.editorInitialContent||(this.editorInitialContent=this.quill.getContents().ops),e===c.A.events.SELECTION_CHANGE&&"user"===r&&(clearTimeout(this.extendSelection),this.extendSelection=setTimeout(()=>{this.extendTableSelection()},400)),e!==c.A.events.SELECTION_CHANGE||"user"!==r||this.state.isApplyingChanges||this.setState({editorLastContent:this.quill.getContents().ops}),e===c.A.events.TEXT_CHANGE){let e=this.quill.getContents().ops;this.onBbMLOutputChange(e),this.setState({editorLastContent:e})}if(this.editorContainsElement(document.activeElement)&&!this.props.isDisabled&&!this.props.isReadOnly&&e&&!this.state.isApplyingChanges){let e=t&&t.ops&&t.ops[t.ops.length-1].insert,r="string"==typeof e&&e.includes("\n"),i=this.getEditorFormat(),o={};r&&(Object.values(td.hR).forEach(e=>{i[e]&&(o[e]=i[e])}),o.selection=new p.Q(i.selection.index+1,0));let s=this.getEditorHasTableSelected(),a=!1;if(s)this.storedStack||(this.storedStack=this.quill.history.stack,this.quill.history.clear()),a=this.isDifferentTableSelected(n);else if(this.storedStack){let e=this.quill.history.stack,t=this.getDeltaChangeLength(e);this.storedStack.undo.forEach(e=>{e.undo.ops.forEach(e=>{e.retain&&e.retain>t.lowestRetain&&(e.retain+=t.offset)})}),this.quill.history.stack=this.storedStack,this.storedStack=void 0}a?this.resetTableSubtoolbar():this.setState({editorHasTableSelected:s}),this.setState({editorFormat:i,editorLastFormat:o,editorLastSelection:i.selection,editorLastRawSelection:i.rawSelection,toolbarHasKeyboardFocus:this.keyDownHandler.inToolbarScope(),editorHasCodeBlockSelected:this.getCodeBlockSelected()}),this.getPluginModules().forEach(e=>{"function"==typeof e.onFormatChange&&e.onFormatChange(i)})}})}getEditorSelection(){return this.quill.getSelection()||this.state.editorLastSelection}getEditorFormat(){let e=this.getEditorSelection(),t=this.quill.getText(e),n=this.quill.getContents(e),r=this.quill.getFormat(e),i={};return Object.keys(this.state.editorLastFormat).length?((i=this.state.editorLastFormat).selection=e,i.rawSelection=e):(0===e.length?i=r:e.length>0&&(i=n.ops.reduce((e,t)=>({...eZ(e,t),...t.attributes,..."object"==typeof t.insert?t.insert:{}}),r)),(i=this.updateFormatWithBlotSelection(i,t,e)).rawSelection=e),i}updateFormatWithBlotSelection(e,t,n){let r=0;return Object.keys(e).forEach(t=>{let n=e[t].domNode;if(n){let t=c.A.find(n);e.text=n.innerText,e.selection=new p.Q(t.offset(this.quill.scroll),t.length()),r+=1}}),(1!==r||n.index<e.selection.index||n.index+n.length>e.selection.index+e.selection.length)&&(e.text=t,e.selection=n),e}selectEmbeddedBlot(e){let t;let n=eh.find(e,!0),r=n&&n.constructor&&Object.getPrototypeOf(n.constructor).blotName;"embed"===r?(this.quill.setSelection(n.offset(this.quill.scroll)-1,2,c.A.sources.SILENT),this.onEditorChange(c.A.events.SELECTION_CHANGE),(t=n.domNode.querySelector("span > div:first-child")||n.domNode).classList.add("ql-embed-selected","no-select")):"embedInline"===r&&(this.quill.setSelection(n.offset(this.quill.scroll),1,c.A.sources.SILENT),this.onEditorChange(c.A.events.SELECTION_CHANGE),(t=n.domNode).classList.add("ql-embed-selected","no-select")),this.unselectEmbeddedBlots(t)}unselectEmbeddedBlots(e){let t=Array.from(this.editorRoot.querySelectorAll(".ql-embed-selected"));t.length&&t.forEach(t=>{t!==e&&t.classList.remove("ql-embed-selected","no-select")})}makeEmbedsEasierToEditAfter(){var e;let t=this.quill.getContents().ops,n=t.length-1;(t[n]&&"object"==typeof t[n].insert||t[n]&&"string"==typeof t[n].insert&&"\n"!==t[n].insert.substr(-1,1)||t[n]&&"string"==typeof t[n].insert&&"\n"===t[n].insert&&(null===(e=t[n].attributes)||void 0===e?void 0:e.table))&&this.quill.insertText(this.quill.scroll.length,"\n",c.A.events.SILENT)}applyEditorChange(e,t){this.setState({isApplyingChanges:!0},()=>{!function(e,t,n,r){let i=t.update?t.update.index:t.index,o=t.update?t.update.length:t.length;if(!e)return;let s=Array.isArray(e)?e:[e];if("object"==typeof t.raw&&s.length>0&&!t.update){let e=t.raw.index,r=t.raw.length,a=s.reduce((e,t)=>(Object.keys("object"==typeof t.format?t.format:t).forEach(t=>e[t]=!0),e),{}),l=Object.keys(n.getFormat(e,r)),u=l.length>0&&l.some(e=>e in a);s.length>0&&s.some(e=>!!e.insert)&&!u&&0===r&&(i=e,o=r)}s.forEach(e=>{let t=!!e.insert,s=t&&o>0,a="string"==typeof e.insert?e.insert:"",l=a.length>0,u="object"==typeof e.format?e.format:{},d=Object.keys(u).length>0;if(s&&n.deleteText(i,o,ey.sources.SILENT),t&&l&&!d)n.insertText(i,a),i+=a.length,o=0,n.setSelection(i,o,ey.sources.USER);else if(d){let e=Object.keys(u).filter(e=>"object"!=typeof u[e]),s=Object.keys(u).filter(e=>"object"==typeof u[e]),d=s.length>0?s.shift():null,m=d&&u[d],g=u.dangerouslyPasteHTML;if(t&&l){if(g){let e=n.getLength();n.clipboard.dangerouslyPasteHTML(i,a);let t=n.getLength();a=n.getText(i,t-e)}else{if(d){if(n.insertText(i,a,d,m,ey.sources.USER),"latex"===d){let e=Object.keys(n.getFormat(i,a.length)).filter(e=>"latex"!==e).reduce((e,t)=>(e[t]=!1,e),{});n.formatText(i,a.length,e,ey.sources.SILENT)}}else n.insertText(i,a,ey.sources.USER);o=a.length,n.setSelection(i,o,ey.sources.USER)}}else if(t&&!l&&(n.insertEmbed(i,d,m,ey.sources.USER),i+=1,o=0,n.setSelection(i,o,ey.sources.USER),d&&n.format(d,!1,ey.sources.USER),/firefox/i.test(navigator.userAgent)||/^((?!chrome|android).)*safari/i.test(navigator.userAgent))){var c,p;c=n.container,p=()=>n.focus(),setTimeout(()=>{let e=document.createElement("input");e.style.width=0,e.style.height=0,e.style.opacity=0,e.setAttribute("aria-hidden","true"),e.tabIndex=-1,c.appendChild(e),e.focus(),e.remove(),p()},0)}e.length&&(o>0||!t)&&e.forEach(e=>{let t=u[e];n.format(e,t,ey.sources.USER)}),t&&l?((null==u?void 0:u.selected)?o=a.length:(i+=a.length,o=0),n.setSelection(i,o,ey.sources.USER),d?n.insertText(i," ",d,!1,ey.sources.USER):n.insertText(i," ",ey.sources.USER),n.deleteText(i,1,ey.sources.USER),d&&(n.format(d,!1,ey.sources.USER),r(ey.events.TEXT_CHANGE))):r(ey.events.TEXT_CHANGE)}})}(e,{...this.state.editorLastSelection,raw:this.state.editorLastRawSelection,update:t},this.quill,this.onEditorChange),this.notifyPluginsOfPropChanges(),this.setState({isApplyingChanges:!1},()=>{this.onEditorChange(c.A.events.TEXT_CHANGE)})})}applyChangeAndSetEditorFocused(e){this.applyEditorChange(e),this.onToolbarActionComplete(!0)}quillModuleAction(e){let t;if("quill.history"===e.module&&(t=this.quill.history,"undo"===e.action)){t.undo();return}if("quill.table"===e.module)switch(t=this.quill.getModule("table"),e.action){case"insert-table":e.rowCount&&e.columnCount&&(t.insertTable(e.rowCount,e.columnCount,e.headerRow,e.headerColumn),this.setState({editorHasTableSelected:this.getEditorHasTableSelected()}));break;case"edit-table":e.rowCount&&e.columnCount&&t.editTable(e.rowCount,e.columnCount);break;case"get-table-info":return t.getTableData(this.state.tableHasHeaderRow,this.state.tableHasHeaderColumn);case"insert-row-above":t.insertRowAbove();break;case"insert-row-below":t.insertRowBelow();break;case"insert-col-left":t.insertColumnLeft();break;case"insert-col-right":t.insertColumnRight();break;case"delete-table":t.deleteTable();break;case"delete-row":t.deleteRow();break;case"delete-column":t.deleteColumn();break;case"set-header-row":t.updateHeaderRow(e.setHeader);break;case"set-header-col":t.updateHeaderCol(e.setHeader);break;case"saved-selection":t.updateNullSelection();break;case"get-headers":return this.setState({editorHasTableSelected:this.getEditorHasTableSelected()}),t.getTableHeadersValue();case"reset-table-subtoolbar":this.resetTableSubtoolbar()}if("plugins"===e.module){let t=this.getPluginModules();"read-only-change"===e.action&&t.forEach(t=>{t.onReadOnlyChange&&t.onReadOnlyChange(e.value,this.props.currentLocale)})}if(e.module||"clearFormat"!==e.action)return;let n=this.quill.getSelection();!(null==n?void 0:n.length)>0||(td.T8.forEach(e=>{this.quill.formatText(n.index,n.length,e,!1)}),td.r3.forEach(e=>{this.quill.format(e,!1)}))}onBbMLInputChange(e){var t;if("string"==typeof e){try{this.quill.clipboard.dangerouslyReplaceHTML(e)}catch(r){let n=e;if(null===(t=r.message)||void 0===t?void 0:t.includes("[Parchment]")){console.error(r);let t=/<[^>]*\s+\w+\s*=\s*[^"'][^>]*>/g.exec(e);if(t){let e=`<p>${n.substring(t.index).replaceAll("<","&lt;").replaceAll(">","&gt;")}</p>`;n=n.substring(0,t.index)+e}else n="<p>"+n.replaceAll("<","&lt;").replaceAll(">","&gt;")+"</p>"}this.quill.clipboard.dangerouslyReplaceHTML(n)}this.quillModuleAction({module:"plugins",action:"read-only-change",value:this.props.isReadOnly}),this.makeEmbedsEasierToEditAfter(),""!==e||this.editorInitialContent||(this.editorInitialContent=this.quill.getContents().ops)}}onBbMLOutputChange(e){let{editorLastContent:t}=this.state,{autoSaveCallback:n,autoSaveMilliseconds:r,onChange:i}=this.props,o=!(0,eH.bD)(e,t);this.isBbmlDirty=!(0,eH.bD)(e,this.editorInitialContent)&&("\n"!==e[0].insert||"\n"!==this.editorInitialContent[0].insert||e.length>1||this.editorInitialContent.length>1);let s=n&&"number"==typeof r;if((i||s)&&o){let t={toBbML:Z.A.toBbML.bind(null,e,this.props.isRtl),isDirty:this.isBbmlDirty,setPristine:e=>{this.setState({editorFormat:{text:"",selection:new p.Q(0,0)}}),this.onBbMLInputChange(e),this.editorInitialContent=this.quill.getContents().ops,this.onEditorChange(c.A.events.TEXT_CHANGE)}};i&&i(t),s&&(clearTimeout(this.autoSaveTimeout),this.autoSaveTimeout=setTimeout(()=>{n(t)},r))}}setToolbarState(e){let t=function(e,t){let n;switch(t){case td.y8.default:n=e>=td.D3?tH:e>=td.Vd?tY:tz;break;case td.y8.minimal:n=e>=td.f3?t0:t1;break;default:n=tz}return n}(e.getBoundingClientRect().width,this.props.toolbarSet);t!==this.state.toolbar&&this.setState({toolbar:t})}updateToolbar(e){if(this.editorContainer){let t=this.editorContainer;t.getBoundingClientRect().width<=0&&window.requestAnimationFrame?this.requestAnimationFrameID=window.requestAnimationFrame(this.updateToolbar):e&&"resize"===e.type?(clearTimeout(this.debounceWindowResizeToolbar),this.debounceWindowResizeToolbar=setTimeout(()=>this.setToolbarState(t),100)):this.setToolbarState(t)}}getPluginButtons(){return this.plugins.filter(e=>e.buttonConfig).map(e=>e.buttonConfig).map(e=>(e.key=e.id,e))}getPluginModules(){return this.plugins.map(e=>this.quill.getModule(e.pluginId)).filter(e=>!!e)}getPluginModulesConfig(){return this.plugins.reduce((e,t)=>(t.module&&(e[t.pluginId]=t.moduleParams||!0),e),{})}getEditorRect(){return this.editorContainer?this.editorContainer.getBoundingClientRect():null}isFileDropEnabled(){return!this.props.isDisabled&&!this.props.isReadOnly&&this.fileDragDropUtil.hasDropHandlers()}isFileOnEvent(e){return void 0!==e.dataTransfer.files&&e.dataTransfer.files.length>0}onDragEnter(){this.isFileDropEnabled()&&(this.dragCount+=1,ts(this.editorRoot.classList,!0))}onDragLeave(){this.isFileDropEnabled()&&(this.dragCount-=1,0===this.dragCount&&ts(this.editorRoot.classList,!1))}onDrop(e){this.isFileDropEnabled()&&this.isFileOnEvent(e)&&(this.dragCount=0,ts(this.editorRoot.classList,!1),this.fileDragDropUtil.onFileDrop(e))}getWordCount(){if(!this.quill)return 0;let e=this.quill.getText().trim();return 0===e.length?0:e.split(/\s+/).length}getDeltaChangeLength(e){let t=0,n=Number.MAX_SAFE_INTEGER;return e.undo.forEach(e=>{e.undo.ops.forEach(e=>{var r,i,o;e.retain&&(n=Math.min(n,e.retain)),t+=null!==(r=e.delete)&&void 0!==r?r:0,t-=null!==(o=null===(i=e.insert)||void 0===i?void 0:i.length)&&void 0!==o?o:0})}),n===Number.MAX_SAFE_INTEGER&&(n=0),{lowestRetain:n,offset:t}}getEditorHasTableSelected(){let e=this.getEditorSelection();return"table"in this.quill.getFormat(e)}getCodeBlockSelected(){let e=this.getEditorSelection();return"code-block"in this.quill.getFormat(e)}shouldShowToolbar(){return!this.props.isToolbarHidden&&!this.props.isReadOnly}isDifferentTableSelected(e){if(e){let t=this.quill.getFormat(e);if("table"in t){let e=this.getEditorSelection();return this.quill.getFormat(e).table!==t.table}}return!1}extendTableSelection(){var e,t;let n=document.getSelection();if("Range"!==n.type)return;let r=n.anchorNode;r.nodeType!==Node.ELEMENT_NODE&&(r=r.parentElement),r=null!==(e=r.closest("TD"))&&void 0!==e?e:r.closest("TH");let i=n.focusNode;if(i.nodeType!==Node.ELEMENT_NODE&&(i=i.parentElement),i=null!==(t=i.closest("TD"))&&void 0!==t?t:i.closest("TH"),!r&&!i)return;let o=n.anchorNode.compareDocumentPosition(n.focusNode)===Node.DOCUMENT_POSITION_FOLLOWING;if(r===i)return;let s=n.anchorNode,a=n.anchorOffset,l=n.focusNode,u=n.focusOffset;r&&(s=o?r.closest("TABLE"):r.closest("TABLE").nextSibling,a=0),i&&(l=o?i.closest("TABLE").nextSibling:i.closest("TABLE"),u=0),n.setBaseAndExtent(s,a,l,u)}resetTableSubtoolbar(){this.setState({editorHasTableSelected:!1,tableHasHeaderRow:void 0,tableHasHeaderColumn:void 0}),setTimeout(()=>this.setState({editorHasTableSelected:!0}))}setHeaders(e,t){this.setState({tableHasHeaderRow:e,tableHasHeaderColumn:t})}setEditorSize(){this.props.size&&-1!==td.iF.indexOf(this.props.size)&&this.editorRoot.firstChild.classList.add(`size-${this.props.size}`)}focusEditor(e,t){var n,r;null===(r=null===(n=this.editorRoot)||void 0===n?void 0:n.querySelector(`.${td.sX}`))||void 0===r||r.focus(e),t&&this.editorHasFocus()&&this.setEditorKeyboardFocused()}scrollEditorIntoView(e){var t,n;null===(n=null===(t=this.editorRoot)||void 0===t?void 0:t.querySelector(`.${td.sX}`))||void 0===n||n.scrollIntoView(e)}blurEditor(){var e,t;null===(t=null===(e=this.editorRoot)||void 0===e?void 0:e.querySelector(`.${td.sX}`))||void 0===t||t.blur()}render(){let{ariaLabel:e,isReadOnly:t,isDisabled:n,localize:i}=this.props,o=this.state.toolbar,s=this.getPluginButtons(),a=this.shouldShowToolbar(),l=(0,eH.ws)(),d=`bbmlEditor.editor.accessibilityAriaMessage${l?"MacOS":"WinOS"}`,c=`bbmlEditor.editor.accessibilityMessage${l?"MacOS":"WinOS"}`,p=(0,u.A)({"editor-content-container":!0,"keyboard-tooltip-container":!0,"no-toolbar":!a,"is-rtl":this.props.isRtl});return r.createElement(r.Fragment,null,t||n?null:r.createElement("div",{id:`${this.bbEditorId}-editorLabel`,className:"sr-only","aria-hidden":!0},null!=e?e:i.translate("bbmlEditor.editor.axDefaultLabel")),r.createElement("div",{ref:this.setEditorContainer,className:"bb-editor-root",role:"presentation",onKeyDown:this.onKeyDown,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave,onDrop:this.onDrop,onDragOver:this.fileDragDropUtil.onFileDragOver,onBlur:eJ.kI,onMouseDown:eJ.kI},a&&r.createElement(o,{isDisabled:this.props.isDisabled||this.props.isReadOnly,isRtl:this.props.isRtl,bbEditorId:this.bbEditorId,editorFormat:this.state.editorFormat,editorLastContent:this.state.editorLastContent,editorLastRawSelection:this.state.editorLastRawSelection,editorId:this.props.editorId,addKeyDownHandler:this.keyDownHandler.addKeyDownHandler,applyChange:this.applyEditorChange,quillModuleAction:this.quillModuleAction,toolbarActionComplete:this.onToolbarActionComplete,hasKeyboardFocus:this.state.toolbarHasKeyboardFocus,setEditorFocusStateToolbar:this.setEditorFocusStateToolbar,pluginButtons:s,getEditorRect:this.getEditorRect,editorHasTableSelected:this.state.editorHasTableSelected,editorHasCodeBlockSelected:this.state.editorHasCodeBlockSelected,rootContentId:this.props.rootContentId,setHeaders:this.setHeaders,tableHasHeaderRow:this.state.tableHasHeaderRow,tableHasHeaderColumn:this.state.tableHasHeaderColumn,onModalOpen:this.props.onModalOpen}),r.createElement("div",{className:p},r.createElement("div",{ref:this.setEditorRoot,role:"presentation"}),a&&this.state.shouldShowTooltip&&r.createElement(r.Fragment,null,r.createElement("span",{"aria-live":"polite",id:t4,className:"sr-only"},i.translate(d)),r.createElement("div",{className:"keyboard-tooltip"},i.translate(c))),this.props.errorMessage&&r.createElement("span",{className:"error-message"},this.props.errorMessage),this.props.showWordCount&&!this.props.isReadOnly&&a&&r.createElement("span",{className:"word-count"},i.translate("bbmlEditor.editor.wordCount",{count:this.getWordCount()})),r.createElement(t8,{onChange:this.handleSmallBreakpointChange}))))}}let t3=s().shape({buttonConfig:s().shape({id:s().string.isRequired,cssClass:s().string.isRequired,isActive:s().func.isRequired,onClick:s().func.isRequired}),formatter:s().shape({type:s().oneOf(["inline","embed","embedInline"]),tagName:s().string,attributes:s().shape(),renderDomNode:s().func}),matchers:s().arrayOf(s().string),onLoad:s().func,onUnload:s().func,pluginId:s().string,toBbML:s().func,toBbMLAsync:s().func});t2.propTypes={ally:e8,ariaLabel:s().string,ariaLabelledBy:s().string,ariaDescribedBy:s().string,ariaRequired:s().bool,autoSaveCallback:s().func,autoSaveMilliseconds:s().number,bbml:s().string,disablePasteFormat:s().bool,editorId:s().string,errorMessage:s().string,expandInlineFilesOnLoad:s().bool,isDisabled:s().bool,isReadOnly:s().bool,isRtl:s().bool,isToolbarHidden:s().bool,onChange:s().func,onBlur:s().func,onFocus:s().func,placeholder:s().string,plugins:s().arrayOf(s().oneOfType([t3,s().arrayOf(t3)])),rootContentId:s().string,size:s().oneOf(["small","medium"]),showWordCount:s().bool,toolbarSet:s().oneOf(["default","minimal"])},t2.defaultProps={ally:e4,ariaLabelledBy:null,ariaDescribedBy:null,ariaRequired:!1,autoSaveCallback:null,autoSaveMilliseconds:null,bbml:null,disablePasteFormat:!1,editorId:"bb-editor-textbox",errorMessage:null,isDisabled:!1,isReadOnly:!1,isRtl:!1,isToolbarHidden:!1,onChange:null,onFocus:null,onBlur:null,placeholder:null,plugins:[],rootContentId:null,size:null,showWordCount:!1,toolbarSet:"default",expandInlineFilesOnLoad:!1};var t6=(0,d.E)(t2)},165113:function(e,t,n){"use strict";function r(e,t,n){let r=e;return Object.keys(t).forEach(e=>{var i;let o=n[e.replace("data-","")],s=t[e];i=r,(o||s)&&i.setAttribute(e,o||s),r=i}),r}function i(e,t,n){return Object.keys(t).forEach(r=>{let i=n[r.replace("data-","")],o=t[r];i||o?e.setAttribute(r,i||o):void 0!==i&&("close"===r||"open"===r)&&e.setAttribute(r,i)}),e}function o(e,t,n=!1){let r=n?{domNode:e}:{};return Object.keys(t).reduce((t,n)=>{if(e.hasAttribute(n)){let r=e.getAttribute(n);"string"==typeof r&&r.slice(0,3)===encodeURIComponent("{")&&(r=decodeURIComponent(r)),t[n.replace("data-","")]=r}return t},r)}n.d(t,{Wp:function(){return r},gu:function(){return o},jh:function(){return i}})},730539:function(e,t,n){"use strict";n.d(t,{C7:function(){return i},Lx:function(){return a},W3:function(){return r.Hu},oM:function(){return o},t7:function(){return s}});var r=n(232709);let i="left",o="center",s="right",a="justify";r.Hu.whitelist=[i,o,s,a],r.Hu.createChange=(e=i)=>({format:{align:e}}),t.Ay=r.Hu},209919:function(e,t,n){"use strict";var r=n(696093);r.A.createChange=(e=!0)=>({format:{bold:e}}),t.A=r.A},672089:function(e,t,n){"use strict";var r=n(820151);r.A.createChange=(e=!0)=>({format:{"code-block":e,align:"left"}}),t.A=r.A},142873:function(e,t,n){"use strict";var r=n(491139),i=n(86507);r.JM.createChange=(e=i.Tj.Black)=>({format:{color:e}}),t.A=r.JM},361562:function(e,t,n){"use strict";n.d(t,{G:function(){return s},T:function(){return l}});var r=n(339574),i=n(780195),o=/*#__PURE__*/n.n(i);let s=new(o()).Attributor.Style("bullet-size","font-size",{scope:o().Scope.BLOCK});function a(e){let t=parseFloat(e.match(/[+-]?\d+(\.\d+)?/g));return`${(.6715*t+.7315).toFixed(3)}rem`}class l extends r.c{optimize(e){var t,n;if(super.optimize(e),this.children.length>0){let e=this.children.head,r=e.attributes;if(r&&r.attributes.size){let t=r.attributes.size.value(e.domNode),n=a(t);super.format("bullet-size",t),super.format("rtl"===document.dir?"custom-indent-rtl":"custom-indent",n);return}if(null===(n=null===(t=this.children.head.domNode)||void 0===t?void 0:t.style)||void 0===n?void 0:n.fontSize){let e=this.children.head.domNode.style.fontSize,t=a(e);super.format("bullet-size",e),super.format("rtl"===document.dir?"custom-indent-rtl":"custom-indent",t)}}else Object.prototype.hasOwnProperty.call(this.attributes,"bullet-size")&&super.format("bullet-size",null)}remove(){super.format("bullet-size",null),super.format("rtl"===document.dir?"custom-indent-rtl":"custom-indent",null),super.remove()}}},501271:function(e,t,n){"use strict";n.d(t,{$f:function(){return o},LD:function(){return s},OP:function(){return r.Mc}});var r=n(499625),i=n(730539);let o="rtl",s="ltr";r.Mc.whitelist=[s,o],r.Mc.createChange=(e=s)=>({format:{direction:e,align:"rtl"===e?i.t7:i.C7}}),t.Ay=r.Mc},434369:function(e,t,n){"use strict";n.d(t,{KQ:function(){return r.z},Ki:function(){return d},PL:function(){return s},V1:function(){return a},XZ:function(){return l},i:function(){return o},ik:function(){return i},zM:function(){return u}});var r=n(507387);let i="Arial",o="Comic Sans MS",s="Courier New",a="Noto",l="Open Sans",u="Times New Roman",d="Verdana";r.z.whitelist=[i,o,s,a,l,u,d];let c=r.z.value;r.z.value=function(e){if(e.style)return c.call(r.z,e);if(e.getAttribute("style")){let t=e.getAttribute("style"),n=/font-family:([^;]+);?/g.exec(t);if(n&&n[1])return n[1].trim()}return""},r.z.createChange=(e=l)=>({format:{font:e}}),t.Ay=r.z},540473:function(e,t,n){"use strict";var r=n(620555);r.A.createChange=(e=4)=>({format:{header:e}}),t.A=r.A},715640:function(e,t,n){"use strict";var r=n(669418);r.A.createChange=(e=!0)=>({format:{italic:e}}),t.A=r.A},948960:function(e,t,n){"use strict";n.d(t,{MG:function(){return o},Xk:function(){return i},d_:function(){return s},qj:function(){return a},zL:function(){return u}});var r=n(457561);let i="1",o="1.15",s="1.5",a="2",l=r.A.import("parchment"),u=new l.Attributor.Style("lineheight","line-height",{scope:l.Scope.BLOCK,whitelist:[i,o,s,a]});u.createChange=e=>({format:{lineheight:e}}),t.Ay=u},23988:function(e,t,n){"use strict";n.d(t,{B8:function(){return r.A},Tj:function(){return i.T}});var r=n(339574),i=n(361562);let o={ORDERED:"ordered",UNORDERED:"bullet"};r.A.createChange=(e=!0)=>({format:{list:e?o.UNORDERED:o.ORDERED}}),t.Ay=r.A},957977:function(e,t,n){"use strict";n.d(t,{MF:function(){return o},Mk:function(){return i},Mq:function(){return s},Xt:function(){return l},or:function(){return r.r},pV:function(){return d},sC:function(){return u},yR:function(){return a}});var r=n(813023);let i="0.625rem",o="0.75rem",s="0.875rem",a="1.125rem",l="1.5rem",u="2.25rem",d="3rem";r.r.whitelist=[i,o,s,a,l,u,d,"0.714em","0.857em","1em","1.286em","1.714em","2.571em","3.429em"],r.r.createChange=(e=s)=>({format:{size:e}}),t.Ay=r.r},685190:function(e,t,n){"use strict";var r=n(376392);r.A.createChange=(e=!0)=>({format:{strike:e}}),t.A=r.A},93571:function(e,t,n){"use strict";var r=n(745341);class i extends r.A{static create(){return document.createElement(i.tagName)}static formats(){return i.tagName}}i.createChange=(e=!0)=>({format:{superscript:!1,subscript:e}}),i.blotName="subscript",i.tagName="sub",t.A=i},921266:function(e,t,n){"use strict";var r=n(745341);class i extends r.A{static create(){return document.createElement(i.tagName)}static formats(){return i.tagName}}i.createChange=(e=!0)=>({format:{subscript:!1,superscript:e}}),i.blotName="superscript",i.tagName="sup",t.A=i},168698:function(e,t,n){"use strict";n.d(t,{BF:function(){return g},Hj:function(){return m},K3:function(){return E},cg:function(){return d},fs:function(){return y},nA:function(){return c},nd:function(){return p}});var r=n(880537),i=n(186765),o=n(393009),s=n(336339),a=n(745341),l=n(32219);let u=i.Ay.import("parchment");class d extends l.Ay{static create(e=y()){let t=super.create(this.tagName);return t.setAttribute("table_id",e),t}formats(){return{tablebr:this.domNode.getAttribute("table_id")}}}d.blotName="tablebr",d.tagName="p",d.className="tablebr";class c extends r.A{static create(e=y()){let t=super.create(this.tagName);return t.setAttribute("cell_id",e),t}static formats(e){if(e.hasAttribute("cell_id"))return e.getAttribute("cell_id")}formats(){return{...this.domNode.hasAttribute("cell_id")?{[this.statics.tagName.toLowerCase()]:this.domNode.getAttribute("cell_id")}:{}}}getIndexAndOffset(){return this.parent?f(this,this.parent.children):-1}format(e,t){e===this.blotName&&t?this.domNode.setAttribute("cell_id",t):super.format(e,t)}formatAt(e,t,n,r){(n!==this.domNode.nodeName||r!==this.formats(this.domNode))&&super.formatAt(e,t,n,r)}row(){return this.parent}rowOffset(){return this.row()?this.row().rowOffset():-1}table(){return this.row()&&this.row().table()}}c.blotName="table-cell",c.tagName="td";class p extends c{}p.blotName="table-head",p.tagName="th";class m extends r.A{static create(e=y()){let t=super.create(this.tagName);return t.setAttribute("row_id",e),t}formats(){return{...this.domNode.hasAttribute("row_id")?{[this.statics.tagName.toLowerCase()]:this.domNode.getAttribute("row_id")}:{}}}formatAt(e,t,n,r){(n!==this.blotName||r!==this.domNode.getAttribute("row_id"))&&super.formatAt(e,t,n,r)}rowOffset(){return this.parent?f(this,this.parent.children):-1}table(){return this.parent&&this.parent.parent}}m.blotName="table-row",m.tagName="tr";class g extends r.A{}g.blotName="table-body",g.tagName="TBODY";class E extends r.A{static create(e){let t=super.create(this.tagName);return t.setAttribute("table_id",e),t}formats(){return{...this.domNode.hasAttribute("table_id")?{[this.statics.tagName.toLowerCase()]:this.domNode.getAttribute("table_id")}:{}}}formatAt(e,t,n,r){(n!==this.blotName||r!==this.domNode.getAttribute("table_id"))&&super.formatAt(e,t,n,r)}balanceRows(){let e=this.descendants(m);if(!this.checkRowsMerge(e))return;let t={};e.forEach(e=>{let n=e.domNode.getAttribute("row_id");if(!n)return;let r=!t[n];r&&(t[n]={row:e,columns:{}});let i=t[n].columns;e.children.forEach(e=>{let r=e.domNode.getAttribute("cell_id");if(!i[r]){let o=this.createCell(e.statics.blotName,e.domNode.getAttribute("cell_id"),!1);i[r]={rowCell:o},t[n].row.appendChild(o)}let o=i[r].rowCell;e.children.forEach(e=>{"header"===e.statics.blotName?o.appendChild(e):o.children.head.appendChild(e)}),e.remove()}),r||e.remove()})}checkRowsMerge(e=this.descendants(m)){let t=[];if(e.length<=1)return!0;for(let n=0;n<e.length;n++){let r=e[n].domNode.getAttribute("row_id");if(t.includes(r))return!0;t.push(r)}return!1}cells(e){return this.rows().map(t=>t.children.at(e))}deleteColumn(e){if(null==this.children.head||e<0)return;let t=this.children.head;for(;null!==t;){let n=I(t,e);null!=n&&n.remove(),t=t.next}}createCell(e="td",t=y(),n=!0){let r=u.create(e,t),i=u.create("block");return n&&i.appendChild(u.create("text","\n")),r.appendChild(i),r}insertColumn(e,t){let n=0===e&&0===t&&this.hasHeaderCol(),r=n?p.blotName:c.blotName;n&&this.updateHeaderCol(!1),this.children.forEach(n=>{b(this.createCell(r),e,t,n)}),this.hasHeaderRow()&&this.checkHeaderRowConsistency()}insertRow(e,t){let n=u.create(m.blotName,y("row")),r=0===e&&0===t&&this.hasHeaderRow(),i=r?p.blotName:c.blotName,o=this.children.head.children.length;for(;o>0;){let e=this.createCell(i);n.appendChild(e),o-=1}r&&this.updateHeaderRow(!1),b(n,e,t,this),this.hasHeaderCol()&&this.checkHeaderColConsistency()}rows(){let e=this.children.head;return null==e?[]:e.children.map(e=>e)}updateHeaderRow(e=!0){let t=this.children.head.children.head;for(;null!==t;){let n=t.replaceWith(e?p.blotName:c.blotName,t.domNode.getAttribute("cell_id"));n.scroll&&n.formatAt(0,n.scroll.length(),e?p.tagName:c.tagName,t.domNode.getAttribute("cell_id")),t=n.next}this.checkHeaderIntersection()}updateHeaderCol(e=!0){let t=this.children.head;for(;null!==t;){let n=t.children.head,r=n.replaceWith(e?p.blotName:c.blotName,n.domNode.getAttribute("cell_id"));r.scroll&&r.formatAt(0,r.scroll.length(),e?p.tagName:c.tagName,n.domNode.getAttribute("cell_id")),t=t.next}this.checkHeaderIntersection()}hasHeaderRow(){var e;return this.children.head.children&&(this.children.head.children.tail.statics.blotName===p.blotName||(null===(e=this.children.head.children.head.next)||void 0===e?void 0:e.statics.blotName)===p.blotName)}hasHeaderCol(){var e;return this.children.tail.children&&(this.children.tail.children.head.statics.blotName===p.blotName||(null===(e=this.children.head.next)||void 0===e?void 0:e.children.head.statics.blotName)===p.blotName)}checkHeaderIntersection(){if(this.hasHeaderRow()||this.hasHeaderCol()){let e=this.children.head.children.head;e.statics.blotName!==p.blotName&&e.replaceWith(p.blotName,e.domNode.getAttribute("cell_id"))}}checkHeaderRowConsistency(){let e=this.children.head.children.head;for(;null!==e;)e.statics.blotName!==p.blotName&&e.replaceWith(p.blotName,e.domNode.getAttribute("cell_id")),e=e.next}checkHeaderColConsistency(){let e=this.children.head;for(;null!==e;){let t=e.children.head;t.statics.blotName!==p.blotName&&t.replaceWith(p.blotName,t.domNode.getAttribute("cell_id")),e=e.next}}getLastCell(){if(this.children&&this.children.head.children)return this.children.tail.children.tail}}E.blotName="table-container",E.tagName="table";let h=[...r.A.allowedChildren,s.A,a.A,o.A];function y(e="cell"){let t=Math.random().toString(36).slice(2,6);return`${e}-${t}`}function f(e,t){let n=0,r=t.head;for(;r!==e&&null!==r;)r=r.next,n+=1;return[n,r.offset(t)]}function b(e,t,n,r){if(r.children&&t+n>r.children.length-1)r.appendChild(e);else{let i=I(r,t+n);r.insertBefore(e,i)}}function I(e,t){let n=0,r=e.children.head;for(;n<e.children.length&&null!=r;){if(n===t)return r;r=r.next,n+=1}return null}E.allowedChildren=[g,m,...h],E.scope=u.Scope.BLOCK_BLOT,g.allowedChildren=[m,...h],g.requiredContainer=E,g.scope=u.Scope.BLOCK_BLOT,m.allowedChildren=[c,p,...h],m.requiredContainer=g,m.scope=u.Scope.BLOCK_BLOT,c.allowedChildren=[...h],c.requiredContainer=m,c.scope=u.Scope.BLOCK_BLOT,p.allowedChildren=[...h],p.requiredContainer=m,p.scope=u.Scope.BLOCK_BLOT},788778:function(e,t,n){"use strict";var r=n(167864);r.A.createChange=(e=!0)=>({format:{underline:e}}),t.A=r.A},475481:function(e,t,n){"use strict";n.d(t,{A:function(){return m}});var r=n(514041),i=n(865004),o=n(939067),s=/*#__PURE__*/n.n(o),a=n(528128),l=n(374980),u=n(777730);function d(e){let{onChange:t,onEnterKey:n,type:o,value:s,minValue:u,maxValue:d}=e,c=(0,i.W)(),[p,m]=(0,r.useState)(s),g=e=>!(e>d)&&!(e<u),E=()=>{let e=p+1;g(e)&&(m(e),t(e))},h=()=>{let e=p-1;g(e)&&(m(e),t(e))};return r.createElement("span",{className:"table-dialog-input-spinner"},r.createElement(l.AnalyticsIconButton,{"aria-label":c("column"===o?"bbmlEditor.toolbar.table-dialog-columns-spinner-minus-button.label":"bbmlEditor.toolbar.table-dialog-rows-spinner-minus-button.label"),onClick:h},r.createElement(a.Minus,null)),r.createElement(l.AnalyticsTextField,{id:`analyticTextField-${o}`,className:"table-dialog-input-spinner-text-field",placeholder:String(p),value:p,onChange:e=>{let n=Number(e.target.value);if(!Number.isNaN(n)){if(g(n))m(n),t(n);else if(n>d){let e=d.toString().length,r=Number(n.toString().substr(0,e-1));e<n.toString().length&&(r=d),m(r),t(r)}}},onKeyDown:e=>{switch(e.key){case"Enter":e.preventDefault(),e.stopPropagation(),n();break;case"ArrowUp":E();break;case"ArrowDown":h()}}}),r.createElement(l.AnalyticsIconButton,{"aria-label":c("column"===o?"bbmlEditor.toolbar.table-dialog-columns-spinner-add-button.label":"bbmlEditor.toolbar.table-dialog-rows-spinner-add-button.label"),onClick:E},r.createElement(a.Add,null)))}d.propTypes={onChange:s().func,onEnterKey:s().func,type:s().string,value:s().number,minValue:s().number,maxValue:s().number},d.defaultProps={onChange:null,onEnterKey:null,type:"",value:1,minValue:1,maxValue:10};var c=(0,u.withAnalytics)(d);function p(e){let t="table-dialog",{isEditingTable:n,quillModuleAction:o,editProps:s,closeAllMenus:u}=e,d=(0,i.W)(),[p,m]=(0,r.useState)({checkboxColumn:s.headerColumn,checkboxRow:s.headerRow,numberColumns:s.columns,numberRows:s.rows}),g=()=>{u(),e.destroy()},E=()=>{o({module:"quill.table",action:"saved-selection"}),n?(o({module:"quill.table",action:"edit-table",rowCount:p.numberRows,columnCount:p.numberColumns}),e.editProps.headerColumn===p.checkboxColumn||(o({module:"quill.table",action:"set-header-col",setHeader:p.checkboxColumn}),p.checkboxRow||o({module:"quill.table",action:"set-header-column",setHeader:p.checkboxColumn})),e.editProps.headerRow===p.checkboxRow||(o({module:"quill.table",action:"set-header-row",setHeader:p.checkboxRow}),p.checkboxColumn||o({module:"quill.table",action:"set-header-row",setHeader:p.checkboxRow})),o({module:"quill.table",action:"reset-table-subtoolbar"})):(o({module:"quill.table",action:"insert-table",rowCount:p.numberRows,columnCount:p.numberColumns,headerRow:p.checkboxRow,headerColumn:p.checkboxColumn}),u()),g()},h=e=>{m({...p,checkboxColumn:e.target.checked})},y=e=>{m({...p,checkboxRow:e.target.checked})};return r.createElement(l.AnalyticsDialog,{open:!0,maxWidth:"sm",onClose:g,"aria-labelledby":`${t}-dialog-title`},r.createElement(l.AnalyticsDialogTitle,{onClose:g,id:`${t}-dialog-title`},d(n?"bbmlEditor.toolbar.table-dialog-title-edit.label":"bbmlEditor.toolbar.table-dialog-title-insert.label")),r.createElement(l.AnalyticsDialogContent,null,r.createElement("div",{className:`${t}-columns-content`},r.createElement("label",{htmlFor:"analyticTextField-column"},d("bbmlEditor.toolbar.table-dialog-columns.label")),r.createElement(c,{onChange:e=>{m({...p,numberColumns:e})},type:"column",value:p.numberColumns,maxValue:n?Math.max(10,s.columns):10,onEnterKey:E})),r.createElement("div",{className:`${t}-rows-content`},r.createElement("label",{htmlFor:"analyticTextField-row"},d("bbmlEditor.toolbar.table-dialog-rows.label")),r.createElement(c,{onChange:e=>{m({...p,numberRows:e})},type:"row",value:p.numberRows,maxValue:n?Math.max(10,s.rows):10,onEnterKey:E})),r.createElement("span",{className:`${t}-header-selector`},r.createElement(l.AnalyticsFormControlLabel,{label:d("bbmlEditor.toolbar.table-dialog-headers-row.label"),control:r.createElement(l.AnalyticsCheckbox,{checked:p.checkboxRow,id:"dialogCheckboxRow"}),htmlFor:"dialogCheckboxRow",onChange:e=>{y(e)}}),r.createElement(l.AnalyticsFormControlLabel,{label:d("bbmlEditor.toolbar.table-dialog-headers-column.label"),control:r.createElement(l.AnalyticsCheckbox,{checked:p.checkboxColumn,id:"dialogCheckboxColumn"}),htmlFor:"dialogCheckboxColumn",onChange:e=>{h(e)}}),r.createElement(l.AnalyticsTooltip,{className:"info-tooltip",title:d("bbmlEditor.toolbar.table-dialog-tooltip.label"),placement:"top"},r.createElement(l.AnalyticsIconButton,{className:"info-tooltip","aria-label":d("bbmlEditor.toolbar.table-dialog-tooltip.axAriaText")},r.createElement(a.Information,null))))),r.createElement(l.AnalyticsDialogActions,null,r.createElement(l.AnalyticsDefaultButton,{onClick:g},d("bbmlEditor.buttons.cancel")),r.createElement(l.AnalyticsPrimaryButton,{onClick:E,id:"create-edit-table-primary-btn"},d(n?"bbmlEditor.buttons.save":"bbmlEditor.buttons.insert"))))}p.propTypes={quillModuleAction:s().func.isRequired,closeAllMenus:s().func.isRequired,isEditingTable:s().bool,editProps:s().shape({columns:s().number,rows:s().number,headerColumn:s().bool,headerRow:s().bool})},p.defaultProps={isEditingTable:!1,editProps:{columns:1,rows:1,headerColumn:!1,headerRow:!1}};var m=(0,u.withAnalytics)(p)},86507:function(e,t,n){"use strict";n.d(t,{Tj:function(){return u}});var r=n(514041),i=n(592671),o=n(374980),s=n(777730),a=n(939067),l=/*#__PURE__*/n.n(a);let u={Black:"#000000",Grey:"#666666",Purple:"#a234b5",Blue:"#046ef6",Green:"#1c8845",Red:"#e72218"};class d extends r.Component{render(){let{editorFormat:e,color:t,cssClass:n}=this.props;return r.createElement(o.AnalyticsListItemIcon,{classes:{root:`picker-color ${n}`}},(t===u.Black&&!e.color||e.color===t)&&r.createElement(i.r,null))}}d.propTypes={editorFormat:l().shape(),color:l().string,cssClass:l().string},d.defaultProps={editorFormat:{},color:null,cssClass:null},t.Ay=(0,s.withAnalytics)(d)},538642:function(e,t,n){"use strict";n.d(t,{X:function(){return a}});var r=n(374980),i=n(899473),o=n(514041),s=n(843144);function a(e,t){let n=document.querySelector(`#${e}`);null!=n&&(s.unmountComponentAtNode(n),n.remove()),null==t||t(!1)}t.A=(e,t,n)=>{setTimeout(()=>{var a;let l="bb-editor-modal";if(document.querySelector(`div.${l}`))return;let u=document.createElement("div");u.classList.add(l),t.bbEditorId&&(u.id=t.bbEditorId),document.body.appendChild(u),null===(a=t.onModalOpen)||void 0===a||a.call(t,!0),s.render(o.createElement(r.AnalyticsJssThemeProvider,{cssReset:"none",isRtl:n.isRtl,zIndex:{modal:1350}},o.createElement(i.h,{...n},o.createElement(e,{destroy:()=>{var e;s.unmountComponentAtNode(u),u.remove(),t.applyChange&&t.applyChange(),null===(e=t.onModalOpen)||void 0===e||e.call(t,!1)},...t}))),u)},250)}},796935:function(e,t,n){"use strict";n.d(t,{A:function(){return r},m:function(){return i}});class r extends Error{}function i(e){let t=new AbortController,n=new r("Promise has been cancelled"),i=new Promise((r,i)=>{e.then((...e)=>{t.signal.aborted?i(n):r(...e)}).catch(i),t.signal.addEventListener("abort",()=>i(n))});return i.cancel=()=>{"function"==typeof e.cancel&&e.cancel(),t.abort(n)},i.signal=t.signal,i.abortController=t,i}},171994:function(e,t,n){"use strict";function r(e){return e.preventDefault(),e.stopImmediatePropagation(),e.stopPropagation(),!1}function i(e){e.stopPropagation()}n.d(t,{jo:function(){return r},kI:function(){return i}})},734506:function(e,t,n){"use strict";n.d(t,{W:function(){return o},b:function(){return i}});var r=n(168698);function i(e){return!!e&&function(e){var t,n,i,o;let s=e instanceof HTMLElement?e:null==e?void 0:e.domNode;return(null===(t=null==s?void 0:s.tagName)||void 0===t?void 0:t.toLowerCase())===(null===(n=r.nA.tagName)||void 0===n?void 0:n.toLowerCase())||(null===(i=null==s?void 0:s.tagName)||void 0===i?void 0:i.toLowerCase())===(null===(o=r.nd.tagName)||void 0===o?void 0:o.toLowerCase())}(e)&&function(e){var t,n,i;let o=e instanceof HTMLElement?e.parentElement:null===(t=null==e?void 0:e.parent)||void 0===t?void 0:t.domNode;return(null===(n=null==o?void 0:o.tagName)||void 0===n?void 0:n.toLowerCase())===(null===(i=r.Hj.tagName)||void 0===i?void 0:i.toLowerCase())}(e)&&function(e){var t,n,i,o,s;let a=e instanceof HTMLElement?null===(t=e.parentElement)||void 0===t?void 0:t.parentElement:null===(i=null===(n=null==e?void 0:e.parent)||void 0===n?void 0:n.parent)||void 0===i?void 0:i.domNode;return(null===(o=null==a?void 0:a.tagName)||void 0===o?void 0:o.toLowerCase())===(null===(s=r.K3.tagName)||void 0===s?void 0:s.toLowerCase())}(e)}function o(e){var t,n;let r={"code-block":!0};if(i(e)){let i=null==e?void 0:e.domNode,o=null===(t=e.parent)||void 0===t?void 0:t.domNode,s=null===(n=e.parent.parent)||void 0===n?void 0:n.domNode;r[i.tagName.toLowerCase()]=null==i?void 0:i.getAttribute("cell_id"),r[o.tagName.toLowerCase()]=null==o?void 0:o.getAttribute("row_id"),r[s.tagName.toLowerCase()]=null==s?void 0:s.getAttribute("table_id")}return r}},689133:function(e,t,n){"use strict";n.d(t,{sX:function(){return y},iF:function(){return f},r3:function(){return u},yx:function(){return r},oE:function(){return i},mn:function(){return E},Vp:function(){return o},zs:function(){return s},hR:function(){return a},T8:function(){return l},D3:function(){return p},$V:function(){return h.A},Vd:function(){return m},f3:function(){return g},XM:function(){return d},y8:function(){return c}});let r={id:"editAttachment",type:"attachment"},i={id:"editYoutubeVideo",type:"embedded-app"},o=[r,i];var s={maxFileMB:2500,maxFileSize:262144e4};let a={Bold:"bold",Italic:"italic",Underline:"underline",Superscript:"superscript",Strike:"strike",Subscript:"subscript",List:"list"},l=["font","bold","italic","size","color","strike","underline","superscript","subscript"],u=["header","list","align","lineheight","direction"],d={small:"small",medium:"medium",large:"large"},c={default:"default",minimal:"minimal"},p=764,m=554,g=268;var E={BLURRED:"blurred",FOCUSED:"focused",TOOLBAR:"toolbar"},h=n(811379);n(151927);let y="bb-editor",f=["small","medium","large"]},151927:function(e,t){"use strict";t.A={outgoing:{initContent:"init_content"},incoming:{pageLoaded:"page_loaded",canceled:"content_canceled",contentReady:"content_ready"}}},693499:function(e,t,n){"use strict";n.d(t,{w:function(){return l}});var r=n(793741),i=n(410900),o=n(318728),s=n(406814);let a="contentCollection",l=e=>[{pluginId:a,buttonConfig:{id:a,cssClass:a,iconName:"content-collection",iconComponent:s.A,isDialog:!0,isActive:()=>!1,onClick:t=>{e.getOpenContentCollectionFunction(n=>{!function(e,t,n){let s=e.map(e=>{let t=decodeURIComponent(e.name);return{href:e.fullUrl,bbfile:{alternativeText:t,linkName:t,mimeType:e.type,render:o.hH4.Inline,fileSize:"number"==typeof e.size?e.size:parseInt(e.size,10)},originalFile:e}}).filter(e=>!!e.href),a=[];s.length>1?(s.forEach(({href:e,bbfile:t})=>{a=a.concat((0,i.A)(e,t,!0))}),n.applyChange(a)):1===s.length&&(0,r.mS)(s[0].bbfile,n.showModal,t,n,s[0].href)}(n,e,t)})}}}]},346229:function(e,t){"use strict";t.A=e=>`<html>
<head>
    <title>Demo Mashup</title>
    <script>

    function getParentOrigin() {
        const parentOrigin = '${e}';
        return parentOrigin;

        // Actual external demos should use the referrer
        // However in a sourceDoc-generated mashup the referrer is empty
        // const url = new URL(document.referrer);
        // return url.origin;
    }
        window.addEventListener('message', receiveMessage);
        window.onload = () => {
            window.URL.revokeObjectURL(window.location.href);
            window.parent.postMessage({ messageType: 'page_loaded' }, getParentOrigin());
        }
        window.onunload = () => {
            window.removeEventListener('message', receiveMessage);
        }
        const MESSAGE_LINK = {
            dataType: 'link',
            dataContent: {
                src: 'www.blackboard.com',
                alt: 'Test Link',
            },
            messageType: 'content_ready',
        };
        const MESSAGE_IMAGE = {
            dataType: 'image',
            dataContent: {
                src: '',
                alt: 'Test Image',
            },
            messageType: 'content_ready',
        };
        const MESSAGE_VIDEO = {
            dataType: 'video',
            dataContent: {
                src: 'https://www.w3schools.com/tags/movie.mp4',
                alt: 'Test Video',
            },
            messageType: 'content_ready',
        };
        const MESSAGE_AUDIO = {
            dataType: 'audio',
            dataContent: {
                src: 'https://www.w3schools.com/TAGS/horse.mp3',
                alt: 'Test Audio',
            },
            messageType: 'content_ready',
        };
        const MESSAGE_IFRAME = {
            dataType: 'embedded-app',
            dataContent: {
                src: '',
                alt: 'Test IFrame',
                embeddedAppConfig: {
                    id: 'demoMashup',
                    isEditable: undefined,
                },
            },
            messageType: 'content_ready',
        };

        const ROBO_HASH_URL = "https://robohash.org/";

        function receiveMessage(event) {
            if (event.data.messageType != 'init_content' || event.origin !== getParentOrigin()) {
                return;
            }

            const { dataToDisplay } = event.data;
            const mode = dataToDisplay ? dataToDisplay.mode : 'create';
            document.querySelector('#' + mode + '-container').classList.toggle('hide-container');
            if (mode === 'view') {
                let text = 'Robohash for ' +  dataToDisplay.content.dataContent.src.split('/')[3];
                document.querySelector('#view-container h4').innerText = text;
                document.querySelector('#view-container img').src = dataToDisplay.content.dataContent.src;
            }
            if (mode === 'edit') {
                document.querySelector('#edit-container input').value = dataToDisplay.content.dataContent.src.split('/')[3];
                document.querySelector('#edit-container button').onclick = () => {
                    const message = getEmbeddedAppMessage(true);
                    message.dataContent.src = ROBO_HASH_URL + document.querySelector('#edit-container input').value;
                    window.parent.postMessage(message, getParentOrigin());
                };
            }
        }

        function getRandomString(length) {
            var text = "";
            var possible = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";

            for (var i = 0; i < length; i++)
                text += possible.charAt(Math.floor(Math.random() * possible.length));

            return text;
        }

        function getRandomRoboHashURL() {
            return ROBO_HASH_URL + getRandomString(6);
        }

        function getEmbeddedAppMessage(isEditable) {
            let newMessage = MESSAGE_IFRAME;
            newMessage.dataContent.src = getRandomRoboHashURL();
            newMessage.dataContent.embeddedAppConfig.isEditable = isEditable;
            return newMessage;
        }

        function getImageMessage() {
            let newMessage = MESSAGE_IMAGE;
            newMessage.dataContent.src = getRandomRoboHashURL() + ".png";
            return newMessage;
        }

        function sendMessage(mashupType) {
            switch (mashupType) {
                case 'link':
                    window.parent.postMessage(MESSAGE_LINK, getParentOrigin());
                    break;
                case 'image':
                    window.parent.postMessage(getImageMessage(), getParentOrigin());
                    break;
                case 'video':
                    window.parent.postMessage(MESSAGE_VIDEO, getParentOrigin());
                    break;
                case 'audio':
                    window.parent.postMessage(MESSAGE_AUDIO, getParentOrigin());
                    break;
                case 'edit-embedded-app':
                    window.parent.postMessage(getEmbeddedAppMessage(true), getParentOrigin());
                    break;
                case 'nonedit-embedded-app':
                    window.parent.postMessage(getEmbeddedAppMessage(false), getParentOrigin());
                    break;
                default:
                    break;
            }
        }
    </script>
</head>
<style>
    .hide-container {
        display: none;
    }
</style>

<body>
    <div id="create-container" class="hide-container">
        <h3>This is a sample app to demonstrate posting messages from this content provider iFrame to the parent window (ie.
            Blackboard Learn/Ultra).</h3>
        <br />
        <h4>Click an anchor tag to post the respective message</h4>
        <br />
        <ul>
            <li>
                <a href="" onClick="sendMessage('link')">link</a>
            </li>
            <li>
                <a href="" onClick="sendMessage('image')">image</a>
            </li>
            <li>
                <a href="" onClick="sendMessage('video')">video</a>
            </li>
            <li>
                <a href="" onClick="sendMessage('audio')">audio</a>
            </li>
            <li>
                <a href="" onClick="sendMessage('edit-embedded-app')">editable embedded-app</a>
            </li>
            <li>
                <a href="" onClick="sendMessage('nonedit-embedded-app')">non-editable embedded-app</a>
            </li>
        </ul>
    </div>
    <div id="view-container" class="hide-container">
    <h4></h4>
    <img></img>
    </div>
    <div id="edit-container" class="hide-container">
    <h4>Change Robohash Text</h4>
    <input/>
    <button type="submit">Save</button>
    </div>
</body>
</html>
`},410900:function(e,t,n){"use strict";function r(e,t,n){let r=[{insert:"\n"},{insert:!0,format:{attachment:{bbtype:"attachment",bbfile:JSON.stringify(t),href:e}}}];return n||r.push({insert:"\n"}),r}n.d(t,{A:function(){return r}})},914059:function(e,t,n){"use strict";var r=n(514041),i=n(757536),o=n(241101),s=n(821793),a=n(663445),l=n(494351),u=n(689133),d=n(257500),c=n(351323),p=n(3103),m=n(979271),g=n(972306),E=n(5612),h=n(889749);let y="editAttachment",f="attachment",b=[`[data-bbtype=${f}][data-bbfile]`,"[data-bbfile]:not([data-bbtype])"],I="bb-edit-attachment-remove",A="bb-edit-attachment-reupload",v=e=>{var t;let n,o,a;let{editorProps:l,values:u,node:d,pluginConfig:p}=e,[y,f]=(0,r.useState)(u),b=r.useMemo(()=>JSON.parse(y.bbfile),[y.bbfile]),{href:v,metadata:S}=(0,s.A)(y.href,b);S.width&&S.height&&(n=S.width,o=S.height);let _=(0,c.Trf)(b);!(0,c.ua0)(_)||n&&o?(0,c.AER)(_)&&!l.isReadOnly&&(a={controls:!1,tabIndex:0}):a={className:"image--default"};let T=async e=>{var t,n;let r=await (0,h.Ay)(e);null===(t=l.onNewAttachmentSavePressed)||void 0===t||t.call(l),null===(n=l.onNewAttachmentCallback)||void 0===n||n.call(l),d.dispatchEvent(new CustomEvent(A,{detail:{file:r[0]}}));let i=JSON.stringify(r[0].bbfile);f(e=>({...e,bbfile:i}))},O=(null==p?void 0:p.supportsInlineDocumentRender)&&(null===(t=null==p?void 0:p.fileUploadSettings)||void 0===t?void 0:t.supportsInlineRender),C=(0,m.Y)(v,S,{supportsInlineDocumentRender:O}),[R,L]=(0,r.useState)(!1),D={file:C,readOnly:l.isReadOnly||l.isDisabled,showContextMenu:l.isReadOnly&&!l.isDisabled,onDelete:()=>d.dispatchEvent(new CustomEvent(I)),expandInlineFilesOnLoad:l.expandInlineFilesOnLoad,supportsInlineDocumentRender:O,customWidget:null==p?void 0:p.customWidget,inlineMediaAdditionalAttributes:a,onDownloadTriggered:()=>L(!0),onReuploadFiles:function(){T({...p,apiBasePath:E.$WB.apiBasePath,xsrfToken:E.$WB.xsrf,multiple:!1,localeProps:l.localize.getLocalePropsForClone()})}};return r.createElement(r.Fragment,null,r.createElement(i.h,{fileViewerProps:D,ally:l.ally,rootContentId:l.rootContentId}),r.createElement(g.U,{bbfile:b,plugins:l.plugins,downloaded:R}))},S=e=>t=>r.createElement(v,{...t,pluginConfig:e}),_=e=>({type:"embed",blotName:f,tagName:"div",attributes:{"data-bbtype":y,"data-bbfile":null,href:null},renderDomNode:(0,d.N)({processValues:e=>{let t;let n=JSON.parse(e.bbfile),{href:r,metadata:i}=(0,s.A)(e.href,n),o=(0,c.Trf)(n);return((0,c.AER)(o)||(0,c.ua0)(o)&&(0,c.ZpP)(n))&&!(0,c.lcq)(n)&&(t=["bb-file","ql-embed-selected--hidden"]),{...e,href:r,bbfile:JSON.stringify({...i,render:n.render||n.displayInline?i.render:void 0}),additionalRootClasses:t}},component:S(e),onUnmountComponent:e=>{e.removeEventListener(I,e.customDeleteEventHandler),e.removeEventListener(A,e.customReuploadEventHandler)}}),onBlotInit:(e,t)=>{e.customDeleteEventHandler=()=>t.remove(),e.addEventListener(I,e.customDeleteEventHandler),e.customReuploadEventHandler=n=>{let r=JSON.stringify(n.detail.file.bbfile);e.dataset.bbfile=r,t.domNode.setAttribute("data-bbfile",r),t.domNode.setAttribute("href",n.detail.file.href)},e.addEventListener(A,e.customReuploadEventHandler)}});function T(e,t){let n=JSON.parse(t.bbfile);return`<a href="${t.href}" data-bbtype="${f}" data-bbfile="${(0,o.Ay)(t.bbfile)}">${n.linkName||n.alternativeText}</a>`}t.Ay=e=>({pluginId:y,buttonConfig:{id:y,cssClass:y,iconName:"edit",iconComponent:l.f,isDialog:!0,isActive:e=>!!e[u.yx.type],onClick:({showModal:t,editorFormat:n,...r})=>{let i=JSON.parse(n[f].bbfile);t(a.A,{isEdit:!0,editorFormat:n,file:i,...e,...r,href:n[f].href})}},matchers:b,module:p.G,formatter:_(e),toBbML:T})},734622:function(e,t,n){"use strict";var r=n(514041),i=n(843144),o=n(145558),s=n(4586),a=n(158301),l=n(578503),u=n(226785),d=n(583307),c=n(241101),p=n(689133),m=n(720425),g=n(151927),E=n(921316),h=n(944763);let y="editYoutubeVideo",f="embedded-app",b=[`a[data-bbtype="${f}"]`],I="geolocation *; microphone *; camera *; midi *; encrypted-media *; fullscreen *",A=e=>({editorFormat:t,showModal:n,buttonNode:r,...i})=>new Promise((n,i)=>{let{embeddedAppConfig:o}=t.bbfile?JSON.parse(t.bbfile):{},{id:s}=o;(0,a.A)(s,e,r).then(e=>{e?n(e.srcURL):i()})}).then(r=>{let o=JSON.parse(t.bbfile);n(u.A,{goBack:()=>{},srcURL:r,editingData:o,...e,...i})}).catch(()=>{n(l.A,{destroy:i.destroy,messageType:"mashupNotAvailable"})});function v(e){let t=t=>{if(t.data.messageType!==g.A.incoming.pageLoaded||!e)return;let n=Array.from(e.querySelectorAll(".embedded-app-container")).find(e=>e.contentWindow===t.source);n&&n.onEmeddedAppLoaded&&n.onEmeddedAppLoaded(t)};return window.addEventListener("message",t),()=>{window.removeEventListener("message",t)}}let S=e=>({type:"embed",blotName:f,tagName:"div",attributes:{"data-bbtype":y,"data-bbfile":null},renderDomNode(t,n,l,u){var c;let p=JSON.parse(l.bbfile),{embeddedAppConfig:g,linkRefId:E}=p,{id:h}=g||{id:`content_market${E}_${Math.floor(1e3*Math.random())}`},y=(0,d.A)(t,n,l),f=document.createElement("div"),b=document.createElement("div"),A=document.createElement("div"),v={allow:I,className:"embedded-app-container hidden no-select",frameBorder:0,id:h,tabIndex:!u.isReadOnly||u.isDisabled?-1:0,width:"100%"};f.classList.add("bb-embedded-app"),p.width&&p.height&&(f.style.width=`${p.width}px`,f.style.height=`${p.height}px`),y.contentEditable="false",y.classList.add("wants-props-update"),y.style.paddingBottom=".1rem",y.style.overflow="hidden",y.style.display="flex",y.style.backgroundColor="#f8f8f8",y.style.justifyContent="center",A.classList.add("embedded-app-overlay"),b.classList.add("loading-container"),y.appendChild(f),i.render(r.createElement(o.Spinner,{size:o.SpinnerSize.large}),b);let S=u.localize.getLocalePropsForClone(),_={title:p.title||u.localize.translate("bbmlEditor.editor.lightboxDefaultTitle"),fullScreenButtonText:u.localize.translate("bbmlEditor.editor.fullScreenButtonText")},T=new s.d(f,S,v,{localizedStrings:_,firstFocusableContentSelector:`.${v.id}`});return(f.childNodes[0]||f.appendChild(document.createElement("div"))).classList.add("no-longtext"),f.appendChild(b),f.appendChild(A),y.formatComponent=e=>{T.update(S,{tabIndex:!e.isReadOnly||e.isDisabled?"-1":"0"},{})},g?(0,a.A)(h,e,t).then(t=>{let n=t.srcURL;T.update(S,{onEmeddedAppLoaded:t=>{var r;b.classList.replace("loading-container","hidden"),T.update(S,{className:"embedded-app-container no-select",src:n},{});let i=new URL(n,window.origin);if(t.origin===i.origin){let n={apiBasePath:e.apiBasePath,xsrfToken:e.xsrfToken,locale:S.locale},i=(0,m.yZ)(n,p);null===(r=t.source)||void 0===r||r.postMessage(i,t.origin)}}},{})}):null===(c=null==e?void 0:e.getEmbedSrc)||void 0===c||c.call(e,p).then(e=>{b.classList.remove("loading-container"),b.classList.add("hidden"),T.update(S,{src:e,allow:"autoplay *; fullscreen *; microphone *; encrypted-media *",className:"embedded-app-container no-select"},{})}),y}});function _(e,t){let n=JSON.parse(t.bbfile);return`<a href="${n.src}" data-bbtype="${f}" data-bbfile="${(0,c.Ay)(t.bbfile)}">${n.alt}</a>`}t.A=e=>({pluginId:y,buttonConfig:{id:y,cssClass:y,iconName:"app",iconComponent:E.q,isDialog:!0,isActive:e=>{let t=e.bbfile?JSON.parse((0,h.zY)(e.bbfile)):{};return!!e[p.oE.type]&&t&&t.embeddedAppConfig&&t.embeddedAppConfig.isEditable},onClick:A(e)},formatter:S(e),matchers:b,toBbML:_,onLoad:v,IFRAME_ALLOW:I})},593555:function(e,t,n){"use strict";function r(e,t,n){let r=[{insert:!0,format:{image:{bbtype:"image",bbfile:JSON.stringify(t),href:e}}}];return r.unshift({insert:"\n"}),n||r.push({insert:"\n"}),r}n.d(t,{A:function(){return r}})},793741:function(e,t,n){"use strict";n.d(t,{NC:function(){return E},mS:function(){return m}});var r=n(939067),i=/*#__PURE__*/n.n(r),o=n(663445),s=n(410900),a=n(914059),l=n(433167),u=n(889749),d=n(538642),c=n(255266);let p="insertLocalFile";function m(e,t,n,r,i){(t=t||d.A)(o.A,{file:e,...n,...r,href:i},r.localeProps)}function g(e,t,n,r){var i,o;let a=[];e.length>1?(e.forEach(({href:e,bbfile:t})=>{a=a.concat((0,s.A)(e,t,!0))}),r.applyChange(a),null===(i=null==n?void 0:n.onNewAttachmentSavePressed)||void 0===i||i.call(n),null===(o=r.onModalOpen)||void 0===o||o.call(r,!1)):m(e[0].bbfile,t,n,r,e[0].href)}let E=i().shape({apiBasePath:i().string,xsrfToken:i().string,courseId:i().string,fileLocation:i().string,webLocation:i().string,onUploadSuccess:i().func,supportsInlineDocumentRender:i().bool,hideFileDisplayOptions:i().bool});t.Ay=e=>[(0,a.Ay)(e),{pluginId:p,buttonConfig:{id:e&&e.buttonId||p,cssClass:p,iconName:"attachment",iconComponent:c.o,isDialog:!0,isActive:()=>!1,onClick:async({showModal:t,onModalOpen:n,...r})=>{null==n||n(!0),g(await (0,u.Ay)({...e,...r,multiple:!0,showModal:t}),t,e,{...r,onModalOpen:n})}},fileDropHandler:(t,n,r,i,o)=>{null==o||o(!0),(0,u.Ay)({applyChange:n,multiple:!0,...e,showModal:r},()=>Promise.resolve(t)).then(t=>{g(t,r,e,{applyChange:n,onModalOpen:o})})}},(0,l.A)(e)]},429944:function(e,t,n){"use strict";n.d(t,{A:function(){return a},k:function(){return s}});var r=n(593555),i=n(5392),o=n(40965);function s(e,t){let n=[{insert:!0,format:{"embedded-app":{bbtype:"embedded-app",bbfile:JSON.stringify({...e,alt:e.alt||e.src})}}}];return n.unshift({insert:"\n"}),t||n.push({insert:"\n"}),n}function a(e){switch(e.dataType){case"embedded-app":return s(e.dataContent);case"image":return(0,r.A)(e.dataContent.src,{alt:e.dataContent.alt});case"link":return(0,i.A)(e.dataContent.src,e.dataContent.alt);case"video":return(0,o.A)({src:e.dataContent.src,alt:e.dataContent.alt});case"audio":return function(e="",t=!0,n){let r=[{insert:!0,format:{audio:{bbtype:"audio",bbfile:JSON.stringify({alt:!0===t||"string"==typeof t&&0===t.length?e:t,src:e})}}}];return r.unshift({insert:"\n"}),r.push({insert:"\n"}),r}(e.dataContent.src,e.dataContent.alt);default:return null}}},226785:function(e,t,n){"use strict";var r=n(514041),i=n(939067),o=/*#__PURE__*/n.n(i),s=n(745256),a=n(3146),l=n(429944),u=n(151927),d=n(720425);class c extends r.Component{constructor(e){super(e),this.origin=new URL(e.srcURL).origin,this.postBackMashupInitConfig=this.postBackMashupInitConfig.bind(this),this.receiveMessage=this.receiveMessage.bind(this),this.onCancel=this.onCancel.bind(this),this.onInsert=this.onInsert.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this),this.state={isOpen:!1,content:null}}UNSAFE_componentWillMount(){window.addEventListener("message",this.receiveMessage,!1),setTimeout(()=>this.setState({isOpen:!0}))}componentWillUnmount(){window.removeEventListener("message",this.receiveMessage)}postBackMashupInitConfig(){let e;let{apiBasePath:t,xsrfToken:n,localize:{locale:r,isRtl:i},editingData:o}=this.props;this.iframeEl||(this.iframeEl=this.iframeContainerEl.getElementsByTagName("iframe")[0]);let s={apiBasePath:t,xsrfToken:n,locale:r,isRtl:i()};e=o?(0,d.$X)(s,o):(0,d.lm)(s),this.iframeEl.contentWindow.postMessage(e,this.origin)}receiveMessage(e){if(new URL(this.props.srcURL).origin===e.origin)switch(e.data.messageType){case u.A.incoming.pageLoaded:this.postBackMashupInitConfig();break;case u.A.incoming.canceled:this.onCancel();break;case u.A.incoming.contentReady:this.onInsert(e.data)}}onCancel(){this.setState({isOpen:!1})}onInsert(e){this.setState({isOpen:!1,content:e})}onAnimationComplete(){this.state.content&&this.props.applyChange((0,l.A)(this.state.content)),this.props.destroy()}render(){let{srcURL:e,localize:t}=this.props;return r.createElement(a.Modal,{containerClassName:"modal-youtube-video-provider",isBlocking:!1,isOpen:this.state.isOpen,onDismiss:this.onCancel,onDismissed:this.onAnimationComplete},r.createElement("div",{className:"iframe-container",ref:e=>{this.iframeContainerEl=e}},this.state.isOpen&&r.createElement("iframe",{title:t.translate("bbmlEditor.dialogs.youtubeVideoProviderModal.title"),src:e,frameBorder:0,className:"js-editor-video-container"})))}}c.propTypes={apiBasePath:o().string.isRequired,applyChange:o().func.isRequired,destroy:o().func.isRequired,editingData:o().shape(),srcURL:o().string.isRequired,xsrfToken:o().string.isRequired},c.defaultProps={editingData:null},t.A=(0,s.E)(c)},306978:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});let r=!1;t.A=e=>{if(!r||!e)return!1;let t=Array.from(document.querySelectorAll(".bb-editor-root")).find(t=>t.contains(e));return t&&t.shouldEnableDemoMashup};let i=()=>{r=!0}},5392:function(e,t){"use strict";let n=/^\w+:\/\/|^mailto:/;function r(e,t){return t?{[e]:t}:null}t.A=function(e,t,i,o){if(e.length<1)return{insert:t};let s=e;return n.test(s)||(s=`http://${s}`),{insert:t||s,format:{link:{href:s,...r("bbfile",i),...r("bbtype",o)}}}}},722407:function(e,t,n){"use strict";n.d(t,{Ay:function(){return T},NC:function(){return _}});var r=n(939067),i=/*#__PURE__*/n.n(r),o=n(813834),s=/*#__PURE__*/n.n(o),a=n(180783),l=n(903152),u=n(748913),d=n(165113);let c={math:{xmlns:null,style:null,mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,display:null,maxwidth:null,overflow:null,altimg:null,"altimg-width":null,"altimg-height":null,"altimg-valign":null,alttext:null,cdgroup:null},maction:{mathcolor:null,mathbackground:null,actiontype:null,selection:null},maligngroup:{mathcolor:null,mathbackground:null,groupalign:null},malignmark:{mathcolor:null,mathbackground:null,edge:null},menclose:{mathcolor:null,mathbackground:null,notation:null},merror:{mathcolor:null,mathbackground:null},mfenced:{mathcolor:null,mathbackground:null,open:null,close:null,separators:null},mfrac:{mathcolor:null,mathbackground:null,linethickness:null,numalign:null,denomalign:null,bevelled:null},mi:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},mlongdiv:{mathcolor:null,mathbackground:null,longdivstyle:null},mmultiscripts:{mathcolor:null,mathbackground:null,subscriptshift:null,superscriptshift:null},mn:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},mo:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,form:null,fence:null,separator:null,lspace:null,rspace:null,"stretc hy":null,symmetric:null,maxsize:null,minsize:null,largeop:null,movablelimits:null,accent:null,linebreak:null,lineleading:null,linebreakstyle:null,linebreakmultchar:null,indentalign:null,indentshift:null,indenttarget:null,indentalignfirst:null,indentshiftfirst:null,indentalignlast:null,indentshiftlast:null},mover:{mathcolor:null,mathbackground:null,accent:null,align:null},mpadded:{mathcolor:null,mathbackground:null,height:null,depth:null,width:null,lspace:null,voffset:null},mphantom:{mathcolor:null,mathbackground:null},mprescripts:{},mroot:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},mrow:{mathcolor:null,mathbackground:null,dir:null},ms:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,lquote:null,rquote:null},mscarries:{mathcolor:null,mathbackground:null,position:null,location:null,crossout:null,scriptsizemultiplier:null},mscarry:{mathcolor:null,mathbackground:null,location:null,crossout:null},msgroup:{mathcolor:null,mathbackground:null,position:null,shift:null},msline:{mathcolor:null,mathbackground:null,position:null,length:null,leftoverhang:null,rightoverhang:null,mslinethickness:null},mspace:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,indentalign:null,indentshift:null,indenttarget:null,indentalignfirst:null,indentshiftfirst:null,indentalignlast:null,indentshiftlast:null,width:null,height:null,depth:null,linebreak:null},msqrt:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},msrow:{mathcolor:null,mathbackground:null,position:null},mstack:{mathcolor:null,mathbackground:null,align:null,stackalign:null,charalign:null,charspacing:null},mstyle:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null,scriptlevel:null,displaystyle:null,scriptsizemultiplier:null,scriptminsize:null,infixlinebreakstyle:null,decimalpoint:null},msub:{mathcolor:null,mathbackground:null,subscriptshift:null},msubsup:{mathcolor:null,mathbackground:null,subscriptshift:null,superscriptshift:null},msup:{mathcolor:null,mathbackground:null,superscriptshift:null},mtable:{mathcolor:null,mathbackground:null,align:null,rowalign:null,columnalign:null,groupalign:null,alignmentscope:null,columnwidth:null,width:null,rowspacing:null,columnspacing:null,rowlines:null,columnlines:null,frame:null,framespacing:null,equalrows:null,equalcolumns:null,displaystyle:null,side:null,minlabelspacing:null},mtd:{mathcolor:null,mathbackground:null,rowspan:null,columnspan:null,rowalign:null,columnalign:null,groupalign:null},mtext:{mathcolor:null,mathbackground:null,mathvariant:null,mathsize:null,dir:null},mtr:{mathcolor:null,mathbackground:null,rowalign:null,columnalign:null,groupalign:null},munder:{mathcolor:null,mathbackground:null,accentunder:null,align:null},munderover:{mathcolor:null,mathbackground:null,accent:null,accentunder:null,align:null},none:{},semantics:{definitionURL:null,encoding:null},annotation:{definitionURL:null,encoding:null,cd:null,name:null,src:null},"annotation-xml":{definitionURL:null,encoding:null,cd:null,name:null,src:null}};function p(e){return{...c[e]}}var m=n(955730),g=n(119189);let E="math",h={"data-mathml":null},y=!1;function f(e,t=!1,n=""){return t?{insert:!0}:""===n?{insert:!0,format:{[E]:{mathml:e}}}:{insert:`$$${n}$$`,format:{[l.HM]:{mathml:e}}}}let b=[...Object.keys(c),"img[data-mathml]"],I=(e,t)=>{let n=e.tagName.toLowerCase(),r=p(n);return new(s())("img"===n?[{insert:{[E]:(0,d.gu)(e,h)},attributes:(0,d.gu)(e,h)}]:[{insert:{[n]:{...(0,d.gu)(e,r),children:t.ops}},attributes:(0,d.gu)(e,r)}])};function A(e,t){return t.mathml}function v(e){e&&e.forEach(e=>{S(e.target,e.target.alt)})}function S(e,t){if(y)e.setAttribute("role","img");else{let n=document.createElement("span");n.classList.add("sr-only"),e.parentElement.appendChild(n),n.textContent=t}}let _=i().shape({apiBasePath:i().string,xsrfToken:i().string,courseId:i().string,locale:i().string});var T=e=>{let t=new g.MY(e);return[{pluginId:E,buttonConfig:{id:E,cssClass:E,iconName:"insert_formula",iconComponent:m.C,isDialog:!0,isActive:e=>!!e[E]&&!!e[E].mathml,onClick:({showModal:t,...n})=>{t(a.A,{createChange:f,...e,...n})}},matchers:b,deltaModifier:I,formatter:function(e){let t=new MutationObserver(v);return{type:"embedInline",blotName:E,tagName:"span",attributes:h,renderDomNode:(n,r,i,o)=>{let s=null;if(i.mathml)s=(0,u.g)(i.mathml);else if(i.children&&Array.isArray(i.children)){let e=document.createElement("math");e=(0,d.Wp)(e,p("math"),i),i.children.forEach(t=>(function e(t,n){if("string"==typeof n.insert){let e=document.createTextNode(n.insert);t.appendChild(e)}else if("object"==typeof n.insert){let r=Object.keys(n.insert).find(e=>void 0!==c[e]);if(r){let i=document.createElement(r),o=p(r);i="mfenced"===r?(0,d.jh)(i,o,n.attributes||{}):(0,d.Wp)(i,o,n.attributes||{});let s=n.insert[r].children;s&&Array.isArray(s)&&s.forEach(t=>e(i,t)),t.appendChild(i)}}})(e,t)),s=e.outerHTML}return(0,d.Wp)(n,r,{...i,...s?{mathml:s}:null}),n.classList.add("formula-container"),n.innerHTML=s,t.observe(n,{subtree:!0,attributes:!0,attributeFilter:["alt"]}),n.classList.add("wants-props-update"),n.formatComponent=e=>{var t;for(let r of(y=e.isReadOnly,n.parentElement.getElementsByClassName("Wirisformula")))r.nextSibling||(null===(t=r.nextSibling)||void 0===t?void 0:t.getAttribute()("sr-only"))||S(r,r.alt)},e.parseElement(n),n}}}(t),toBbML:A,onLoad:function(){t.load()}},(0,l.Ay)(e)]}},973790:function(e,t,n){"use strict";var r=n(526660),i=/*#__PURE__*/n.n(r),o=n(310567),s=n(906616),a=/*#__PURE__*/n.n(s),l=n(479283);let u=null,d=!1;function c(e,t){let n={language:t,fontFamily:"Times New Roman"};return e&&(n.mml=e),com.wiris.jsEditor.JsEditor.newInstance(n)}t.A=({courseId:e,apiBasePath:t,xsrfToken:n,locale:r})=>{let s=e?`/courses/${e}`:"",p=(0,l.xA)(`${t}/v1${s}/editor/v4/configurations`),m=(0,l.xA)(`${t}/v1${s}/mathEditor/v3/mathMLToImage`);function g(e){return{wirisEditorUrl:(0,l.xA)(e.editorUrl)}}return{getAltText:function(e){if(!u)return Promise.reject();let t=o.stringify({service:"mathml2accessible",mml:e,lang:r});return i()({url:u,method:"POST",headers:{"X-Blackboard-XSRF":n,"Content-type":"application/x-www-form-urlencoded"},data:t})},getMathMLToImageURL:function(e){return new Promise((t,r)=>{i()({url:m,method:"POST",headers:{"X-Blackboard-XSRF":n},data:{mathML:e}}).then(e=>t(e.data.mathMLImageURL)).catch(r)})},newInstance:function(e){return new Promise((t,n)=>{d?t(c(e,r)):i()({url:p,method:"GET"}).then(o=>{var s;(s=o.data.contextPath,i()({url:`${s}app/configurationjs`,method:"GET"})).then(i=>{let{wirisEditorUrl:o}=g(i.data);u=(0,l.xA)("/webapps/vtbe-tinymce/app/service"),new Promise((t,n)=>{a()(o,()=>{try{d=!0,t(c(e,r))}catch(e){d=!1,n()}})}).then(e=>t(e)).catch(n)}).catch(n)}).catch(n)})},parseConfiguration:g,getLaTeXFromMathML:function(e){let t=o.stringify({service:"mathml2latex",mml:e,lang:r});return new Promise((e,r)=>{i()({url:u,method:"POST",headers:{"X-Blackboard-XSRF":n,"Content-type":"application/x-www-form-urlencoded"},data:t}).then(t=>e(t)).catch(r)})}}}},109134:function(e,t,n){"use strict";n.d(t,{A:function(){return O}});var r,i,o=n(573147),s=n(645250),a=n(374980),l=n(514041),u=n(843144);class d{constructor(e){this.overlay=e.overlay,this.elem=e.elem,this.quillRoot=e.quill.root,this.blotRoot=e.blotRoot,this.localeProps=e.localeProps,this.editorFormat=e.editorFormat,this.isSmallBreakpoint=e.isSmallBreakpoint,this.requestUpdate=e.onUpdate,this.startChange=e.onStartChange,this.stopChange=e.onStopChange,this.applyChange=e.applyChange}onCreate(){}onDestroy(){}onUpdate(){}}var c=n(683900),p=n(587949),m=n(528128),g=n(865004),E=n(430168);function h(e){return{filetype:e.formatType?e.formatType:"media",fileDisplayName:e.alternativeText?e.alternativeText:""}}let y=({onClick:e,buttonAccessibleProps:t})=>{let n=(0,g.W)(),r=h(t);return l.createElement(p.v,{analyticsId:"media-content.delete",title:n("bbmlEditor.buttons.deleteMedia.label"),"aria-label":n("bbmlEditor.buttons.deleteMedia.axAriaText",r),onClick:e,value:""},l.createElement(m.Trash,null))},f=({videoURL:e,buttonAccessibleProps:t})=>{let n=(0,g.W)(),r=h(t);return l.createElement(p.v,{analyticsId:"media-content.preview.button",title:n("bbmlEditor.buttons.PreviewMedia.label"),"aria-label":n("bbmlEditor.buttons.PreviewMedia.axAriaText",r),onClick:()=>{window.open(e,"_blank","noopener,noreferrer")},value:""},l.createElement(m.OpenInNewWindow,null))};var b=n(899473),I=n(384224),A=n(734506);(r=i||(i={})).TopLeft="tl",r.TopRight="tr",r.BottomRight="br",r.BottomLeft="bl";let v=Number.MAX_SAFE_INTEGER;var S=n(171994);let _={ResizeExtension:class extends d{constructor(e){super(e),this.currentDragHandle=null,this.tl=null,this.tr=null,this.br=null,this.bl=null,this.originalSize=null,this.aspectRatio=1,this.minWidth=200,this.maxWidth=1e3,this.minHeight=200,this.maxHeight=v,this.dragStart=null,this.size={width:0,height:0},this.keyboardDelta=0,this.hasValidResize=!1,this.isResizeInProgress=!1,this.lastRequestAnimationFrameId=0,this.lastCursor="",this.handleMouseDown=e=>{if(!this.elem)return;let t=e.target;if(!(t instanceof HTMLDivElement))return;let n=t.getAttribute("data-corner");(function(e){let t=[i.TopLeft,i.TopRight,i.BottomRight,i.BottomLeft];return null!==e&&t.includes(e)})(n)&&(this.currentDragHandle={corner:n,element:t},this.dragStart={x:e.clientX,y:e.clientY},document.addEventListener("mousemove",this.handleMouseMove,!1),document.addEventListener("mouseup",this.handleMouseUp,!1),this.hasValidResize=!1,this.setCursor(n),this.setUserSelect(!0),this.startChange(),e.preventDefault(),e.stopPropagation())},this.handleMouseMove=e=>{var t;let n;if(!this.dragStart)return;let r=e.clientX-this.dragStart.x;switch(null===(t=this.currentDragHandle)||void 0===t?void 0:t.corner){case i.TopLeft:case i.BottomLeft:n=-r;break;case i.TopRight:case i.BottomRight:n=r;break;default:n=0}this.resize(n),e.preventDefault(),e.stopPropagation()},this.handleMouseUp=e=>{this.hasValidResize&&this.applyChange(this.size),document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.clearCursor(),this.setUserSelect(!1),this.stopChange(),e.preventDefault(),e.stopPropagation()},this.handleKeyDown=e=>{if(!e.shiftKey||!this.isValidResizeKeyEvent(e))return;let t=10;e.altKey&&(t=1),this.currentDragHandle=this.currentDragHandle={corner:i.BottomRight,element:this.br},this.isResizeInProgress||(this.hasValidResize=!1,this.setUserSelect(!0),this.startChange(),this.isResizeInProgress=!0),e.key===I.U.ArrowLeft||e.key===I.U.ArrowUp?this.keyboardDelta=this.clampDelta(this.keyboardDelta-t):(e.key===I.U.ArrowRight||e.key===I.U.ArrowDown)&&(this.keyboardDelta=this.clampDelta(this.keyboardDelta+t)),this.resize(this.keyboardDelta),e.stopPropagation(),e.preventDefault()},this.handleKeyUp=e=>{(!this.isResizeInProgress||!e.shiftKey)&&(this.isResizeInProgress||this.isValidResizeKeyEvent(e))&&(this.hasValidResize&&this.applyChange(this.size),this.setUserSelect(!1),this.isResizeInProgress=!1,this.stopChange(),e.stopPropagation(),e.preventDefault())},this.container=document.createElement("div"),this.container.classList.add("resize-container")}clampDelta(e){if(!this.originalSize)return(0,s.clamp)(e,this.minWidth,this.maxWidth);let t=this.originalSize.width+e;return(0,s.clamp)(t,this.minWidth,this.maxWidth)-this.originalSize.width}resize(e){if(!this.originalSize)return;let t=this.originalSize.width+e,n=(0,s.clamp)(t,this.minWidth,this.maxWidth),r=n/this.aspectRatio,o={};this.size.width=n,this.size.height=r,this.hasValidResize=!0,cancelAnimationFrame(this.lastRequestAnimationFrameId),this.lastRequestAnimationFrameId=requestAnimationFrame(()=>{var n;let r,s;if(this.originalSize){switch(this.minWidth<=t&&t<=this.maxWidth?(s=`${-e/this.aspectRatio}px`,r=`${-e}px`):t>this.maxWidth?(s=`${(this.originalSize.width-this.maxWidth)/this.aspectRatio}px`,r=`${this.originalSize.width-this.maxWidth}px`):(s=`${(this.originalSize.width-this.minWidth)/this.aspectRatio}px`,r=`${this.originalSize.width-this.minWidth}px`),null===(n=this.currentDragHandle)||void 0===n?void 0:n.corner){case i.TopLeft:o.top=s,o.left=r;break;case i.TopRight:o.top=s,o.right=r;break;case i.BottomLeft:o.bottom=s,o.left=r;break;case i.BottomRight:o.bottom=s,o.right=r;break;default:throw TypeError("Could not detect a valid corner type")}Object.assign(this.container.style,o)}}),this.requestUpdate()}isValidResizeKeyEvent(e){return e.key===I.U.ArrowLeft||e.key===I.U.ArrowUp||e.key===I.U.ArrowRight||e.key===I.U.ArrowDown}addDragHandle(e){var t;let n=`resize-drag-handle--${e}`,r=document.createElement("div");return r.classList.add("resize-drag-handle",n),r.setAttribute("data-corner",e),r.addEventListener("mousedown",this.handleMouseDown),null===(t=this.container)||void 0===t||t.appendChild(r),r}setUserSelect(e){e?(this.quillRoot.classList.add("no-select"),document.documentElement.classList.add("no-select")):(this.quillRoot.classList.remove("no-select"),document.documentElement.classList.remove("no-select"))}setCursor(e){let t=`resize-cursor-${e}`;this.lastCursor.length>0?(document.body.classList.replace(this.lastCursor,t),this.elem.classList.replace(this.lastCursor,t)):(document.body.classList.add(t),this.elem.classList.add(t)),this.lastCursor=t}clearCursor(){this.lastCursor.length>0&&(document.body.classList.remove(this.lastCursor),this.elem.classList.remove(this.lastCursor)),this.lastCursor=""}onCreate(){let{elemWidth:e,elemHeight:t}=function(e){let t=e.getBoundingClientRect(),n=t.width,r=t.height;return e instanceof HTMLImageElement?(n||(n=e.naturalWidth),r||(r=e.naturalHeight)):e instanceof HTMLVideoElement&&(n||(n=e.videoWidth),r||(r=e.videoHeight)),{elemWidth:n,elemHeight:r}}(this.elem);this.originalSize={width:e,height:t},this.aspectRatio=e/t;let n=this.quillRoot.getBoundingClientRect();this.minWidth=Math.max(200,.25*n.width),this.maxWidth=n.width,this.minHeight=200,this.maxHeight=v,this.aspectRatio<1?this.minHeight=Math.max(this.minHeight,this.minWidth/this.aspectRatio):this.aspectRatio>1&&(this.minWidth=Math.max(this.minWidth,this.aspectRatio*this.minHeight)),this.isSmallBreakpoint||(0,A.b)(this.blotRoot.parentElement)||(this.tl=this.addDragHandle(i.TopLeft),this.tr=this.addDragHandle(i.TopRight),this.br=this.addDragHandle(i.BottomRight),this.bl=this.addDragHandle(i.BottomLeft),this.blotRoot.addEventListener("keydown",this.handleKeyDown),this.blotRoot.addEventListener("keyup",this.handleKeyUp)),this.overlay.appendChild(this.container)}onDestroy(){this.hasValidResize=!1,this.originalSize=null,this.aspectRatio=1,this.blotRoot.removeEventListener("keydown",this.handleKeyDown),this.blotRoot.removeEventListener("keyup",this.handleKeyUp),this.clearCursor()}},OptionsExtension:class extends d{constructor(){var e;let t,n;super(...arguments),this.container=document.createElement("div"),this.shouldShowPreviewButton=(this.elem instanceof HTMLIFrameElement||this.elem instanceof HTMLVideoElement)&&this.elem.src,this.buttonAccessibleProps=(e=this.editorFormat,(0,E.Fv)(e)?{alternativeText:JSON.parse(e.video.bbfile).alt,formatType:e.video.bbtype}:(0,E.vP)(e)?{alternativeText:JSON.parse(e.image.bbfile).alt,formatType:e.image.bbtype}:(0,E.v6)(e)?{alternativeText:JSON.parse(e.attachment.bbfile).displayName,formatType:e.attachment.bbtype}:{alternativeText:t,formatType:n}),this.handleOnDelete=()=>{this.applyChange(null)}}onCreate(){this.container.classList.add("options-container"),this.overlay.appendChild(this.container),u.render(l.createElement(a.AnalyticsJssThemeProvider,{cssReset:"none",isRtl:this.localeProps.isRtl},l.createElement(b.h,{...this.localeProps},this.shouldShowPreviewButton&&l.createElement(c.Box,null,l.createElement(f,{videoURL:this.elem.src,buttonAccessibleProps:this.buttonAccessibleProps})),l.createElement(c.Box,null,l.createElement(y,{onClick:this.handleOnDelete,buttonAccessibleProps:this.buttonAccessibleProps})))),this.container)}onDestroy(){u.unmountComponentAtNode(this.container)}}};class T extends o.A{constructor(e,t={}){var n;super(e,t),this.initializeExtensions=()=>{this.removeExtensions(),this.extensions=this.extensionClasses.map(e=>new(_[e]||e)(this)),this.extensions.forEach(e=>{e.onCreate()}),this.onUpdate()},this.removeExtensions=()=>{this.extensions.forEach(e=>{e.onDestroy()}),this.extensions=[]},this.show=e=>{this.elem=e;let t=function(e,t){if(!e.contains(t))return null;let n=t,r=t.parentElement;for(;r!==e&&!(0,A.b)(r);)r=(null==(n=r)?void 0:n.parentElement)||null;return n}(this.quill.root,this.elem);this.blotRoot=null!=t?t:this.elem,this.showOverlay(),this.initializeExtensions()},this.showOverlay=()=>{this.overlay&&this.hideOverlay(),this.overlay=document.createElement("div"),this.overlay.classList.add("media-overlay"),this.overlay.addEventListener("mousedown",S.jo),this.blotRoot.classList.add("with-overlay"),this.blotRoot.appendChild(this.overlay),this.repositionElements()},this.hide=()=>{this.removeExtensions(),this.hideOverlay(),this.elem=void 0,this.blotRoot=void 0},this.hideOverlay=()=>{this.blotRoot&&this.blotRoot.classList.remove("with-overlay"),this.overlay&&(this.overlay.remove(),this.overlay=void 0)},this.repositionElements=()=>{if(!this.overlay||!this.elem)return;let e=this.elem.getBoundingClientRect();Object.assign(this.overlay.style,{top:"0px",width:`${e.width+2}px`,height:`${e.height+2}px`})},this.quill=e;let r=!1;t.extensions&&(r=t.extensions.slice()),this.options=(0,s.defaultsDeep)({},t),!1!==r&&(this.options.extensions=r),this.onInit=this.onInit.bind(this),this.onReadOnlyChange=this.onReadOnlyChange.bind(this),this.onBreakpointChange=this.onBreakpointChange.bind(this),this.onFormatChange=this.onFormatChange.bind(this),this.applyChange=this.applyChange.bind(this),this.onStartChange=this.onStartChange.bind(this),this.onStopChange=this.onStopChange.bind(this),this.onUpdate=this.onUpdate.bind(this),this.extensionClasses=null!==(n=this.options.extensions)&&void 0!==n?n:[],this.extensions=[]}onInit(e,t){this.localeProps=e,this.applyEditorChange=t}onReadOnlyChange(e){e&&this.hide()}onBreakpointChange(e){this.isSmallBreakpoint=e,e&&this.removeExtensions()}onFormatChange(e){if(!e){this.hide(),this.editorFormat=null;return}if((0,s.isEqual)(this.editorFormat,e)){this.repositionElements();return}this.hide(),this.editorFormat=this.filterFormat(e),this.editorFormat&&(this.elem=this.getMediaElement(this.editorFormat.domNode)),this.elem?this.show(this.elem):this.editorFormat=null}onStartChange(){this.blotRoot.classList.add("with-change")}onStopChange(){this.blotRoot.classList.remove("with-change")}onUpdate(){this.repositionElements(),this.extensions.forEach(e=>{e.onUpdate()})}filterFormat(e){return null}getMediaElement(e){return null}createChange(e){return{}}applyChange(e){if(null===e)this.applyEditorChange({insert:!0});else{let t=this.quill.root.getBoundingClientRect(),n=this.elem.getBoundingClientRect().height-e.height,r=`${t.height-n}px`;Object.assign(this.quill.root.style,{minHeight:r}),this.applyEditorChange(this.createChange({...e})),Object.assign(this.quill.root.style,{minHeight:""})}}}T.DEFAULTS={extensions:Object.keys(_)};var O=T},975812:function(e,t,n){"use strict";function r({src:e,title:t,alt:n,uuid:r,availabilityMessage:i,bbfile:o}){return[{insert:"\n"},{insert:!0,format:{collab_video:{src:e,title:t,alt:n,bbfile:o||JSON.stringify({video_uuid:r}),info:null!=i?i:null}}},{insert:"\n"}]}n.d(t,{A:function(){return r}})},214198:function(e,t,n){"use strict";n.d(t,{Ay:function(){return h},wV:function(){return m}});var r=n(514041),i=n(939067),o=/*#__PURE__*/n.n(i),s=n(374980),a=n(528128),l=n(745256),u=n(351323),d=n(888097),c=n(865004);let p=({analyticsId:e,preventClosing:t,onDiscard:n})=>{let[i,o]=(0,r.useState)(!1),[a,l]=(0,r.useState)(),u=(0,c.W)();return(0,d.bf)(e=>{t&&(e.preventRouteChange(),o(!0),l(e))}),r.createElement(s.AnalyticsDialog,{open:i,analyticsId:e,classes:{root:"discard-dialog-root"}},r.createElement(s.AnalyticsDialogTitle,{analyticsId:`${e}.title`},u("bbmlEditor.dialogs.discardDialog.title")),r.createElement(s.AnalyticsDialogContent,{analyticsId:`${e}.content`},r.createElement(s.AnalyticsDialogContentText,{analyticsId:`${e}.content.text`},u("bbmlEditor.dialogs.discardDialog.content"))),r.createElement(s.AnalyticsDialogActions,{analyticsId:`${e}.actions`},r.createElement(s.AnalyticsDefaultButton,{analyticsId:`${e}.cancel`,onClick:()=>{o(!1)}},u("global.cancel")),r.createElement(s.AnalyticsPrimaryButton,{analyticsId:`${e}.discard`,onClick:()=>{var e,t;n(),d.QB.goRoute(null!==(e=null==a?void 0:a.toState.name)&&void 0!==e?e:"",null!==(t=null==a?void 0:a.toParams)&&void 0!==t?t:{})}},u("global.discard"))))};function m(){let e=document.querySelector("div.modal-video-everywhere-contents > iframe");e&&(e.height=`${e.offsetWidth*(700/1200)}px`)}let g="bbml-editor.modal-video.interactable.dialog";class E extends r.Component{constructor(e){super(e),this.state={isOpen:!1,shrinkScreen:!0,screenSize:"md"},this.onCancel=this.onCancel.bind(this),this.onAnimationComplete=this.onAnimationComplete.bind(this),this.onMinimizeMaximizeClick=this.onMinimizeMaximizeClick.bind(this)}componentDidMount(){this.timer=setTimeout(()=>{this.setState({isOpen:!0},()=>{window.addEventListener("resize",m)})})}UNSAFE_componentWillReceiveProps(e){!e.isOpen&&this.state.isOpen&&this.onCancel()}componentWillUnmount(){clearTimeout(this.timer),window.removeEventListener("resize",m)}onCancel(){this.setState({isOpen:!1}),this.onAnimationComplete()}onAnimationComplete(){this.props.destroy&&this.props.destroy()}getAllowAttribute(){return this.props.allowMedia?"geolocation *; microphone *; camera *; midi *; encrypted-media *; fullscreen *":null}componentDidUpdate(e,t){if(e.shrinkScreen!==this.state.shrinkScreen&&m(),this.props.mediaQuery!==t.mediaQuery||e.shrinkScreen!==this.state.shrinkScreen){let e;e=this.props.mediaQuery?this.state.shrinkScreen?"sm":"md":this.state.shrinkScreen?"md":"lg",this.state.screenSize!==e&&this.setState({screenSize:e})}}onMinimizeMaximizeClick(){this.setState(e=>({shrinkScreen:!e.shrinkScreen}))}render(){return r.createElement(r.Fragment,null,r.createElement(s.AnalyticsDialog,{analyticsId:`${g}.dialog`,open:this.state.isOpen,maxWidth:this.state.screenSize,hideBackdrop:!0,disableEnforceFocus:!0,disableBackdropClick:!0,PaperComponent:s.AnalyticsPaper,classes:{root:"modal-video-everywhere-dialog",paper:"modal-video-everywhere-dialog-paper"}},r.createElement("div",{className:"dialog-header"},r.createElement(s.AnalyticsTypography,{variant:"h3"},this.props.title),r.createElement("div",null,r.createElement(s.AnalyticsIconButton,{analyticsId:`${g}.resize`,onClick:this.onMinimizeMaximizeClick,"aria-label":this.props.localize.translate("bbmlEditor.dialogs.icon.shrinkScreen")},this.state.shrinkScreen?r.createElement(a.Maximize,{fontSize:"small"}):r.createElement(a.MinimizeApp,{fontSize:"small"})),this.props.showCloseButton&&r.createElement(s.AnalyticsIconButton,{analyticsId:`${g}.cancel`,onClick:this.onCancel,"aria-label":this.props.localize.translate("bbmlEditor.dialogs.icon.close")},r.createElement(a.Close,{fontSize:"small"})))),r.createElement("div",{className:"modal-video-everywhere-contents"},this.props.src&&r.createElement("iframe",{tabIndex:"0",title:this.props.title,src:this.props.src,frameBorder:"0",width:"100%",height:"100%",scrolling:"no",allow:this.getAllowAttribute(),allowFullScreen:!0,onLoad:m}))),r.createElement(p,{preventClosing:this.state.isOpen,analyticsId:`${g}.confirmation-dialog`,onDiscard:this.onCancel}))}}E.propTypes={allowMedia:o().bool,destroy:o().func,isOpen:o().bool,showCloseButton:o().bool,src:o().string,title:o().string.isRequired},E.defaultProps={allowMedia:!1,destroy:null,isOpen:!1,showCloseButton:!0,src:null};var h=(0,l.E)((0,u.BIY)({query(e){return e.breakpoints.down("sm")}})(E))},243589:function(e,t,n){"use strict";var r=n(514041),i=n(165217),o=n(939067),s=/*#__PURE__*/n.n(o),a=n(214198),l=n(321672);class u extends r.Component{constructor(e){super(e),this.state={isOpen:!1}}UNSAFE_componentWillMount(){this.promise=(0,l.A)(this.props.service.getPlaybackLink(this.props.videoId)).then(e=>{this.setState({src:e.data.result,isOpen:!0},a.wV)})}componentWillUnmount(){this.promise.cancel()}render(){let{destroy:e,t,showCloseButton:n}=this.props;return r.createElement(a.Ay,{destroy:e,showCloseButton:n,src:this.state.src,isOpen:this.state.isOpen,title:t("bbmlEditor.dialogs.collab_video.playbackTitle")})}}u.propTypes={destroy:s().func,videoId:s().string.isRequired,service:s().shape({getPlaybackLink:s().func.isRequired}).isRequired,showCloseButton:s().bool},u.defaultProps={destroy:null,showCloseButton:!0},t.A=(0,i.T)(u)},714020:function(e,t){"use strict";t.A="collab_video"},707301:function(e,t){"use strict";t.A=[".mp4"]},40965:function(e,t,n){"use strict";function r(e,t){let n=[{insert:!0,format:{video:{bbtype:"video",bbfile:JSON.stringify(e)}}}];return n.unshift({insert:"\n"}),t||n.push({insert:"\n"}),n}n.d(t,{A:function(){return r}})},975934:function(e,t,n){"use strict";var r=n(336250),i=n(583307),o=n(241101),s=n(707301),a=n(147196),l=n(944763),u=n(869366);let d="video",c=e=>!(!e.isReadOnly||e.isDisabled),p=({bbFile:e,editorProps:t})=>{let n=document.createElement("iframe");return n.frameBorder=0,n.setAttribute("allowFullScreen",""),n.tabIndex=c(t)?"0":"-1",n.title=e.alt,n.src=e.src,n.classList.add("no-select"),e.width&&e.height&&(n.height=e.height,n.width=e.width),n},m=({bbFile:e,editorProps:t})=>{let{isReadOnly:n,isDisabled:r}=t,i=document.createElement("video");return i.autoplay=!1,i.controls=!(!n||r),i.playsinline=!0,i.ariaLabel=e.alt,i.src=e.src,i.classList.add("no-select"),e.width&&e.height&&(i.height=e.height,i.width=e.width),i},g=[`[data-bbtype="${d}"][data-bbfile]`],E={type:"embed",tagName:"div",attributes:{"data-bbtype":d,"data-bbfile":null},renderDomNode:(e,t,n,r)=>{let o;let a=JSON.parse((0,l.zY)(n.bbfile)),u=!s.A.some(e=>a.src&&a.src.toLowerCase().endsWith(e)),{isReadOnly:d}=r,g=document.createElement("span");g.classList.add("sr-only"),g.textContent=a.alt;let E=document.createElement("div");E.tabIndex=0,E.classList.add("video-placeholder"),E.classList.add("no-select"),d&&E.classList.add("hidden"),E.appendChild(g),o=u?p({bbFile:a,editorProps:r}):m({bbFile:a,editorProps:r});let h=document.createElement("div");h.classList.add("bb-video-embed"),a.width&&a.height?h.classList.add("bb-video-embed--resize"):h.classList.add("bb-video-embed--default"),h.appendChild(E),h.appendChild(o);let y=(0,i.A)(e,t,n);return y.contentEditable=!1,y.classList.add("bb-video"),y.classList.add("wants-props-update"),y.classList.add("ql-embed-selected--hidden"),y.formatComponent=e=>{o.tabIndex=!e.isReadOnly||e.isDisabled?"-1":"0",o.controls=!(!e.isReadOnly||e.isDisabled),E.tabIndex=!e.isReadOnly||e.isDisabled?"0":"-1",c(e)?E.classList.add("hidden"):E.classList.remove("hidden")},y.formatComponent(r),y.appendChild(h),y}};function h(e,t){let n=JSON.parse((0,l.zY)(t.bbfile));return`<a href="${n.src}" data-bbtype="${d}" data-bbfile="${(0,o.Ay)(t.bbfile)}">${n.alt}</a>`}t.A=e=>({pluginId:d,buttonConfig:{id:d,cssClass:`${d}`,iconName:"video",iconComponent:a.C,isDialog:!0,isActive:e=>!!e[d],onClick:({showModal:t,...n})=>{t(r.A,{...e,...n})}},matchers:g,module:u.A,formatter:E,toBbML:h})},468139:function(e,t){"use strict";t.A=(e,t)=>new Promise((n,r)=>{let i=document.getElementById("browseForFiles");i&&i.remove();let o=document.createElement("input");o.id="browseForFiles",o.classList.add("sr-only"),o.tabIndex="-1",o.role="presentation",o.type="file",(null==t?void 0:t.length)>0&&(o.accept=t.join(",")),o.multiple=!!e,o.onchange=e=>{let t=e.target.files;o.remove(),n(t)},document.body.appendChild(o),document.querySelector(".data-e2e-simulate-file-input")||o.click()})},80033:function(e,t,n){"use strict";n.d(t,{E:function(){return i},x:function(){return o}});var r=n(5612);class i extends Error{constructor(e,t){super(t),this.errorData=e}getErrorFiles(){return this.errorData.errorFiles}getAllowedFiles(){return this.errorData.allowedFiles}}class o{constructor(e,t){this.sizeLimitInBytes=e,this.customFileUploadSettings=t}validate(e){let t=r.a5S.filterOversizedFiles(e,this.customFileUploadSettings,this.sizeLimitInBytes),n=r.a5S.filterValidSizedFiles(e,this.customFileUploadSettings,this.sizeLimitInBytes);if(t.length>0)throw new i({errorFiles:t,allowedFiles:n},"File is larger than the maximum file size")}}},772724:function(e,t,n){"use strict";n.d(t,{A:function(){return b}});var r=n(514041),i=n(745256),o=n(939067),s=/*#__PURE__*/n.n(o),a=n(309546),l=n(909196),u=n(274271),d=/*#__PURE__*/n.n(u),c=n(777730),p=n(526660),m=/*#__PURE__*/n.n(p),g=n(479283);function E(e,t,n){return m()({url:n,method:"GET",headers:{"X-Blackboard-XSRF":t},cancelToken:new(m()).CancelToken(t=>{e.cancelInternal=t})})}class h{constructor(e,t){if(e.cloudStorageIntegrationAccessToken){this.progressTick=0,this.file=e;let n=(0,g.xA)(`${t.apiBasePath}/v1/cloudstorages`),r=(0,g.xA)(`${n}/cloudstorageintegration/contents/${encodeURIComponent(e.id)}/download?accessToken=${e.cloudStorageIntegrationAccessToken}&expand=mimeType,isMedia`);E(this,t.xsrfToken,r).then(e=>this.queryDownload(e,n,t.xsrfToken)).catch(e=>this.onError(e))}else{this.progressTick=0,this.file=e;let n=(0,g.xA)(`${t.apiBasePath}/v1/files?expand=mimeType,isMedia`);t.courseId&&(n=`${n}&courseId=${t.courseId}`),Number.isFinite(t.resizeImageWidth)&&(n=`${n}&resizeImageWidth=${t.resizeImageWidth}`);let r=new FormData;r.append("file",e,encodeURIComponent(e.name)),r.append("webLocation",t.webLocation||""),r.append("fileLocation",t.fileLocation||""),m()({url:n,method:"POST",headers:{"Content-Type":"image/jpeg","X-Blackboard-XSRF":t.xsrfToken},data:r,cancelToken:new(m()).CancelToken(e=>{this.cancelInternal=e}),onUploadProgress:e=>this.onProgress(e)}).then(e=>this.onSuccess(e)).catch(e=>this.onError(e))}}onSuccess(e){this.cachedResponse=e,this.successCallback&&this.successCallback(this.file,e.data)}onProgress(e,t){if(this.cachedProgress=e,this.progressCallback){if(t){this.progressCallback(this.file.name,Math.floor(e));return}e.lengthComputable&&this.progressCallback(this.file.name,Math.floor(100*e.loaded/e.total))}}onError(e){this.cachedError=e,this.errorCallback&&this.errorCallback(this.file,e)}queryDownload(e,t,n){return new Promise(r=>{"COMPLETE"===e.data.status?(this.cloudStorageIntegrationTimer&&clearTimeout(this.cloudStorageIntegrationTimer),r(this.onSuccess(e))):this.cloudStorageIntegrationTimer=setTimeout(()=>{this.onProgress(+e.data.completePercentage,!0),r(E(this,n,`${t}/tasks/${e.data.taskId}?accessToken=${this.file.cloudStorageIntegrationAccessToken}&expand=mimeType,isMedia`).then(e=>this.queryDownload(e,t,n)).catch(e=>this.onError(e)))},500)})}cancel(){delete this.errorCallback,delete this.progressCallback,delete this.successCallback,this.cachedResponse||this.cachedError||this.cancelInternal()}progress(e){return this.progressCallback=e,this.cachedProgress&&this.onProgress(this.cachedProgress),this}success(e){return this.successCallback=e,this.cachedResponse&&this.onSuccess(this.cachedResponse),this}error(e){return this.errorCallback=e,this.cachedError&&this.onError(this.cachedError),this}}var y=n(304943);class f extends r.Component{constructor(e){super(e),this.state={files:[],fileGroup:{}},this.uploadServices={},this.progressTimers={},this.failedUploads=[],this.successfulUploads=[],this.updateProgress=this.updateProgress.bind(this),this.onCancel=this.onCancel.bind(this),this.onCancelAll=this.onCancelAll.bind(this),this.onDismiss=this.onDismiss.bind(this),this.onUploadSuccess=this.onUploadSuccess.bind(this),this.onUploadError=this.onUploadError.bind(this),this.finishUploading=this.finishUploading.bind(this)}UNSAFE_componentWillMount(){let{files:e}=this.props;this.setState({files:e}),e.forEach(e=>{let t=!1;this.uploadServices[e.name]=new h(e,{apiBasePath:this.props.apiBasePath,xsrfToken:this.props.xsrfToken,webLocation:this.props.webLocation,fileLocation:this.props.fileLocation,resizeImageWidth:this.props.resizeImageWidth,courseId:this.props.courseId}).progress((n,r)=>{r>=100?(clearTimeout(this.progressTimers[e.name]),this.updateProgress(n,100)):t||(t=!0,this.progressTimers[e.name]=setTimeout(()=>{let e=!!this.state.fileGroup[n]&&this.state.fileGroup[n].uploadComplete;t=!1,this.updateProgress(n,e?100:r)},5))}).success(this.onUploadSuccess).error(this.onUploadError)})}onCancel(e){let t=this.state.files;this.uploadServices[e].cancel(),t=t.filter(t=>t.name!==e),this.failedUploads=this.failedUploads.filter(t=>t.name!==e),this.successfulUploads=this.successfulUploads.filter(t=>t.name!==e),t.length>0?this.setState({files:t},()=>{this.finishUploading()}):this.onDismiss()}onCancelAll(){this.props.files.forEach(e=>{this.uploadServices[e.name].cancel()}),this.onDismiss()}onDismiss(){this.props.destroy()}onUploadSuccess(e,t){this.successfulUploads.push(e),this.props.onUploadSuccess&&this.props.onUploadSuccess(t),this.setState(n=>({fileGroup:{...n.fileGroup,[e.name]:{...n.fileGroup[e.name]||{},uploadComplete:!0,successResponse:t}}}),()=>{this.finishUploading()})}onUploadError(e,t){var n;let{localize:r,onUploadError:i}=this.props;this.uploadServices[e.name].cancel(),this.failedUploads.push(e),clearTimeout(this.progressTimers[e.name]);let o=(null===(n=null==t?void 0:t.response)||void 0===n?void 0:n.status)===422;i&&i(t),this.setState(t=>({fileGroup:{...t.fileGroup,[e.name]:{...t.fileGroup[e.name]||{},errorResponse:r.translate(`bbmlEditor.dialogs.insertLocalFile.${o?"securityThreat":"networkError"}`),progress:0,uploadComplete:!1}}}),()=>{this.finishUploading()})}updateProgress(e,t){let n=this.state.fileGroup;(!this.state.fileGroup[e]||void 0===this.state.fileGroup[e].progress||t>this.state.fileGroup[e].progress)&&(n[e]={...this.state.fileGroup[e]||{},progress:t},this.setState({fileGroup:n}))}finishUploading(){if(this.state.files.length-this.failedUploads.length===this.successfulUploads.length){let{fileGroup:e}=this.state,t=[];Object.keys(e).forEach(n=>{e[n].successResponse&&t.push(e[n].successResponse)}),0!==t.length&&setTimeout(()=>{this.props.destroy(),this.props.createChange(t)},350)}}render(){let{fileGroup:e}=this.state,{localize:t,analyticsEventAugmentor:n}=this.props,i=t.translate("bbmlEditor.buttons.cancel"),o="cloudStorageIntegration"===this.props.fileSource?t.translate("bbmlEditor.dialogs.insertCloudStorageIntegrationFile.titleInsert"):t.translate("bbmlEditor.dialogs.insertLocalFile.titleInsert");return r.createElement(d(),{hidden:!1,onDismiss:this.onDismiss,dialogContentProps:{title:o,showCloseButton:!1,type:u.DialogType.fullHeaderFooter},modalProps:{containerClassName:"modal-insert-file"},firstFocusableSelector:"ms-Dialog-title",analyticsId:"cloudStorageIntegration"===this.props.fileSource?"editor.dialogs.insertCloudStorageIntegrationFile.titleInsert":"editor.dialogs.insertLocalFile.titleInsert"},r.createElement("div",{className:"large"===this.props.variant?"dialog-inner-content-large":void 0},this.state.files.map(i=>{let o=e[i.name]?e[i.name].progress:0,s=!!e[i.name]&&e[i.name].uploadComplete,l=o>=100&&!s,u=43*Math.PI,d=o>0?u-u/100*o:u,p=(0,a.A)({"loading-circle-svg":!0,processing:l}),m="";return this.state.fileGroup[i.name]&&(m=this.state.fileGroup[i.name].errorResponse||""),r.createElement("div",{key:i.name,className:"file-group"},r.createElement("div",{className:"file-progress-container"},s?r.createElement("div",{className:"indicator complete"}):r.createElement("div",{className:"indicator"},r.createElement("svg",{className:p,height:49,width:49,viewBox:"0 0 46 46"},r.createElement("circle",{className:"back",cx:23,cy:23,r:21.5,fill:"none",strokeWidth:3,strokeDasharray:u,strokeDashoffset:d}),r.createElement("circle",{className:"bar",cx:23,cy:23,r:21.5,fill:"none",strokeWidth:3,strokeDasharray:l?6:u,strokeDashoffset:d})),o.toString(),"%"),r.createElement("div",{className:"file-name no-longtext no-select"},i.name),r.createElement("button",{type:"button","aria-label":t.translate("bbmlEditor.dialogs.insertLocalFile.cancelUploadButton"),className:"cancel-upload",onClick:n(c.AnalyticsEventTypes.CLICK_EVENT,()=>this.onCancel(i.name),"editor.dialogs.insertLocalFile.cancelUploadButton"),"data-analytics-id":"editor.dialogs.insertLocalFile.cancelUploadButton"},"X")),r.createElement("div",{className:"upload-error-message",role:"alert","aria-live":"assertive"},m))})),r.createElement("br",null),r.createElement(u.DialogFooter,null,r.createElement(l.AnalyticsDefaultButton,{onClick:this.onCancelAll,analyticsId:"editor.modalInsertFile.cancel"},i)))}}f.propTypes={apiBasePath:s().string.isRequired,createChange:s().func.isRequired,destroy:s().func.isRequired,files:s().arrayOf(s().shape({lastModified:s().number,name:s().string,size:s().number,type:s().string}).isRequired).isRequired,fileLocation:s().string,fileSource:s().oneOf(["local","cloudStorageIntegration"]),onUploadError:s().func,onUploadSuccess:s().func,webLocation:s().string,xsrfToken:s().string.isRequired,variant:s().string,...y.A},f.defaultProps={fileLocation:"",fileSource:"local",onUploadError:null,onUploadSuccess:null,webLocation:""};var b=(0,i.E)((0,c.withAnalytics)(f))},45761:function(e,t,n){"use strict";n.d(t,{A:function(){return E}});var r=n(514041),i=n(165217),o=n(5612),s=n(939067),a=/*#__PURE__*/n.n(s),l=n(374980),u=n(683900),d=n(865004),c=n(85303);let p=(0,u.makeStyles)(e=>(0,u.createStyles)({warningMessage:{marginBottom:"16px"},fileInfo:{marginBottom:"5px"}})),m=e=>{let t;let{fileSizeGroup:n}=e,i=p(),o=(0,d.W)();return r.createElement(r.Fragment,null,r.createElement("div",{className:i.warningMessage},0===n.fileSizeLimit?o("bbmlEditor.dialogs.fileUpload.maxSizeWarning.zeroSizeWarningMessage"):o("bbmlEditor.dialogs.fileUpload.maxSizeWarning.warningMessage",{maxFileSize:(t=n.fileSizeLimit,r.createElement(l.AnalyticsTypography,{component:"span",variant:"h4"},o("bbmlEditor.dialogs.fileUpload.maxSizeWarning.maxFileSize",{maxFileSize:(0,c.vm)(t)})))})),r.createElement("ul",null,n.files.map((e,t)=>r.createElement("li",{className:i.fileInfo,key:t},r.createElement(l.AnalyticsTypography,{component:"span",variant:"h4"},e.name)))))};class g extends r.Component{constructor(e){super(e),this.onDismiss=this.onDismiss.bind(this)}onDismiss(){var e;this.props.destroy(),null===(e=this.props)||void 0===e||e.executeCallback()}render(){let{t:e,files:t,maxFileSize:n,fileUploadSettings:i,classes:s}=this.props,{displayRecommendedAlternatives:a,displaySupportLink:u,supportLink:d,recommendedAlternatives:c,customFileUploadSettings:p}=i,g=o.a5S.groupExceedingUploadLimitFiles(t,p,n),E=r.createElement(l.AnalyticsLink,{analyticsId:"bbmlEditor.dialogs.fileUpload.linkAnalytics",href:d,target:"_blank",rel:"noreferrer"},e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.supportLink")),h=a||""!==c?e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.alternateStorage",{alternateStorage:c}):e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.noAlternateStorage"),y=u||""!==d?r.createElement(r.Fragment,null," ",e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.supportLinkText",{supportLinkAnchor:E})):"";return r.createElement(l.AnalyticsDialog,{open:!0,maxWidth:"md",onClose:this.onDismiss,analyticsId:"editor.dialogs.fileUpload.maxSizeWarning.title",className:"max-size-warning-modal",PaperProps:{role:"alertdialog"},"aria-labelledby":"alert-upload-error"},r.createElement(l.AnalyticsDialogTitle,{id:"alert-upload-error",onClose:this.onDismiss},e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.title")),r.createElement(l.AnalyticsDialogContent,{className:s.dialogContent},g.map(e=>r.createElement(m,{fileSizeGroup:e})),r.createElement("div",{className:"alternate-storage-info"},r.createElement("span",null,h),r.createElement("span",null,y))),r.createElement(l.AnalyticsDialogActions,null,r.createElement(l.AnalyticsPrimaryButton,{onClick:this.onDismiss,analyticsId:"editor.modalMaxFileSizeError.cancel"},e("bbmlEditor.dialogs.fileUpload.maxSizeWarning.primary"))))}}g.propTypes={destroy:a().func.isRequired,files:a().arrayOf([{name:a().string,size:a().number}]),maxFileSize:a().number.isRequired,executeCallback:a().func},g.defaultProps={fileUploadSettings:{displayRecommendedAlternatives:!1,displaySupportLink:!1,supportLink:"",recommendedAlternatives:""}};var E=(0,i.T)((0,u.withStyles)(()=>(0,u.createStyles)({dialogContent:{maxHeight:"400px",overflowY:"auto",paddingLeft:"16px",marginLeft:0}}))(g))},979271:function(e,t,n){"use strict";n.d(t,{Y:function(){return s}});var r=n(435341),i=n(351323),o=n(318728);let s=(e,t,{supportsInlineDocumentRender:n=!1}={})=>{let s={resourceUrl:e,fileName:t.fileName||(0,r.D)(t.linkName,t.mimeType),fileSize:t.fileSize,viewerUrl:t.viewerUrl,alternativeText:t.alternativeText||t.linkName,displayName:t.linkName,mimeType:t.mimeType,isDecorative:!!t.isDecorative,height:t.height,width:t.width,bbFileUuid:t.bbFileUuid,hasError:t.hasError};return{...s,render:t.render||((0,i.mLK)(s,n)?o.hH4.Inline:o.hH4.Attachment)}}},583307:function(e,t){"use strict";t.A=function(e,t,n){let r=e;return Object.keys(t).forEach(e=>{var i;let o=n[e.replace("data-","")],s=t[e];i=r,(o||s)&&i.setAttribute(e,o||s),r=i}),r}},805349:function(e,t){"use strict";t.A=e=>new Promise(t=>{setTimeout(()=>{t(e)},200)})},435341:function(e,t,n){"use strict";n.d(t,{D:function(){return i}});let r={"application/msword":["doc","dot"],"application/pdf":["pdf"],"application/excel":["xls"],"application/mspowerpoint":["ppt"],"application/powerpoint":["ppt"],"application/x-mspowerpoint":["ppt"],"application/vnd.ms-excel":["xls","xlt","xla"],"application/vnd.ms-excel.addin.macroEnabled.12":["xlam"],"application/vnd.ms-excel.sheet.binary.macroEnabled.12":["xlsb"],"application/vnd.ms-excel.sheet.macroEnabled.12":["xlsm"],"application/vnd.ms-excel.template.macroEnabled.12":["xltm"],"application/vnd.ms-powerpoint":["ppt","pot","pps","ppa"],"application/vnd.ms-powerpoint.addin.macroEnabled.12":["ppam"],"application/vnd.ms-powerpoint.presentation.macroEnabled.12":["pptm","potm"],"application/vnd.ms-powerpoint.slideshow.macroEnabled.12":["ppsm"],"application/vnd.ms-word.document.macroEnabled.12":["docm"],"application/vnd.ms-word.template.macroEnabled.12":["dotm"],"application/vnd.openxmlformats-officedocument.presentationml.presentation":["pptx"],"application/vnd.openxmlformats-officedocument.presentationml.slideshow":["ppsx"],"application/vnd.openxmlformats-officedocument.presentationml.template":["potx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":["xlsx"],"application/vnd.openxmlformats-officedocument.spreadsheetml.template":["xltx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.document":["docx"],"application/vnd.openxmlformats-officedocument.wordprocessingml.template":["dotx"],"application/x-excel":["xls","xll"],"application/x-compressed":["zip"],"application/x-zip-compressed":["zip"],"application/zip":["zip"],"audio/midi":["mid"],"audio/mpeg":["mp3"],"audio/mpeg3":["mp3"],"audio/x-mpeg":["mp3"],"audio/x-mpeg3":["mp3"],"audio/x-midi":["mid"],"audio/aiff":["aiff","aif","aifc"],"audio/x-aiff":["aiff","aif","aifc"],"audio/wav":["wav"],"audio/x-wav":["wav"],"image/bmp":["bmp","bm"],"image/x-windows-bmp":["bmp"],"image/gif":["gif"],"image/x-icon":["ico"],"image/jpeg":["jpg","jpeg"],"image/png":["png"],"image/tiff":["tif","tiff"],"image/x-tiff":["tif","tiff"],"multipart/x-zip":["zip"],"text/plain":["txt"],"video/avi":["avi"],"video/mpeg":["mpeg","mp4"],"video/msvideo":["avi"],"video/quicktime":["mov","moov"]},i=(e,t)=>!r[t]||r[t].some(t=>e.endsWith(`.${t}`))?e:`${e}.${r[t][0]}`},430168:function(e,t,n){"use strict";function r(e){return null!=e&&"object"==typeof e&&"video"in e}function i(e){return null!=e&&"object"==typeof e&&"image"in e}function o(e){return null!=e&&"object"==typeof e&&"attachment"in e}n.d(t,{Fv:function(){return r},v6:function(){return o},vP:function(){return i}})},321672:function(e,t){"use strict";t.A=e=>{let t=!1,n=new Promise((n,r)=>{e.then(e=>t||n(e)).catch(e=>t||r(e))});return{then(e){return n.then(e),this},catch(e){return n.catch(e),this},cancel(){t=!0}}}},241101:function(e,t,n){"use strict";function r(e){return e.replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function i(e){return e.replace(/&quot;/g,'"').replace(/&amp;/g,"&")}function o(e){return new DOMParser().parseFromString(e,"text/html")}n.d(t,{Ay:function(){return r},BW:function(){return o},Me:function(){return i}})},479283:function(e,t,n){"use strict";n.d(t,{jV:function(){return s},xA:function(){return l}});var r=n(573081),i=/*#__PURE__*/n.n(r),o=n(241101);async function s(e){var t,n,r;let i=e=null!==(r=null===(n=(t=e).match(/\<iframe.+src\=(?:\"|\')(.+?)(?:\"|\')(?:.+?)\>/))||void 0===n?void 0:n[1])&&void 0!==r?r:t;if(i.includes("://")||(e=`https://${i}`),(i=i.toLowerCase()).includes("m.youtube"))return e.replace(/(m.youtube)/i,"youtube");if(i.includes("youtube.com")&&!i.includes(".com/embed"))return(e=e.replace(/(watch\?v=)/i,"").replace(/(.com\/)/i,".com/embed/")).split(/(&feature=youtu.be)/i)[0];if(i.includes("//youtu.be/"))return e.replace(/(\/\/youtu.be\/)/i,"//youtube.com/embed/");if(i.includes("vimeo.com")&&!i.includes("player.vimeo")){let[t,n]=(e=e.replace(/\/+$/g,"")).split(".com/")[1].split("/");return e=`https://player.vimeo.com/video/${t}${n?`?h=${n}`:""}`}if(i.includes("vidgrid.com/view")&&!i.includes("embed"))return(e=e.replace(/(view)/i,"embed")).replace(/(?=\/\?).+/i,"");if(i.includes("kaltura.com")&&!i.includes("embed"))return e=e.replace(/media\/.[^\/]*\//i,"embed/secure/iframe/entryId/");if(i.includes("panopto.com")&&!i.includes("Embed"))return e.replace(/Viewer/i,"Embed");if(i.includes("flipgrid.com")&&!i.includes("embed=true"))return i.includes("admin")&&(e=e.replace(/admin/i,"shorts").replace(/manage\/shorts/i,"watch")),e=e.replace(/\?\w+$/i,"?embed=true");if(i.includes("prezi.com")&&!i.includes("embed")){if(!i.includes("view")){let t=e.split("/");e=(t=t.splice(0,5)).join("/")}return e.endsWith("/")||(e=e.concat("/")),e.concat("embed")}return i.includes("voicethread.com")&&!i.includes("/app/player/?threadId=")?e.replace(/\/myvoice\/thread\//i,"/app/player/?threadId=").replace(/(\/[0-9]+){2}$/,""):i.includes("spotify.com")&&!i.includes("embed/")?(i.includes("track")?e=e.replace(/track/i,"embed/track"):i.includes("album")?e=e.replace(/album/i,"embed/album"):i.includes("playlist")?e=e.replace(/playlist/i,"embed/playlist"):i.includes("artist")?e=e.replace(/artist/i,"embed/artist"):i.includes("show")?e=e.replace(/show/i,"embed-podcast/show"):i.includes("episode")&&(e=e.replace(/episode/i,"embed-podcast/episode")),e.replace(/\?.+$/i,"")):i.includes("genial.ly")?e.replace(/\/[\w-]+$/i,""):i.includes("nearpod.com")?e.replace(/command\?puid/i,"?pin").replace(/&[=\w]+$/i,"&he=true"):i.includes("quizlet.com")&&!i.includes("/embed")?e.replace(/(.*\/\/quizlet.com\/)([a-zA-Z]+\/)?(\d+)\/.*/,"$1$3/flashcards/embed"):i.includes("edpuzzle.com")&&!i.includes("embed/media")?e.replace(/media/i,"embed/media"):i.includes("soundcloud.com")&&!i.includes("embed_code/key")||i.includes("slideshare.net")&&!i.includes("//api")?a(i):i.includes("h5p.org")&&!i.includes("/embed")?e.replace(/node/i,"h5p/embed"):i.includes("h5p.com")&&!i.includes("/embed")?e.concat("/embed"):i.includes("sharepoint.com")?i.includes("action=")?e.replace(/action=\w*/i,"action=embedview"):e+"&action=embedview":i.includes("microsoftstream.com")&&!i.includes("/embed/")?e.replace(/video/,"embed/video"):i.includes("miro.com")&&!i.includes("/live-embed/")?e.replace(/board/,"live-embed"):e}async function a(e){return e.includes("soundcloud.com")?i().get(`https://soundcloud.com/oembed?format=json&url=${e}`).then(e=>(0,o.BW)(e.data.html).getElementsByTagName("iframe")[0].src):e.includes("slideshare.net")?i().jsonp(`https://www.slideshare.net/api/oembed/2?url=${e}&format=jsonp`).then(e=>(0,o.BW)(e.html).getElementsByTagName("iframe")[0].src):void 0}function l(e,t){let n=e;return e&&0>e.indexOf("//")&&("/"!==e[0]&&(n=`/${e}`),n=t?t+e:window.location.origin+e),n}},447666:function(e,t,n){"use strict";n.d(t,{q:function(){return i}});let r=[/edpuzzle/i,/flipgrid/i,/genial\.ly/i,/h5p/i,/kaltura/i,/microsoftstream/i,/miro/i,/nearpod/i,/panopto/i,/prezi/i,/quizlet/i,/sharepoint.+\/(?:\:[pwx]\:|.+&referrer=StreamWebApp)/i,/slideshare/i,/soundcloud/i,/spotify/i,/vidgrid/i,/vimeo\.com/i,/voicethread/i,/youtu\.be/i,/youtube\.com/i,/yuja\.com/i],i=e=>r.some(t=>t.test(e))},304943:function(e,t,n){"use strict";let r={analyticsEventAugmentor:n(939067).PropTypes.func.isRequired};t.A=r},722356:function(e,t,n){"use strict";function r(e){return encodeURIComponent(e).replace(/[!'()*]/g,e=>`%${e.charCodeAt(0).toString(16)}`)}n.d(t,{A:function(){return r}})},991200:function(e,t,n){"use strict";n.d(t,{Yt:function(){return p},cR:function(){return c},hi:function(){return d}});var r=n(514041),i=n(567776),o=n(565223),s=n(366990),a=n(881697),l=n(9618);let u=r.createContext({capture:!1}),d=({capture:e=!1,children:t})=>{let n=(0,r.useMemo)(()=>({capture:e}),[e]);return r.createElement(u.Provider,{value:n},t)};function c(){let{capture:e}=(0,r.useContext)(u),{activate:t,cell:n,uncapture:s}=(0,i.su)(),[a,d]=(0,o.g)(null),{targetRefCb:c}=(0,l.M)("focusin",()=>{e&&t(!0)}),{targetRefCb:p}=(0,l.M)("focusout",()=>{s()});(0,r.useEffect)(()=>{var e;n.captured&&(null===(e=a.current)||void 0===e||e.focus())},[a,n.captured]);let m=(0,o.R)(d,c,p);return(0,r.useMemo)(()=>({controlRefCb:m}),[m])}function p(){let{cellRefCb:e}=function(){let{autoFocusRef:e,focusSignal:t,navigation:n}=(0,r.useContext)(a.Gq),{activate:s,cell:u}=(0,i.su)(),[d,c]=(0,o.g)(null),{targetRefCb:p}=(0,l.M)("mousedown",e=>{n.isActivateCellEvent(e)&&s()}),{targetRefCb:m}=(0,l.M)("focusin",t=>{t.target===d.current&&(e.current=!0)}),{targetRefCb:g}=(0,l.M)("focusout",t=>{t.target===d.current&&(e.current=!1)});(0,r.useEffect)(()=>{var t;u.active&&e.current&&(null===(t=d.current)||void 0===t||t.focus())},[d,t]),(0,r.useEffect)(()=>{var t;e.current&&u.active&&!u.captured&&(null===(t=d.current)||void 0===t||t.focus())},[e,d,u.active,u.captured]);let E=(0,o.R)(m,g,c,p);return(0,r.useMemo)(()=>({cellRefCb:E}),[E])}(),{cellRefCb:t}=function(){let{capture:e,focus:t}=(0,r.useContext)(a.Gq),{capture:n}=(0,r.useContext)(u),{capture:o,grid:d,uncapture:c}=(0,i.su)(),{targetRefCb:p}=(0,l.M)("keydown",r=>{!d.captured&&n&&e.isCaptureEvent(r)?(o(),(0,s.K)()):d.captured&&e.isUncaptureEvent(r)&&(c(),t(),(0,s.K)())});return(0,r.useMemo)(()=>({cellRefCb:p}),[p])}(),n=(0,o.R)(e,t);return(0,r.useMemo)(()=>({cellRefCb:n}),[n])}},881697:function(e,t,n){"use strict";n.d(t,{Gq:function(){return p},R4:function(){return m},TC:function(){return d},YR:function(){return g},ui:function(){return E}});var r=n(251079),i=n(514041),o=n(97123),s=n(565223),a=n(366990),l=n(9618);let u={isActivateCellEvent:()=>!0,isNextCellEvent:e=>"ArrowRight"===e.key,isNextRowEvent:e=>"ArrowDown"===e.key,isPreviousCellEvent:e=>"ArrowLeft"===e.key,isPreviousRowEvent:e=>"ArrowUp"===e.key},d={isCaptureEvent:e=>"Enter"===e.key,isUncaptureEvent:e=>"Escape"===e.key},c={isSelectActiveRowEvent:e=>e.shiftKey&&" "===e.key||"Enter"===e.key,isSelectToggleEvent:e=>e.shiftKey},p=i.createContext({autoFocusRef:{current:!1},capture:d,focus:()=>void 0,focusSignal:0,navigation:u,selecting:!1,setSelecting:()=>void 0}),m=({capture:e=d,children:t,navigation:n=u,select:o=!1})=>{var s,a,l,m,g,E,h,y,f;let b=(0,i.useRef)(!1),[I,A]=(0,i.useState)(!1),[v,S]=(0,i.useState)(0),_=(0,r._q)(null!==(s=n.isActivateCellEvent)&&void 0!==s?s:u.isActivateCellEvent),T=(0,r._q)(null!==(a=n.isNextCellEvent)&&void 0!==a?a:u.isNextCellEvent),O=(0,r._q)(null!==(l=n.isNextRowEvent)&&void 0!==l?l:u.isNextRowEvent),C=(0,r._q)(null!==(m=n.isPreviousCellEvent)&&void 0!==m?m:u.isPreviousCellEvent),R=(0,r._q)(null!==(g=n.isPreviousRowEvent)&&void 0!==g?g:u.isPreviousRowEvent),L=(0,i.useMemo)(()=>({isActivateCellEvent:_,isNextCellEvent:T,isNextRowEvent:O,isPreviousCellEvent:C,isPreviousRowEvent:R}),[_,T,O,C,R]),D=(0,r._q)(null!==(E=e.isCaptureEvent)&&void 0!==E?E:d.isCaptureEvent),N=(0,r._q)(null!==(h=e.isUncaptureEvent)&&void 0!==h?h:d.isCaptureEvent),P=(0,i.useMemo)(()=>({isCaptureEvent:D,isUncaptureEvent:N}),[D,N]),k=o?!0===o?c:o:void 0,w=(0,r.cn)(k?null!==(y=k.isSelectActiveRowEvent)&&void 0!==y?y:c.isSelectActiveRowEvent:void 0),U=(0,r.cn)(k?null!==(f=k.isSelectToggleEvent)&&void 0!==f?f:c.isSelectToggleEvent:void 0),M=(0,i.useMemo)(()=>{if(w&&U)return{isSelectActiveRowEvent:w,isSelectToggleEvent:U}},[w,U]),B=(0,r._q)(()=>{b.current=!0,S(e=>e+1)}),G=(0,i.useMemo)(()=>({autoFocusRef:b,capture:P,focus:B,focusSignal:v,navigation:L,select:M,selecting:I,setSelecting:A}),[P,B,v,L,M,I]);return i.createElement(p.Provider,{value:G},t)};function g(){let{focus:e,selecting:t}=(0,i.useContext)(p),{grid:n}=(0,o.yt)();return(0,i.useMemo)(()=>({focus:e,selecting:t&&!n.captured}),[e,t,n.captured])}function E(){let{gridRefCb:e}=function(){let{grid:e}=(0,i.useContext)(o.yE),{navigation:t}=(0,i.useContext)(p),{activateRelativeCell:n,activateRelativeRow:r}=(0,o.yt)(),{targetRefCb:s}=(0,l.M)("keydown",i=>{let o=e=>{e.prev!==e.next&&i.preventDefault(),(0,a.K)()};!e.captured&&(t.isNextCellEvent(i)?o(n(1)):t.isPreviousCellEvent(i)?o(n(-1)):t.isNextRowEvent(i)?o(r(1)):t.isPreviousRowEvent(i)&&o(r(-1)))});return(0,i.useMemo)(()=>({gridRefCb:s}),[s])}(),{gridRefCb:t}=function(){let{select:e,setSelecting:t}=(0,i.useContext)(p),{targetRefCb:n}=(0,l.M)("keydown",n=>{let r=null==e?void 0:e.isSelectToggleEvent(n);void 0!==r&&t(r)});return(0,i.useMemo)(()=>({gridRefCb:n}),[n])}(),n=(0,s.R)(e,t);return(0,i.useMemo)(()=>({gridRefCb:n}),[n])}},992590:function(e,t,n){"use strict";n.d(t,{IG:function(){return p},Rg:function(){return c},Y2:function(){return m}});var r=n(251079),i=n(514041),o=n(608506),s=n(97123),a=n(366990),l=n(881697),u=n(9618);let d=i.createContext({addSelectListener:()=>void 0,onSelect:()=>void 0,removeSelectListener:()=>void 0,selectListeners:[]}),c=({children:e})=>{let[t,n]=(0,i.useState)([]),r=(0,i.useCallback)(e=>n(t=>t.concat(e)),[]),o=(0,i.useCallback)(()=>t.forEach(e=>e()),[t]),s=(0,i.useCallback)(e=>n(t=>t.filter(t=>t!==e)),[]),a=(0,i.useMemo)(()=>({addSelectListener:r,onSelect:o,removeSelectListener:s,selectListeners:t}),[r,o,s,t]);return i.createElement(d.Provider,{value:a},e)};function p({onSelect:e}){let{addSelectListener:t,removeSelectListener:n}=(0,i.useContext)(d),o=(0,r.cn)(e);(0,i.useEffect)(()=>{if(o)return t(o),()=>n(o)},[o,t,n])}function m(){return function(){let{grid:e}=(0,s.yt)(),{row:t}=(0,o.KS)(),{select:n,selecting:c}=(0,i.useContext)(l.Gq),{onSelect:p}=(0,i.useContext)(d);(0,i.useEffect)(()=>{n&&!e.captured&&t.active&&c&&p()},[t.active]);let{targetRefCb:m}=(0,u.M)("keydown",t=>{n&&!e.captured&&n.isSelectActiveRowEvent(t)&&(t.preventDefault(),p(),(0,a.K)())}),g=(0,r._q)(e=>n?m(e):m(null));return(0,i.useMemo)(()=>({rowRefCb:g}),[g])}()}},9618:function(e,t,n){"use strict";n.d(t,{M:function(){return s}});var r=n(251079),i=n(514041),o=n(565223);function s(e,t,n){let[s,a]=(0,o.g)(null),l=(0,r._q)(t);return(0,i.useEffect)(()=>{let t=s.current;function r(e){l.call(this,e)}return null==t||t.addEventListener(e,r,n),()=>null==t?void 0:t.removeEventListener(e,r,n)},[e,JSON.stringify(n)]),{targetRefCb:a}}},835428:function(e,t,n){"use strict";n.d(t,{F:function(){return s}});var r=n(514041),i=n(567776),o=n(12441);function s(){let{cell:{active:e,captured:t,index:n},row:{selected:s}}=(0,i.su)();return(0,r.useMemo)(()=>({props:(0,o.q)({...void 0!==s?{"aria-selected":s}:void 0,"aria-colindex":n,role:"gridcell",tabIndex:e&&!t?0:-1})}),[e,t,n,s])}},12441:function(e,t,n){"use strict";n.d(t,{q:function(){return i},x:function(){return o}});var r=n(514041);function i(e){return e}function o(){return(0,r.useMemo)(()=>({props:{role:"grid"}}),[])}},579852:function(e,t,n){"use strict";n.d(t,{P:function(){return s}});var r=n(514041),i=n(608506),o=n(12441);function s(){let{row:{selected:e,index:t}}=(0,i.KS)();return(0,r.useMemo)(()=>({props:(0,o.q)({...void 0!==e?{"aria-selected":e}:void 0,"aria-rowindex":t,role:"row"})}),[t,e])}},567776:function(e,t,n){"use strict";n.d(t,{su:function(){return u},xE:function(){return l}});var r=n(514041),i=n(97123),o=n(608506),s=n(251079);let a=r.createContext({index:0,cell:{active:!1,captured:!1,index:0}}),l=({defaultActive:e,index:t,children:n})=>{let{getCell:s}=(0,r.useContext)(i.yE),{index:l}=(0,r.useContext)(o.mk),u=(0,r.useRef)(e),d=(0,r.useMemo)(()=>({index:t,cell:s(l,t,{defaultActive:u.current})}),[t,s,l]);return r.createElement(a.Provider,{value:d},n)};function u(){let{activate:e,capture:t,grid:n}=(0,r.useContext)(i.yE),{row:l}=(0,r.useContext)(o.mk),{cell:u}=(0,r.useContext)(a),d=(0,s._q)((n=!1)=>{e(l.index,u.index),n&&t(!0)}),c=(0,s._q)(()=>{u.active&&t(!0)}),p=(0,s._q)(()=>{u.active&&t(!1)});return(0,r.useMemo)(()=>({activate:d,capture:c,cell:u,grid:n,row:l,uncapture:p}),[d,c,u,n,l,p])}},608506:function(e,t,n){"use strict";n.d(t,{KS:function(){return a},mk:function(){return o},zp:function(){return s}});var r=n(514041),i=n(97123);let o=r.createContext({index:0,row:{active:!1,captured:!1,index:0,selected:void 0}}),s=({defaultActive:e,index:t,children:n,selected:s})=>{let{getRow:a,select:l}=(0,r.useContext)(i.yE),u=(0,r.useRef)(e),d=(0,r.useMemo)(()=>({index:t,row:a(t,{defaultActive:u.current})}),[t,a]);return(0,r.useEffect)(()=>{"boolean"==typeof s&&l(t,s)},[t,l,s]),r.createElement(o.Provider,{value:d},n)};function a(){let{grid:e}=(0,r.useContext)(i.yE),{row:t}=(0,r.useContext)(o);return(0,r.useMemo)(()=>({grid:e,row:t}),[e,t])}},97123:function(e,t,n){"use strict";n.d(t,{PL:function(){return u},yE:function(){return a},yt:function(){return d}});var r=n(251079),i=n(514041);function o(e){return Object.keys(e).map(e=>parseInt(e,10)).sort()}function s(e){return Object.entries(e).map(([e,t])=>[parseInt(e,10),t]).sort(([e],[t])=>e-t)}let a=i.createContext({activate:()=>({}),activateRelativeCell:()=>({}),activateRelativeRow:()=>({}),capture:()=>void 0,cells:{},getCell:()=>({active:!1,captured:!1,index:0}),getRow:()=>({active:!1,captured:!1,index:0,selected:void 0}),grid:{captured:!1},rows:{},select:()=>void 0,selected:{}});function l(e,t,n,r){var i,s,a;if(t)return t;let l=null!=n?n:null==r?void 0:r[0],u=null==r?void 0:r[1],d=o(e),c=void 0!==l?d.indexOf(l):-1,p=-1!==c?d[c]:null!==(i=d[0])&&void 0!==i?i:-1,m=o(null!==(s=e[p])&&void 0!==s?s:{}),g=void 0!==u?m.indexOf(u):-1;return{row:p,cell:-1!==g?m[g]:null!==(a=m[0])&&void 0!==a?a:-1}}let u=({children:e})=>{let[t,n]=(0,i.useState)(),[u,d]=(0,i.useState)(),[c,p]=(0,i.useState)(()=>({captured:!1})),[m,g]=(0,i.useState)({}),[E,h]=(0,i.useState)({}),y=(0,i.useRef)(),f=(0,i.useRef)(),b=(0,i.useCallback)((e,{defaultActive:t=!1}={})=>{if(e in m)return m[e];let n={active:!1,captured:!1,index:e,selected:!1};return t&&void 0===y.current&&(y.current=e),g(t=>({...t,[e]:n})),n},[m]),I=(0,i.useCallback)((e,t,{defaultActive:n=!1}={})=>{if(e in E&&t in E[e])return E[e][t];let r={active:!1,captured:!1,index:t};return n&&void 0===f.current&&(f.current=[e,t]),h(n=>({...n,[e]:{...n[e],[t]:r}})),r},[E]),A=(0,r._q)(e=>{p(t=>t.captured!==e?{...t,captured:e}:t)}),v=(0,r._q)((e,t)=>{d((n={})=>n[e]!==t?{...n,[e]:t}:n)}),S=(0,r._q)((e,r,i=!1)=>{var o;let s=t?{row:b(t.row),cell:I(t.row,t.cell)}:void 0;if(!(null===(o=E[e])||void 0===o?void 0:o[r]))return{prev:s,next:s};let a={row:b(e),cell:I(e,r)};return s&&a.row===s.row&&a.cell===s.cell?{prev:s,next:s}:(A(i),n({row:e,cell:r}),{prev:s,next:a})}),_=(0,r._q)((e,n)=>{let r=l(E,t,y.current,f.current),i=o(E[r.row]),s=i.indexOf(r.cell),a=Math.max(0,Math.min(i.length-1,s+e));return S(r.row,i[a],n)}),T=(0,r._q)((e,n)=>{var r;let i=l(E,t,y.current,f.current),s=o(E),a=s.indexOf(i.row),u=Math.max(0,Math.min(s.length,a+e)),d=s[u],c=o(null!==(r=E[d])&&void 0!==r?r:{}).reverse(),p=c.findIndex(e=>e<=i.cell),m=-1===p?c.length-1:p;return S(d,c[m],n)});(0,i.useEffect)(()=>{var e;let{row:n=-1,cell:r=-1}=null!=t?t:{},i=m[n],o=null===(e=E[n])||void 0===e?void 0:e[r];p(e=>{var t,n;return(null===(t=e.active)||void 0===t?void 0:t.row)!==i||(null===(n=e.active)||void 0===n?void 0:n.cell)!==o?{...e,active:i&&o?{cell:o,row:i}:void 0}:e})},[t,E,m]),(0,i.useEffect)(()=>{let{row:e,cell:n}=l(E,t,y.current,f.current),r=(t,n)=>e>-1?t===e:0===n,i=(e,t)=>n>-1?e===n:0===t;g(e=>{let t=!1,n=s(e).reduce((e,[n,i],o)=>{let s=r(n,o),a=s&&c.captured,l=void 0===u?void 0:!0===u[n],d=i.active!==s||i.captured!==a||i.selected!==l;return t=t||d,{...e,[n]:d?{...i,active:s,captured:a,selected:l}:i}},{});return t?n:e}),h(e=>{let t=!1,n=s(e).reduce((e,[n,o],a)=>{let l=!1,u=r(n,a),d=s(o).reduce((e,[n,r],o)=>{let s=u&&i(n,o),a=s&&c.captured,d=r.active!==s||r.captured!==a;return l=l||d,t=t||d,{...e,[n]:d?{...r,active:s,captured:a}:r}},{});return{...e,[n]:l?d:o}},{});return t?n:e})},[t,E,c.captured,u]);let O=(0,i.useMemo)(()=>({activate:S,activateRelativeCell:_,activateRelativeRow:T,active:t,capture:A,cells:E,getCell:I,getRow:b,grid:c,rows:m,select:v,selected:u}),[S,_,T,t,A,c,E,m,I,b,v,u]);return i.createElement(a.Provider,{value:O},e)};function d(){let{activate:e,activateRelativeCell:t,activateRelativeRow:n,capture:r,grid:o}=(0,i.useContext)(a);return(0,i.useMemo)(()=>({activate:e,activateRelativeCell:t,activateRelativeRow:n,grid:o,uncapture:()=>r(!1)}),[e,t,n,r,o])}},565223:function(e,t,n){"use strict";n.d(t,{R:function(){return o},g:function(){return i}});var r=n(514041);function i(e){let t=(0,r.useRef)(e),n=(0,r.useCallback)(e=>{t.current=e},[]);return[t,n]}function o(...e){return(0,r.useCallback)(t=>{for(let n of e)n(t)},e)}},366990:function(e,t,n){"use strict";function r(e=window.document){e.body.classList.remove("hide-focus-outline")}n.d(t,{K:function(){return r}})},95365:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(683900);let i=(0,r.makeStyles)(()=>(0,r.createStyles)({itemSelection:{marginRight:"12px"}}))},455810:function(e,t,n){"use strict";n.d(t,{V:function(){return M}});var r=n(514041),i=n(115183),o=n(683900);let s="24px",a="28px",l="10px",u="40px",d=(0,o.makeStyles)(e=>(0,o.createStyles)({picker:{color:e.palette.primary.main,fontSize:e.typography.fontSizeMedium,backgroundColor:e.palette.common.white,position:"relative",textAlign:"left"},holder:{WebkitOverflowScrolling:"touch",boxSizing:"border-box",display:"none",[e.breakpoints.up("sm")]:{width:"224px"}},pickerIsOpened:{position:"relative","& $holder":{boxSizing:"border-box",display:"block"}},frame:{padding:"1px",position:"relative"},wrap:{margin:"-1px",padding:"10px",display:"flex"},dayPicker:{display:"block"},header:{display:"inline-flex",height:s,lineHeight:"44px",[e.breakpoints.up("sm")]:{lineHeight:s,flex:1,display:"flex",justifyContent:"center",alignItems:"center"}},headerAxContainer:{[e.breakpoints.up("sm")]:{display:"flex",justifyContent:"center",alignItems:"center"}},month:{display:"inline-block",color:e.palette.primary.main,"&:hover":{color:e.palette.primary.dark,cursor:"pointer"},[e.breakpoints.up("sm")]:{fontSize:"18px",color:e.palette.primary.main,"&:hover":{color:e.palette.primary.main,cursor:"default"}}},year:{marginLeft:"10px",display:"inline-block",color:e.palette.primary.main,"&:hover":{color:e.palette.primary.dark,cursor:"pointer"},[e.breakpoints.up("sm")]:{fontSize:"18px",color:e.palette.primary.main,"&:hover":{color:e.palette.primary.main,cursor:"default"}}},table:{textAlign:"center",borderCollapse:"collapse",borderSpacing:"0",tableLayout:"fixed",fontSize:"inherit",marginTop:"5px",borderTop:`1px solid ${e.palette.border.main}`,"& td":{margin:0,padding:0,border:"1px solid transparent",background:"transparent",textAlign:"center","&:hover":{outline:"1px solid transparent"}}},day:{width:a,height:s,padding:0,lineHeight:s,fontWeight:e.typography.fontWeightMedium,fontSize:e.typography.fontSizeDefault,color:e.palette.primary.main,borderRadius:"2px"},weekday:{width:a,height:"30px",padding:0,lineHeight:s,fontSize:e.typography.fontSizeDefault,color:e.palette.primary.main,fontWeight:e.typography.fontWeightBold,"& > abbr[title]":{textDecoration:"none"}},dayIsToday:{fontWeight:e.typography.fontWeightBold,backgroundColor:"inherit",color:e.palette.primary.dark,border:"transparent",[e.palette.highContrastOnly.main]:{border:`1px solid ${e.palette.secondary.main}`},"& $dayIsHighlighted[aria-selected=true]":{color:e.palette.common.white,backgroundColor:e.palette.common.black,fontWeight:e.typography.fontWeightSemiBold,border:`2px solid ${e.palette.common.black}`}},dayIsDisabled:{visibility:"hidden"},dayIsEnabled:{"&:hover":{cursor:"pointer",background:e.palette.secondary.light},"&:active":{backgroundColor:e.palette.focus.dark,border:`2px solid ${e.palette.common.black}`,color:e.palette.common.white,fontWeight:e.typography.fontWeightBold}},dayIsHighlighted:{backgroundColor:e.palette.focus.dark,border:`2px solid ${e.palette.common.black}`,color:e.palette.common.white,fontWeight:e.typography.fontWeightBold,"&:hover":{backgroundColor:e.palette.secondary.light,[e.palette.highContrastOnly.main]:{border:`1px solid ${e.palette.secondary.main}`}},"& span":{position:"absolute",margin:"-2px 0 0 -8px"}},pickerIsFocused:{"& $dayIsHighlighted":{cursor:"pointer",backgroundColor:e.palette.brand.main,"&:hover":{backgroundColor:e.palette.border.dark,[e.palette.highContrastOnly.main]:{border:`1px solid ${e.palette.secondary.main}`}}}},monthComponents:{display:"inline-flex",marginLeft:"3px"},yearComponents:{display:"inline-flex",marginLeft:"3px"},decadeComponents:{display:"inline-flex",marginLeft:"3px"},prevNext:{width:a,height:s,display:"block",textAlign:"center",lineHeight:s,fontSize:e.typography.fontSizeMedium,color:e.palette.primary.dark,position:"relative","&:hover":{color:e.palette.primary.dark,cursor:"pointer",outline:"1px solid transparent"},[e.breakpoints.up("sm")]:{fontSize:e.typography.fontSizeMedium,width:"24px",minHeight:"24px",lineHeight:"24px"}},headerToggleView:{height:s,position:"absolute",width:"130px",cursor:"pointer",backgroundColor:"transparent",color:e.palette.primary.dark,fontSize:"20px",left:"auto",top:"auto",textAlign:"center",fontWeight:e.typography.fontWeightRegular,"&:focus":{backgroundColor:"transparent",position:"absolute"},"&:hover":{backgroundColor:"transparent"}},navContainer:{display:"flex",justifyContent:"center",padding:"0 10px"},currentDecadeYear:{display:"block",fontSize:"14px",color:e.palette.primary.main,lineHeight:"14px",marginBottom:"2px",textAlign:"center"},monthPickerCurrentYear:{display:"flex",alignItems:"center",fontSize:"18px",lineHeight:"1.4",marginBottom:0},optionGrid:{position:"relative",height:"210px",margin:"12px 0 0 0"},yearMonthOption:{width:"60px",height:"60px",lineHeight:"60px",cursor:"pointer",float:"left",margin:"0 10px 10px 0",fontSize:e.typography.fontSizeSmall,color:e.palette.primary.light,textAlign:"center",[e.breakpoints.up("sm")]:{width:u,height:u,lineHeight:u,margin:"0 11px 11px 0","&:hover":{outline:"1px solid transparent"},"&:nth-child(4n+4)":{margin:"0 0px 11px 0"}},"&:active":{backgroundColor:e.palette.primary.dark,color:e.palette.common.white,fontWeight:e.typography.fontWeightBold},"&:hover":{color:e.palette.primary.dark,outline:"1px solid transparent"}},goToday:{bottom:"9px",cursor:"pointer",color:e.palette.primary.main,height:"30px",lineHeight:"30px",padding:"0 10px",position:"absolute",right:"13px",width:"auto",fontSize:e.typography.fontSizeSmall,"&:hover":{color:e.palette.brand.main,outline:"1px solid transparent"},"&:active":{color:e.palette.primary.dark}},goTodaySpacing:{marginBottom:"30px"},isPickingYears:{"& $dayPicker":{display:"none"},"& $monthComponents":{display:"none"},"& $monthPicker":{display:"none"}},monthPickerVisible:{"& $dayPicker":{margin:`-${l} 0`,padding:`${l} 0`,boxSizing:"border-box",borderRight:`1px solid, ${e.palette.primary.light}`,width:"214px"},"& $monthPicker":{display:"block"},"& $optionGrid":{height:"150px"},"& $goToday":{boxSizing:"border-box",fontSize:"12px",height:s,lineHeight:s,padding:"0 10px",right:"10px",textAlign:"right",top:"199px"},"& $isPickingYears":{"& $dayPicker":{display:"block"},"& $monthComponents":{display:"block"},"& $monthPicker":{display:"none"}}},calendarsInline:{"& $wrap":{padding:"10px"},"& $holder":{width:"440px",height:"auto"},"& $table":{marginRight:"10px"},"& $monthPicker":{marginLeft:"10px"},"& $goToday":{right:"13px"}},nextPrevMonth:{display:"inline-block"},nextPrevDateDisabled:{visibility:"hidden"},itemIsHighlighted:{backgroundColor:e.palette.primary.dark,color:e.palette.primary.contrastText,fontWeight:e.typography.fontWeightBold,"&:hover":{color:e.palette.primary.contrastText,fontWeight:e.typography.fontWeightBold}},monthIsCurrentMonth:{fontWeight:e.typography.fontWeightSemiBold,color:e.palette.primary.contrastText,backgroundColor:e.palette.brand.main,"&:hover":{color:e.palette.primary.contrastText,fontWeight:e.typography.fontWeightBold}},monthOption:{"&:active":{backgroundColor:e.palette.primary.dark,color:e.palette.common.white,fontWeight:e.typography.fontWeightBold}},dateIsUnfocused:{cursor:"not-allowed",color:e.palette.action.disabled,fontWeight:e.typography.fontWeightRegular},topLeftCornerDate:{borderRadius:0},topRightCornerDate:{borderRadius:0},bottomLeftCornerDate:{borderRadius:0},bottomRightCornerDate:{borderRadius:0},singleTopDate:{borderRadius:0},singleBottomDate:{borderRadius:0},monthPicker:{},root:{boxSizing:"border-box",boxShadow:"none"}}));var c=n(374980),p=n(99625),m=n(528128),g=n(865004),E=n(225927),h=n(565473),y=n(247803),f=n(212263),b=n(580445),I=n(175630),A=n(479889),v=n(384224),S=n(309546);let _=e=>{let t=r.useRef();return r.useEffect(()=>{t.current=e}),t.current},T=e=>{let t=d(),{firstDayOfWeek:n,strings:o,navigatedDate:s,dateRangeType:a,dateTimeFormatter:l,onNavigateDate:u,onHeaderSelect:T,analyticsId:O,navigatedDayRef:C,restrictions:R,showGoToToday:L,goToTodayButtonRef:D,prevButtonRef:N}=e,P=(0,g.W)(),{isRtl:k}=(0,E.b)(),w="DatePickerDay-dayPicker",U="DatePickerDay-month",M="DatePickerDay-year",B=r.useCallback(()=>{u((0,h.A)(s,1),!1)},[s,u]),G=r.useCallback(()=>{u((0,h.A)(s,-1),!1)},[s,u]),x=r.useCallback(t=>{let{onSelectDate:n,dateRangeType:r,firstDayOfWeek:i,navigatedDate:o,autoNavigateOnSelection:s}=e,a=(0,p.xe)(t,r,i);if(n&&n(t,a),s&&t.getMonth()!==o.getMonth()){let e=(0,y.A)(t,o);e<0?G():e>0&&B()}},[e,B,G]),q=r.useCallback(e=>{let{navigatedDate:t,selectedDate:n,dateRangeType:r,firstDayOfWeek:o,today:s,restrictions:a}=e,l=new Date(t.getFullYear(),t.getMonth(),1),u=s||new Date,d=[];for(;l.getDay()!==o;)l.setDate(l.getDate()-1);let c=!1,m=(0,p.xe)(n,r,o);for(let e=0;!c;e++){let e=[];c=!0;for(let n=0;n<7;n++){let n=new Date(l.toString()),r=!0;a&&(r=(0,p.$Q)(n,{singleRestriction:a.singleRestriction})===i.Pv.None);let o={key:l.toString(),date:l.getDate().toString(),originalDate:n,isEnabled:r,isInMonth:l.getMonth()===t.getMonth(),isToday:(0,p.H$)(u,l),isSelected:(0,p.yw)(l,m),onSelected:()=>x(n)};e.push(o),o.isInMonth&&(c=!1),l.setDate(l.getDate()+1)}c||d.push(e)}return d},[x]),F="DatePickerDay-active",[V,j]=r.useState(q(e)),K=_(e),H=r.useRef(null);function Q(e,t){(t.key===v.U.Enter||" "===t.key)&&(t.preventDefault(),e())}return r.useEffect(()=>{K!==e&&j(q(e))},[e,q,K]),r.createElement("div",{"data-analytics-id":O,className:t.dayPicker,id:w},r.createElement("div",null,r.createElement("div",{className:t.currentDecadeYear,id:M},l.formatYear(s)),r.createElement("div",{className:t.navContainer},r.createElement(c.AnalyticsIconButton,{className:(0,S.A)(t.nextPrevMonth,t.prevNext,{[t.nextPrevDateDisabled]:!(0,p.aR)(R,s,i.ci.Month,!1)}),"aria-controls":w,"aria-label":o.prevMonthAriaLabel,onClick:G,onKeyDown:function(e){if(e.key===v.U.Tab&&e.shiftKey){if(L&&D.current){e.preventDefault(),D.current.focus();return}if(C.current){e.preventDefault(),C.current.focus();return}}Q(G,e)},analyticsId:`${O}.prevMonth.button`,ref:N},r.createElement(m.TriangleLeft,null)),r.createElement("div",{className:t.header},r.createElement("div",{className:t.headerAxContainer,role:"status","aria-live":"assertive","aria-relevant":"text","aria-atomic":"true",id:U},T?null:r.createElement("div",{className:t.month},l.formatMonth(s,o))),T?r.createElement(c.AnalyticsDefaultButton,{className:t.headerToggleView,onClick:()=>T(!0),onKeyDown:function(e){Q(()=>null==T?void 0:T(!0),e)},"aria-describedby":M,analyticsId:`${O}monthPicker`},l.formatMonth(s,o)):null),r.createElement(c.AnalyticsIconButton,{className:(0,S.A)(t.nextPrevMonth,t.prevNext,{[t.nextPrevDateDisabled]:!(0,p.aR)(R,s,i.ci.Month,!0)}),"aria-controls":w,"aria-label":o.nextMonthAriaLabel,onClick:B,onKeyDown:function(e){Q(B,e)},analyticsId:`${O}.nextMonth.button`,ref:H},r.createElement(m.TriangleRight,null)))),r.createElement("table",{className:t.table,"aria-readonly":"true","aria-multiselectable":a===i.ci.Week?"true":"false","aria-labelledby":U,"aria-activedescendant":F,role:"grid"},r.createElement("thead",null,r.createElement("tr",null,o.shortDays.map((e,i)=>r.createElement("th",{className:t.weekday,scope:"col",key:i,"aria-label":o.days[(i+n)%7],role:"columnheader",id:`th${i}`},r.createElement("abbr",null,o.shortDays[(i+n)%7]))))),r.createElement("tbody",null,V.map((n,d)=>r.createElement("tr",{key:d},n.map((n,d)=>{var c,m;return r.createElement("td",{key:n.key,role:"gridcell"},r.createElement("div",{className:(0,S.A)(t.day,{[t.dayIsEnabled]:n.isEnabled,[t.dayIsDisabled]:!!R&&!n.isInMonth,[t.dateIsUnfocused]:!(n.isInMonth&&n.isEnabled),[t.dayIsToday]:n.isToday,[t.dayIsHighlighted]:n.isSelected&&a===i.ci.Day,[t.itemIsHighlighted]:(0,p.H$)(s,n.originalDate)}),role:"button","data-analytics-id":`${O}.daySelected`,onClick:n.isEnabled?n.onSelected:void 0,onKeyDown:(c=n.originalDate,m=n.isEnabled,t=>{if((t.key===v.U.Enter||" "===t.key)&&m){x(c);return}if(t.key===v.U.Tab){if(!t.shiftKey){if(L&&D.current){t.preventDefault(),D.current.focus();return}if(N.current){t.preventDefault(),N.current.focus();return}}if(t.shiftKey&&H.current){t.preventDefault(),H.current.focus();return}}!function(t,n){let{navigatedDate:r,restrictions:o}=e,s=n;t.key===v.U.ArrowUp?s=(0,f.A)(n,-1):t.key===v.U.ArrowDown?s=(0,f.A)(n,1):t.key===v.U.ArrowRight?s=(0,b.A)(n,k()?-1:1):t.key===v.U.ArrowLeft?s=(0,b.A)(n,k()?1:-1):t.altKey&&t.key===v.U.PageUp?s=(0,h.A)(n,-12):t.altKey&&t.key===v.U.PageDown?s=(0,h.A)(n,12):t.key===v.U.PageUp?s=(0,h.A)(n,-1):t.key===v.U.PageDown?s=(0,h.A)(n,1):t.key===v.U.Home?s=(0,I.A)(n):t.key===v.U.End&&(s=(0,A.A)(n)),(s.getMonth()===r.getMonth()||(0,p.aR)(o,r,i.ci.Month,s>r))&&u(s,!0),t.preventDefault()}(t,c)}),"aria-current":n.isToday?"date":void 0,"aria-label":function(e,t){let n=l.formatMonthDayYear(e.originalDate,o);return t?P("cr.components.calendar.ariaSelectedDateLabel",{selectedDate:n}):n}(n,n.isSelected),"aria-describedby":`th${d}`,"aria-disabled":!n.isEnabled,id:(0,p.H$)(s,n.originalDate)?F:void 0,"data-is-focusable":!0,ref:(0,p.H$)(s,n.originalDate)?C:void 0,key:(0,p.H$)(s,n.originalDate)?"navigatedDay":void 0},r.createElement("span",null,l.formatDay(n.originalDate))))}))))))};var O=n(409216),C=n(4280),R=n(777730),L=n(126996);let D=e=>{let{index:t,month:n,navigatedDate:o,strings:s,highlightCurrentMonth:a,analyticsEventAugmentor:l,navigatedMonthRef:u,prevYearButtonRef:c,nextYearButtonRef:m,selectMonthCallbacks:y,dateTimeFormatter:f,restrictions:b,analyticsId:_,showGoToToday:T,goToTodayButtonRef:O}=e,C=d(),D=(0,g.W)(),{isRtl:N}=(0,E.b)(),P=function(t){let{restrictions:n,navigatedDate:r}=e;if(n&&!(0,L.A)(new Date(r.getFullYear(),t))){let e=new Date(r.getFullYear(),t,1),o=(0,I.A)(e),s=(0,A.A)(e);return(0,p.$Q)(o,{singleRestriction:n.singleRestriction})===i.Pv.None||(0,p.$Q)(s,{singleRestriction:n.singleRestriction})===i.Pv.None}return!0}(t),k=(0,L.A)(new Date(o.getFullYear(),t));return r.createElement("span",{role:"button",className:(0,S.A)(C.monthOption,C.yearMonthOption,{[C.monthIsCurrentMonth]:a&&k,[C.itemIsHighlighted]:a&&o.getMonth()===t&&P,[C.dateIsUnfocused]:!P}),key:t,onClick:P?l(R.AnalyticsEventTypes.CLICK_EVENT,y[t],`${_}.monthSelected`):void 0,onKeyDown:n=>{if((n.key===v.U.Enter||" "===n.key)&&P){y[t]();return}if(n.key===v.U.Tab){if(n.shiftKey){if(n.shiftKey&&m.current){n.preventDefault(),m.current.focus();return}}else{if(T&&O.current){n.preventDefault(),O.current.focus();return}if(c.current){n.preventDefault(),c.current.focus();return}}}!function(t,n){let{onNavigateDate:r,navigatedDate:o}=e,s=n;t.key===v.U.ArrowUp?s=(0,h.A)(n,-4):t.key===v.U.ArrowDown?s=(0,h.A)(n,4):t.key===v.U.ArrowRight?s=(0,h.A)(n,N()?-1:1):t.key===v.U.ArrowLeft?s=(0,h.A)(n,N()?1:-1):t.altKey&&t.key===v.U.PageUp?s=(0,h.A)(n,-12):t.altKey&&t.key===v.U.PageDown?s=(0,h.A)(n,12):t.key===v.U.PageUp?s=(0,h.A)(n,-12):t.key===v.U.PageDown?s=(0,h.A)(n,12):t.key===v.U.Home?s=(0,I.A)(n):t.key===v.U.End&&(s=(0,A.A)(n)),(s.getFullYear()===o.getFullYear()||(0,p.aR)(b,o,i.ci.Year,s>o))&&r(s,!0),t.preventDefault()}(n,o)},"data-analytics-id":`${_}.monthSelected`,"aria-current":k?"date":void 0,"aria-label":function(e,t){let n=o.getMonth()===e,r=function(e,t){let n=new Date(2019,e,1);return f.formatMonth(n,t)}(e,t);return n?D("cr.components.calendar.ariaSelectedDateLabel",{selectedDate:r}):r}(t,s),"aria-describedby":"year_","aria-disabled":!P,"data-is-focusable":!0,ref:o.getMonth()===t?u:void 0},n)},N=(0,R.withAnalytics)(e=>{let t=d(),{navigatedDate:n,strings:o,highlightCurrentMonth:s,dateTimeFormatter:a,navigatedMonthRef:l,analyticsEventAugmentor:u,analyticsId:g,restrictions:E,onNavigateDate:h,showGoToToday:y,goToTodayButtonRef:f,prevButtonRef:b}=e,I=[],A=r.useRef(null);function _(e,t){(t.key===v.U.Enter||" "===t.key)&&(t.preventDefault(),e())}function T(){let{navigatedDate:t,onNavigateDate:n}=e;n((0,O.A)(t,1),!1)}function R(){let{navigatedDate:t,onNavigateDate:n}=e;n((0,O.A)(t,-1),!1)}function L(){let{onHeaderSelect:t}=e;t&&t(!0)}return o.shortMonths.map((t,n)=>I[n]=()=>(function(t){let{navigatedDate:n,onNavigateDate:r,onHeaderSelect:i}=e;i&&i(!0),r((0,C.A)(n,t),!0)})(n)),r.createElement("div",{"data-analytics-id":g,className:t.monthPicker},r.createElement("div",{className:t.navContainer},r.createElement(c.AnalyticsIconButton,{className:(0,S.A)(t.prevNext,t.nextPrevMonth,{[t.nextPrevDateDisabled]:!(0,p.aR)(E,n,i.ci.Year,!1)}),"aria-label":o.prevYearAriaLabel,onClick:R,onKeyDown:function(e){if(e.key===v.U.Tab&&e.shiftKey){if(y&&f.current){e.preventDefault(),f.current.focus();return}if(l.current){e.preventDefault(),l.current.focus();return}}_(R,e)},analyticsId:`${g}.prevYear.button`,ref:b},r.createElement(m.TriangleLeft,null)),r.createElement("div",{className:t.header},r.createElement("div",{role:e.onHeaderSelect?"button":void 0,tabIndex:e.onHeaderSelect?0:-1,onClick:e.onHeaderSelect?L:void 0,onKeyDown:function(t){_(()=>e.onHeaderSelect&&L(),t)},"data-analytics-id":`${g}.headerToggle`,className:e.onHeaderSelect?t.headerToggleView:(0,S.A)(t.currentDecadeYear,t.monthPickerCurrentYear),id:"year_"},a.formatYear(n))),r.createElement(c.AnalyticsIconButton,{className:(0,S.A)(t.nextPrevMonth,t.prevNext,{[t.nextPrevDateDisabled]:!(0,p.aR)(E,n,i.ci.Year,!0)}),"aria-label":o.nextYearAriaLabel,onClick:T,onKeyDown:function(e){_(T,e)},analyticsId:`${g}nextYear.button`,ref:A},r.createElement(m.TriangleRight,null))),r.createElement("div",{className:t.optionGrid,onFocus:function(){l.current&&(l.current.tabIndex=0,l.current.focus())},tabIndex:0},o.shortMonths.map((e,t)=>r.createElement(D,{key:t,month:e,index:t,highlightCurrentMonth:s,navigatedDate:n,navigatedMonthRef:l,prevYearButtonRef:b,nextYearButtonRef:A,selectMonthCallbacks:I,strings:o,analyticsId:g,dateTimeFormatter:a,onNavigateDate:h,analyticsEventAugmentor:u,restrictions:E,showGoToToday:y,goToTodayButtonRef:f}))))});var P=n(737234);let k={leftNavigation:"Up",rightNavigation:"Down"},w=e=>{let t=r.useRef();return r.useEffect(()=>{t.current=e}),t.current},U={formatMonthDayYear:(e,t)=>`${null==t?void 0:t.months[e.getMonth()]} ${e.getDate()}, ${e.getFullYear()}`,formatMonthYear:(e,t)=>`${null==t?void 0:t.months[e.getMonth()]} ${e.getFullYear()}`,formatMonth:(e,t)=>`${null==t?void 0:t.months[e.getMonth()]}`,formatDay:(e,t)=>t?t(e.getDate()):e.getDate().toString(),formatYear:(e,t)=>t?t(e.getFullYear()):e.getFullYear().toString()},M=r.forwardRef((e,t)=>{var n;let o=d(),s=(0,g.W)(),{showMonthPickerAsOverlay:a=!1,today:l=(0,P.A)(new Date),firstDayOfWeek:u=i.ob.Sunday,dateRangeType:c=i.ci.Day,autoNavigateOnSelection:m=!1,showGoToToday:E=!0,highlightCurrentMonth:h=!1,navigationIcons:y=k,dateTimeFormatter:f=U,analyticsId:b,isMonthPickerVisible:I=!0,isDayPickerVisible:A=!0,restrictions:_}=e,O=r.useRef(null),C=r.useRef(null),R=r.useRef(null),L=r.useRef(null),D=e.value&&!isNaN(e.value.getTime())?e.value:e.today||(0,P.A)(new Date),[M,B]=r.useState(D),[G,x]=r.useState(D),[q,F]=r.useState(!0),[V,j]=r.useState(!a&&I),[K,H]=r.useState(!!a||A),Q=w(e);function Y(e,t){x(e),F(t)}function $(t,n){let{onSelectDate:r}=e;B(t),r&&r(t,n)}r.useEffect(()=>{setTimeout(()=>{q&&(C.current?(C.current.tabIndex=0,C.current.focus()):O.current&&(O.current.tabIndex=0,O.current.focus()),F(!1))})},[q,C,O]),r.useEffect(()=>{if(Q!==e){let{autoNavigateOnSelection:t,value:n=new Date}=e;t&&(0,p.H$)(n,(null==Q?void 0:Q.value)?Q.value:n)&&x(n),B(n||l)}},[e,Q,l]),r.useImperativeHandle(t,()=>({calendarFocus:()=>{C.current&&(C.current.tabIndex=0)}}));let J=a?function(e){H(!K),j(!V),e&&F(!0)}:void 0;function z(){let{today:t=(0,P.A)(new Date)}=e,n=(0,p.xe)(t,i.ci.Day,i.ob.Sunday);$(t,n)}let W=null!==(n=e.strings)&&void 0!==n?n:{months:[s("cr.components.calendar.strings.months.january"),s("cr.components.calendar.strings.months.february"),s("cr.components.calendar.strings.months.march"),s("cr.components.calendar.strings.months.april"),s("cr.components.calendar.strings.months.may"),s("cr.components.calendar.strings.months.june"),s("cr.components.calendar.strings.months.july"),s("cr.components.calendar.strings.months.august"),s("cr.components.calendar.strings.months.september"),s("cr.components.calendar.strings.months.october"),s("cr.components.calendar.strings.months.november"),s("cr.components.calendar.strings.months.december")],shortMonths:[s("cr.components.calendar.strings.shortMonths.january"),s("cr.components.calendar.strings.shortMonths.february"),s("cr.components.calendar.strings.shortMonths.march"),s("cr.components.calendar.strings.shortMonths.april"),s("cr.components.calendar.strings.shortMonths.may"),s("cr.components.calendar.strings.shortMonths.june"),s("cr.components.calendar.strings.shortMonths.july"),s("cr.components.calendar.strings.shortMonths.august"),s("cr.components.calendar.strings.shortMonths.september"),s("cr.components.calendar.strings.shortMonths.october"),s("cr.components.calendar.strings.shortMonths.november"),s("cr.components.calendar.strings.shortMonths.december")],days:[s("cr.components.calendar.strings.days.sunday"),s("cr.components.calendar.strings.days.monday"),s("cr.components.calendar.strings.days.tuesday"),s("cr.components.calendar.strings.days.wednesday"),s("cr.components.calendar.strings.days.thursday"),s("cr.components.calendar.strings.days.friday"),s("cr.components.calendar.strings.days.saturday")],shortDays:[s("cr.components.calendar.strings.shortDays.sunday"),s("cr.components.calendar.strings.shortDays.monday"),s("cr.components.calendar.strings.shortDays.tuesday"),s("cr.components.calendar.strings.shortDays.wednesday"),s("cr.components.calendar.strings.shortDays.thursday"),s("cr.components.calendar.strings.shortDays.friday"),s("cr.components.calendar.strings.shortDays.saturday")],goToToday:s("cr.components.calendar.strings.goToToday"),prevMonthAriaLabel:s("cr.components.calendar.strings.prevMonthAriaLabel"),nextMonthAriaLabel:s("cr.components.calendar.strings.nextMonthAriaLabel"),prevYearAriaLabel:s("cr.components.calendar.strings.prevYearAriaLabel"),nextYearAriaLabel:s("cr.components.calendar.strings.nextYearAriaLabel")};return r.createElement("div",{"data-analytics-id":b,className:(0,S.A)("ms-DatePicker",o.root),role:"application","aria-label":s("cr.components.calendar.ariaLabelCalendar")},r.createElement("div",{className:(0,S.A)(o.picker,o.pickerIsOpened,o.pickerIsFocused,V&&o.monthPickerVisible,V&&K&&o.calendarsInline)},r.createElement("div",{className:o.holder,onKeyDown:function(t){switch(t.key){case v.U.Enter:case v.U.Backspace:t.preventDefault();break;case v.U.Escape:var n;null===(n=e.onDismiss)||void 0===n||n.call(e)}}},r.createElement("div",{className:o.frame},r.createElement("div",{className:(0,S.A)(o.wrap,{[o.goTodaySpacing]:E||_})},K&&r.createElement(T,{selectedDate:M,navigatedDate:G,today:l,onSelectDate:$,onNavigateDate:Y,firstDayOfWeek:u,dateRangeType:c,autoNavigateOnSelection:m,strings:W,onHeaderSelect:J,navigationIcons:y,dateTimeFormatter:f,navigatedDayRef:C,analyticsId:`${b}.dayPicker`,restrictions:_,showGoToToday:E,goToTodayButtonRef:R,prevButtonRef:L}),V&&r.createElement(N,{navigatedDate:G,strings:W,onSelectDate:$,onNavigateDate:Y,highlightCurrentMonth:h,onHeaderSelect:J,navigationIcons:y,dateTimeFormatter:f,navigatedMonthRef:O,analyticsId:`${b}.monthPicker`,restrictions:_,showGoToToday:E,goToTodayButtonRef:R,prevButtonRef:L}),E&&r.createElement("span",{"data-analytics-id":`${b}.todayButton`,role:"button",className:o.goToday,onClick:z,onKeyDown:function(e){e.key===v.U.Enter||" "===e.key?(e.preventDefault(),z()):e.key===v.U.Tab&&!e.shiftKey&&L.current&&(e.preventDefault(),L.current.focus())},ref:R,tabIndex:0},W.goToToday))))))})},854262:function(e,t,n){"use strict";n.d(t,{o:function(){return r.ob}});var r=n(115183)},99625:function(e,t,n){"use strict";n.d(t,{H$:function(){return b},$Q:function(){return _},xe:function(){return I},yw:function(){return A},aR:function(){return T},GQ:function(){return S}});var r=n(115183),i=n(247803),o=n(737234),s=n(580445),a=n(949304),l=n(175630),u=n(565473),d=n(533021),c=n(409216),p=n(978514),m=n(36594),g=n(347658),E=n(587497),h=n(479889),y=n(697064),f={DaysInOneWeek:7};function b(e,t){return 0===(0,i.A)((0,o.A)(e),(0,o.A)(t))}function I(e,t,n,i){let p;let m=[],g=null;switch(i||(i=[r.ob.Monday,r.ob.Tuesday,r.ob.Wednesday,r.ob.Thursday,r.ob.Friday]),t){case r.ci.Day:p=(0,o.A)(e),g=(0,s.A)(p,1);break;case r.ci.Week:case r.ci.WorkWeek:p=(0,a.A)((0,o.A)(e),{weekStartsOn:n}),g=(0,s.A)(p,f.DaysInOneWeek);break;case r.ci.Month:p=(0,l.A)(e),g=(0,u.A)(p,1);break;case r.ci.Year:p=(0,d.A)(e),g=(0,c.A)(p,1);break;default:return function(e){throw Error("Unexpected object: "+e)}(t)}let E=p;do t!==r.ci.WorkWeek?m.push(E):i.includes(E.getDay())&&m.push(E),E=(0,s.A)(E,1);while(!b(E,g));return m}function A(e,t){for(let n of t)if(b(e,n))return!0;return!1}function v(e){switch(e){case r.ci.Day:return p.A;case r.ci.Week:return m.A;case r.ci.Month:return g.A;case r.ci.Year:return E.A;default:return p.A}}function S(e){return e!==r.Pv.None&&(e===r.Pv.DateIsBefore||e===r.Pv.DateIsAfter||e===r.Pv.OutOfBounds||e===r.Pv.SameDate)}function _(e,t){if(!e||"string"==typeof e)return r.Pv.Invalid;if(!t)return r.Pv.None;let{singleRestriction:n,rangeRestriction:i}=t,s=(0,o.A)(e);if(n){let{maxPastBound:e,allowFutureDates:t,rangeType:i}=n;if(!t&&s.getTime()>Date.now())return r.Pv.FutureDate;let o=v(i)(new Date,s);if("number"==typeof e&&o>e)return r.Pv.MaxPastBound}if(i){let{referenceDate:e,isRangeBefore:t,rangeLimit:n,rangeType:a,allowSameDate:l}=i,u=(0,o.A)(e);if(!l&&b(s,u))return r.Pv.SameDate;let d=v(a)(s,u);if(void 0===t&&(d<-n||d>n))return r.Pv.OutOfBounds;if(t){if(s>u)return r.Pv.DateIsAfter;if(d<-n)return r.Pv.OutOfBounds}else{if(s<u)return r.Pv.DateIsBefore;if(d>n)return r.Pv.OutOfBounds}}return r.Pv.None}function T(e,t,n,i){if(!e)return!0;let o=n===r.ci.Month?u.A:c.A;return _((n===r.ci.Month?i?l.A:h.A:i?d.A:y.A)(o(t,i?1:-1)),{singleRestriction:e.singleRestriction})===r.Pv.None}},115183:function(e,t,n){"use strict";var r,i,o,s,a,l,u,d,c,p;n.d(t,{Pv:function(){return a},ci:function(){return s},ob:function(){return r}}),(l=r||(r={}))[l.Sunday=0]="Sunday",l[l.Monday=1]="Monday",l[l.Tuesday=2]="Tuesday",l[l.Wednesday=3]="Wednesday",l[l.Thursday=4]="Thursday",l[l.Friday=5]="Friday",l[l.Saturday=6]="Saturday",(u=i||(i={}))[u.January=0]="January",u[u.February=1]="February",u[u.March=2]="March",u[u.April=3]="April",u[u.May=4]="May",u[u.June=5]="June",u[u.July=6]="July",u[u.August=7]="August",u[u.September=8]="September",u[u.October=9]="October",u[u.November=10]="November",u[u.December=11]="December",(d=o||(o={}))[d.FirstDay=0]="FirstDay",d[d.FirstFullWeek=1]="FirstFullWeek",d[d.FirstFourDayWeek=2]="FirstFourDayWeek",(c=s||(s={})).Day="day",c.Week="week",c.Month="month",c.WorkWeek="workWeek",c.Year="year",(p=a||(a={})).OutOfBounds="OutOfBounds",p.DateIsBefore="DateIsBefore",p.DateIsAfter="DateIsAfter",p.MaxPastBound="MaxPastBound",p.FutureDate="FutureDate",p.SameDate="SameDate",p.Invalid="Invalid",p.Empty="Empty",p.None="None"},915459:function(e,t,n){"use strict";n.d(t,{c1:function(){return i},dL:function(){return d}});var r,i,o=n(514041),s=n(309546),a=n(528128),l=n(683900);(r=i||(i={})).Down="down",r.Right="right";let u=(0,l.makeStyles)(e=>({container:{padding:"0 16px",display:"none",[e.breakpoints.up("sm")]:{display:"flex"}},alwaysVisible:{display:"flex"},smallAndMediumOnlyContainer:{display:"flex",[e.breakpoints.up("md")]:{display:"none"}},chevron:{transition:"color 250ms cubic-bezier(0.55, 0, 0.1, 1), transform 250ms cubic-bezier(0.55, 0, 0.1, 1)",color:e.palette.text.secondary,"&:hover":{color:e.palette.action.active}}})),d=e=>{let{open:t,hideOnDesktop:n,useSmallIcon:r,alwaysVisible:l,className:d,orientation:c}=e,p=u(e),m=(e=i.Down,n)=>{if(e===i.Right){let e=n?a.ChevronRightSpecial:a.ChevronRight;return o.createElement(e,{className:p.chevron,style:{...t&&{transform:"rotate(90deg)"}},isDirectional:!0})}let r=n?a.ChevronDownSpecial:a.ChevronDown;return o.createElement(r,{className:p.chevron,style:{...t&&{transform:"rotate(180deg)"}},isDirectional:!1})};return o.createElement("div",{className:(0,s.A)(p.container,n&&p.smallAndMediumOnlyContainer,l&&p.alwaysVisible,d)},m(c,r))}},825383:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(683900);let i=(0,r.makeStyles)(e=>(0,r.createStyles)({button:{minWidth:"auto",".panel-header &":{padding:e.spacing(1,2)}},startIconCollapsed:{margin:0}}))},599259:function(e,t,n){"use strict";n.d(t,{l:function(){return o}});var r=n(514041),i=n(364079);let o=e=>{switch(e.name){case"pdf":return r.createElement(i.Pdf,{className:e.iconClass});case"presentation":return r.createElement(i.Presentation,{className:e.iconClass});case"spreadsheet":return r.createElement(i.Spreadsheet,{className:e.iconClass});case"zip":return r.createElement(i.Zip,{className:e.iconClass});case"audio":return r.createElement(i.Audio,{className:e.iconClass});case"photo":return r.createElement(i.Photo,{className:e.iconClass});case"video":return r.createElement(i.Video,{className:e.iconClass});case"document-text":return r.createElement(i.DocumentText,{className:e.iconClass})}return r.createElement(i.DocumentBlank,{className:e.iconClass})}},537659:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(683900);let i=(0,r.makeStyles)(e=>(0,r.createStyles)({root:{position:"relative"},input:{},searchButton:{height:"40px",width:"40px"},internalInput:{marginBottom:"0 !important",border:"none !important"},inputAdorment:{paddingRight:"0 !important"},popperContainer:{boxSizing:"border-box",borderStyle:"solid",borderWidth:"1px",borderColor:e.palette.border.main,boxShadow:`${e.palette.action.focus} 0px 0px 0px 4px`,borderRadius:"2px",zIndex:1e4},errorMessage:{color:e.palette.error.main,fontSize:e.typography.fontSizeSmall,fontWeight:e.typography.fontWeightMedium,margin:"0",paddingTop:e.spacing(.75),display:"flex",alignItems:"center","& svg":{marginRight:e.spacing(.75)}}}))},115765:function(e,t,n){"use strict";n.d(t,{u:function(){return i}});var r=n(115183);function i(e,t,n,i,o,s,a){var l,u,d,c,p,m,g,E,h,y,f,b,I;if(o===r.Pv.Invalid)return null!=i?i:s("cr.components.calendar.validate.invalid",{labelName:null!=e?e:t,format:s("components.directives.datepicker.dateFormatPlaceholder")});if(o===r.Pv.Empty)return null!=n?n:s("cr.components.calendar.validate.empty",{labelName:null!=e?e:t});if(a){if(a.rangeRestriction){if(o===r.Pv.OutOfBounds)return null!==(u=null===(l=a.errorStrings)||void 0===l?void 0:l.outOfBounds)&&void 0!==u?u:s("cr.components.calendar.validate.outOfBounds",{rangeLimit:s(`global.timeSpan.${a.rangeRestriction.rangeType}.plural`,{months:a.rangeRestriction.rangeLimit,years:a.rangeRestriction.rangeLimit,days:a.rangeRestriction.rangeLimit})});if(o===r.Pv.DateIsBefore)return null!==(c=null===(d=a.errorStrings)||void 0===d?void 0:d.dateIsBefore)&&void 0!==c?c:s("cr.components.calendar.validate.dateIsBefore",{firstLabel:null!=e?e:t,secondLabel:a.rangeRestriction.referenceDateLabel});if(o===r.Pv.DateIsAfter)return null!==(m=null===(p=a.errorStrings)||void 0===p?void 0:p.dateIsAfter)&&void 0!==m?m:s("cr.components.calendar.validate.dateIsAfter",{firstLabel:null!=e?e:t,secondLabel:a.rangeRestriction.referenceDateLabel});if(o===r.Pv.SameDate)return null!==(E=null===(g=a.errorStrings)||void 0===g?void 0:g.sameDate)&&void 0!==E?E:s("cr.components.calendar.validate.sameDate",{firstLabel:null!=e?e:t,secondLabel:a.rangeRestriction.referenceDateLabel})}if(a.singleRestriction){if(o===r.Pv.MaxPastBound)return null!==(y=null===(h=a.errorStrings)||void 0===h?void 0:h.maxPastBound)&&void 0!==y?y:s("cr.components.calendar.validate.maxPastBound",{limit:s(`global.timeSpan.${null!==(f=a.singleRestriction.rangeType)&&void 0!==f?f:r.ci.Day}.plural`,{months:a.singleRestriction.maxPastBound,years:a.singleRestriction.maxPastBound,days:a.singleRestriction.maxPastBound})});if(o===r.Pv.FutureDate)return null!==(I=null===(b=a.errorStrings)||void 0===b?void 0:b.futureDate)&&void 0!==I?I:s("cr.components.calendar.validate.futureDate",{labelName:e})}}return""}},875175:function(e,t,n){"use strict";n.d(t,{k:function(){return E}});var r=n(514041),i=n(374980),o=n(683900),s=n(251079),a=n(865004),l=n(528128);let u=(0,o.makeStyles)(e=>({container:{color:e.palette.error.main,display:"flex",alignItems:"center",gap:"4px"}})),d=e=>{let{charactersLength:t,maxCharactersLength:n,charactersRemainingThreshold:i,id:o}=e,s=u(),d=(0,a.W)(),c=n-t;return c>i?null:r.createElement("div",{className:s.container,role:"alert"},r.createElement(l.Attention,null),r.createElement("span",{id:o,"aria-live":"assertive",role:"alert"},d("cr.components.charactersLeft.charactersLeft",{left:c})))};var c=n(480243),p=n(470629),m=n(901745);let g=(0,o.makeStyles)({altTextInput:{marginTop:"16px"},checkbox:p.x.checkboxMarginFix,isDecorativeHelpBlock:{marginInlineStart:"10px"},isDecorativeHelp:{marginBlockStart:"0px"}}),E=(0,r.memo)(({analyticsId:e,canEdit:t,canMarkAsDecorative:n,isDecorative:o,onIsDecorativeChanged:l,altText:u,maxAltTextLength:p,onAltTextChanged:E})=>{let h=(0,s.Bi)(),y=g(),f=(0,m.i)(),b=(0,a.W)(),[I,A]=(0,r.useState)(u);return(0,r.useEffect)(()=>{A(u)},[u]),r.createElement(r.Fragment,null,r.createElement(i.AnalyticsTypography,{variant:"h2"},b("cr.components.fileAccessibilitySettings.title")),r.createElement(i.AnalyticsTypography,{variant:"caption"},b("cr.components.fileAccessibilitySettings.description",{helpLink:r.createElement(i.AnalyticsLink,{href:b("cr.components.fileAccessibilitySettings.help.link"),analyticsId:`${e}.ax.help.link`,target:"_blank"},b("cr.components.fileAccessibilitySettings.help.label"))})),r.createElement(i.AnalyticsTextField,{id:`${h}-alt-text`,analyticsId:`${e}.altText.input.text`,label:b("cr.components.fileAccessibilitySettings.altText.label"),placeholder:b("cr.components.fileAccessibilitySettings.altText.placeholder"),multiline:!0,minRows:3,fullWidth:!0,disabled:o||!t,value:I,className:y.altTextInput,InputLabelProps:{htmlFor:`${h}-alt-text`},inputProps:{maxLength:p,"aria-describedby":`${h}-chars-remaining`,className:f.multilineTextFieldBorderFix},onChange:e=>{let t=e.target.value;A(t),E(t)}}),!o&&r.createElement(d,{id:`${h}-chars-remaining`,charactersLength:u.length,maxCharactersLength:p,charactersRemainingThreshold:10}),n&&r.createElement(r.Fragment,null,r.createElement(i.AnalyticsFormControlLabel,{analyticsId:`${e}.markDecorative.input.checkboxLabel`,className:y.checkbox,label:b("cr.components.fileAccessibilitySettings.markAsDecorative.label"),disabled:!t,control:r.createElement(i.AnalyticsCheckbox,{analyticsId:`${e}.markDecorative.input.checkbox`,checked:o,onChange:e=>l(e.target.checked),inputProps:{"aria-describedby":o?`${h}-decorative`:void 0}})}),o&&r.createElement(c.j,{className:y.isDecorativeHelpBlock},r.createElement(i.AnalyticsFormHelperText,{id:`${h}-decorative`,analyticsId:`${e}.decorative.label`,className:y.isDecorativeHelp},b("cr.components.fileAccessibilitySettings.markAsDecorative.help")))))});E.displayName="FileInputAccessibilitySettings"},438538:function(e,t,n){"use strict";n.d(t,{d:function(){return d},v:function(){return u}});var r=n(514041),i=n(212035),o=n(309546),s=n(849555),a=n(683900);let l=(0,a.makeStyles)(e=>(0,a.createStyles)({fileViewerContainer:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%","& img":{maxHeight:"100%",maxWidth:"100%"},"& video":{maxHeight:"100%",maxWidth:"100%",display:"inline-block",marginBottom:"-5px"},"& audio":{width:"100%",display:"inline-block",marginBottom:"-6px"},"& iframe":{width:"100%",height:"100%",minHeight:"500px",[e.breakpoints.up("sm")]:{minHeight:"700px"},[e.breakpoints.up("md")]:{minHeight:"880px"},borderWidth:1,borderStyle:"solid",borderColor:e.palette.border.main}},fileViewerContainerImage:{alignItems:"stretch","& div":{backgroundColor:"unset",display:"flex"}},fileViewerContainerIframe:{alignItems:"stretch"}}));function u(e,t){let n=(0,s.ld)(e);return e.isDecorative?r.createElement("img",{src:n,...t,alt:""}):e.alternativeText?r.createElement("img",{src:n,...t,alt:e.alternativeText}):r.createElement("img",{src:n,...t})}let d=({...e})=>{let t;let n=l();return e.file.viewerUrl?t=n.fileViewerContainerIframe:"image"===(0,s.Tr)(e.file)&&(t=n.fileViewerContainerImage),r.createElement("div",{className:(0,o.A)(n.fileViewerContainer,t,e.containerClassName)},function(e){let{file:t,inlineMediaAdditionalAttributes:n}=e;if(t.viewerUrl)return r.createElement("iframe",{src:t.viewerUrl,allowFullScreen:!0,allow:"clipboard-write *",...t.alternativeText?{title:t.isDecorative?"":t.alternativeText}:null,...n});switch((0,s.Tr)(t)){case"image":return u(t,n);case"video":return r.createElement(i.VideoPlayer,{videoSrc:t.resourceUrl,altText:t.alternativeText,additionalAttributes:n});case"audio":return r.createElement(i.AudioPlayer,{audioSrc:t.resourceUrl,altText:t.alternativeText,additionalAttributes:n});default:return r.createElement(r.Fragment,null)}}(e))}},749368:function(e,t,n){"use strict";n.d(t,{c:function(){return r}});let r=255},677335:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var r=n(683900);let i="10px",o=(0,r.makeStyles)(e=>(0,r.createStyles)({root:{color:e.palette.text.primary,display:"flex",flexFlow:"wrap",position:"relative",transform:"translateZ(0)","&:hover $rootControlsInline button":{backgroundColor:e.palette.background.b9,color:e.palette.secondary.light},"&:hover $rootControlsInline button:hover":{color:e.palette.primary.contrastText}},rootControls:{display:"flex",flex:"1 0 100%",order:1,alignItems:"stretch",minHeight:"58px",minWidth:0},rootControlsWidgets:{"@media print":{display:"none"},display:"flex","& button":{color:e.palette.text.secondary,height:"100%",minHeight:"48px",width:"48px",borderRadius:"0"},"& button:hover, & button:focus":{backgroundColor:e.palette.background.b4,color:e.palette.primary.main}},rootControlsInline:{flex:"0 1 auto",position:"absolute",right:0,zIndex:100,minHeight:"auto","& $rootControlsWidgets":{flexDirection:"column-reverse"}},rootBackground:{backgroundColor:e.palette.background.paper,"@media print":{border:"1px solid"}},contextMenu:{display:"flex",marginLeft:"auto"},inlineRenderToggle:{display:"flex"},inlineRenderToggleSeparator:{alignSelf:"center",borderLeft:`1px solid ${e.palette.background.b5}`,height:"50%",width:"1px"},mediaRoot:{margin:"0 auto",order:2,textAlign:"center",width:"100%"},documentPreviewHidden:{height:0,display:"none","div& iframe":{height:0,minHeight:0,visibility:"hidden"}},mediaRootInline:{order:0},attachmentMeta:{display:"flex",alignItems:"center",flex:1,height:"100%",minWidth:0,paddingLeft:i,paddingRight:i,wordBreak:"break-all"},attachmentMetaClickable:{"&:hover,&:focus":{backgroundColor:e.palette.background.b4,cursor:"pointer",textDecoration:"underline"}},icon:{marginRight:"10px"},fileText:{flexShrink:1,lineHeight:"unset",textAlign:"unset",fontWeight:e.typography.fontWeightBold},contextMenuHovered:{"& svg":{color:e.palette.primary.main},"& button.is-expanded svg":{color:e.palette.brand.main}},fileHasError:{color:e.palette.error.main},fileSubText:{color:e.palette.text.secondary}}))},480243:function(e,t,n){"use strict";n.d(t,{j:function(){return l}});var r=n(683900),i=n(944055),o=n(309546),s=n(514041);let a=(0,r.makeStyles)(()=>({container:{display:"flex",gap:"14px"},decoration:{flexShrink:0,inlineSize:"4px",borderRadius:"4px",background:i.JS.messagingYellowBackground},children:{flex:1}})),l=(0,s.forwardRef)(function(e,t){let{children:n,className:r,...i}=e,l=a();return s.createElement("div",{ref:t,className:(0,o.A)(l.container,r),...i},s.createElement("div",{className:l.decoration}),s.createElement("div",{className:l.children},n))})},840772:function(e,t,n){"use strict";n.d(t,{s:function(){return c}});var r=n(514041),i=n(865004),o=n(683900);let s=(0,o.makeStyles)(e=>(0,o.createStyles)({modalRoot:{backgroundColor:"transparent",display:"flex",justifyContent:"center",alignItems:"center","& img":{display:"block",marginBlock:"0",marginInline:"auto"}},modalCloseWrapper:{cursor:"pointer",position:"fixed",insetBlockStart:0,insetInlineEnd:0,margin:"16px"},mediaItem:{cursor:"pointer",maxBlockSize:"100%",overflow:"auto"},modalCloseButton:{color:e.palette.background.default}}));var a=n(374980),l=n(528128),u=n(882386),d=n(438538);let c=e=>{let t=s(),n=(0,i.W)();return r.createElement(u.k3,{analyticsId:`${e.analyticsId}.modal`,className:t.modalRoot,open:e.open,onClose:e.onClose},r.createElement(r.Fragment,null,r.createElement("div",{className:t.mediaItem},(0,d.v)(e.file)),r.createElement("div",{className:t.modalCloseWrapper},r.createElement(a.AnalyticsIconButton,{className:t.modalCloseButton,"aria-label":n("cr.components.mediaGalleryView.closeButtonAriaLabel"),onClick:e.onClose,analyticsId:`${e.analyticsId}.modal.close.button`},r.createElement(l.Close,null)))))}},128059:function(e,t,n){"use strict";n.d(t,{Q:function(){return l}});var r=n(374980),i=n(683900),o=n(865004),s=n(514041);let a=(0,i.makeStyles)(e=>({moreInfo:{color:e.palette.text.secondary,overflow:"hidden",boxOrient:"vertical",display:"-webkit-box",lineClamp:1}})),l=e=>{let{authorLinkText:t,authorName:n,authorUrl:i,analyticsId:l,tabIndex:u,onBlur:d,onKeyDown:c,onFocus:p}=e,m=a(),g=(0,o.W)();return s.createElement(r.AnalyticsTooltip,{analyticsId:`${l}.author.tooltip`,title:n},s.createElement(r.AnalyticsLink,{onBlur:d,onKeyDown:c,onFocus:p,tabIndex:u,className:m.moreInfo,analyticsId:`${l}.image.author.link`,href:i,target:"_blank"},null!=t?t:g("cr.components.accessibility.skipLink.imageBy",{userName:n})))}},494764:function(e,t,n){"use strict";n.d(t,{y:function(){return u}});var r=n(128059),i=n(683900),o=n(309546),s=n(514041),a=n(252651);let l=(0,i.makeStyles)(e=>({image:{borderRadius:"6px",border:"2px solid transparent",cursor:"pointer",width:"100%",height:"100%"},imageSelected:{"&::before":{content:'""',position:"absolute",inset:"2px",border:`1px solid ${e.palette.background.default}`,borderRadius:"4px"}},selected:{border:`2px solid ${e.palette.brand.main}`,padding:"1px"},hideImageButton:{display:"none"},moreInfo:{marginLeft:"2px"},skeleton:{borderRadius:"4px",width:"100%"},square:{height:"auto",aspectRatio:"1 / 1"},dynamic:{height:"98px"},moreInfoLink:{color:e.palette.text.secondary}})),u=e=>{let{onClick:t,altText:n,url:u,isSelected:d,imageType:c,linkProps:p,isLinkFocusable:m,isMouseClick:g}=e,E=l(),[h,y]=(0,s.useState)(!1),{cell:f,capture:b,uncapture:I}=(0,a.JE)(),A=e=>{"Escape"===e.key&&e.stopPropagation()};return(0,s.useEffect)(()=>{d&&!g&&I(),d&&g&&b()},[d,I,b,g]),s.createElement(s.Fragment,null,!h&&s.createElement(i.Skeleton,{className:(0,o.A)(E.skeleton,{[E.square]:"square"===c,[E.dynamic]:"dynamic"===c}),variant:"rect"}),s.createElement("img",{tabIndex:!p&&f.captured?0:-1,className:(0,o.A)(E.image,{[E.hideImageButton]:!h,[E.imageSelected]:d,[E.selected]:d,[E.square]:"square"===c,[E.dynamic]:"dynamic"===c}),onClick:t,src:u,alt:n,onLoad:()=>{y(!0)},onKeyDown:p?void 0:A}),p&&s.createElement(r.Q,{onBlur:()=>{I()},onFocus:()=>{b()},onKeyDown:A,analyticsId:p.analyticsId,authorUrl:p.authorUrl,authorName:p.authorName,tabIndex:m&&f.active||f.captured?0:-1}))}},428360:function(e,t,n){"use strict";n.d(t,{V:function(){return u}});var r=n(514041),i=n(374980),o=n(127863),s=n(683900);let a=(0,s.makeStyles)(e=>(0,s.createStyles)({componentContainer:{justifyContent:"center",height:"100%",padding:"30px 0"},container:{display:"flex",flexDirection:"column",alignItems:"center"},horizontalTextContainer:{[e.breakpoints.up("lg")]:{alignItems:"start"}},horizontalContainer:{backgroundColor:e.palette.background.b1,padding:"20px",flexFlow:"column",[e.breakpoints.up("lg")]:{flexFlow:"row"}},illustration:{marginBottom:"20px","& svg":{width:"250px"}},horizontalIllustration:{display:"none",[e.breakpoints.up("lg")]:{display:"block",marginBottom:"0",marginRight:"20px"}},horizontalProminent:{marginBottom:"3px",fontWeight:e.typography.fontWeightBold,[e.breakpoints.up("lg")]:{textAlign:"left"}},horizontalParagraph:{textAlign:"center",marginBottom:"0",[e.breakpoints.up("lg")]:{textAlign:"left"}},subText:{textAlign:"center"}}));var l=n(309546);let u=e=>{let{illustration:t,prominentText:n,subText:s,horizontalDisplay:u,headerComponent:d="h2",className:c}=e,p=a();return r.createElement("div",{className:(0,l.A)(c,p.container,p.componentContainer,{[p.horizontalContainer]:u})},r.createElement(o.A,{image:t,className:(0,l.A)({[p.horizontalIllustration]:u,[p.illustration]:!u}),presentationOnly:!0}),r.createElement("div",{className:(0,l.A)(p.container,{[p.horizontalTextContainer]:u})},r.createElement(i.AnalyticsTypography,{className:(0,l.A)({[p.horizontalProminent]:u}),variant:"h2",component:d},n),s&&!u&&r.createElement("span",{className:p.subText},s),s&&u&&r.createElement("p",{className:p.horizontalParagraph},s)))}},861422:function(e,t,n){"use strict";n.d(t,{h:function(){return d}});var r=n(225927);let i=()=>{let{babelfishFormat:e,locale:t}=(0,r.b)();return e.getFormatterSync(t).cldr.main("listPatterns/listPattern-type-standard")};var o=n(585608),s=n(884270);let a=/\{[01]\}/;class l{parse(e){return{2:e["2"].split(a),start:e.start.split(a),middle:e.middle.split(a),end:e.end.split(a)}}}(0,o.Cg)([(0,s.LRUMemoize)(),(0,o.Sn)("design:type",Function),(0,o.Sn)("design:paramtypes",[Object]),(0,o.Sn)("design:returntype",Object)],l.prototype,"parse",null);let u=new l,d=()=>{let e=i();return u.parse(e)}},635111:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});let r=(0,n(683900).makeStyles)(e=>({button:{color:e.palette.link.active,textDecoration:"underline",verticalAlign:"baseline","&:hover":{color:e.palette.link.focus},"&:focus":{color:e.palette.link.hover}},close:{marginInlineStart:"6px"}}))},738293:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var r=n(683900),i=n(914752);let o=(0,r.makeStyles)(()=>({localizedNumberInput:e=>{let{locale:t,displayWesternNumbers:n,inlineLabel:r}=e,o=(0,i.Zk)(t,n),s=o?"right":"inherit";return{flip:!o,textAlign:s,display:r?"inline-block":"block","& label":{display:r?"inline-block":"block"},'& input[type="text"], & input[type="text"]:focus':{flip:!o,textAlign:s,margin:"0",background:"transparent",height:"auto",boxShadow:"none",minHeight:"34px",border:"none",outline:"none"}}}}))},405757:function(e,t,n){"use strict";n.d(t,{Hd:function(){return a},O2:function(){return d},P$:function(){return c},VK:function(){return s},Xy:function(){return l},zZ:function(){return u}});var r=n(514041),i=n(225927),o=n(914752);let s=e=>e.indexOf("E")>-1||e.indexOf("e")>-1,a=(e,t)=>(0,o.Zk)(e,t)?"en-us":e,l=(e,t)=>(0,o.Zk)(e,t)?"ltr":void 0,u=e=>{let t=(e=e.indexOf("E")>0?e.replace("E","e"):e).substring(e.indexOf("e"));return{integer:e.substring(0,e.length-t.length),exponentialNotation:t}},d=(e,t,n,r,i={})=>{var a,l;if(null==t||!Number.isFinite(t))return"";let u=s(t.toString())?"scientific":"standard",d=(0,o.Zk)(e,n),c={...i,notation:u};d&&(c.numberingSystem="latn");let p=null===(l=null===(a=null==r?void 0:r.getFormatterSync)||void 0===a?void 0:a.call(r,e).cldr)||void 0===l?void 0:l.locale,m=[];if(p){m.push(p);let e=p.split("-");m.push(`${e[0]}-${e[1]}`)}m.push("en-US");let g=e=>new Intl.NumberFormat(e,{...c}).formatToParts(t).map(t=>{switch(t.type){case"decimal":return"٫"!==r.number.getDecimalStringSync(e)&&d||!d?r.number.getDecimalStringSync(e):t.value;case"group":return"٬"!==r.number.getGroupingStringSync(e)&&d||!d?r.number.getGroupingStringSync(e):t.value;default:return t.value}}).join(""),E=m.shift();for(;E;)try{return g(E)}catch(e){E=m.shift()}return t.toString()},c=({value:e,numberFormatOptions:t,displayWesternNumbers:n=!1})=>{let{babelfishFormat:o,locale:s}=(0,i.b)(),[a,l]=r.useState(d(s,e,n,o,t)),[u,c]=r.useState(e);return r.useEffect(()=>{e!==u&&(c(e),l(d(s,e,n,o,t)))},[e,l,t,c,u,s,n,o]),{displayValue:a,setDisplayValue:l,numericValue:u,setNumericValue:c}}},681067:function(e,t,n){"use strict";n.d(t,{W:function(){return a}});var r=n(514041),i=n(645250),o=n(322327),s=n(374980);let a=r.memo(({analyticsId:e,item:t,onChange:n})=>{let i=(0,o.I)();return r.createElement(s.AnalyticsListItem,{analyticsId:`${e}.listItem`,className:i.listItem,disableGutters:!0},r.createElement(s.AnalyticsFormControlLabel,{analyticsId:`${e}.formControlLabel`,label:t.label,htmlFor:`ind-checkbox-${t.value}`,control:r.createElement(s.AnalyticsCheckbox,{analyticsId:`${e}.multiSelectItem.input.checkbox`,id:`ind-checkbox-${t.value}`,checked:t.checked,value:t.value,onChange:n})}))},i.isEqual)},322327:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(683900);let i=(0,r.makeStyles)(e=>(0,r.createStyles)({multiSelectContainer:{backgroundColor:e.palette.background.b1,paddingLeft:"12px",overflowX:"hidden",maxHeight:"130px","&.with-scroll":{overflowY:"scroll"}},divider:{marginRight:"0",marginBottom:"3px"},MultiselectCheckbox:{width:"100%","& fieldset":{width:"100%"}},multiselectFormControl:{"&.MuiFormControl-root":{width:"100%"}},list:{width:"100%"},listItem:{paddingTop:"0",paddingBottom:"0"}}))},338562:function(e,t,n){"use strict";n.d(t,{I:function(){return o}});var r=n(683900),i=n(622246);let o=(0,r.makeStyles)(e=>(0,r.createStyles)({panelHeaderControlsRoot:t=>({minWidth:t.minWidth?`${t.minWidth}px`:"auto",flex:1,display:"flex",justifyContent:"flex-end",[e.breakpoints.up("md")]:{display:"block",flex:0,justifyContent:"center",marginLeft:0},...i.eO}),panelHeaderControlsWrapper:{display:"flex"}}))},53497:function(e,t,n){"use strict";n.d(t,{E:function(){return r}});let r={buildSensor:()=>{},activator:(0,n(188240).l)("onKeyDown",()=>!1)}},774685:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var r=n(188240),i=n(431166);let o={buildSensor:e=>{new i.A(e).attachListeners()},activator:(0,r.l)("onPointerDown",e=>e.isPrimary&&0===e.button)}},431166:function(e,t,n){"use strict";n.d(t,{A:function(){return o}});var r=n(42548),i=n(384224);class o{constructor(e){this.location=e.resizeHandleLocation,this.originalRect=e.originalRect,this.resizedRect=null,this.onStart=e.onStart,this.onResize=e.onResize,this.onEnd=e.onEnd,this.isRtl=e.isRtl,this.onCancel=e.onCancel,this.attachListeners=this.attachListeners.bind(this),this.handlePointerMove=this.handlePointerMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.cleanupListeners=this.cleanupListeners.bind(this)}attachListeners(){document.addEventListener("pointermove",this.handlePointerMove),document.addEventListener("pointerup",this.handleEnd),document.addEventListener("keydown",this.handleKeyDown),document.addEventListener("resize",this.handleCancel),document.addEventListener("dragstart",this.handleCancel),document.addEventListener("visibilitychange",this.handleCancel),document.addEventListener("contextmenu",this.handleCancel),this.onStart()}handlePointerMove(e){e.preventDefault();let t={x:e.clientX,y:e.clientY};this.resizedRect=function(e,t,n,i){let o={x:e.x,y:e.y,width:e.width,height:e.height};if(!i&&n===r.g.InlineStart||i&&n===r.g.InlineEnd){let n=t.x-e.x;o.x=t.x,o.width=o.width-n}if(!i&&n===r.g.InlineEnd||i&&n===r.g.InlineStart){let n=t.x-(e.x+e.width);o.width=o.width+n}return o}(this.originalRect,t,this.location,this.isRtl),this.onResize(this.originalRect,this.resizedRect)}handleKeyDown(e){e.code===i.U.Escape&&this.handleCancel()}handleEnd(){this.cleanupListeners(),this.onEnd(this.originalRect,this.resizedRect)}handleCancel(){this.cleanupListeners(),this.onCancel()}cleanupListeners(){document.removeEventListener("pointermove",this.handlePointerMove),document.removeEventListener("pointerup",this.handleEnd),document.removeEventListener("keydown",this.handleKeyDown),document.removeEventListener("resize",this.handleCancel),document.removeEventListener("dragstart",this.handleCancel),document.removeEventListener("visibilitychange",this.handleCancel),document.removeEventListener("contextmenu",this.handleCancel)}}},188240:function(e,t,n){"use strict";function r(e,t){return{eventName:e,shouldActivate:t}}n.d(t,{l:function(){return r}})},42548:function(e,t,n){"use strict";var r,i;n.d(t,{g:function(){return r}}),(i=r||(r={})).InlineStart="inlineStart",i.InlineEnd="inlineEnd"},363335:function(e,t,n){"use strict";n.d(t,{f:function(){return g}});var r,i,o=n(514041),s=n(212840),a=n(528128),l=n(299420),u=/*#__PURE__*/n.n(l),d=n(94396),c=n(225927);(r=i||(i={}))[r.Up=1]="Up",r[r.Down=-1]="Down";let p=new Map([[d.Q.Hour,"h"],[d.Q.Minute,"m"],[d.Q.AmPm,"h"]]),m=e=>{e.stopPropagation();let t=e.which;(t===d.c.Up||t===d.c.Down||t===d.c.Home||t===d.c.End||t===d.c.Left||t===d.c.Right||t===d.c.Pageup||t===d.c.Pagedown)&&e.preventDefault()},g=e=>{let{formatNumber:t,parseNumber:n,isRtl:r}=(0,c.b)(),l=p.get(e.type),g=()=>{let{type:t,is24hr:n}=e;return t===d.Q.Hour?n?0:1:0},E=()=>{let{type:t,is24hr:n}=e;return t===d.Q.Hour?n?23:12:59},h=(e,t,n,r)=>(r.set("year",n),r.set("month",t),r.set("date",e),r.toDate()),y=(t,n,r)=>{let{onChangeValue:i}=e,o=t.date(),s=t.month(),a=t.year();t.add(n,r),i(h(o,s,a,t))},f=t=>{let{date:n,onChangeValue:r}=e,i=u()(n),o=i.date(),s=i.month(),a=i.year();e.type===d.Q.AmPm?i.add(12*t,l):i.add(1*t,l),r(h(o,s,a,i))},b=(t,n)=>{let{closeSpinner:r}=e;m(t);let i=t.which;i===d.c.Esc?r():(i===d.c.Up||i===d.c.Down||i===d.c.Home||i===d.c.End||i===d.c.Left||i===d.c.Right||i===d.c.Pageup||i===d.c.Pagedown)&&y(n,12,"h")},I=o.useCallback(t=>{let{onChangeValue:n,closeSpinner:i,type:o,is24hr:s,date:a}=e,c=u()(a),p=c.date(),g=c.month(),E=c.year();if(o===d.Q.AmPm){b(t,c);return}switch(m(t),t.which){case d.c.Esc:i();break;case d.c.Right:{let e=r()?-1:1;l&&y(c,e,l);break}case d.c.Up:l&&y(c,1,l);break;case d.c.Left:{let e=r()?1:-1;l&&y(c,e,l);break}case d.c.Down:l&&y(c,-1,l);break;case d.c.Pageup:o===d.Q.Hour&&l?y(c,3,l):o===d.Q.Minute&&l&&y(c,10,l);break;case d.c.Pagedown:o===d.Q.Hour&&l?y(c,-3,l):o===d.Q.Minute&&l&&y(c,-10,l);break;case d.c.Home:o===d.Q.Hour?(c.hour(s?23:12),n(h(p,g,E,c))):o===d.Q.Minute&&(c.minute(59),n(h(p,g,E,c)));break;case d.c.End:o===d.Q.Hour?(c.hour(s?0:1),n(h(p,g,E,c))):o===d.Q.Minute&&(c.minute(0),n(h(p,g,E,c)))}},[e.date]),A=(e,r)=>{let i=n(e),o=g(),s=E();return Number.isNaN(i)?n(r).toString():i>=o&&i<=s?e:i<o?t(o):t(s)},v=o.useCallback(t=>{let{type:n,value:r,updateTimeInput:i}=e,o=t.target.value;if(n===d.Q.AmPm){i({amPm:o.toUpperCase()});return}let s=A(o,r);i(n===d.Q.Hour?{hour:s}:{minute:s})},[e.value]),S=o.useCallback(t=>{m(t),t.which===d.c.Esc&&e.closeSpinner()},[]);return o.createElement("div",{className:e.className},o.createElement(s.AnalyticsIconButton,{"aria-label":e.ariaLabel.upButton,className:"spinner-btn",onKeyUp:S,onClick:()=>f(i.Up),onKeyDown:m,title:e.ariaLabel.upButton,analyticsId:e.analyticsId.upButton,"data-testid":"add-btn"},o.createElement(a.ArrowUp,null)),o.createElement("input",{type:"text",className:e.className+"-input",ref:e.inputRef,"aria-label":e.ariaLabel.input,value:e.value,role:"spinbutton","aria-valuenow":parseInt(e.value,10),"aria-valuemax":E(),"aria-valuemin":g(),onChange:v,onFocus:e=>e.target.select(),onKeyUp:I,onKeyDown:m,onKeyPress:t=>{t.which===d.c.Enter&&e.closeSpinner()},onClick:e.onInputClick,"data-analytics-id":e.analyticsId.input}),o.createElement(s.AnalyticsIconButton,{"aria-label":e.ariaLabel.downButton,className:"spinner-btn",onClick:()=>f(i.Down),onKeyUp:S,onKeyDown:m,title:e.ariaLabel.downButton,analyticsId:e.analyticsId.downButton,"data-testid":"sub-btn"},o.createElement(a.ArrowDown,null)))}},94396:function(e,t,n){"use strict";var r,i,o,s;n.d(t,{Q:function(){return r},c:function(){return i}}),(o=r||(r={})).Hour="hour",o.Minute="minute",o.AmPm="amPm",(s=i||(i={}))[s.Pageup=33]="Pageup",s[s.Pagedown=34]="Pagedown",s[s.End=35]="End",s[s.Home=36]="Home",s[s.Left=37]="Left",s[s.Up=38]="Up",s[s.Right=39]="Right",s[s.Down=40]="Down",s[s.Esc=27]="Esc",s[s.Enter=13]="Enter"},549730:function(e,t,n){"use strict";n.d(t,{D:function(){return I}});var r,i,o=n(374980),s=n(309546),a=n(514041),l=n(865004),u=n(428360),d=n(683900);let c=(0,d.makeStyles)(e=>({empty:{textAlign:"center",borderLeft:`1px solid ${e.palette.border.main}`,borderRight:`1px solid ${e.palette.border.main}`,borderBottom:`1px solid ${e.palette.border.main}`,padding:"20px"},emptyRootLevel:{border:0}})),p=({analyticsId:e,localizedMessage:t,level:n,colSpan:r,emptyIllustration:i})=>{let l=c(),d=0===n;return a.createElement(o.AnalyticsTableRow,{analyticsId:`${e}.empty.row`},a.createElement(o.AnalyticsTableCell,{analyticsId:`${e}.empty.row.cell`,colSpan:r,className:(0,s.A)({[l.empty]:!0,[l.emptyRootLevel]:d})},d&&i?a.createElement(u.V,{illustration:i,prominentText:t}):t))},m=(0,d.makeStyles)(e=>({loading:{padding:"20px"},loadingSpinner:{display:"flex",justifyContent:"center"},loadingBorder:{border:`1px solid ${e.palette.border.main}`,borderTop:0}}));var g=n(915459),E=n(846108);(r=i||(i={})).Margin="margin",r.Padding="padding";let h=(0,d.makeStyles)(e=>({cell:{borderBottom:0,padding:0,height:"inherit"},cellIndented:t=>{let{level:n,prependedExpandIcon:r}=t,o=32*n,s=r?i.Margin:i.Padding;return{[`${s}InlineStart`]:`${o}px`,paddingInlineEnd:o,[e.breakpoints.down("md")]:{[`${s}InlineStart`]:`${n*(r?32:16)}px`,paddingInlineEnd:16*n}}},applyBorderToElement:{borderBottom:`1px solid ${e.palette.border.main}`},cellColumnContentExpandContainer:{position:"relative",display:"flex",alignItems:"center",height:"100%",width:"100%",marginTop:5,marginBottom:5},columnContentContainer:{display:"flex",justifyContent:"center",alignItems:"flex-start",height:"100%"},expandContainer:{display:"flex",justifyContent:"flex-end",height:"100%",padding:"0px"},collapseIcon:{alignItems:"center",padding:0},iconContainer:{[e.breakpoints.up("sm")]:{display:"flex",padding:"10px 8px",alignSelf:"center",height:"50%"}},iconContainerBorder:{[e.breakpoints.up("sm")]:{borderLeft:`1px solid ${e.palette.border.main}`,borderColor:e.palette.border.main}},noBottomBorder:{"& $cellColumnContentExpandContainer":{borderBottom:"none"}},collapseDisabled:{"& svg":{color:e.palette.action.disabled}},disabledOnEdition:{backgroundColor:e.palette.action.disabledBackground,"&:hover":{backgroundColor:e.palette.action.disabledBackground}}})),y=({analyticsId:e,column:t,level:n,colIndex:r,data:i,showExpander:l,isExpanded:u,isLastItemOnLevel:d,additionalRowAction:c,rowKey:p,rowKeyBeingEdited:m,nonEditableFieldsConfig:y,prependedExpandIcon:f})=>{var b,I;let A=h({level:n,prependedExpandIcon:f}),v=n>0,S=(null==m?void 0:m())===p,_=(null==m?void 0:m())!==null,T=a.createElement("div",{className:(0,s.A)(A.expandContainer,{[A.applyBorderToElement]:!d&&!f})},p&&c&&c(p,-1),l?a.createElement("div",{className:(0,s.A)({[A.iconContainerBorder]:!S&&!f},A.iconContainer),"data-testid":"icon-container"},a.createElement(g.dL,{open:u,className:(0,s.A)(A.collapseIcon,{[A.collapseDisabled]:_}),orientation:f?g.c1.Right:g.c1.Down})):null);return a.createElement(o.AnalyticsTableCell,{role:"gridcell",analyticsId:`${e}.tableRowCell.${t.key}`,className:(0,s.A)({[A.noBottomBorder]:S&&!!y&&y.editableStartingColumn>0&&(y.nonEditableColumnsPosition===E.I.BEGINNING?r<=y.editableStartingColumn:r>=y.editableStartingColumn),[A.disabledOnEdition]:!S&&_},A.cell,!S&&(null===(b=t.additionalClasses)||void 0===b?void 0:b.rows),S&&(null===(I=t.additionalClasses)||void 0===I?void 0:I.editableRow)),tabIndex:-1},a.createElement("div",{className:A.cellColumnContentExpandContainer},a.createElement("div",{className:(0,s.A)(A.cellColumnContentExpandContainer,{[A.applyBorderToElement]:!(v&&1===r&&!f)&&!d,[A.cellIndented]:t.indentation})},f&&T,a.createElement(t.content,{analyticsId:`${e}.tableRowCell.${t.key}`,tabIndex:-1,data:i,isExpanded:u,rowKey:p})),!f&&T))},f=(0,d.makeStyles)(e=>({collapseIconCell:{width:"24px"},rowExpandable:{cursor:"pointer","&:hover":{backgroundColor:e.palette.background.b3}},rowIsChild:{"& td":{backgroundColor:e.palette.background.paper}},rowIsLastOnLevel:{"& td":{borderBottom:`1px solid ${e.palette.border.main}`}}})),b=(0,a.memo)(({analyticsId:e,getLocalizedEmptyKey:t,colSpan:n,row:r,getRowKey:i,loadRows:l,canRowExpand:u,indexOnLevel:d,lastItemOnLevel:c,level:p,numberOfItemsOnLevel:m,treeViewTableColumns:g,prependExpandIcon:E})=>{var h,b;let A;let v=f(),[S,_]=a.useState(!1),T=u(r),O=a.useCallback(e=>{_(e=>!e),e.stopPropagation()},[_]),C=(null===(h=r.rowKeyBeingEdited)||void 0===h?void 0:h.call(r))!==null;return T&&(A=`${S}`),a.createElement(a.Fragment,null,a.createElement(o.AnalyticsTableRow,{analyticsId:`${e}.tableRow`,"aria-level":p+1,"aria-expanded":A,"aria-posinset":d+1,"aria-setsize":m,role:"row",tabIndex:0===p&&0===d?0:-1,className:(0,s.A)({[v.rowExpandable]:!C&&T,[v.rowIsChild]:!C&&p>0,[v.rowIsLastOnLevel]:!S&&c}),onClick:T&&!C?O:void 0},g.getColumnsData(g.defaultHeaders).map((t,n)=>{let o=n===g.defaultHeaders.length-1,s=(E?0===n:o)&&T;return a.createElement(y,{key:t.key,column:t,colIndex:n+1,data:r,level:p,analyticsId:`${e}.tableRow.cell`,showExpander:s,isExpanded:S,isLastItemOnLevel:!S&&c,additionalRowAction:o?r.rowAction:void 0,rowKey:i(r),rowKeyBeingEdited:r.rowKeyBeingEdited,nonEditableFieldsConfig:r.nonEditableFieldsConfig,prependedExpandIcon:E})})),null===(b=r.rowToolbar)||void 0===b?void 0:b.call(r,i(r)),S&&a.createElement(I,{getLocalizedEmptyKey:t,record:r,colSpan:n,getRowKey:i,loadRows:l,canRowExpand:u,level:p+1,lastItemOnLevel:c,treeViewTableColumns:g,analyticsId:`${e}.tableRowContainer`,prependExpandIcon:E}))}),I=(0,a.memo)(({analyticsId:e,getLocalizedEmptyKey:t,emptyRowIllustration:n,colSpan:r,record:i,getRowKey:u,loadRows:d,canRowExpand:c,lastItemOnLevel:g,level:E,treeViewTableColumns:h,prependExpandIcon:y})=>{let f=m(),I=(0,l.W)(),{rows:A,isLoading:v}=d(i);return a.createElement(a.Fragment,null,!v&&0===A.length&&a.createElement(p,{localizedMessage:t(i),emptyIllustration:n,colSpan:r,level:E,analyticsId:`${e}.tableRow.empty`}),v?a.createElement(o.AnalyticsTableRow,{analyticsId:`${e}.tableRow`},a.createElement(o.AnalyticsTableCell,{analyticsId:`${e}.tableRow.cell.loadingIcon`,colSpan:r,className:(0,s.A)(f.loading,E>0?f.loadingBorder:void 0)},a.createElement("div",{className:(0,s.A)(f.loadingSpinner,"js-treeview-loading-spinner")},a.createElement(o.AnalyticsCircularProgress,{ariaLabel:I("global.loading"),size:"medium"})))):A.map((n,i)=>{let o=(g||1===E)&&i===A.length-1;return a.createElement(b,{key:`tree-view-table-row-${u(n)}`,row:n,getLocalizedEmptyKey:t,colSpan:r,getRowKey:u,loadRows:d,canRowExpand:c,indexOnLevel:i,lastItemOnLevel:o,level:E,numberOfItemsOnLevel:A.length,treeViewTableColumns:h,analyticsId:`${e}.tableRow`,prependExpandIcon:y})}))})},848230:function(e,t,n){"use strict";n.d(t,{v:function(){return r}});let r=(0,n(683900).makeStyles)(e=>({toolbarCell:{paddingLeft:0},toolbarContainer:{display:"flex",alignItems:"center",justifyContent:"space-between"},buttonsContainer:{display:"flex",justifyContent:"flex-end"},saveButton:{marginLeft:e.spacing(2)},messageContainer:{display:"flex",alignItems:"center",justifyContent:"flex-start",color:e.palette.error.main},message:{marginLeft:e.spacing(1.25)}}))},846108:function(e,t,n){"use strict";var r,i;n.d(t,{I:function(){return r}}),(i=r||(r={})).BEGINNING="beginning",i.ENDING="ending"},775033:function(e,t,n){"use strict";n.d(t,{AE:function(){return v},Gv:function(){return E},L8:function(){return I},Tr:function(){return l},Vp:function(){return g},Zo:function(){return b},Zp:function(){return f},gD:function(){return u},gv:function(){return y},kt:function(){return o},lc:function(){return m},ld:function(){return d},mL:function(){return h},qG:function(){return p},rU:function(){return c},u:function(){return A}});var r=n(5612),i=n(85303);let o=0x6400000,s=["application/pdf","application/msword","application/vnd.oasis.opendocument.text","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-powerpoint","application/vnd.oasis.opendocument.presentation","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/x-mspowerpoint","application/x-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.slideshow","application/vnd.ms-excel","application/vnd.ms-excel.sheet.binary.macroEnabled.12","application/vnd.ms-excel.sheet.macroEnabled.12","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/csv","text/plain","application/rtf"],a={"application/vnd.ms-excel":0xa00000,"application/vnd.ms-excel.sheet.binary.macroEnabled.12":0xa00000,"application/vnd.ms-excel.sheet.macroEnabled.12":0xa00000,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":0xa00000,"text/csv":0xa00000};function l(e){let t="";return e.mimeType&&(t=e.mimeType.substring(0,e.mimeType.indexOf("/"))),t}function u(e){return a[e.mimeType]}function d(e){return e.modifiedDate?(0,i.$B)(e.resourceUrl,"bypassCache",e.modifiedDate):e.resourceUrl}function c(e){if(void 0===e.fileSize)return!0;let t=u(e);return!t||e.fileSize<t}function p(e){if(void 0===e.fileSize)return!0;let t=e.fileSize<o,n=c(e);return t&&n}function m(e){return!!e.viewerUrl&&!(null==e?void 0:e.hasError)}function g(e){return -1!==s.indexOf(e)}function E(e,t){return t&&p(e)&&g(e.mimeType)}function h(e,t=!1){if(null==e?void 0:e.hasError)return!1;if(e.mimeType){let n;let r=l(e),i=(n="",e.mimeType&&(n=e.mimeType.substring(e.mimeType.indexOf("/")+1)),n);switch(r){case"image":return null!==e.resourceUrl&&["jpeg","gif","png"].indexOf(i)>-1;case"audio":return null!==e.resourceUrl&&["mpeg","mp3","mp4","flac","wav","x-wav","ogg"].indexOf(i)>-1;case"video":return null!==e.resourceUrl&&["mp4"].indexOf(i)>-1;default:return void 0!==e.viewerUrl&&E(e,t)}}return!1}function y(e){return e===r.hH4.Inline||e===r.hH4.InlineOnly}function f(e){return void 0===e.render||y(e.render)}function b(e){return["image","video","audio"].indexOf(e)>-1}function I(e){return"audio"===e}function A(e){return"image"===e}function v(e){return"video"===e}},470629:function(e,t,n){"use strict";n.d(t,{I:function(){return o},x:function(){return i}});var r=n(683900);let i=(0,r.createStyles)({checkboxMarginFix:{marginInlineStart:"-4px"},switchMarginFix:{marginInlineStart:"-8px"},singleLineTextFieldFix:{"&&":{margin:"auto",border:"none"}},radioGroupFix:{marginInlineStart:"4px"}}),o=(0,r.makeStyles)(i)},914752:function(e,t,n){"use strict";n.d(t,{YB:function(){return o},Zk:function(){return r},cG:function(){return i},cI:function(){return a},yS:function(){return s}});let r=(e,t)=>e.toLowerCase().startsWith("ar-sa")&&t,i=(e,t,n,i,o,s)=>{r(o,s)&&(e=e.replace(/,/g,""));let a=i(e.substring(t,e.length-n));return 1===t&&(a*=-1),{value:a,integerString:e}},o=(e,t)=>{if(e.charAt(e.length-1)===t){let n=e.match(RegExp(`\\${t}`,"g"));return n&&n.length<=1}return!1},s=e=>{let t=0;for(;t<e.length&&[8207,8206,1564].includes(e.charCodeAt(t));)t+=1;return e.substring(t)},a=e=>45===e.charCodeAt(0)||8722===e.charCodeAt(0)},700714:function(e,t,n){"use strict";var r,i;n.d(t,{M:function(){return r},o:function(){return o}}),(i=r||(r={})).Aborted="Aborted",i.Unknown="Unknown",i.API="API";class o{constructor(e){this._type=e}get errorType(){return this._type}}},795120:function(e,t,n){"use strict";n.d(t,{t:function(){return i},z:function(){return o}});let r=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}(.\d{3,9})?Z$/;function i(e){return JSON.parse(e,(e,t)=>"string"==typeof t&&r.test(t)?new Date(t):t)}async function o(e){return i(await e.text())}},586778:function(e,t,n){"use strict";n.d(t,{w:function(){return d}});var r=n(507225),i=n(795120),o=n(388315);class s extends o.o{constructor(){super(o.M.Aborted)}}class a{setXhrRequest(e){this.xhr=e}abort(){var e;null===(e=this.xhr)||void 0===e||e.abort()}}class l{constructor(){this.subscribers=[]}subscribe(e){return this.subscribers.push(e),()=>{let t=this.subscribers.indexOf(e);t>=0&&this.subscribers.splice(t)}}clear(){this.subscribers=[]}push(e){this.subscribers.forEach(t=>{t(e)})}}async function u(e,t,n){await e.validate();let i=e.toXhr();return n.setXhrRequest(i),new Promise((n,o)=>{i.upload.addEventListener("progress",e=>{t.push({lengthComputable:e.lengthComputable,loaded:e.loaded,total:e.total})}),i.addEventListener("load",()=>{var s,a;let l=e.getSession();if((null==l?void 0:l.cookies)!=null){let e=null!==(s=(0,r.Ng)(i))&&void 0!==s?s:"";l.cookies=l.cookies?(0,r.ez)(e,null!==(a=l.cookies)&&void 0!==a?a:""):e}t.clear(),(i.status<200||i.status>=300)&&o(e.xhrFailed(i.response)),n({response:i.response,request:i})}),i.addEventListener("abort",()=>{t.clear(),o(new s)}),i.upload.addEventListener("error",()=>{t.clear(),o(e.xhrFailed())}),i.send(e.xhrBody())})}function d(e){let t=new l,n=new a;return{result:u(e,t,n).then(({response:t,request:n})=>{var r;let o=null!==(r=n.getResponseHeader("Content-Type"))&&void 0!==r?r:"";return o.startsWith("application/json")||console.warn(`Expected API response to be of type "application/json" but its actual Content-Type is ${o}`,e.toString()),(0,i.t)(t)}),progress:t,abort:n}}},507225:function(e,t,n){"use strict";function r(e){var t;let n;return"raw"in e.headers&&e.headers.raw?n=e.headers.raw()["set-cookie"]:"getSetCookie"in e.headers&&(n=e.headers.getSetCookie()),null!==(t=null==n?void 0:n.map(e=>e.split(";")[0]).join(";"))&&void 0!==t?t:""}function i(e){var t;return null!==(t=e.getResponseHeader("Set-Cookie"))&&void 0!==t?t:""}function o(e,t){let n=e.split(";");return t.split(";").forEach(e=>{var t;let r=e.split("=");t=r[0],n.some(e=>e.split("=")[0]===t)||n.push(`${r[0]}=${r[1]}`)}),n.join(";")}n.d(t,{Ng:function(){return i},Ri:function(){return r},ez:function(){return o}})},542633:function(e,t,n){"use strict";n.d(t,{ym:function(){return a.y},t3:function(){return i},oH:function(){return s.oH},M5:function(){return s.M5},S2:function(){return s.S2},w:function(){return s.w},we:function(){return s.we},tU:function(){return o.A}});var r,i,o=n(772772),s=n(724819);(r=i||(i={}))[r.Ok=200]="Ok",r[r.Created=201]="Created",r[r.Accepted=202]="Accepted",r[r.NoContent=204]="NoContent",r[r.BadRequest=400]="BadRequest",r[r.Unauthorized=401]="Unauthorized",r[r.Forbidden=403]="Forbidden",r[r.NotFound=404]="NotFound",r[r.Conflict=409]="Conflict",r[r.Gone=410]="Gone",r[r.TooManyRequests=429]="TooManyRequests",r[r.InternalServerError=500]="InternalServerError",r[r.BadGateway=502]="BadGateway";var a=n(896253)},61796:function(e,t,n){"use strict";n.d(t,{Z:function(){return b}});var r=n(514041),i=n(5612),o=n(216190),s=n(163785);let a=e=>e.dataset&&e.dataset.bbid||e.id||l(),l=()=>`bbml-editor-id_${(0,s.v4)()}`,u=e=>(e||"").startsWith('<!-- {"bbMLEditorVersion":'),d=e=>e.dataset&&e.dataset.bbtype||"file",c=e=>{let{bbFileUuid:t,alternativeText:n,viewerUrl:r,linkName:i,render:o,mimeType:s,viewerUuid:a,isDecorative:l,viewerTimeToWait:u}=e;return{isDecorative:l,alternativeText:n,linkName:i,viewerData:{...t?{bbFileUuid:t}:{},...a?{viewerUuid:a}:{},...r?{viewerUrl:r}:{},...u?{viewerTimeToWait:parseInt(`${u}`,10)}:{}},file:{},currentMimeType:s,ui:{isRenderedInline:"inline"===o}}},p=e=>{let t={file:{}},n=e.dataset&&e.dataset.bbfile;if(n)try{let e=JSON.parse(n);t=c(e)}catch(e){}t.linkName||(t.linkName=e.innerHTML.substr(0,e.innerHTML.lastIndexOf("?"))),t.currentMimeType||(t.currentMimeType=e.innerHTML.substr(e.innerHTML.lastIndexOf("?")+1));let r=a(e),o=e.href;return o.startsWith("http://localhost")&&(o=(0,i.xAl)(o.substr(16))),t.downloadUrl=o,{fileBlock:t,id:r}},m=e=>{let t=[];if(!e)return{contentBlocks:t,isBbmlEditorCompliant:!0};let n=e.trim(),r=u(n),i=document.createElement("div");i.innerHTML=n;for(let e=0;e<i.children.length;e+=1){let n=i.children[e];if("A"===n.tagName&&"file"===d(n))t.push(p(n));else if("DIV"===n.tagName){let e=a(n),r=n.innerHTML.trim();r&&t.push({textBlock:r,id:e})}}return r||0!==t.length||(n.includes("https")||(r=!0),t.push({textBlock:n,id:l()})),{contentBlocks:t,isBbmlEditorCompliant:r}},g=e=>r.useMemo(()=>m(e),[e]);var E=n(351323);let h=e=>{let{textBlock:t}=e.block,{courseId:n,prepareEditorPlugins:i}=e,s=i(n);return r.createElement(o.BbEditor,{plugins:s,isReadOnly:!0,bbml:t})},y=e=>{var t,n,o,s,a;let{fileBlock:l}=e.block;if(!l)return null;let u={alternativeText:null!==(t=l.alternativeText)&&void 0!==t?t:"",displayName:l.linkName,fileName:l.linkName,resourceUrl:null!==(n=l.downloadUrl)&&void 0!==n?n:"",mimeType:null!==(o=l.currentMimeType)&&void 0!==o?o:"",viewerUrl:null===(s=l.viewerData)||void 0===s?void 0:s.viewerUrl,render:(null===(a=l.ui)||void 0===a?void 0:a.isRenderedInline)?i.hH4.Inline:i.hH4.Attachment};return r.createElement(E.hcB,{file:u,analyticsId:"documents.bbmlFileBlock.fileViewer"})},f=e=>{var t;return(null===(t=e.block)||void 0===t?void 0:t.textBlock)?r.createElement(h,{...e}):r.createElement(y,{block:e.block})},b=e=>{let{contentBlocks:t}=g(e.bbml),{courseId:n,prepareEditorPlugins:s}=e,a=null!=s?s:e=>[(0,o.link)(),(0,o.image)(),(0,o.video)(),(0,o.insertLocalFile)({courseId:e,apiBasePath:i.$WB.apiBasePath,xsrfToken:i.$WB.xsrf}),(0,o.math)({courseId:e,apiBasePath:i.$WB.apiBasePath,xsrfToken:i.$WB.xsrf}),(0,o.contentMarket)({courseId:e,xsrfToken:i.$WB.xsrf,apiBasePath:i.$WB.apiBasePath,openContentMarket:()=>{},getEmbedSrc:()=>Promise.resolve("")})];return r.createElement("div",{className:"bbml-document-viewer"},t.map(e=>r.createElement(f,{block:e,key:e.id,courseId:n,prepareEditorPlugins:a})))}},118799:function(e,t,n){"use strict";n.d(t,{C:function(){return l}});var r=n(5612),i=n(514041),o=n(61796),s=n(407659),a=n(482419);let l=(0,s.Ng)((e,t)=>({contentsByParentId:r.Ltv.content.getContentsByParentContentId(e,t.documentId)}),e=>(0,a.zH)({loadContents:r.o1I.content.loadContents},e))(e=>{var t;if(i.useEffect(()=>{e.courseId&&e.documentId&&e.loadContents({courseId:e.courseId,contentId:e.documentId,eagerFetchChildren:!0})},[e.courseId,e.documentId]),!e.contentsByParentId||!e.contentsByParentId.length)return i.createElement("div",null);let n=e.contentsByParentId[0],{courseId:r,prepareEditorPlugins:s}=e;return i.createElement(o.Z,{bbml:null===(t=n.body)||void 0===t?void 0:t.rawText,courseId:r,prepareEditorPlugins:s})})},546381:function(e,t,n){"use strict";n.d(t,{a:function(){return o}});var r=n(929609);let i="bb-auto-resize",o={className:i,html:()=>`
<script class="${r.Wu} ${i}" type="text/javascript">
  document.documentElement.style.height = 0;
  var resizeFunc = () => {
    var height = document.documentElement.scrollHeight;
    var source = new URL(document.referrer).origin;
    var w = window;
    while (w !== top) {
      w = w.parent;
      w.postMessage({ type: '${i}', height }, source);
    }
  }
  window.addEventListener('load', resizeFunc);
  window.addEventListener('resize', resizeFunc);
</script>
`,listener:e=>{let t=t=>{var n;if((null===(n=t.data)||void 0===n?void 0:n.type)===i&&e.contentWindow===t.source){let{height:n}=t.data;Number.isNaN(n)||(e.height=String(n))}};return window.addEventListener("message",t,!1),()=>window.removeEventListener("message",t)}}},949601:function(e,t,n){"use strict";n(56684),n(542633)},218091:function(e,t,n){"use strict";n.d(t,{jn:function(){return l},_W:function(){return a}});var r=n(56684);class i extends r.pT{constructor(){super("/v1/announcements")}}class o extends r.mj{constructor(e){super("/v1/announcements/%announcementId%",e)}}var s=n(542633);async function a(e,t){let n=new i;return n.withSession(e),t&&n.withPaging(t),(0,s.w)(n)}async function l(e,t){let n=new o({announcementId:t});return n.withSession(e),(0,s.w)(n)}},766976:function(e,t,n){"use strict";n(56684),n(542633),n(901048).Buffer},713759:function(e,t,n){"use strict";n.d(t,{x:function(){return i}});var r=n(56684);class i extends r.Jk{constructor(){super("v1/utilities/batch")}}},544557:function(e,t,n){"use strict";n(56684),n(542633)},603066:function(e,t,n){"use strict";n.d(t,{YX:function(){return o},aN:function(){return a},gG:function(){return l},sv:function(){return s},v8:function(){return u}});var r=n(56684);let i="/v1/courses/%courseId%/contents/%contentId%/adaptiveReleaseRules";class o extends r.w_{constructor(e){super(i,e)}}class s extends r.FK{constructor(e){super(`${i}/rules/%ruleId%`,e)}}class a extends r.FK{constructor(e){super(i,e)}}class l extends r.pT{constructor(e){super(i,e)}}class u extends r.Jk{constructor(e){super(i,e)}}},170098:function(e,t,n){"use strict";n.d(t,{t:function(){return i}});var r=n(287627);class i extends r.mj{constructor(e){super("/v1/courses/%courseId%/assessments/attempts/%attemptId%/log",e)}}},593477:function(e,t,n){"use strict";n(56684),n(542633)},414086:function(e,t,n){"use strict";n.d(t,{yy:function(){return i}});var r=n(56684);class i extends r.mj{constructor(){super("/v1/calendars/calendarEventsAvailable")}}},294851:function(e,t,n){"use strict";n(56684)},933816:function(e,t,n){"use strict";n(542633),n(294851)},247815:function(e,t,n){"use strict";n(542633),n(56684)},219238:function(e,t,n){"use strict";n(56684),n(542633)},787672:function(e,t,n){"use strict";n.d(t,{A3:function(){return s},LY:function(){return i},Qm:function(){return l},zw:function(){return a}});var r,i,o=n(56684);(r=i||(i={})).Course="course",r.Organization="org",r.Lor="lor";class s extends o.pT{constructor(){super("/v1/courses")}}class a extends o.mj{constructor(e){super("/v1/courses/%courseId%",e)}}class l extends o.QR{constructor(e){super("/v1/courses/%courseId%",e)}}},294526:function(e,t,n){"use strict";n.d(t,{B$:function(){return i},Bz:function(){return s},Fw:function(){return o}});var r=n(56684);class i extends r.QR{constructor(e){super("v1/courses/%courseId%/discussionboards/default/forums/%forumId%/messages/%messageId%/states",e)}}class o extends r.mj{constructor(e){super("v1/courses/%courseId%/discussionboards/default/forums/%forumId%/messages/%messageId%/states",e)}}class s extends r.w_{constructor(e){super("v1/courses/%courseId%/discussionboards/default/forums/%forumId%/messages/%messageId%/reveal",e)}}},946579:function(e,t,n){"use strict";n(56684)},182635:function(e,t,n){"use strict";n(542633),n(946579)},161689:function(e,t,n){"use strict";n.d(t,{g:function(){return i}});var r=n(56684);class i extends r.w_{constructor(e){super("/v1/courses/%courseId%/copy",e)}}},34415:function(e,t,n){"use strict";n.d(t,{V6:function(){return a},ZN:function(){return i},nr:function(){return o},w3:function(){return s}});var r=n(56684);class i extends r.w_{constructor(e){super("/v1/courses/%courseId%/groupsets/%groupSetId%/export",e)}}class o extends r.pT{constructor(e){super("/v1/courses/%courseId%/groupsets/%groupSetId%/export",e)}}class s extends r.FK{constructor(e){super("/v1/courses/%courseId%/groupsets/%groupSetId%/export",e)}}class a extends r.w_{constructor(e){super("/v1/courses/%courseId%/groupsets/import",e)}}},985316:function(e,t,n){"use strict";n.d(t,{Gu:function(){return l},Ow:function(){return a},gS:function(){return o},zm:function(){return s}});var r=n(542633),i=n(34415);async function o(e,t,n,o){let s=new i.ZN({courseId:t,groupSetId:n}).withSession(e).withBody(o);return(0,r.S2)(s)}async function s(e,t,n,o){let s=new i.nr({courseId:t,groupSetId:n}).withSession(e);return o.paging&&s.withPaging(o.paging),o.sort&&s.withSort(...o.sort),(0,r.w)(s)}async function a(e,t,n,o){let s=new i.w3({courseId:t,groupSetId:n}).withSession(e).withQueryParams(o);return(0,r.S2)(s)}async function l(e,t,n){let o=new i.V6({courseId:t}).withSession(e).withBody(n);return(0,r.S2)(o)}},506890:function(e,t,n){"use strict";n.d(t,{hS:function(){return u},zE:function(){return d}});var r=n(56684);let i="/v1/courses/%courseId%",o=`${i}/contents/%contentId%`,s=`${i}/groupsets/%groupSetId%`,a=`${o}/assignedGroups`,l=`${s}/groups`;class u extends r.pT{constructor(e){super(a,e)}}class d extends r.pT{constructor(e){super(l,e)}}},950216:function(e,t,n){"use strict";n(56684)},959917:function(e,t,n){"use strict";n(950216),n(542633)},169206:function(e,t,n){"use strict";n(56684)},271979:function(e,t,n){"use strict";n(542633),n(169206),n(274541)},723781:function(e,t,n){"use strict";n.d(t,{G:function(){return s}});var r=n(56684);class i extends r.pT{constructor(e){super("/v1/courses/%courseId%/users/%userId%/studentActivityLog",e)}}var o=n(542633);async function s(e,t,n,r){let s=new i(t).withSession(e);return r&&s.withQueryParams(r),n.paging&&s.withPaging(n.paging),n.sort&&s.withSort(...n.sort),await (0,o.w)(s)}},451489:function(e,t,n){"use strict";n.d(t,{G:function(){return i}});var r=n(56684);class i extends r.mj{constructor(e){super("v1/courses/%courseId%/users/%userId%",e)}}},535463:function(e,t,n){"use strict";n.d(t,{$x:function(){return i},A:function(){return s},zM:function(){return o}});var r=n(56684);class i extends r.mj{constructor(e){super("/v1/courses/%courseId%/conversations/counts",e)}}class o extends r.mj{constructor(e){super("/v1/courses/%courseId%/conversations/options",e)}}class s extends r.QR{constructor(e){super("/v1/courses/%courseId%/conversations/options",e)}}},72811:function(e,t,n){"use strict";n(56684),n(542633)},669525:function(e,t,n){"use strict";n(542633),n(56684)},374618:function(e,t,n){"use strict";n.d(t,{wX:function(){return a},sH:function(){return l}});var r=n(542633),i=n(56684);class o extends i.w_{constructor(e){super("/v1/courses/%courseId%/resources/rpc/deleteUnused",e)}}class s extends i.pT{constructor(e){super("/v1/courses/%courseId%/resources",e)}}async function a(e,t,n){let i=new o({courseId:t}).withBody(n).withSession(e);return(0,r.w)(i)}async function l(e,t,n,i){let o=new s({courseId:t}).withSession(e).withQueryParams(n).withPaging(i);return(0,r.w)(o)}},173575:function(e,t,n){"use strict";n.d(t,{CT:function(){return a},Qv:function(){return u},dQ:function(){return l}});var r=n(56684);let i="/v1/courses/%courseId%/rubrics",o=`${i}/%rubricId%/users/%userId%/preferences`,s=`${o}/%preferenceKey%`;class a extends r.w_{constructor(e){super(i,e)}}class l extends r.mj{constructor(e){super(s,e)}}class u extends r.Jk{constructor(e){super(o,e)}}},284746:function(e,t,n){"use strict";n.d(t,{Sr:function(){return o},cZ:function(){return u},ee:function(){return s},lC:function(){return a},yX:function(){return l}});var r=n(56684);let i="/v1/courses/%courseId%/safeassign/directSubmitItems";class o extends r.mj{constructor(e){super(i,e)}}class s extends r.mj{constructor(){super("v1/safeassign/pluginStatus")}}class a extends r.mj{constructor(e){super("/v1/courses/%courseId%/safeassign/pluginStatus",e)}}class l extends r.u4{constructor(e){super(i,e)}}class u extends r.u4{constructor(e){super(i,e)}}},442810:function(e,t,n){"use strict";n.d(t,{d:function(){return s},q:function(){return o}});var r=n(56684);let i="/v1/courses/%courseId%/tools/%toolId%";class o extends r.mj{constructor(e){super(i,e)}}class s extends r.QR{constructor(e){super(i,e)}}},565102:function(e,t,n){"use strict";n.d(t,{T9:function(){return a},qD:function(){return s},td:function(){return l}});var r,i,o=n(56684);(r=i||(i={})).Landscape="landscape",r.Portrait="portrait",r.Squarish="squarish";class s extends o.mj{constructor(e){super("/v1/courses/%courseId%/unsplash/search",e)}withBaseQueryParams(e){return this.withQueryParams(e),this}setResizeQueryParam(e,t,n){e[t]=n}withResizeOptions(e){let t;let n={};for(t in e)e.hasOwnProperty.call(e,t)&&this.setResizeQueryParam(n,`size-${t}`,e[t]);return this.withQueryParams(n),this}}class a extends o.kz{constructor(e){super("/v1/courses/%courseId%/unsplash/downloadNotify",e)}}class l extends o.mj{constructor(e){super("/v1/courses/%courseId%/unsplash/settings",e)}}},981278:function(e,t,n){"use strict";n.d(t,{Bc:function(){return a},Ze:function(){return i},hp:function(){return s},iE:function(){return o}});var r=n(287627);class i extends r.pT{constructor(e){super("/v1/courses/%courseId%/users/%userId%/notes",e)}}class o extends r.w_{constructor(e){super("/v1/courses/%courseId%/users/%userId%/notes",e)}}class s extends r.QR{constructor(e){super("/v1/courses/%courseId%/users/%userId%/notes/%noteId%",e)}}class a extends r.FK{constructor(e){super("/v1/courses/%courseId%/users/%userId%/notes/%noteId%",e)}}},567860:function(e,t,n){"use strict";n.d(t,{i:function(){return i}});var r=n(56684);class i extends r.mj{constructor(e){super("v1/courses/%courseId%/spreview",e)}}},996400:function(e,t,n){"use strict";n(542633),n(567860)},633753:function(e,t,n){"use strict";n.d(t,{Jq:function(){return a},aj:function(){return l}});var r=n(56684);class i extends r.pT{constructor(){super("/v1/dashboard")}}class o extends r.mj{constructor(){super("/v1/dashboard/entitled")}}var s=n(542633);async function a(e,t){let n=new i;return n.withSession(e),n.withPaging(t),(0,s.w)(n)}async function l(e){let t=new o().withSession(e);return(0,s.w)(t)}},915456:function(e,t,n){"use strict";n(781384),n(56684),n(542633)},40144:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});var r=n(56684);class i extends r.mj{constructor(e){super("/v1/courses/%courseId%/gradebook/columns/%columnId%/knowledgeCheckMetrics",e)}}},453328:function(e,t,n){"use strict";n.d(t,{BJ:function(){return i},qV:function(){return s},uZ:function(){return o}});var r=n(56684);class i extends r.pT{constructor(){super("/v1/featureFlags")}}class o extends r.mj{constructor(e){super("/v1/featureFlags/%flagKey%",e)}}class s extends r.Jk{constructor(e){super("/v1/featureFlags/%flagKey%",e)}}},740284:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});var r=n(56684);class i extends r.mj{constructor(e){super("/v1/courses/%courseId%/gradebook/columns/%columnId%/statistics",e)}}},700804:function(e,t,n){"use strict";n.d(t,{$:function(){return s},O:function(){return o}});var r=n(542633),i=n(21008);function o(e,t,n){let o=new i.Zh(t).withQueryParams(n).withSession(e);return(0,r.w)(o)}function s(e,t,n){let o=new i.EA(t).withQueryParams(n).withSession(e);return(0,r.w)(o)}},368384:function(e,t,n){"use strict";n.d(t,{F:function(){return i}});var r=n(56684);class i extends r.mj{constructor(e){super("/v1/courses/%courseId%/gradebook/memberships/%membershipId%/exceptions",e)}}},159070:function(e,t,n){"use strict";n.d(t,{QK:function(){return i},UP:function(){return s},US:function(){return l},qG:function(){return o},tA:function(){return a}});var r=n(56684);class i extends r.mj{constructor(){super("/v1/gradebook/mastery/scale")}}class o extends r.pT{constructor(e){super("/v1/courses/%courseId%/gradebook/mastery/goals",e)}}class s extends r.pT{constructor(e){super("/v1/courses/%courseId%/gradebook/mastery/users/%userId%/goals",e)}}class a extends r.pT{constructor(e){super("/v1/courses/%courseId%/gradebook/mastery/users/%userId%/goals/%parentId%/children",e)}}class l extends r.w_{constructor(e){super("/v1/courses/%courseId%/gradebook/mastery/goals/bulkView",e)}}},600667:function(e,t,n){"use strict";n.d(t,{GG:function(){return p},kj:function(){return u},p9:function(){return c},wY:function(){return l},we:function(){return m},z_:function(){return d}});var r=n(56684);let i="/v1/courses/%courseId%/gradebook",o=`${i}/columns/%columnId%/attempts`,s=`${i}/columns/%columnId%/groupAssociations`,a=`${i}/groupAttempts/%groupAttemptId%`;class l extends r.QR{constructor(e){super(`${i}/attempts/%attemptId%`,e)}}class u extends r.w_{constructor(e){super(o,e)}}class d extends r.QR{constructor(e){super(`${i}/groupAttempts/%attemptId%`,e)}}class c extends r.FK{constructor(e){super(`${i}/attempts/%attemptId%`,e)}}class p extends r.FK{constructor(e){super(`${a}`,e)}}class m extends r.pT{constructor(e){super(`${s}/%groupAssociationId%/groupAttempts`,e)}}},565881:function(e,t,n){"use strict";n(56684)},991297:function(e,t,n){"use strict";n(542633),n(565881)},867794:function(e,t,n){"use strict";n(542633),n(56684)},541543:function(e,t,n){"use strict";n(56684)},237500:function(e,t,n){"use strict";n(541543),n(542633)},435441:function(e,t,n){"use strict";n(56684)},343390:function(e,t,n){"use strict";n(435441),n(542633)},957675:function(e,t,n){"use strict";n.d(t,{ht:function(){return i}});var r=n(56684);class i extends r.QR{constructor(e){super("/v1/courses/%courseId%/gradebook/columns/%columnId%",e)}}},398828:function(e,t,n){"use strict";n.d(t,{M:function(){return o},t:function(){return s}});var r=n(56684);let i="/v1/courses/%courseId%/gradebook/settings";class o extends r.mj{constructor(e){super(i,e)}}class s extends r.QR{constructor(e){super(i,e)}}},495796:function(e,t,n){"use strict";n.d(t,{R8:function(){return i}});var r=n(56684);class i extends r.kz{constructor(e){super("/v1/courses/%courseId%/gradebook/columns/%columnId%/groupAssociations/%groupAssociationId%/postReadyGroupGrades",e)}}},599108:function(e,t,n){"use strict";n.d(t,{Iu:function(){return u},dS:function(){return l},is:function(){return d},oJ:function(){return s},zx:function(){return a}});var r=n(56684);let i="/v1/courses/%courseId%/gradebook/schemas",o=`${i}/%schemaId%`;class s extends r.mj{constructor(e){super(i,e)}}class a extends r.mj{constructor(e){super(o,e)}}class l extends r.w_{constructor(e){super(i,e)}}class u extends r.QR{constructor(e){super(o,e)}}class d extends r.FK{constructor(e){super(o,e)}}},110941:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});var r=n(56684);class i extends r.mj{constructor(e){super("/v1/courses/%courseId%/gradebook/columns/gradebookColumnCounts",e)}}},845565:function(e,t,n){"use strict";n.d(t,{p:function(){return o}});var r=n(110941),i=n(542633);function o(e,t){let n=new r.b({courseId:e}).withSession(t);return(0,i.w)(n)}},612216:function(e,t,n){"use strict";n(56684)},761820:function(e,t,n){"use strict";n(612216),n(542633)},155473:function(e,t,n){"use strict";n.d(t,{Q:function(){return o},o:function(){return i}});var r=n(56684);class i extends r.w_{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/aiChatAnswers/%questionAttemptId%/messages",e)}}class o extends r.kz{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/aiChatAnswers/%questionAttemptId%/retry",e)}}},120619:function(e,t,n){"use strict";n.d(t,{$L:function(){return a},KM:function(){return d},QO:function(){return i},Xy:function(){return u},fN:function(){return s},m5:function(){return l},qp:function(){return o}});var r=n(56684);class i extends r.pT{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers",e)}}class o extends r.pT{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/assessments/%assessmentId%/questions/%questionId%/answers",e)}}class s extends r.pT{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers/grades",e)}}class a extends r.mj{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers/%questionAttemptId%",e)}}class l extends r.QR{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers/%questionAttemptId%",e)}}class u extends r.QR{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers/%questionAttemptId%/grades",e)}}class d extends r.mj{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/%attemptId%/assessment/answers/%questionAttemptId%/grades",e)}}},249312:function(e,t,n){"use strict";n.d(t,{E:function(){return o},r:function(){return i}});var r=n(56684);class i extends r.pT{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/assessments/%assessmentId%/questions/grading-status/summaries",e)}}class o extends r.pT{constructor(e){super("/v1/courses/%courseId%/gradebook/attempts/assessments/%assessmentId%/%questionBlockId%/questions/grading-status/summaries",e)}}},494143:function(e,t,n){"use strict";n.d(t,{DB:function(){return a},W2:function(){return l}});var r=n(56684);let i="/v1/courses/%courseId%/gradebook",o=`${i}/attempts/%attemptId%/submissionResults`,s=`${i}/groupAttempts/%groupAttemptId%/submissionResults`;class a extends r.mj{constructor(e){super(o,e)}}class l extends r.mj{constructor(e){super(s,e)}}},358373:function(e,t,n){"use strict";n.d(t,{Q:function(){return o},_:function(){return i}});var r=n(56684);class i extends r.pT{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/lti/processors",e)}}class o extends r.QR{constructor(e){super("/v1/courses/%courseId%/contents/%contentId%/lti/processors/%placementHandle%",e)}}},17939:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(56684);class i extends r.pT{constructor(){super("/v1/messages/summary")}}},710117:function(e,t,n){"use strict";n.d(t,{M:function(){return s}});var r=n(56684);class i extends r.mj{constructor(e){super("webapps/partner-cloud/app/v1/providers/%providerId%/settings",e)}}var o=n(542633);async function s(e,t){let n=new i({providerId:t}).withSession(e);return(0,o.w)(n)}},496629:function(e,t,n){"use strict";n(542633),n(56684)},717451:function(e,t,n){"use strict";n.d(t,{v:function(){return i}});var r=n(56684);class i extends r.mj{constructor(){super("/v1/utilities/entitlements")}}},969253:function(e,t,n){"use strict";n(542633),n(56684)},397271:function(e,t,n){"use strict";n(542633),n(56684)},644592:function(e,t,n){"use strict";n.d(t,{Wj:function(){return o},n3:function(){return i}});var r=n(56684);class i extends r.mj{constructor(e){super("v1/users/%userId%",e)}}class o extends r.FK{constructor(e){super("/v1/users/me/preferences/%key%",e)}}},458499:function(e,t,n){"use strict";n.d(t,{j:function(){return i}});var r=n(56684);class i extends r.mj{constructor(e){super("/public/v1/attemptReceipts/%receiptId%",e)}}},824551:function(e,t,n){"use strict";n(542633),n(56684)},736888:function(e,t,n){"use strict";n(542633),n(56684)},706045:function(e,t,n){"use strict";n.d(t,{S:function(){return i}});var r=n(56684);class i extends r.mj{constructor(){super("/public/v1/uploads/settings")}}},573683:function(e,t,n){"use strict";n(56684),n(542633)},930203:function(e,t,n){"use strict";n(56684),n(542633)},56684:function(e,t,n){"use strict";n.d(t,{$X:function(){return r.$X},Cd:function(){return i.Cd},Ex:function(){return i.Ex},FK:function(){return r.FK},Jk:function(){return r.Jk},QR:function(){return r.QR},V0:function(){return r.V0},cB:function(){return r.cB},kz:function(){return r.kz},mj:function(){return r.mj},pT:function(){return r.pT},u4:function(){return r.u4},w_:function(){return r.w_}});var r=n(287627),i=n(16894)},287627:function(e,t,n){"use strict";n.d(t,{$X:function(){return u},FK:function(){return E},Jk:function(){return y},QR:function(){return h},V0:function(){return f},cB:function(){return c},kz:function(){return m},mj:function(){return l},pT:function(){return d},u4:function(){return I},w_:function(){return b}});var r=n(781384),i=n(16894),o=n(542633);class s extends i.ud{getUrl(){let e=super.getRelativeUrl();return e&&(e=e.startsWith("/")?e:`/${e}`),o.tU.getUrl(this.getApiBasePath()+e)}getApiBasePath(){return"/learn/api"}requiresSession(){return!0}toString(){return`[LearnApiRequest: ${this.method} ${this.getUrl()}]`}async failed(e){throw new r.om(await e.json())}}class a extends s{withFields(...e){return this.withQuery({fields:e})}}class l extends s{constructor(e,t){super(o.ym.Get,e,t)}}class u extends a{constructor(e,t){super(o.ym.Get,e,t)}}class d extends l{withPaging(e){return this.withQuery({limit:e.limit,offset:e.offset,...e.offsetId?{offsetId:e.offsetId}:{}})}withSort(...e){return this.withQuery({sort:(null!=e?e:[]).map(e=>`${e.field}(${e.direction})`)})}async validate(){await super.validate(),this.query.has("limit")||this.query.has("offset")||console.warn(`Attempting to get paged collection at ${this.path} without a filter, this might be a performance issue.`)}}class c extends s{constructor(e,t,n){super(e,t,n),this.getContentType()&&this.headers.set(i.kF,this.getContentType())}getRequestInit(){return Object.assign(super.getRequestInit(),{body:this.getBodyInit()})}withBody(e){return this.body=e,this}validate(){return super.validate().then(()=>{if(void 0===this.body)throw new r.R9("Request requires a body but none was provided")})}getBody(){return this.body}}class p extends c{getContentType(){return"application/json"}getBodyInit(){return JSON.stringify(this.body)}}class m extends s{constructor(e,t){super(o.ym.Post,e,t)}}class g extends c{getContentType(){return null}getBodyInit(){var e;let t=new FormData;return Object.keys(null!==(e=this.body)&&void 0!==e?e:{}).forEach(e=>{var n,r;t.append(e,null!==(r=null===(n=this.body)||void 0===n?void 0:n[e])&&void 0!==r?r:"")}),t}}class E extends s{constructor(e,t){super(o.ym.Delete,e,t)}}class h extends p{constructor(e,t){super(o.ym.Patch,e,t)}}class y extends p{constructor(e,t){super(o.ym.Put,e,t)}}class f extends s{constructor(e,t){super(o.ym.Put,e,t)}}class b extends p{constructor(e,t){super(o.ym.Post,e,t)}}class I extends g{constructor(e,t){super(o.ym.Post,e,t)}}},16894:function(e,t,n){"use strict";n.d(t,{Cd:function(){return d},Ex:function(){return l},kF:function(){return o},ud:function(){return s}});var r=n(542633),i=n(781384);let o="Content-Type";class s{constructor(e,t,n){this.pathParams={},this.session=void 0,this.method=e,this.path=t,this.query=new URLSearchParams,this.headers=new Headers,n&&this.withPathParams(n)}getRelativeUrl(){let e=this.path;if(this.pathParams)for(let[t,n]of Object.entries(this.pathParams))e=e.replace(`%${t}%`,encodeURIComponent(n));let t=this.getQueryString();return t&&(e+=`?${t}`),e}getUrl(){return r.tU.getUrl(this.getRelativeUrl())}getQueryString(){return this.query.toString()}withPathParams(e){return Object.assign(this.pathParams,null!=e?e:{}),this}withQuery(e){for(let[t,n]of Object.entries(e))Array.isArray(n)?this.query.set(t,n.join(",")):void 0!==n&&this.query.set(t,String(n));return this}withQueryParams(e){return this.withQuery(e)}withExpand(...e){return this.withQuery({expand:e})}getSession(){return this.session}withSession(e){return this.session=e,e.xsrfToken&&this.headers.set("X-Blackboard-XSRF",e.xsrfToken),e.cookies&&this.headers.set("Cookie",e.cookies),this}requiresSession(){return!1}validate(){return Promise.resolve().then(()=>{var e;if(this.requiresSession()&&!this.session)throw new i.R9("Request requires session but no session info was added");let t=(null!==(e=this.path.match(/%\w+%/g))&&void 0!==e?e:[]).map(e=>e.slice(1,-1)).filter(e=>!this.pathParams[e]);if(t.length>0)throw new i.R9(`Request is missing required path params: [${t}]`)})}async failed(e){throw new i.o3(await e.text(),e.status,this.getUrl())}getRequestInit(){return{credentials:"same-origin",method:this.method,headers:this.headers}}toRequest(e){return new Request(null!=e?e:this.getUrl(),this.getRequestInit())}toString(){return`[LearnRequest: ${this.method} ${this.getUrl()}]`}}class a extends s{constructor(e,t,n){super(e,t,n),this.getContentType()&&this.headers.set(o,this.getContentType())}getRequestInit(){return Object.assign(super.getRequestInit(),{body:this.getBodyInit()})}withBody(e){return this.body=e,this}validate(){return super.validate().then(()=>{if(void 0===this.body)throw new i.R9("Request requires a body but none was provided")})}}class l extends s{constructor(e,t){super(r.ym.Get,e,t)}}class u extends a{getContentType(){return null}getBodyInit(){var e;let t=new FormData;return Object.keys(null!==(e=this.body)&&void 0!==e?e:{}).forEach(e=>{var n,r;t.append(e,null!==(r=null===(n=this.body)||void 0===n?void 0:n[e])&&void 0!==r?r:"")}),t}}class d extends u{constructor(e,t){super(r.ym.Post,e,t)}}},231567:function(e,t,n){"use strict";function r(e,t){if(0===t.length)return"";let n=e.split("?")[0].split("/"),r=n.indexOf(t);return r+1<n.length?n[r+1]:""}n.d(t,{k:function(){return r}})},671400:function(e,t,n){"use strict";n.d(t,{R:function(){return i}});var r=n(534579);class i extends r.G{}},534579:function(e,t,n){"use strict";n.d(t,{G:function(){return r}});class r extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}},916455:function(e,t,n){"use strict";n.d(t,{o:function(){return r}});class r extends Error{get statusCode(){return this.status}get responseMessage(){return this.response}constructor(e,t,n){super(`HTTP ${t}: ${n}`),this.response=e,this.status=t,Object.setPrototypeOf(this,new.target.prototype)}}},600560:function(){"use strict";var e,t;(t=e||(e={})).IP="IP",t.Link="LINK",t.Links="LINKS",t.Image="IMAGE",t.Content="CONTENT"},110627:function(e,t,n){"use strict";var r,i;(i=r||(r={})).Enabled="0",i.SoftDelete="1",i.Disabled="2",i.DeletePending="3",i.CopyPending="4"},397604:function(e,t,n){"use strict";var r,i;(i=r||(r={})).Group="group",i.User="user"},567993:function(e,t,n){"use strict";var r,i;(i=r||(r={})).Success="SUCCESS",i.Incomplete="INCOMPLETE",i.Error="ERROR"},386826:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});let r="mdb-sa"},143333:function(e,t,n){"use strict";var r,i;(i=r||(r={})).Absent="Absent",i.Excused="Excused",i.Late="Late",i.Present="Present"},170041:function(e,t,n){"use strict";var r,i;n.d(t,{S:function(){return r}}),(i=r||(r={})).Attendance="resource/x-bb-attendance",i.Audio="resource/x-bb-audio",i.Blog="resource/x-bb-bloglink",i.ClassicAssignment="resource/x-bb-assignment",i.CourseLink="resource/x-bb-courselink",i.Discussion="resource/x-bb-forumlink",i.Document="resource/x-bb-document",i.ExternalLink="resource/x-bb-externallink",i.File="resource/x-bb-file",i.Folder="resource/x-bb-folder",i.LearningModule="resource/x-bb-lesson",i.Image="resource/x-bb-image",i.Journal="resource/x-bb-journallink",i.Kaltura="resource/x-osv-kaltura/mashup",i.LtiLink="resource/x-bb-blti-link",i.LtiPlacement="resource/x-bb-bltiplacement",i.Page="resource/x-bb-page",i.PartnerCloud="resource/x-bbgs-partner-cloud",i.RusticiScorm="resource/x-plugin-scormengine",i.SurveyLink="resource/x-bb-asmt-survey-link",i.TestLink="resource/x-bb-asmt-test-link",i.Unknown="resource/x-bb-unknown",i.Video="resource/x-bb-video",i.Wiki="resource/x-bb-wiki",i.VideoContent="resource/x-bb-video-studio"},609926:function(e,t,n){"use strict";n(654719)},175222:function(e,t,n){"use strict";var r,i;(i=r||(r={})).NothingToGrade="NOTHING_TO_GRADE",i.NeedsGrading="NEEDS_GRADING",i.NeedsPosting="NEEDS_POSTING",i.AllPosted="ALL_POSTED",i.AllGraded="ALL_GRADED",i.Restricted="RESTRICTED"},607965:function(e,t,n){"use strict";n.d(t,{u:function(){return i},x:function(){return r}});let r=0xa0000000,i="forbidden files"},18966:function(e,t,n){"use strict";var r,i,o,s;(o=r||(r={})).Approved="Approved",o.Excluded="Excluded",o.NeedsApproval="NeedsApproval",(s=i||(i={})).Never="Never",s.SslOnly="SSLOnly",s.Always="Always"},910685:function(e,t,n){"use strict";n.d(t,{Y:function(){return r}});let r=n(407659).wA},601478:function(e,t,n){"use strict";n.d(t,{l:function(){return r}});let r=n(407659).d4},759059:function(e,t,n){"use strict";n.d(t,{h:function(){return o}});var r=n(5612),i=n(601478);let o=e=>(0,i.l)(t=>{if(e)return r.Ltv.content.getContentById(t,e)})},155068:function(e,t,n){"use strict";n(759059)},738440:function(e,t,n){"use strict";n.d(t,{H:function(){return a}});var r=n(5612),i=n(514041),o=n(910685),s=n(759059);let a=(e,t)=>{let n=(0,o.Y)(),a=(0,s.h)(t);return(0,i.useEffect)(()=>{t&&!a&&e&&n(r.o1I.content.loadContents({courseId:e,contentId:t}))},[a,e,t,n]),a}},721888:function(e,t,n){"use strict";n.d(t,{c:function(){return a}});var r=n(5612),i=n(514041),o=n(910685),s=n(601478);let a=(e,t)=>{let n=(0,o.Y)(),a=(0,s.l)(e=>{var t;return null===(t=r.Ltv.app.getRoute(e).params)||void 0===t?void 0:t.courseId}),l=(0,s.l)(e=>{if(a)return r.Ltv.course.getCourseById(e,a)});(0,i.useEffect)(()=>{a&&!l&&n(r.o1I.course.fetchCourse(a))},[l,a,n]);let u=null==l?void 0:l.isOrganization;return n=>u&&n.startsWith(e)?n.replace(e,t):n}},526953:function(e,t,n){"use strict";n(514041),n(85303),n(555016)},626944:function(e,t,n){"use strict";n.d(t,{D:function(){return a}});var r=n(5612),i=n(514041),o=n(910685),s=n(601478);let a=e=>{let t=(0,o.Y)();return(0,i.useEffect)(()=>{e&&t(r.o1I.course.fetchCourse(e))},[t]),(0,s.l)(t=>e?r.Ltv.course.getCourseById(t,e):void 0)}},74648:function(e,t,n){"use strict";n.d(t,{Z:function(){return o}});var r=n(5612),i=n(601478);let o=e=>(0,i.l)(t=>r.Ltv.featureFlags.getFeatureFlagValue(t,e))},817514:function(e,t,n){"use strict";n(514041),n(5612),n(910685),n(601478)},796578:function(e,t,n){"use strict";n(777730)},732583:function(e,t,n){"use strict";function r(e,t){return e===t||Array.isArray(e)&&Array.isArray(t)&&e.length===t.length&&e.every((e,n)=>t[n]===e)}function i(e,t){return e===t||JSON.stringify(e)===JSON.stringify(t)}function o(e,t){if(e===t)return!0;let n=Object.keys(e);if(!r(n,Object.keys(t)))return!1;for(let r of n)if(e[r]!==t[r])return!1;return!0}n.d(t,{Cu:function(){return o},Y_:function(){return i},oJ:function(){return r}})},106535:function(e,t,n){"use strict";function r(e){let t={},n=e.split("#");if(n.length%2!=0)throw Error("Number of keys does not match number of values in id string.");for(let e=0;e<n.length;e+=2){let r=n[e],i=n[e+1];t[r]=i}return t}function i(e){let t=Object.keys(e);if(0===t.length)throw Error("Object must have at least one property.");return t.map(t=>`${t}#${e[t]}`).join("#")}n.d(t,{j:function(){return i},s:function(){return r}})},707962:function(e,t,n){"use strict";n.d(t,{w:function(){return s}});let r=[2,2,4,8];class i{constructor(){this.currentStepIndex=0}next(){let e=1e3*r[this.currentStepIndex],t=Math.min(this.currentStepIndex+1,r.length-1);return this.currentStepIndex=t,e}}async function o(e,t){let n;let r=new Promise(t=>{n=setTimeout(t,e)});try{await Promise.race([r,...t?[t]:[]])}finally{clearTimeout(n)}}async function s(e,t,n){let r;let s=new i,a=new Promise((e,t)=>{n&&(r=()=>t(n.reason),n.addEventListener("abort",r,{once:!0}))});try{for(;!(null==n?void 0:n.aborted);){let n=await Promise.race([e(),a]);if(t(n))return n;await o(s.next(),a)}throw n.reason}finally{r&&(null==n||n.removeEventListener("abort",r))}}},839781:function(e,t,n){"use strict";n.d(t,{n:function(){return s}});var r=n(139552),i=n(443873),o=n(732583);let s=(0,r.Ad)(i.UI,o.oJ)},825271:function(e,t,n){"use strict";n.d(t,{$W:function(){return l},dZ:function(){return u},jK:function(){return a},vG:function(){return d}});var r=n(318728);let i={apiBasePath:"",xsrf:"",partnerCloudBasePath:""},o={userName:"",xsrfToken:""},s={fetchFoundationsToken:void 0,fetchFoundationsContext:void 0,cookies:void 0,foundationsToken:void 0,foundationsTokenContext:void 0};function a(e){Object.assign(i,e),Object.assign(o,{xsrfToken:e.xsrf,cookies:e.cookies}),Object.assign(s,e.foundationsApiSession),function(e){var t,n,i;let o;o=null!==(n=null===(t=null==globalThis?void 0:globalThis.location)||void 0===t?void 0:t.href)&&void 0!==n?n:e.apiBasePath;let s=/^[^\/]*\/\/[^\/]+/.exec(o);o=null!==(i=null==s?void 0:s[0])&&void 0!==i?i:o,r.tUL.setBaseUrl(o)}(e)}let l=i,u=o,d=s},906223:function(e,t,n){"use strict";n.d(t,{o1:function(){return S},Ff:function(){return v},Lt:function(){return _}});var r=n(905898),i=n(139552),o=n(968554),s=n(612918),a=n(728090);let l="achievement.load",u="achievement.create",d="achievement.update",c="achievement.delete",p="achievements.load";var m=n(732583);let g=(e,t)=>{var n;if(!(null==t?void 0:t.courseFoundationsId))return o.Vc;let[r,i]=null!==(n=Object.entries(e.views.byCourseFoundationsId[null==t?void 0:t.courseFoundationsId]||{}).find(([,e])=>(0,m.Y_)(e.query,t)))&&void 0!==n?n:[null,null];return r?{id:r,view:i}:o.Vc},E=e=>["views","byCourseFoundationsId",e.courseFoundationsId],h=e=>["byId",e.achievementId],y=(e,t)=>{var n;if(!(null===(n=e.query)||void 0===n?void 0:n.courseFoundationsId))return!1;let{view:r}=g(t.getState().achievement,e.query);return!r||!r.isLoading&&!r.isValid},f=(e,t)=>{let n=t.getState().achievement.byId[e.achievementId];return(0,s.gE)(null==n?void 0:n.status)},b=(e,t)=>{let n=t.getState().achievement.byId[e.achievementId];return(0,s.PH)(null==n?void 0:n.status)},I=(e,t)=>{let n=t.getState().achievement.byId[e.achievementId];return(0,s.zO)(null==n?void 0:n.status)},A=(e,t)=>{if(!t)return;let n=e.views.byCourseFoundationsId[t];n&&Object.keys(n).forEach(e=>{n[e].isValid=!1})},v=(0,o.vy)({byId:{},views:{byCourseFoundationsId:{}}},{[p]:(0,o.Dh)(g,E),[(0,o.ok)(p)]:(e,t)=>{var n;let{data:i}=t,a=(0,r.Ay)(e,e=>{Object.keys(i.achievementsById).forEach(t=>{e.byId[t]?e.byId[t]={value:i.achievementsById[t],status:e.byId[t].status}:e.byId[t]={value:i.achievementsById[t],status:s.U8}})});return(0,o.lY)(a,t,{viewResolver:g,viewsPathResolver:E,values:null!==(n=null==i?void 0:i.achievementIds)&&void 0!==n?n:[]})},[(0,o.fJ)(p)]:(0,o.To)(g,E),[l]:(0,s.rK)(h,s.hu.Load,s.p_),[(0,o.ok)(l)]:(e,t)=>{let{achievement:n}=t;return(0,r.Ay)(e,e=>{e.byId[n.id]={value:n,status:(0,s.Lx)(s.hu.Load,e.byId[n.id],s.U8)}})},[(0,o.fJ)(l)]:(0,s.rK)(h,s.hu.Load,s.XP),[(0,o.ok)(u)]:(e,t)=>(0,r.Ay)(e,e=>{let{achievement:n,courseFoundationsId:r}=t;e.byId[n.id]={value:n,status:(0,s.Lx)(s.hu.Create,void 0,s.U8)},A(e,r)}),[c]:(0,s.rK)(h,s.hu.Delete,s.nn),[(0,o.ok)(c)]:(e,t)=>(0,r.Ay)(e,e=>{let{achievementId:n,courseFoundationsId:r}=t;e.byId[n]={value:e.byId[n].value,status:(0,s.Lx)(s.hu.Delete,e.byId[n],s.s1)},A(e,r)}),[(0,o.fJ)(c)]:(0,s.rK)(h,s.hu.Delete,s.XP),[d]:(0,s.rK)(h,s.hu.Update,s.J7),[(0,o.ok)(d)]:(e,t)=>(0,r.Ay)(e,e=>{let{achievement:n,courseFoundationsId:r}=t;e.byId[n.id]={value:n,status:(0,s.Lx)(s.hu.Update,e.byId[n.id],s.U8)},A(e,r)}),[(0,o.fJ)(d)]:(0,s.rK)(h,s.hu.Update,s.XP)}),S={loadAchievementsByQuery:e=>(0,o.Vy)(p,async()=>{try{return{data:await (0,a.h9)(e),query:e}}catch(t){throw new o.GS(t).setData({query:e})}},{data:{query:e},condition:y}),loadAchievement:(e,t)=>(0,o.Vy)(l,async()=>{try{let n=await (0,a.QG)(e,t);return{courseFoundationsId:e,achievementId:n.id,achievement:n}}catch(n){throw new o.GS(n).setData({courseFoundationsId:e,achievementId:t})}},{data:{courseFoundationsId:e,achievementId:t},condition:f}),createAchievement:(e,t)=>(0,o.Vy)(u,async()=>{let n=await (0,a.Ab)(e,t);return{courseFoundationsId:e,achievementId:n.id,achievement:n}}),deleteAchievement:(e,t)=>(0,o.Vy)(c,async()=>{try{return await (0,a.dy)(e,t),{courseFoundationsId:e,achievementId:t}}catch(n){throw new o.GS(n).setData({courseFoundationsId:e,achievementId:t})}},{data:{courseFoundationsId:e,achievementId:t},condition:b}),updateAchievement:(e,t,n)=>(0,o.Vy)(d,async()=>{try{let r=await (0,a.$U)(e,t,n);return{courseFoundationsId:e,achievementId:t,achievement:r}}catch(n){throw new o.GS(n).setData({courseFoundationsId:e,achievementId:t})}},{data:{courseFoundationsId:e,achievementId:t},condition:I})},_={getAchievementsByQuery:(0,i.Mz)([e=>e.achievement,(e,t)=>t],(e,t)=>{let{view:n}=g(e,t);return n?(n.values||[]).map(t=>e.byId[t]).filter(e=>(null==e?void 0:e.value)&&(null==e?void 0:e.status.status)!=="deleted").map(e=>e.value):[]}),getAchievementsViewByQuery:(0,i.Mz)([e=>e.achievement,(e,t)=>t],(e,t)=>{let{view:n}=g(e,t);return n||null}),getAchievementById:(e,t)=>{var n;return null===(n=e.achievement.byId[t])||void 0===n?void 0:n.value},getAchievementStatusById:(e,t)=>{var n;return null===(n=e.achievement.byId[t])||void 0===n?void 0:n.status}}},340903:function(e,t,n){"use strict";n.d(t,{o1:function(){return c},Ff:function(){return d},Lt:function(){return p}});var r=n(828736),i=n(968554);let o="achievement.recipient.counts.load";var s=n(905898),a=n(612918);let l=e=>["byCourseFoundationsId",e.courseFoundationsId],u=(e,t)=>{let n=t.getState().achievementRecipientCount.byCourseFoundationsId[e.courseFoundationsId];return(0,a.qO)(null==n?void 0:n.status)},d=(0,i.vy)({byCourseFoundationsId:{}},{[o]:(0,a.vR)(l,a.vq),[(0,i.ok)(o)]:(e,t)=>{let{courseFoundationsId:n,counts:r}=t;return(0,s.Ay)(e,e=>{e.byCourseFoundationsId[n]={value:r.achievements,status:a.y_}})},[(0,i.fJ)(o)]:(0,a.vR)(l,a.JL)}),c={loadAchievementRecipientCounts:e=>(0,i.Vy)(o,async()=>{try{let t=await (0,r.JEE)(e);return{courseFoundationsId:e,counts:t}}catch(t){throw new i.GS(t).setData({courseFoundationsId:e})}},{data:{courseFoundationsId:e},condition:u})},p={getAchievementRecipientCountsByCourseFoundationsId:(e,t)=>{var n;return null===(n=e.achievementRecipientCount.byCourseFoundationsId[t])||void 0===n?void 0:n.value},getAchievementRecipientCountsStatusByCourseFoundationsId:(e,t)=>{var n;return null===(n=e.achievementRecipientCount.byCourseFoundationsId[t])||void 0===n?void 0:n.status}}},615418:function(e,t,n){"use strict";n.d(t,{o1:function(){return R},Ff:function(){return C},Lt:function(){return L}});var r=n(905898),i=n(968554),o=n(612918),s=n(828736),a=n(732583),l=n(170228);let u="achievement.recipient.load",d="achievement.recipient.update",c="achievement.recipients.load.by.membership",p="achievement.recipients.load.by.achievement",m=(e,t)=>`${e}#${t}`,g=e=>m(e.achievementId,e.membershipId),E=(e,t)=>{var n,r;if(!(null==t?void 0:t.achievementId))return i.Vc;let[o,s]=null!==(r=Object.entries(null!==(n=e.views.byAchievementId[t.achievementId])&&void 0!==n?n:{}).find(([,e])=>(0,a.Y_)(e.query,t)))&&void 0!==r?r:[null,null];return o?{id:o,view:s}:i.Vc},h=e=>["views","byAchievementId",e.achievementId],y=(e,t)=>{var n,r;if(!(null==t?void 0:t.membershipFoundationsId))return i.Vc;let[o,s]=null!==(r=Object.entries(null!==(n=e.views.byMembershipFoundationsId[t.membershipFoundationsId])&&void 0!==n?n:{}).find(([,e])=>(0,a.Y_)(e.query,t)))&&void 0!==r?r:[null,null];return o?{id:o,view:s}:i.Vc},f=e=>["views","byMembershipFoundationsId",e.membershipFoundationsId],b=e=>["byId",m(e.achievementId,e.membershipFoundationsId)],I=(e,t)=>{var n;if(!(null===(n=e.query)||void 0===n?void 0:n.achievementId))return!1;let{view:r}=E(t.getState().achievementRecipient,e.query);return!r||!r.isLoading&&!r.isValid},A=(e,t)=>{var n;if(!(null===(n=e.query)||void 0===n?void 0:n.membershipFoundationsId))return!1;let{view:r}=y(t.getState().achievementRecipient,e.query);return!r||!r.isLoading&&!r.isValid},v=(e,t)=>{let n=t.getState(),r=m(e.achievementId,e.membershipFoundationsId),i=n.achievementRecipient.byId[r];return(0,o.gE)(null==i?void 0:i.status)},S=(e,t)=>{let n=t.getState(),r=m(e.achievementId,e.membershipFoundationsId),i=n.achievementRecipient.byId[r];return(0,o.zO)(null==i?void 0:i.status)},_=(e,t)=>{if(!t)return;let n=e.views.byAchievementId[t];n&&Object.keys(n).forEach(e=>{n[e].isValid=!1})},T=(e,t)=>{if(!t)return;let n=e.views.byMembershipFoundationsId[t];n&&Object.keys(n).forEach(e=>{n[e].isValid=!1})},O=e=>{Object.values(e.views.byMembershipFoundationsId).forEach(e=>{Object.values(e).forEach(e=>{e.isValid=!1})})},C=(0,i.vy)({byId:{},views:{byAchievementId:{},byMembershipFoundationsId:{}}},{[c]:(0,i.Dh)(y,f),[(0,i.ok)(c)]:(e,t)=>{var n;let{data:s}=t,a=(0,r.Ay)(e,e=>{s.results.forEach(t=>{var n,r;let i=g(t);e.byId[i]={value:t,status:null!==(r=null===(n=e.byId[i])||void 0===n?void 0:n.status)&&void 0!==r?r:o.U8}})});return(0,i.lY)(a,t,{viewResolver:y,viewsPathResolver:f,values:null!==(n=null==s?void 0:s.results.map(e=>g(e)))&&void 0!==n?n:[]})},[(0,i.fJ)(c)]:(0,i.To)(y,f),[p]:(0,i.Dh)(E,h),[(0,i.ok)(p)]:(e,t)=>{var n,s;let{data:a}=t,l=(0,r.Ay)(e,e=>{a.results.forEach(t=>{let n=g(t);e.byId[n]={value:t,status:e.byId[n]?e.byId[n].status:o.U8}})});return(0,i.lY)(l,t,{viewResolver:E,viewsPathResolver:h,values:null!==(s=null===(n=null==a?void 0:a.results)||void 0===n?void 0:n.map(e=>g(e)))&&void 0!==s?s:[],paging:{lastEvaluatedKey:null==a?void 0:a.lastEvaluatedKey}})},[(0,i.fJ)(p)]:(0,i.To)(E,h),[u]:(0,o.rK)(b,o.hu.Load,o.p_),[(0,i.ok)(u)]:(e,t)=>{let{data:n}=t;return(0,r.Ay)(e,e=>{let t=g(n);e.byId[t]={value:n,status:(0,o.Lx)(o.hu.Load,e.byId[t],o.U8)}})},[(0,i.fJ)(u)]:(0,o.rK)(b,o.hu.Load,o.XP),[d]:(0,o.rK)(b,o.hu.Update,o.J7),[(0,i.ok)(d)]:(e,t)=>(0,r.Ay)(e,e=>{let{data:n}=t,r=g(n);e.byId[r]={value:n,status:(0,o.Lx)(o.hu.Update,e.byId[r],o.U8)},_(e,n.achievementId),T(e,n.membershipId)}),[(0,i.fJ)(d)]:(0,o.rK)(b,o.hu.Update,o.XP),[(0,i.ok)(l.g.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID)]:e=>(0,r.Ay)(e,e=>{O(e)}),[(0,i.ok)(l.g.GRADEBOOK_GRADE_PERSIST_BY_USER_ID)]:e=>(0,r.Ay)(e,e=>{O(e)}),[(0,i.ok)(l.g.GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID)]:e=>(0,r.Ay)(e,e=>{O(e)}),[(0,i.ok)(l.g.GRADEBOOK_GRADES_INVALIDATE)]:e=>(0,r.Ay)(e,e=>{O(e)}),[(0,i.ok)(l.g.GRADEBOOK_GRADES_INVALIDATE_BY_COLUMN_ID)]:e=>(0,r.Ay)(e,e=>{O(e)}),[(0,i.ok)(l.g.GRADEBOOK_GROUP_MEMBER_GRADES_INVALIDATE_BY_COLUMN_ID)]:e=>(0,r.Ay)(e,e=>{O(e)})}),R={loadAchievementRecipientsByMembershipQuery:e=>(0,i.Vy)(c,async()=>{try{return{data:await (0,s.Ohq)(e.courseFoundationsId,e.membershipFoundationsId),query:e}}catch(t){throw new i.GS(t).setData({query:e})}},{data:{query:e},condition:A}),loadAchievementRecipientsByAchievementQuery:e=>(0,i.Vy)(p,async()=>{try{return{data:await (0,s.dHD)(e.courseFoundationsId,e.achievementId,e.paging),query:e}}catch(t){throw new i.GS(t).setData({query:e})}},{data:{query:e},condition:I}),loadAchievementRecipient:e=>(0,i.Vy)(u,async()=>{try{return{data:await (0,s.f7b)(e.courseFoundationsId,e.achievementId,e.membershipFoundationsId),query:e}}catch(t){throw new i.GS(t).setData({query:e})}},{data:{...e},condition:v}),updateAchievementRecipient:(e,t)=>(0,i.Vy)(d,async()=>{try{return{data:await (0,s.u5B)(e.courseFoundationsId,e.achievementId,e.membershipFoundationsId,t),query:e}}catch(t){throw new i.GS(t).setData({query:e})}},{data:{...e},condition:S})},L={getAchievementRecipientsByMembershipQuery:(e,t)=>{var n;let{view:r}=y(e.achievementRecipient,t);return r?(null!==(n=r.values)&&void 0!==n?n:[]).map(t=>e.achievementRecipient.byId[t]).filter(e=>void 0!==e&&void 0!==e.value&&"deleted"!==e.status.status).map(e=>e.value):[]},getAchievementRecipientsViewByMembershipQuery:(e,t)=>{let{view:n}=y(e.achievementRecipient,t);return null!=n?n:null},getAchievementRecipientsByAchievementQuery:(e,t)=>{var n;let{view:r}=E(e.achievementRecipient,t);return r?(null!==(n=r.values)&&void 0!==n?n:[]).map(t=>e.achievementRecipient.byId[t]).filter(e=>void 0!==e&&void 0!==e.value&&"deleted"!==e.status.status).map(e=>e.value):[]},getAchievementRecipientsViewByAchievementQuery:(e,t)=>{let{view:n}=E(e.achievementRecipient,t);return null!=n?n:null},getAchievementRecipientById:(e,t)=>{var n;return null===(n=e.achievementRecipient.byId[t])||void 0===n?void 0:n.value}}},78957:function(e,t,n){"use strict";n.d(t,{Ff:function(){return _},Lt:function(){return T},o1:function(){return O}});var r=n(905898),i=n(732583),o=n(839781),s=n(828736),a=n(764556),l=n(243502),u=n(612918),d=n(764209),c=n(968554);let p=e=>["aclMembers","byRuleId",e.ruleId],m=(e,t)=>{let n=t.getState().adaptiveRelease.aclMembers.byRuleId[e.ruleId];return(0,u.qO)(null==n?void 0:n.status)},g=e=>["aclGroups","byRuleId",e.ruleId],E=(e,t)=>{let n=t.getState().adaptiveRelease.aclGroups.byRuleId[e.ruleId];return(0,u.qO)(null==n?void 0:n.status)},h=(e,t)=>{var n;if(!t)return c.Vc;let[r,o]=null!==(n=Object.entries(e.views.byContentId[t.contentId]||{}).find(([,e])=>(0,i.Y_)(e.query,t)))&&void 0!==n?n:[null,null];return r?{id:r,view:o}:c.Vc},y=e=>["views","byContentId",e.contentId],f=(e,t)=>Object.keys(e).find(n=>{let r=e[n],o=(0,i.Y_)(r.query.paging,t.paging),s=!("filter"in r.query)||!("filter"in t)||(0,i.Y_)(r.query.filter,t.filter);return o&&s}),b=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byContentId[t.contentId]||{},r=f(n,t);return r?{id:r,view:n[r]}:c.Vc},I=(e,t)=>{var n;t&&Object.values(null!==(n=e.views.byContentId[t])&&void 0!==n?n:{}).forEach(e=>{e.isValid=!1})},A=(e,t)=>{var n;return(null===(n=e.criteria)||void 0===n?void 0:n.map(e=>e.id===t.id?t:e))||[]};function v(e,t){return(0,r.jM)(e,e=>{t.rules.forEach(t=>{t.id&&(e.byId[t.id]={...e.byId[t.id],...t},delete e.aclMembers.byRuleId[t.id],delete e.aclGroups.byRuleId[t.id])}),I(e,t.contentId)})}function S(e,t){return(0,r.jM)(e,e=>{let n=e.views.byContentId[t];n&&Object.values(n).forEach(t=>{var n;null===(n=t.values)||void 0===n||n.forEach(t=>{delete e.byId[t],delete e.aclMembers.byRuleId[t],delete e.aclGroups.byRuleId[t]})}),I(e,t)})}let _=(0,c.vy)({byId:{},views:{byContentId:{}},aclMembers:{byRuleId:{}},aclGroups:{byRuleId:{}}},{[(0,c.ok)(l.gK.ADAPTIVE_RELEASE_RULES_CREATE)]:(e,t)=>v(e,t),[(0,c.ok)(l.gK.ADAPTIVE_RELEASE_RULE_DELETE)]:(e,t)=>(0,r.jM)(e,e=>{delete e.byId[t.ruleId],I(e,t.contentId)}),[l.gK.ADAPTIVE_RELEASE_RULES_LOAD_BY_COURSE_AND_CONTENT]:(0,c.Dh)(h,y),[(0,c.ok)(l.gK.ADAPTIVE_RELEASE_RULES_LOAD_BY_COURSE_AND_CONTENT)]:(e,t)=>{let{data:n}=t,{rules:i,paging:o,permissions:s}=n,a=Object.keys(i);return e=(0,r.jM)(e,e=>{a.forEach(t=>{e.byId[t]=i[t]})}),(0,c.lY)(e,t,{viewResolver:h,viewsPathResolver:y,paging:o,values:a,permissions:s})},[l.gK.ADAPTIVE_RELEASE_RULES_LOAD_BY_COURSE_AND_CONTENT]:(0,c.Dh)(b,y),[(0,c.fJ)(l.gK.ADAPTIVE_RELEASE_RULES_LOAD_BY_COURSE_AND_CONTENT)]:(0,c.To)(b,y),[(0,c.fJ)(l.gK.ADAPTIVE_RELEASE_RULES_LOAD_BY_COURSE_AND_CONTENT)]:(0,c.To)(h,y),[l.gK.ADAPTIVE_RELEASE_RULES_PERSIST]:(e,t)=>(0,r.jM)(e,e=>{t.rules.forEach(t=>{t.id&&!e.byId[t.id]&&(e.byId[t.id]={})})}),[(0,c.ok)(l.gK.ADAPTIVE_RELEASE_RULES_PERSIST)]:(e,t)=>v(e,t),[(0,c.fJ)(l.gK.ADAPTIVE_RELEASE_RULES_PERSIST)]:(e,t)=>(0,r.jM)(e,e=>{t.rules.forEach(t=>{var n;t.id&&0===Object.keys(null!==(n=e.byId[t.id])&&void 0!==n?n:{}).length&&delete e.byId[t.id]})}),[(0,c.ok)(l.gK.ADAPTIVE_RELEASE_DELETE)]:(e,t)=>{let{contentId:n}=t;return S(e,n)},[(0,c.ok)(d.g.CONTENT_PERSIST_ADAPTIVE_RELEASE)]:(e,t)=>(0,r.jM)(e,e=>{var n;if(!(null===(n=t.result)||void 0===n?void 0:n.ruleId))return;let{contentId:r,ruleId:i}=t.result,o=A(e.byId[i],t.result);e.byId[i].criteria=o,delete e.aclMembers.byRuleId[i],delete e.aclGroups.byRuleId[i],I(e,r)}),[(0,c.ok)(d.g.CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE)]:(e,t)=>{let{contentId:n}=t;return S(e,n)},[(0,c.ok)(d.g.CONTENT_DELETE_ADAPTIVE_RELEASE)]:(e,t)=>(0,r.jM)(e,e=>{let{results:n}=t;Object.values(n).forEach(t=>{let n=t.id,r=e.views.byContentId[n];r&&Object.values(r).forEach(t=>{var n;null===(n=t.values)||void 0===n||n.forEach(t=>{delete e.byId[t],delete e.aclMembers.byRuleId[t],delete e.aclGroups.byRuleId[t]})}),I(e,n)})}),[(0,c.ok)(d.g.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE)]:(e,t)=>(0,r.jM)(e,e=>{Object.values(t.results).forEach(t=>{var n;if(!(null===(n=t.result)||void 0===n?void 0:n.ruleId))return;let{contentId:r,ruleId:i}=t.result,o=A(e.byId[i],t.result);e.byId[i].criteria=o,delete e.aclMembers.byRuleId[i],delete e.aclGroups.byRuleId[i],I(e,r)})}),[l.gK.ADAPTIVE_RELEASE_ACL_MEMBERS_LOAD]:(0,u.vR)(p,u.vq),[(0,c.ok)(l.gK.ADAPTIVE_RELEASE_ACL_MEMBERS_LOAD)]:(e,t)=>{let{ruleId:n,aclUsers:i}=t;return(0,r.jM)(e,e=>{e.aclMembers.byRuleId[n]={value:i,status:u.y_}})},[(0,c.fJ)(l.gK.ADAPTIVE_RELEASE_ACL_MEMBERS_LOAD)]:(0,u.vR)(p,u.JL),[l.gK.ADAPTIVE_RELEASE_ACL_GROUPS_LOAD]:(0,u.vR)(g,u.vq),[(0,c.ok)(l.gK.ADAPTIVE_RELEASE_ACL_GROUPS_LOAD)]:(e,t)=>{let{ruleId:n,aclGroups:i}=t;return(0,r.jM)(e,e=>{e.aclGroups.byRuleId[n]={value:i,status:u.y_}})},[(0,c.fJ)(l.gK.ADAPTIVE_RELEASE_ACL_GROUPS_LOAD)]:(0,u.vR)(g,u.JL)}),T={getAdaptiveReleaseRulesByQuery:(0,o.n)((e,t)=>{let{view:n}=h(e.adaptiveRelease,t);return n&&n.isValid&&!n.isLoading?(n.values||[]).map(t=>e.adaptiveRelease.byId[t]):[]},e=>e),getAdaptiveReleaseRulesViewStatusByQuery:(e,t)=>{let{view:n}=b(e.adaptiveRelease,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getAdaptiveReleaseRulesPermissionsByQuery:(e,t)=>{var n;let{view:r}=h(e.adaptiveRelease,t);return null!==(n=null==r?void 0:r.permissions)&&void 0!==n?n:null},getAdaptiveReleaseAclMembersByRuleId:(e,t)=>{var n;return null===(n=e.adaptiveRelease.aclMembers.byRuleId[t])||void 0===n?void 0:n.value},getAdaptiveReleaseAclGroupsByRuleId:(e,t)=>{var n;return null===(n=e.adaptiveRelease.aclGroups.byRuleId[t])||void 0===n?void 0:n.value}},O={createAdaptiveReleaseRules:(e,t,n)=>(0,c.Vy)(l.gK.ADAPTIVE_RELEASE_RULES_CREATE,async()=>{let r=await (0,a.vQ)(e,t,n);return{contentId:t,rules:r}}),deleteAdaptiveReleaseRule:(e,t,n)=>(0,c.Vy)(l.gK.ADAPTIVE_RELEASE_RULE_DELETE,async()=>(await (0,a.hb)(e,t,n),{contentId:t,ruleId:n}),{data:{contentId:t,ruleId:n}}),deleteAdaptiveReleaseByContentId:(e,t)=>(0,c.Vy)(l.gK.ADAPTIVE_RELEASE_DELETE,async()=>(await (0,a.Oi)(e,t),{contentId:t}),{data:{contentId:t}}),loadAdaptiveReleaseRulesByQuery:e=>(0,c.Vy)(l.gK.ADAPTIVE_RELEASE_RULES_LOAD_BY_COURSE_AND_CONTENT,async()=>({data:await (0,a.Hp)(e),query:e}),{data:{query:e}}),persistAdaptiveReleaseRules:(e,t,n)=>(0,c.Vy)(l.gK.ADAPTIVE_RELEASE_RULES_PERSIST,async()=>{let r=await (0,a.Z0)(e,t,n);return{contentId:t,rules:r}},{data:{contentId:t}}),loadAdaptiveReleaseAclMembers:(e,t,n,r)=>{let i={courseId:e,contentId:t,ruleId:n,criteriaId:r,limit:l.gn,offset:0,expand:"user"};return(0,c.Vy)(l.gK.ADAPTIVE_RELEASE_ACL_MEMBERS_LOAD,async()=>{try{let e=await (0,s.tLZ)(i);return{contentId:t,ruleId:n,aclUsers:e.userPredicates}}catch(i){throw new c.GS(i).setData({courseId:e,contentId:t,ruleId:n,criteriaId:r})}},{data:{contentId:t,ruleId:n},condition:m})},loadAdaptiveReleaseAclGroups:(e,t,n,r)=>{let i={courseId:e,contentId:t,ruleId:n,criteriaId:r,limit:l.gn,offset:0,expand:"group"};return(0,c.Vy)(l.gK.ADAPTIVE_RELEASE_ACL_GROUPS_LOAD,async()=>{try{let e=await (0,s.DBf)(i);return{contentId:t,ruleId:n,aclGroups:e.groupPredicates}}catch(i){throw new c.GS(i).setData({courseId:e,contentId:t,ruleId:n,criteriaId:r})}},{data:{contentId:t,ruleId:n},condition:E})},clearAdaptiveReleaseInStoreByContentId:e=>(0,c.rc)((0,c.ok)(d.g.CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE),{contentId:e})}},596006:function(e,t,n){"use strict";n.d(t,{o1:function(){return g},Ff:function(){return c},Lt:function(){return m}});var r=n(318728),i=n(905898),o=n(317657),s=n(758247),a=n(968554);let l={AI_SETTINGS_LOAD:"aisettings.load"};var u=n(300474);let d={available:!1,contextPickerAvailable:!1,canGenerateKeywords:!1,canGenerateDocuments:!1,canGenerateOutlines:!1,canGenerateQuestions:!1,canGenerateRubrics:!1,canGenerateJournals:!1,canGenerateDiscussions:!1,canGenerateAssignments:!1,canSuggestDocumentLayout:!1,canChat:!1,chat:{questioning:!1,rolePlay:!1},images:{learningModules:!1,rtes:!1,outlines:"none"},premium:{available:!1}},c=(0,a.vy)({byCourseId:{}},{[l.AI_SETTINGS_LOAD]:(e,t)=>(0,i.Ay)(e,e=>{let n=e.byCourseId[t.courseId];n||(n={aiSettings:d,isLoaded:!1,isLoading:!0},e.byCourseId[t.courseId]=n),n.isLoading=!0}),[(0,a.ok)(l.AI_SETTINGS_LOAD)]:(e,t)=>{let n=t.data;return(0,i.Ay)(e,e=>{let r=e.byCourseId[t.courseId];r||(r={aiSettings:n,isLoaded:!0,isLoading:!1},e.byCourseId[t.courseId]=r),r.aiSettings=n,r.isLoaded=!0,r.isLoading=!1})},[(0,a.fJ)(l.AI_SETTINGS_LOAD)]:(e,t)=>(0,i.Ay)(e,e=>{let n=e.byCourseId[t.courseId];n&&(n.isLoading=!1)})}),p=Object.freeze({aiSettings:d,isLoaded:!1,isLoading:!1}),m={getAiSettings:(e,t)=>e.ai.byCourseId[t]||p},g={getAiSettings:e=>(0,a.RA)(async(t,n)=>{var i;let c=n().ai.byCourseId[e];if((null==c?void 0:c.isLoaded)||(null==c?void 0:c.isLoading))return null===(i=m.getAiSettings(n(),e))||void 0===i?void 0:i.aiSettings;t((0,a.rc)(l.AI_SETTINGS_LOAD,{courseId:e}));try{let n=await (0,o.Ab)(e);return t((0,a.rc)((0,a.ok)(l.AI_SETTINGS_LOAD),{courseId:e,data:n})),n}catch(n){if((0,u.rh)((0,u.xt)(n),[r.t3V.NotFound]))return t((0,a.rc)((0,a.ok)(l.AI_SETTINGS_LOAD),{courseId:e,data:d})),d;throw t((0,a.rc)((0,a.fJ)(l.AI_SETTINGS_LOAD),{courseId:e,err:n})),t((0,a.rc)((0,a.ok)(s.A.APP_ERROR),{error:n})),{err:n}}})}},306668:function(e,t,n){"use strict";n.d(t,{Ff:function(){return p},o1:function(){return m}});var r=n(905898),i=n(645250),o=n(968554),s=n(318728),a=n(758247),l=n(144978),u=n(588335),d=n(300474);let c={announcements:{},isLoading:!1,isSearchingSuccessful:null,searchInputState:{searchText:"",isCollapsed:!0},paging:null,announcementsCounts:{},courseContext:{id:"",courseId:"",permissions:{chooseUltraStatus:!1,export:!1,archive:!1,viewAutoArchive:!1,edit:!1,editName:!1,editAvailability:!1,editClosed:!1,editBanner:!1,editBannerVisibility:!1,copy:!1,convert:!1,import:!1,editLocale:!1,editDuration:!1,editTerm:!1,delete:!1,viewEnrollments:!1,messagesEnabled:!1}},announcement:null,detailPanelState:{},sortCriteria:[{field:s.Dn4.StartDateRestriction,direction:s.UEL.Descending}],listener:{refreshAnnouncementsCounts:!1,refreshAnnouncements:!1,resetSearchSetting:!1,resetSortSetting:!1},recentUpdatedAnnouncementIds:[]},p=(0,o.vy)(c,{[u.gK.ANNOUNCEMENT_LOAD]:(e,t)=>(0,o.r1)(e,t,{isSearchingSuccessful:null}),[(0,o.ok)(u.gK.ANNOUNCEMENT_LOAD)]:(e,t)=>(0,o.Zg)(e,t,{announcements:t.announcements,paging:t.paging,listener:{...e.listener,refreshAnnouncements:!1,resetSearchSetting:!1,resetSortSetting:!1}}),[(0,o.ok)(u.gK.ANNOUNCEMENT_LOAD_MORE)]:(e,t)=>(0,o.Zg)(e,t,{announcements:{...e.announcements,...t.announcements}}),[(0,o.ok)(u.gK.ANNOUNCEMENT_SEARCH)]:(e,t)=>(0,o.Zg)(e,t,{isSearchingSuccessful:!0}),[(0,o.fJ)(u.gK.ANNOUNCEMENT_LOAD)]:(e,t)=>(0,o.Nh)(e,t,{announcements:{},paging:null}),[(0,o.fJ)(u.gK.ANNOUNCEMENT_SEARCH)]:(e,t)=>(0,o.Nh)(e,t,{isSearchingSuccessful:!1}),[u.gK.CHANGE_SEARCH_INPUT_STATE]:(e,t)=>({...e,searchInputState:t.searchInputState}),[u.gK.CHANGE_ANNOUNCEMENT_PANEL_STATE]:(e,t)=>({...e,detailPanelState:t.detailPanelState}),[(0,o.ok)(u.gK.ANNOUNCEMENT_SAVE)]:(e,t)=>{let n=e.recentUpdatedAnnouncementIds;return t.announcement&&-1===n.indexOf(t.announcement.id)&&(n=[...e.recentUpdatedAnnouncementIds,t.announcement.id]),(0,o.Zg)(e,t,{announcements:{...e.announcements,[t.announcement.id]:{...t.announcement,isDraft:!1}},announcement:t.announcement,listener:{...e.listener,refreshAnnouncementsCounts:!0,resetSortSetting:!0,refreshAnnouncements:!0},recentUpdatedAnnouncementIds:n})},[(0,o.fJ)(u.gK.ANNOUNCEMENT_SAVE)]:(e,t)=>(0,o.Nh)(e,t,{}),[(0,o.ok)(u.gK.ANNOUNCEMENT_REMOVE)]:(e,t)=>(0,o.Zg)(e,t,{announcements:i.omit(e.announcements,t.announcementId),listener:{...e.listener,refreshAnnouncementsCounts:!0}}),[(0,o.fJ)(u.gK.ANNOUNCEMENT_REMOVE)]:(e,t)=>(0,o.Nh)(e,t,{}),[(0,o.ok)(u.gK.UPDATE_COURSE_ANNOUNCEMENTS_READ_STATUS)]:(e,t)=>(0,o.Zg)(e,t,{announcements:{...e.announcements,[t.announcement.id]:t.announcement},listener:{...e.listener,refreshAnnouncementsCounts:!0,resetSortSetting:!0,refreshAnnouncements:!0}}),[(0,o.ok)(u.gK.GET_COURSE_CONTEXT)]:(e,t)=>(0,o.Zg)(e,t,{courseContext:t.courseContext}),[(0,o.fJ)(u.gK.GET_COURSE_CONTEXT)]:(e,t)=>(0,o.Nh)(e,t,{courseContext:{}}),[(0,o.ok)(u.gK.GET_AN_ANNOUNCEMENT)]:(e,t)=>(0,o.Zg)(e,t,{announcement:t.announcement}),[(0,o.fJ)(u.gK.GET_AN_ANNOUNCEMENT)]:(e,t)=>(0,o.Nh)(e,t,{announcement:{}}),[u.gK.SWITCH_SORT_CRITERIA]:(e,t)=>({...e,sortCriteria:t.sortCriteria}),[u.gK.ANNOUNCEMENT_CLEAR]:(e,t)=>({...c}),[u.gK.REMOVE_FROM_RECENT_UPDATED]:(e,t)=>(0,r.Ay)(e,e=>{e.recentUpdatedAnnouncementIds.length>0&&i.remove(e.recentUpdatedAnnouncementIds,e=>e===t.id)})}),m={loadAnnouncements:(e,t,n=!1)=>(0,o.RA)((r,i)=>g(i())?(r((0,o.rc)(u.gK.ANNOUNCEMENT_LOAD)),(0,l.Xh)({courseId:e,filter:{searchText:t.searchText},paging:t.paging,sort:t.sort}).then(e=>(n?r((0,o.rc)((0,o.ok)(u.gK.ANNOUNCEMENT_LOAD_MORE),{...e})):(r((0,o.rc)((0,o.ok)(u.gK.ANNOUNCEMENT_LOAD),{...e})),t.searchText&&r((0,o.rc)((0,o.ok)(u.gK.ANNOUNCEMENT_SEARCH)))),e),e=>(r((0,o.rc)((0,o.ok)(a.A.APP_ERROR),{error:e})),r((0,o.rc)((0,o.fJ)(u.gK.ANNOUNCEMENT_LOAD),{err:e})),t.searchText&&r((0,o.rc)((0,o.fJ)(u.gK.ANNOUNCEMENT_SEARCH))),Promise.resolve(null)))):Promise.resolve(null)),changeSearchInputState:e=>(0,o.rc)(u.gK.CHANGE_SEARCH_INPUT_STATE,{searchInputState:e}),changeReadStatusAnnouncement:(e,t,n)=>(0,o.RA)((r,i)=>(0,l.f9)(e,t.id,n).then(()=>{r((0,o.rc)((0,o.ok)(u.gK.UPDATE_COURSE_ANNOUNCEMENTS_READ_STATUS),{announcement:{...t,readStatus:{isRead:n}}}))},e=>{r((0,o.rc)((0,o.fJ)(u.gK.UPDATE_COURSE_ANNOUNCEMENTS_READ_STATUS))),r((0,o.rc)((0,o.ok)(a.A.APP_ERROR),{error:e}))})),saveAnnouncement:(e,t)=>(0,o.RA)((n,r)=>(0,l.cD)(e,t).then(t=>{n((0,o.rc)((0,o.ok)(u.gK.ANNOUNCEMENT_SAVE),{courseId:e,announcement:t.announcement}))},e=>{n((0,o.rc)((0,o.ok)(a.A.APP_ERROR),{error:e})),n((0,o.rc)((0,o.fJ)(u.gK.ANNOUNCEMENT_SAVE),{err:e}))})),removeAnnouncement:(e,t)=>(0,o.RA)((n,r)=>(0,l.xI)(e,t).then(r=>{n((0,o.rc)((0,o.ok)(u.gK.ANNOUNCEMENT_REMOVE),{courseId:e,announcementId:t}))},e=>{n((0,o.rc)((0,o.ok)(a.A.APP_ERROR),{error:e})),n((0,o.rc)((0,o.fJ)(u.gK.ANNOUNCEMENT_REMOVE),{err:e}))})),getCourseContext:e=>(0,o.RA)((t,n)=>(0,l.P3)(e).then(e=>{t((0,o.rc)((0,o.ok)(u.gK.GET_COURSE_CONTEXT),{...e}))},e=>{t((0,o.rc)((0,o.ok)(a.A.APP_ERROR),{error:e})),t((0,o.rc)((0,o.fJ)(u.gK.GET_COURSE_CONTEXT),{err:e}))})),getAnnouncement:(e,t)=>(0,o.RA)((n,r)=>(0,l.Wy)(e,t).then(e=>{n((0,o.rc)((0,o.ok)(u.gK.GET_AN_ANNOUNCEMENT),{...e}))},e=>{let t=(0,d.xt)(e);(0,d.rh)(t,[s.t3V.NotFound])||n((0,o.rc)((0,o.ok)(a.A.APP_ERROR),{error:e})),n((0,o.rc)((0,o.fJ)(u.gK.GET_AN_ANNOUNCEMENT),{err:e}))})),changeAnnouncementPanelState:e=>(0,o.rc)(u.gK.CHANGE_ANNOUNCEMENT_PANEL_STATE,{detailPanelState:e}),switchSortCriteria:e=>(0,o.rc)(u.gK.SWITCH_SORT_CRITERIA,{sortCriteria:e}),clearAnnouncements:()=>(0,o.rc)(u.gK.ANNOUNCEMENT_CLEAR),removeFromRecentUpdated:e=>(0,o.rc)(u.gK.REMOVE_FROM_RECENT_UPDATED,{id:e})},g=e=>!e.announcement.isLoading},612918:function(e,t,n){"use strict";n.d(t,{E1:function(){return m},FV:function(){return v},J7:function(){return y},JL:function(){return E},Lx:function(){return C},PH:function(){return O},TR:function(){return R},U8:function(){return d},XP:function(){return h},gE:function(){return _},gO:function(){return g},hu:function(){return i},nn:function(){return f},p_:function(){return p},qO:function(){return S},rK:function(){return A},s1:function(){return b},vR:function(){return I},vq:function(){return c},y_:function(){return u},zO:function(){return T}});var r,i,o=n(645250),s=n(905898),a=n(163785),l=/*#__PURE__*/n.n(a);(r=i||(i={}))[r.Load=0]="Load",r[r.Create=1]="Create",r[r.Update=2]="Update",r[r.Delete=3]="Delete";let u=Object.freeze({status:"success",fetchStatus:"idle"}),d=Object.freeze({status:"success",fetchStatus:"idle",mutationStatus:"idle"}),c=Object.freeze({status:"idle",fetchStatus:"fetching"}),p=Object.freeze({status:"idle",fetchStatus:"fetching",mutationStatus:"idle"}),m=Object.freeze({status:"invalid",fetchStatus:"idle"}),g=Object.freeze({status:"invalid",fetchStatus:"idle",mutationStatus:"idle"}),E=Object.freeze({status:"error",fetchStatus:"idle"}),h=Object.freeze({status:"error",fetchStatus:"idle",mutationStatus:"idle"}),y=Object.freeze({status:"idle",fetchStatus:"idle",mutationStatus:"updating"}),f=Object.freeze({status:"idle",fetchStatus:"idle",mutationStatus:"deleting"}),b=Object.freeze({status:"deleted",fetchStatus:"idle",mutationStatus:"idle"});function I(e,t){return(n,r)=>{let i=e(r);return(0,s.Ay)(n,e=>{(0,o.get)(n,[...i],void 0)?(0,o.set)(e,[...i,"status"],t):(0,o.set)(e,[...i],{status:t})})}}function A(e,t,n){return(r,a)=>{let l=e(a);return(0,s.Ay)(r,e=>{let s=(0,o.get)(r,[...l],void 0);if(!s){(0,o.set)(e,[...l],{status:n});return}(t===i.Delete||"deleted"!==s.status.status&&"deleting"!==s.status.mutationStatus)&&(t!==i.Delete||"deleted"!==s.status.status)&&(0,o.set)(e,[...l,"status"],n)})}}function v(e,t,n,r){return(i,a)=>{var u;let{query:d}=a,c=null!==(u=e(i,d).id)&&void 0!==u?u:l()(),p=t(d);return(0,s.Ay)(i,e=>{(0,o.get)(i,[...p,c],void 0)||(0,o.set)(e,[...p,c],{status:n,query:d}),(0,o.set)(e,[...p,c,"status"],n),(0,o.set)(e,[...p,c,"query"],d),"success"===n.status&&((null==r?void 0:r.values)&&((0,o.set)(e,[...p,c,"values"],r.values),(0,o.set)(e,[...p,c,"lastFetched"],Date.now())),(null==r?void 0:r.paging)&&(0,o.set)(e,[...p,c,"paging"],r.paging),(null==r?void 0:r.permissions)&&(0,o.set)(e,[...p,c,"permissions"],r.permissions))})}}function S(e){return!e||("invalid"===e.status||"error"===e.status)&&"idle"===e.fetchStatus}function _(e){return!e||("invalid"===e.status||"error"===e.status)&&"idle"===e.fetchStatus&&"idle"===e.mutationStatus}function T(e){return"deleted"!==e.status&&"updating"!==e.mutationStatus&&"deleting"!==e.mutationStatus}function O(e){return"deleted"!==e.status&&"deleting"!==e.mutationStatus}function C(e,t,n){return e!==i.Delete&&((null==t?void 0:t.status.status)==="deleted"||(null==t?void 0:t.status.mutationStatus)==="deleting")?t.status:n}function R(e,t){var n;return t&&(null===(n=t.value)||void 0===n?void 0:n.id)&&(e[t.value.id]=t),e}},758247:function(e,t){"use strict";t.A={ROUTER_STATE_CHANGE_SUCCESS:"router.state.change.success",ROUTER_LOCATION_CHANGE_SUCCESS:"router.location.change.success",APP_ERROR:"app.error",APP_ERROR_CLEAR:"app.error.clear"}},135360:function(e,t,n){"use strict";n.d(t,{Ff:function(){return l},Lt:function(){return d},o1:function(){return u}});var r=n(905898),i=n(645250),o=n(44564),s=n(968554),a=n(758247);let l=(0,s.vy)({location:{},route:{},error:null},{[(0,s.ok)(a.A.ROUTER_STATE_CHANGE_SUCCESS)]:(e,t)=>(0,r.Ay)(e,e=>{e.route=t.route}),[(0,s.ok)(a.A.ROUTER_LOCATION_CHANGE_SUCCESS)]:(e,t)=>{let{queryParams:n}=t;return(0,r.Ay)(e,e=>{e.location.queryParams=n})},[(0,s.ok)(a.A.APP_ERROR)]:(e,t)=>{let{error:n}=t,i=(0,o.xt)(n);return console.error("Encountered application error",JSON.stringify(i)),(0,r.Ay)(e,e=>{e.error=i})},[(0,s.ok)(a.A.APP_ERROR_CLEAR)]:e=>(0,r.Ay)(e,e=>{e.error=null})}),u={handleStateChangeSuccess:e=>(0,s.VP)(a.A.ROUTER_STATE_CHANGE_SUCCESS,()=>{var t;let n=e||{},r=i.pick(n.toState,"name","panelClass","pageTitle"),o=Object.keys(null!==(t=n.toParams)&&void 0!==t?t:{}).filter(e=>"object"!=typeof n.toParams[e]&&"function"!=typeof n.toParams[e]).reduce((e,t)=>({...e,[t]:n.toParams[t]}),{});return Promise.resolve({route:{...r,params:o}})}),handleLocationChangeSuccess:e=>(0,s.VP)(a.A.ROUTER_LOCATION_CHANGE_SUCCESS,()=>Promise.resolve({queryParams:e.queryParams||{}})),setError:e=>(0,s.RA)(t=>{t((0,s.rc)((0,s.ok)(a.A.APP_ERROR),{error:e}))}),clearError:()=>(0,s.RA)(e=>{e((0,s.rc)((0,s.ok)(a.A.APP_ERROR_CLEAR)))})},d={getRoute:e=>e.app.route,getLocation:e=>e.app.location,getQueryParams:e=>e.app.location.queryParams,getQueryParameterValue:e=>t=>t.app.location.queryParams[e],getAppError:e=>e.app.error}},76013:function(e,t,n){"use strict";n.d(t,{Ff:function(){return w},Lt:function(){return M},o1:function(){return U}});var r=n(905898),i=n(645250),o=n(968554),s=n(477305),a=n(764209),l=n(842804),u=n(399733),d=n(318728),c=n(758247),p=n(11144),m=n(294268),g=n(301398),E=n(825271),h=n(728959),y=n(897582),f=n(352290),b=n(808954),I=n(437272),A=n(457969);let v=0,S=(e,t,n)=>{let r=v;return v+=1,e((0,o.rc)(y.g.ASSESSMENT_FILE_UPLOAD_TASK_ADD,{courseId:t,fileName:n,taskId:r})),r},_=(e,t,n,r)=>{let i=e[t];i?i[n]=r:e[t]={[n]:r}},T=(e,t,n)=>{let r=e[t];Object.keys(r).length>1?delete r[n]:delete e[t]},O=e=>["views","byCourseId",e.courseId],C=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=null!==(n=e.views.byCourseId[t.courseId])&&void 0!==n?n:{},s=Object.keys(r).find(e=>{let n=r[e];if("assessmentId"in n.query)return"assessmentId"in t&&t.assessmentId===n.query.assessmentId&&t.courseId===n.query.courseId;if("assessmentId"in t)return!1;let o=i.isEqual(n.query.paging,t.paging),s=i.isEqual(n.query.filter,t.filter),a=i.isEqual(n.query.sort,t.sort);return o&&a&&s});return s?{id:s,view:r[s]}:o.Vc},R=(e,t)=>{let n=(0,A.kK)(t);if(!n)return;let{id:r}=n;if(!r)return;let i=e.byAssessmentId[r];e.byAssessmentId[r]={...i,...n,api:{...null==i?void 0:i.api,isInvalidated:!1,isDeleting:!1,isUpdating:!1}}};function L(e,t){var n;t&&Object.values(null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{}).forEach(e=>{e.isValid=!1})}let D=(e,t)=>e.assessment.importTasksByCourseId[t]||{},N=e=>`questionBanksImportShowTaskStatus${e.replace(/\_/g,".")}`,P=(e,t)=>({key:N(e),isRequired:!0,value:JSON.stringify(Object.keys(t).reduce((e,t)=>({...e,[t]:!0}),{}))}),k=new Set([d.rw8.Complete,d.rw8.CompleteErrors]),w=(0,o.vy)({byAssessmentId:{},fileUploadTasksByCourseId:{},importTasksByCourseId:{},permissions:null,paging:null,isLoading:!1,views:{byCourseId:{}}},{[a.g.CONTENT_LOAD]:o.r1,[(0,o.ok)(a.g.CONTENT_LOAD)]:(e,t)=>{let n=(0,r.Ay)(e,n=>{if(!i.has(t,"assessments"))return;let{assessments:r}=t;Object.keys(r).forEach(t=>{var i,o;n.byAssessmentId[t]={...r[t],api:{isUpdating:!1,isDeleting:!1},ui:null!==(o=null===(i=e.byAssessmentId[t])||void 0===i?void 0:i.ui)&&void 0!==o?o:{}}})});return(0,o.Zg)(n,t)},[(0,o.fJ)(a.g.CONTENT_LOAD)]:o.Nh,[y.g.ASSESSMENT_LOAD]:(0,o.Dh)(C,O),[(0,o.ok)(y.g.ASSESSMENT_LOAD)]:(e,t)=>{if(!t||!t.data)return(0,o.Zg)(e,t);let{data:n}=t,{assessmentIds:s,byAssessmentId:a,paging:l,permissions:u}=n,d=(0,r.Ay)(e,t=>{Object.keys(a).forEach(n=>{let r=e.byAssessmentId[n],o=i.pickBy({contentId:null==r?void 0:r.contentId,permissions:null==r?void 0:r.permissions,ui:null==r?void 0:r.ui});t.byAssessmentId[n]={...a[n],ui:{},...o,api:{isUpdating:!1,isDeleting:!1}}})});return(0,o.lY)(d,t,{viewResolver:C,viewsPathResolver:O,paging:l,permissions:u,values:s})},[(0,o.fJ)(y.g.ASSESSMENT_LOAD)]:(0,o.To)(C,O),[y.g.ASSESSMENT_PERSIST]:(e,t)=>(0,r.Ay)(e,e=>{var n;let r=t.assessment.id;e.byAssessmentId[r]||(e.byAssessmentId[r]={});let i=null!==(n=e.byAssessmentId[r].api)&&void 0!==n?n:{};e.byAssessmentId[r].api=i,i.isUpdating=!0}),[(0,o.ok)(y.g.ASSESSMENT_PERSIST)]:(e,t)=>{let{updatedAssessment:n}=t,i=null==n?void 0:n.id;if(!i)return e;let o=e.byAssessmentId[i],s={...o,...n,api:{...null==o?void 0:o.api,isUpdating:!1},ui:{...null==o?void 0:o.ui}};return(0,r.Ay)(e,e=>{e.byAssessmentId[i]=s,L(e,s.courseId)})},[(0,o.fJ)(y.g.ASSESSMENT_PERSIST)]:(e,t)=>(0,r.Ay)(e,e=>{var n;let r=null!==(n=e.byAssessmentId[t.assessment.id].api)&&void 0!==n?n:{};e.byAssessmentId[t.assessment.id].api=r,r.isUpdating=!1}),[y.g.ASSESSMENT_DELETE]:(e,t)=>(0,r.Ay)(e,e=>{var n;let r=null!==(n=e.byAssessmentId[t.assessmentId].api)&&void 0!==n?n:{};e.byAssessmentId[t.assessmentId].api=r,r.isDeleting=!0}),[(0,o.ok)(y.g.ASSESSMENT_DELETE)]:(e,t)=>(0,r.Ay)(e,e=>{delete e.byAssessmentId[t.assessmentId],L(e,t.courseId)}),[(0,o.fJ)(y.g.ASSESSMENT_DELETE)]:(e,t)=>{let n=(0,r.Ay)(e,e=>{var n;let r=null!==(n=e.byAssessmentId[t.assessmentId].api)&&void 0!==n?n:{};e.byAssessmentId[t.assessmentId].api=r,r.isDeleting=!1});return(0,o.Nh)(n,t)},[(0,o.ok)(y.g.ASSESSMENT_CREATE)]:(e,t)=>(0,r.Ay)(e,n=>{let r={...e.byAssessmentId},i={...t.assessment,api:{isDeleting:!1,isUpdating:!0}};r[i.id]=i,n.byAssessmentId=r,L(n,i.courseId)}),[(0,o.ok)(l.g.QUESTION_PERSIST)]:(e,t)=>(0,r.Ay)(e,e=>{let{prevQuestion:n,question:r}=t;(null==n?void 0:n.id)&&0===n.id.indexOf(s.Gw)&&L(e,r.courseId)}),[(0,o.ok)(l.g.QUESTIONS_COPY)]:(e,t)=>(0,r.Ay)(e,e=>{L(e,t.courseId)}),[l.g.QUESTIONS_COPY_TASK_UPDATE]:(e,t)=>(0,r.Ay)(e,e=>{L(e,t.courseId)}),[(0,o.ok)(l.g.QUESTION_DELETE)]:(e,t)=>(0,r.Ay)(e,e=>{L(e,t.prevQuestion.courseId)}),[(0,o.ok)(l.g.QUESTIONS_CREATE)]:(e,t)=>(0,r.Ay)(e,e=>{L(e,t.courseId)}),[(0,o.ok)(a.g.CONTENT_DELETE)]:(e,t)=>(0,r.Ay)(e,n=>{let{results:r}=t;r.forEach(t=>{let r=i.findKey(e.byAssessmentId,{contentId:t});if(r){let t=e.byAssessmentId[r];delete n.byAssessmentId[r],L(n,t.courseId)}})}),[(0,o.ok)(a.g.CONTENT_DELETE_IN_STORE)]:(e,t)=>{let{contentId:n}=t,o=i.findKey(e.byAssessmentId,{contentId:n});return o?(0,r.Ay)(e,t=>{let n=e.byAssessmentId[o];delete t.byAssessmentId[o],L(t,n.courseId)}):e},[(0,o.ok)(a.g.CONTENT_IMPORT_COMPLETE)]:(e,t)=>{let{courseId:n}=t;return(0,r.Ay)(e,e=>{L(e,n)})},[y.g.ASSESSMENT_FILE_UPLOAD_TASK_ADD]:(e,t)=>(0,r.Ay)(e,e=>{let{courseId:n,taskId:r,fileName:i}=t;_(e.fileUploadTasksByCourseId,n,r,{taskId:r,fileName:i,progress:0})}),[y.g.ASSESSMENT_FILE_UPLOAD_TASK_UPDATE]:(e,t)=>(0,r.Ay)(e,e=>{let{courseId:n,taskId:r,progress:i,fileLocation:o}=t,s=e.fileUploadTasksByCourseId[n][r];e.fileUploadTasksByCourseId[n][r]={...s,progress:i,fileLocation:o}}),[y.g.ASSESSMENT_FILE_UPLOAD_TASK_REMOVE]:(e,t)=>(0,r.Ay)(e,e=>{let{courseId:n,taskId:r}=t;T(e.fileUploadTasksByCourseId,n,r)}),[y.g.ASSESSMENT_IMPORT_TASKS_LOAD]:(e,t)=>(0,r.Ay)(e,e=>{let{courseId:n,queueTasks:r}=t,o=e.importTasksByCourseId[n];o?r.forEach(e=>{o[e.taskId]=e}):e.importTasksByCourseId[n]=i.keyBy(r,"taskId")}),[y.g.ASSESSMENT_IMPORT_TASK_ADD]:(e,t)=>(0,r.Ay)(e,e=>{let{courseId:n,queueTask:r}=t;_(e.importTasksByCourseId,n,r.taskId,r)}),[y.g.ASSESSMENT_IMPORT_TASK_UPDATE]:(e,t)=>(0,r.Ay)(e,n=>{let{courseId:r,queueTasks:i}=t;i.forEach(i=>{var o;n.importTasksByCourseId[r][i.taskId]=i;let s=null===(o=e.importTasksByCourseId[r])||void 0===o?void 0:o[i.taskId];i.taskStatus!==(null==s?void 0:s.taskStatus)&&k.has(i.taskStatus)&&L(n,t.courseId)})}),[(0,o.ok)(y.g.ASSESSMENT_IMPORT_TASK_REMOVE)]:(e,t)=>(0,r.Ay)(e,e=>{let{courseId:n,taskId:r}=t;T(e.importTasksByCourseId,n,r)}),[(0,o.fJ)(y.g.ASSESSMENT_IMPORT_TASK_REMOVE)]:(e,t)=>(0,o.Nh)(e,t),[f.g.GRANULAR_CONTENT_COPY_COMPLETE]:(e,t)=>{let{courseId:n}=t;return(0,r.Ay)(e,e=>{L(e,n)})},[(0,o.ok)(b.g.GRADEBOOK_ATTEMPT_LOAD)]:(e,t)=>(0,r.Ay)(e,e=>{R(e,t.attempt)}),[(0,o.ok)(I.g.GRADEBOOK_GROUP_ATTEMPT_LOAD)]:(e,t)=>(0,r.Ay)(e,e=>{R(e,t.groupAttempt)}),[(0,o.ok)(b.g.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>(0,r.Ay)(e,e=>{R(e,t.attempt)}),[(0,o.ok)(I.g.GRADEBOOK_GROUP_ATTEMPT_UPDATE)]:(e,t)=>(0,r.Ay)(e,e=>{R(e,t.groupAttempt)})}),U={loadAssessments:e=>{let{courseId:t,types:n,offset:r,limit:i}=e;return U.loadAssessmentsByQuery({courseId:t,...n?{filter:{types:n}}:null,paging:{offset:null!=r?r:0,limit:null!=i?i:20}})},loadAssessmentsByQuery:e=>(0,o.RA)(t=>(t((0,o.rc)(y.g.ASSESSMENT_LOAD,{query:e})),(0,u.jP)(e).then(n=>(t((0,o.rc)((0,o.ok)(y.g.ASSESSMENT_LOAD),{data:n,query:e})),{...n})).catch(n=>{throw t((0,o.rc)((0,o.ok)(c.A.APP_ERROR),{error:n})),t((0,o.rc)((0,o.fJ)(y.g.ASSESSMENT_LOAD),{query:e})),n}))),loadAssessmentById:({courseId:e,assessmentId:t})=>(0,o.RA)(n=>{let r={assessmentId:t,courseId:e};return n((0,o.rc)(y.g.ASSESSMENT_LOAD,{query:r})),(0,u.Rc)({courseId:e,assessmentId:t}).then(e=>(n((0,o.rc)((0,o.ok)(y.g.ASSESSMENT_LOAD),{data:{assessmentIds:[e.id],byAssessmentId:{[e.id]:e}},query:r})),e)).catch(e=>{throw n((0,o.rc)((0,o.ok)(c.A.APP_ERROR),{error:e})),n((0,o.rc)((0,o.fJ)(y.g.ASSESSMENT_LOAD),{query:r})),e})}),deleteAssessment:({courseId:e,assessmentId:t})=>(0,o.RA)(n=>(n((0,o.rc)(y.g.ASSESSMENT_DELETE,{assessmentId:t,courseId:e})),(0,d.pGV)(E.dZ,e,t).then(()=>(n((0,o.rc)((0,o.ok)(y.g.ASSESSMENT_DELETE),{assessmentId:t,courseId:e})),{assessmentId:t})).catch(r=>{throw n((0,o.rc)((0,o.fJ)(y.g.ASSESSMENT_DELETE),{assessmentId:t,courseId:e})),r instanceof d.aS0||n((0,o.rc)((0,o.ok)(c.A.APP_ERROR),{error:r})),r}))),createAssessment:e=>(0,o.RA)(t=>(t((0,o.rc)(y.g.ASSESSMENT_CREATE,e)),(0,u.bU)(e).then(e=>(t((0,o.rc)((0,o.ok)(y.g.ASSESSMENT_CREATE),{assessment:e})),{assessment:e})).catch(e=>{throw t((0,o.rc)((0,o.ok)(c.A.APP_ERROR),{error:e})),e}))),uploadAssessmentFile:e=>(0,o.RA)((t,n)=>{let{courseId:r,file:i,fileName:s,fileType:a}=e;t((0,o.rc)(y.g.ASSESSMENT_FILE_UPLOAD,e));let l=S(t,r,s);(0,p.Y)({fileType:a,fileName:s,file:i}).then(e=>{let i=n().assessment.fileUploadTasksByCourseId[r];if(!(null==i?void 0:i[l]))return;let{fileLocation:s}=e;t((0,o.rc)(y.g.ASSESSMENT_FILE_UPLOAD_TASK_UPDATE,{courseId:r,taskId:l,progress:100,fileLocation:s}))}).catch(e=>{t((0,o.rc)((0,o.ok)(c.A.APP_ERROR),{error:e}))})}),removeAssessmentFileUploadTask:(e,t)=>(0,o.RA)(async n=>{n((0,o.rc)(y.g.ASSESSMENT_FILE_UPLOAD_TASK_REMOVE,{courseId:e,taskId:t}))}),importAssessment:e=>(0,o.RA)((t,n)=>{let{courseId:r,fileName:i,fileLocation:s}=e;return t((0,o.rc)(y.g.ASSESSMENT_IMPORT,e)),(0,m.U)({courseId:r,fileName:i,fileLocation:s},{cxAction:"CX_ACTION_IMPORT",includeItems:["cxConfigArea_POOL"]}).then(e=>{t((0,o.rc)(y.g.ASSESSMENT_IMPORT_TASK_ADD,{courseId:r,queueTask:e}));let i=P(r,D(n(),r));return(0,h.xy)(i)}).catch(e=>{throw t((0,o.rc)((0,o.ok)(c.A.APP_ERROR),{error:e})),e})}),updateImportTaskStatus:(e,t)=>(0,o.RA)(async n=>{let r=await Promise.all(t.map(e=>(0,g.D)(e)));return n((0,o.rc)(y.g.ASSESSMENT_IMPORT_TASK_UPDATE,{courseId:e,queueTasks:r})),r}),loadAssessmentImportTasks:e=>(0,o.RA)(async t=>{let n=await (0,h.xO)({key:N(e)});if(!n)return;let r={};try{r=JSON.parse(n.value)}catch(e){console.error(Error(`Parsing of preference value failed: ${n.value}`).message),console.error(e);return}let i=Object.entries(r).filter(([e,t])=>!0===t&&"string"==typeof e).map(([e])=>e);if(!i.length)return;let s=i.map(e=>(0,g.D)(e)),a=await Promise.all(s);t((0,o.rc)(y.g.ASSESSMENT_IMPORT_TASKS_LOAD,{courseId:e,queueTasks:a}))}),removeAssessmentImportTask:(e,t)=>(0,o.RA)((n,r)=>{let s=i.omit(D(r(),e),t),a=P(e,s);return(0,h.xy)(a).then(()=>{n((0,o.rc)((0,o.ok)(y.g.ASSESSMENT_IMPORT_TASK_REMOVE),{courseId:e,taskId:t}))}).catch(r=>{n((0,o.rc)((0,o.fJ)(y.g.ASSESSMENT_IMPORT_TASK_REMOVE),{courseId:e,taskId:t})),n((0,o.rc)((0,o.ok)(c.A.APP_ERROR),{error:r}))})}),persistAssessment:(e,t)=>(0,o.RA)(n=>(n((0,o.rc)(y.g.ASSESSMENT_PERSIST,{assessment:e})),(0,u.lu)(e,{...t,assessmentId:e.id}).then(t=>(n((0,o.rc)((0,o.ok)(y.g.ASSESSMENT_PERSIST),{assessment:e,updatedAssessment:t})),{assessment:e})).catch(t=>{throw n((0,o.rc)((0,o.fJ)(y.g.ASSESSMENT_PERSIST),{assessment:e})),n((0,o.rc)((0,o.ok)(c.A.APP_ERROR),{error:t})),t})))},M={getAssessmentById:(e,t)=>i.find(e.assessment.byAssessmentId,{id:t}),getAssessmentByContentId:(e,t)=>i.find(e.assessment.byAssessmentId,{contentId:t}),getAssessmentsByCourseId:(e,t,n,r)=>{let o=i.filter(e.assessment.byAssessmentId,{courseId:t});return n&&(o=o.filter(e=>n.includes(e.type))),r&&(o=o.filter(e=>!(e.type===d.PAn.Test&&void 0!==e.subtype&&r.includes(e.subtype)))),o},getAssessmentByCourseAndGradableItemId:(e,t,n)=>i.find(e.assessment.byAssessmentId,{courseId:t,gradableItemId:n}),getAssessmentsByQuery:(e,t)=>{let{view:n}=C(e.assessment,t);return n?(n.values||[]).map(t=>M.getAssessmentById(e,t)).filter(e=>!!e):[]},getAssessmentsByQueries:(e,t)=>{let n=new Set([]);return t.reduce((t,r)=>{let{view:i}=C(e.assessment,r);return[...t,...((null==i?void 0:i.values)||[]).map(t=>M.getAssessmentById(e,t)).filter(e=>!(!(null==e?void 0:e.id)||n.has(e.id))&&(n.add(e.id),!0))]},[])},getAssessmentViewStateByQuery:(e,t)=>{var n;let{view:r}=C(e.assessment,t);return r?{isLoading:r.isLoading,isValid:r.isValid,paging:null!==(n=r.paging)&&void 0!==n?n:null,permissions:r.permissions}:null},getAssessmentViewStatusByQueries:(e,t)=>t.reduce((t,n)=>{var r;let{view:i}=C(e.assessment,n),o=null;return i&&(o={isLoading:i.isLoading,isValid:i.isValid,paging:null!==(r=i.paging)&&void 0!==r?r:null,permissions:i.permissions}),[...t,{query:n,view:o}]},[]),getAssessmentFileUploadTasks:e=>t=>t.assessment.fileUploadTasksByCourseId[e]||{},getAssessmentImportTasks:e=>t=>t.assessment.importTasksByCourseId[e]||{}}},897582:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={ASSESSMENT_LOAD:"assessment.load",ASSESSMENT_PERSIST:"assessment.persist",ASSESSMENT_DELETE:"assessment.delete",ASSESSMENT_CREATE:"assessment.create",ASSESSMENT_FILE_UPLOAD:"assessment.file.upload",ASSESSMENT_FILE_UPLOAD_TASK_ADD:"assessment.fileUploadTask.add",ASSESSMENT_FILE_UPLOAD_TASK_UPDATE:"assessment.fileUploadTask.update",ASSESSMENT_FILE_UPLOAD_TASK_REMOVE:"assessment.fileUploadTask.remove",ASSESSMENT_IMPORT:"assessment.import",ASSESSMENT_IMPORT_TASKS_LOAD:"assessment.importTasks.load",ASSESSMENT_IMPORT_TASK_ADD:"assessment.importTask.add",ASSESSMENT_IMPORT_TASK_UPDATE:"assessment.importTask.update",ASSESSMENT_IMPORT_TASK_REMOVE:"assessment.importTask.remove"}},761872:function(e,t,n){"use strict";n.d(t,{o1:function(){return p},Ff:function(){return c},Lt:function(){return m}});var r=n(318728),i=n(825271);async function o(e){let{courseId:t,attemptId:n}=e;return await (0,r.mk1)(i.dZ,t,n)}let s={ATTEMPT_LOG_LOAD:"attempt-log.load"};var a=n(968554),l=n(905898),u=n(300474),d=n(758247);let c=(0,a.vy)({byAttemptId:{}},{[s.ATTEMPT_LOG_LOAD]:(e,t)=>(0,l.jM)(e,e=>{let n=e.byAttemptId[t.attemptId];n||(n={attemptLog:void 0,isLoaded:!1},e.byAttemptId[t.attemptId]=n)}),[(0,a.ok)(s.ATTEMPT_LOG_LOAD)]:(e,t)=>(0,l.jM)(e,e=>{e.byAttemptId[t.attemptId]={attemptLog:t.data,isLoaded:!0}}),[(0,a.fJ)(s.ATTEMPT_LOG_LOAD)]:(e,t)=>(0,l.jM)(e,e=>{e.byAttemptId[t.attemptId]||(e.byAttemptId[t.attemptId]={attemptLog:void 0,isLoaded:!1})})}),p={loadAttemptLog:e=>(0,a.RA)(async(t,n)=>{let i=n().attemptLog.byAttemptId[e.attemptId];if(null==i?void 0:i.isLoaded)return m.getAttemptLog(n(),e.attemptId);t((0,a.rc)(s.ATTEMPT_LOG_LOAD,{attemptId:e.attemptId}));try{let n=await o(e);return t((0,a.rc)((0,a.ok)(s.ATTEMPT_LOG_LOAD),{attemptId:e.attemptId,data:n})),n}catch(n){if((0,u.rh)((0,u.xt)(n),[r.t3V.NotFound])){t((0,a.rc)((0,a.ok)(s.ATTEMPT_LOG_LOAD),{attemptId:e.attemptId,data:void 0}));return}throw t((0,a.rc)((0,a.fJ)(s.ATTEMPT_LOG_LOAD),{attemptId:e.attemptId})),t((0,a.rc)((0,a.ok)(d.A.APP_ERROR),{error:n})),{err:n}}})},m={getAttemptLog:(e,t)=>{let n=e.attemptLog.byAttemptId[t];if(n)return n.attemptLog}}},175805:function(e,t,n){"use strict";n.d(t,{o1:function(){return u},Ff:function(){return l},Lt:function(){return d}});var r=n(905898),i=n(179181),o=n(968554),s=n(318728);let a="attempt-receipt.load",l=(0,o.vy)({byAttemptReceiptId:{},isLoading:!1},{[a]:o.r1,[(0,o.ok)(a)]:(e,t)=>{let{receiptId:n}=t,i=(0,r.Ay)(e,e=>{e.byAttemptReceiptId[n]=t});return(0,o.Zg)(i,t)},[(0,o.cw)(a)]:o.Zg,[(0,o.fJ)(a)]:o.Nh}),u={loadAttemptReceipt:e=>(0,o.VP)(a,async()=>{try{return await (0,i.K)(e)}catch(e){throw{err:e}}},null,[s.t3V.NotFound])},d={getAttemptReceipt:(e,t)=>e.attemptReceipt.byAttemptReceiptId[t],isLoading:e=>e.attemptReceipt.isLoading}},972971:function(e,t,n){"use strict";n.d(t,{Ff:function(){return l},Lt:function(){return d},o1:function(){return u}});var r=n(645250),i=n(905898),o=n(968554),s=n(487967),a=n(736812);let l=(0,o.vy)({byId:{},paging:null,permissions:{canDeleteAnyComment:!1},isLoading:!1},{[a.g.BLOG_ENTRY_COMMENTS_LOAD]:o.r1,[(0,o.ok)(a.g.BLOG_ENTRY_COMMENTS_LOAD)]:(e,t)=>{let{byId:n,paging:r,permissions:s}=t,a=(0,i.jM)(e,e=>{r&&(e.paging=r),s&&(e.permissions=s),n&&(e.byId={...e.byId,...n},Object.keys(n).forEach(t=>{e.byId[t].api={isUpdating:!1,isDeleting:!1}}))});return(0,o.Zg)(a,t)},[(0,o.fJ)(a.g.BLOG_ENTRY_COMMENTS_LOAD)]:o.Nh,[a.g.BLOG_COMMENT_ADD]:(e,t)=>(0,i.jM)(e,e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api={isUpdating:!0,isDeleting:!0}}),[(0,o.ok)(a.g.BLOG_COMMENT_ADD)]:(e,t)=>{let{comment:n}=t,r=e;return n&&(r=(0,i.jM)(e,e=>{e.byId[n.id]={...n,api:{isUpdating:!1,isDeleting:!1}}})),(0,o.Zg)(r,t)},[(0,o.fJ)(a.g.BLOG_COMMENT_ADD)]:o.Nh,[a.g.BLOG_COMMENT_MODIFY]:(e,t)=>(0,i.jM)(e,e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api||(e.byId[t.commentId].api={}),e.byId[t.commentId].api.isUpdating=!0}),[(0,o.ok)(a.g.BLOG_COMMENT_MODIFY)]:(e,t)=>{let{comment:n}=t,r=e;return n&&(r=(0,i.jM)(e,e=>{e.byId[n.id]={...n,api:{isUpdating:!1}}})),(0,o.Zg)(r,t)},[(0,o.fJ)(a.g.BLOG_COMMENT_MODIFY)]:(e,t)=>(0,i.jM)(e,e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api||(e.byId[t.commentId].api={}),e.byId[t.commentId].api.isUpdating=!1}),[a.g.BLOG_COMMENT_REMOVE]:(e,t)=>(0,i.jM)(e,e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api||(e.byId[t.commentId].api={}),e.byId[t.commentId].api.isDeleting=!0}),[(0,o.fJ)(a.g.BLOG_COMMENT_REMOVE)]:(e,t)=>(0,i.jM)(e,e=>{e.byId[t.commentId]||(e.byId[t.commentId]={}),e.byId[t.commentId].api||(e.byId[t.commentId].api={}),e.byId[t.commentId].api.isDeleting=!1}),[(0,o.ok)(a.g.BLOG_COMMENT_REMOVE)]:(e,t)=>(0,i.jM)(e,e=>{delete e.byId[t.commentId]})}),u={loadEntryComments:(e,t,n,r={})=>(0,o.VP)(a.g.BLOG_ENTRY_COMMENTS_LOAD,async()=>{try{return await s.V9(e,t,n,r)}catch(e){throw{err:e}}}),addComment:e=>(0,o.VP)(a.g.BLOG_COMMENT_ADD,async()=>{let t;try{t=await s.BC(e)}catch(e){throw{err:e}}return{comment:t}}),modifyComment:e=>(0,o.VP)(a.g.BLOG_COMMENT_MODIFY,async()=>{let t;try{t=await s.C(e)}catch(e){throw{err:e}}return{comment:t}}),deleteComment:e=>(0,o.VP)(a.g.BLOG_COMMENT_REMOVE,async t=>{let{commentId:n}=e;try{let r=d.getCommentById(t(),n);return await s.Tu(e),{commentId:n,comment:r}}catch(e){throw{err:e}}},{commentId:e.commentId})},d={getCommentsByEntryId:(e,t)=>(0,r.filter)(e.blog.comments.byId,{entryId:t}),getCommentById:(e,t)=>e.blog.comments.byId[t]}},736812:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={BLOG_COMMENT_ADD:"blog.comment.add",BLOG_ENTRY_COMMENTS_LOAD:"blog.entry.comments.load",BLOG_COMMENT_REMOVE:"blog.comment.remove",BLOG_COMMENT_MODIFY:"blog.comment.modify"}},273475:function(e,t,n){"use strict";n.d(t,{Ff:function(){return u},Lt:function(){return c},o1:function(){return d}});var r=n(645250),i=n(968554),o=n(905898),s=n(764209),a=n(487967),l=n(11396);let u=(0,i.vy)({byId:{},isLoading:!1},{[(0,i.ok)(s.g.CONTENT_LOAD)]:(e,t)=>{let n=(0,o.Ay)(e,e=>{let{blogs:n}=t;Object.keys(n||{}).forEach(t=>{e.byId[t]={...n[t],api:{isUpdating:!1,isDeleting:!1}}})});return(0,i.Zg)(n,t)},[l.g.BLOG_LOAD]:i.r1,[(0,i.ok)(l.g.BLOG_LOAD)]:(e,t)=>{let n=(0,o.Ay)(e,e=>{let{blog:n}=t;n&&(e.byId[n.id]=n)});return(0,i.Zg)(n,t)},[(0,i.fJ)(l.g.BLOG_LOAD)]:i.Nh,[(0,i.ok)(s.g.CONTENT_PERSIST)]:(e,t)=>{let n=(0,o.Ay)(e,n=>{let{blogs:r}=t;Object.values(r||{}).forEach(t=>{let r=e.byId[t.id];n.byId[t.id]={...(0,i.rL)(r,t),api:{isUpdating:!1,isDeleting:!1}}})});return(0,i.Zg)(n,t)}}),d={loadBlog:e=>(0,i.VP)(l.g.BLOG_LOAD,async()=>{try{return{blog:await a.zW(e)}}catch(e){throw{err:e}}})},c={getBlogById:(e,t)=>(0,r.find)(e.blog.blogs.byId,{id:t}),canCreateEntry:(e,t)=>{let n=e.blog.blogs.byId[t];return n&&n.permissions.createEntry},canDeleteBlog:(e,t)=>{let n=e.blog.blogs.byId[t];return n&&n.permissions.delete},canModifyBlog:(e,t)=>{let n=e.blog.blogs.byId[t];return n&&n.permissions.modify}}},11396:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={BLOG_LOAD:"blog.load"}},427998:function(e,t,n){"use strict";n.d(t,{Ff:function(){return _},Lt:function(){return C},o1:function(){return T}});var r=n(905898),i=n(968554),o=n(736812),s=n(487967),a=n(645250),l=n(758247),u=n(139552),d=n(443873),c=n(732583),p=n(865337),m=n(839781);let g={byId:{},views:{byBlogId:{}}},E=(e,t)=>t&&t.byId?(0,r.Ay)(e,e=>{Object.keys(t.byId||{}).forEach(n=>{e[n]={...e[n],...t.byId[n]}})}):e,h=(e,t)=>t&&t.data.byId?(0,r.Ay)(e,e=>{Object.keys(t.data.byId||{}).forEach(n=>{e.byId[n]={...e.byId[n],...t.data.byId[n]}})}):e,y=(e,t)=>{let{blogId:n}=t,r=e.views.byBlogId[n];r&&Object.values(r).forEach(e=>{e.isValid=!1})},f=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=(null===(n=e.views)||void 0===n?void 0:n.byBlogId[t.blogId])||{},i=Object.keys(r).find(e=>{let n=r[e],i=(0,a.isEqual)(n.query.assignedUserId,t.assignedUserId),o=(0,a.isEqual)(n.query.expand,t.expand),s=(0,a.isEqual)(n.query.paging,t.paging);return i&&o&&s});return{id:i,view:i?r[i]:null}},b=e=>["views","byBlogId",e.blogId],I=(e,t)=>{let{view:n}=f(e.blog.entries,t);return!n||!n.isLoading&&!n.isValid},A=(0,i.vy)(g.byId,{[(0,i.ok)(p.g.BLOG_ENTRY_ADD)]:(e,t)=>(0,r.Ay)(e,e=>{Object.keys(t.byId||{}).forEach(n=>{e[n]=t.byId[n],e[n].api||(e[n].api={}),e[n].userStatus||(e[n].userStatus={commentCount:0}),e[n].api.isUpdating=!1,e[n].api.isDeleting=!1})}),[p.g.BLOG_ENTRY_MODIFY]:(e,t)=>(0,r.Ay)(e,e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isUpdating=!0}),[(0,i.fJ)(p.g.BLOG_ENTRY_MODIFY)]:(e,t)=>(0,r.Ay)(e,e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isUpdating=!1}),[(0,i.ok)(p.g.BLOG_ENTRY_MODIFY)]:(e,t)=>{let n=E(e,t);return(0,r.Ay)(n,e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isUpdating=!1})},[p.g.BLOG_ENTRY_REMOVE]:(e,t)=>(0,r.Ay)(e,e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isDeleting=!0}),[(0,i.fJ)(p.g.BLOG_ENTRY_REMOVE)]:(e,t)=>(0,r.Ay)(e,e=>{e[t.entryId]||(e[t.entryId]={}),e[t.entryId].api||(e[t.entryId].api={}),e[t.entryId].api.isDeleting=!1}),[(0,i.ok)(p.g.BLOG_ENTRY_REMOVE)]:(e,t)=>(0,r.Ay)(e,e=>{delete e[t.entryId]}),[(0,i.ok)(o.g.BLOG_COMMENT_ADD)]:(e,t)=>{let n=t.comment.entryId,i=e[n];return i&&i.userStatus?(0,r.Ay)(e,e=>{e[n]||(e[n]={}),e[n].userStatus||(e[n].userStatus={}),e[n].userStatus.commentCount=i.userStatus.commentCount+1}):e},[(0,i.ok)(o.g.BLOG_COMMENT_REMOVE)]:(e,t)=>{let n=t.comment,i=e[n.entryId];return i&&i.userStatus?(0,r.Ay)(e,e=>{e[n.entryId]||(e[n.entryId]={}),e[n.entryId].userStatus||(e[n.entryId].userStatus={}),e[n.entryId].userStatus.commentCount=i.userStatus.commentCount-1,new Date(n.createdDate)>new Date(i.userStatus.commentLastSeenDate)&&(e[n.entryId].userStatus.unreadCommentCount=i.userStatus.unreadCommentCount-1)}):e}}),v=(0,i.vy)(g,{[p.g.BLOG_ENTRIES_LOAD]:(0,i.Dh)(f,b),[(0,i.ok)(p.g.BLOG_ENTRIES_LOAD)]:(e,t)=>{let{data:n}=t;if(!n)return(0,i.Zg)(e,t);let{paging:r,entriesId:o}=n;return e=h(e,t),(0,i.lY)(e,t,{viewResolver:f,viewsPathResolver:b,paging:r,values:o})},[(0,i.fJ)(p.g.BLOG_ENTRIES_LOAD)]:(0,i.To)(f,b),[(0,i.ok)(p.g.BLOG_ENTRY_REMOVE)]:(e,t)=>(0,r.Ay)(e,e=>{let{entry:n}=t;y(e,n)}),[(0,i.ok)(p.g.BLOG_ENTRY_ADD)]:(e,t)=>(0,r.Ay)(e,e=>{y(e,Object.keys(t.byId||{}).map(e=>t.byId[e])[0])})}),S=(0,i.HY)({byId:A}),_=(0,i._1)(v,S,g),T={loadBlogEntriesByQuery:e=>async(t,n)=>{if(I(n(),e)){t((0,i.rc)(p.g.BLOG_ENTRIES_LOAD,{query:e}));try{let n=await s.aQ(e);t((0,i.rc)((0,i.ok)(p.g.BLOG_ENTRIES_LOAD),{query:e,data:n}))}catch(n){t((0,i.rc)((0,i.fJ)(p.g.BLOG_ENTRIES_LOAD),{query:e})),t((0,i.rc)((0,i.ok)(l.A.APP_ERROR),{error:n}))}}},addBlogEntry:e=>(0,i.VP)(p.g.BLOG_ENTRY_ADD,async()=>{let{nextEntry:t}=e;try{let n=await s.A3(e),r=t.assignedUserId;return{...n,entryId:t.id,assignedUserId:r}}catch(e){throw{entryId:t.id,err:e}}},{entryId:e.nextEntry.id}),modifyBlogEntry:e=>(0,i.VP)(p.g.BLOG_ENTRY_MODIFY,async()=>{let{nextEntry:t}=e;try{let n=await s.F8(e),r=t.assignedUserId;return{...n,entryId:t.id,assignedUserId:r}}catch(e){throw{entryId:t.id,err:e}}},{entryId:e.nextEntry.id}),removeBlogEntry:e=>(0,i.VP)(p.g.BLOG_ENTRY_REMOVE,async t=>{let{entryId:n}=e;try{let r=C.getBlogEntryById(t(),n);return{...await s.Yg(e),entryId:n,entry:r}}catch(e){throw{entryId:n,err:e}}})},O=(0,u.Ad)(d.UI,c.Y_)((e,t)=>{let{view:n}=f(e.blog.entries,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},e=>e),C={getBlogEntriesByQuery:(0,m.n)((e,t)=>{let{view:n}=f(e.blog.entries,t);return n?(n.values||[]).map(t=>e.blog.entries.byId[t]):[]},e=>e),getBlogEntriesViewStatusByQuery:O,getBlogEntryById:(e,t)=>e.blog.entries.byId[t]}},865337:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={BLOG_ENTRIES_LOAD:"blog.entries.load",BLOG_ENTRY_ADD:"blog.entry.add",BLOG_ENTRY_MODIFY:"blog.entry.modify",BLOG_ENTRY_REMOVE:"blog.entry.remove"}},620614:function(e,t,n){"use strict";n.d(t,{Ff:function(){return I},Lt:function(){return v},o1:function(){return A}});var r=n(968554),i=n(318728),o=n(905898),s=n(487967),a=n(11396),l=n(865337),u=n(808954),d=n(170228),c=n(95418),p=n(437272),m=n(758247),g=n(645250),E=n(368737);let h=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byBlogId[t.blogId]||{},r=Object.keys(n).find(e=>{let r=n[e],i=(0,g.isEqual)(r.query.paging,t.paging),o=(0,g.isEqual)(r.query.searchText,t.searchText)||!r.query.searchText&&!t.searchText,s=(0,g.isEqual)(r.query.submissionStatus,t.submissionStatus)||!r.query.submissionStatus&&!t.submissionStatus,a=(0,g.isEqual)(r.query.gradingStatus,t.gradingStatus)||!r.query.gradingStatus&&!t.gradingStatus,l=(0,g.isEqual)(r.query.sortColumn,t.sortColumn)||!r.query.sortColumn&&!t.sortColumn,u=(0,g.isEqual)(r.query.sortDirection,t.sortDirection)||!r.query.sortDirection&&!t.sortDirection;return i&&o&&s&&a&&l&&u});return{id:r,view:r?n[r]:null}},y=e=>["views","byBlogId",e.blogId],f=(e,t)=>{let{view:n}=h(e.blog.participants,t);return!n||!n.isLoading&&!n.isValid},b=(e,t,n)=>{Object.keys(e.views.byBlogId[n]).forEach(e=>{t.views.byBlogId[n][e].isValid=!1})},I=(0,r.vy)({byBlogId:{},gradeColumnToBlog:{},views:{byBlogId:{}},isLoading:!1},{[E.g.BLOG_PARTICIPANTS_LOAD]:(0,r.Dh)(h,y),[(0,r.ok)(E.g.BLOG_PARTICIPANTS_LOAD)]:(e,t)=>{let{data:n,query:i}=t,{byCourseMembershipId:s,paging:a}=n,l=(0,o.Ay)(e,e=>{let t=i.blogId;e.byBlogId[t]||(e.byBlogId[t]={}),Object.keys(s).forEach(t=>{let n=s[t];e.byBlogId[i.blogId][t]={courseMembershipId:t,userId:n.user.id,attemptStatus:n.attemptStatus,entriesCount:n.entriesCount,lastAttemptDate:n.lastAttemptDate,hasNewActivity:n.hasNewActivity}})});return(0,r.lY)(l,t,{viewResolver:h,viewsPathResolver:y,paging:a,values:Object.keys(s)})},[(0,r.fJ)(E.g.BLOG_PARTICIPANTS_LOAD)]:(0,r.To)(h,y),[E.g.BLOG_PARTICIPANT_CLEAR_ACTIVITY_FLAG]:(e,t)=>{let{participantId:n,blogId:r}=t;return n&&r?(0,o.Ay)(e,e=>{var t;let i=null===(t=e.byBlogId[r])||void 0===t?void 0:t[n];i&&(i.hasNewActivity=!1)}):e},[(0,r.ok)(a.g.BLOG_LOAD)]:(e,t)=>(0,o.Ay)(e,e=>{let{blog:n}=t;n&&(e.gradeColumnToBlog[n.gradeColumnId]=n.id)}),[(0,r.ok)(l.g.BLOG_ENTRY_REMOVE)]:(e,t)=>{let{entry:n}=t;if(n.assignedUserId!==n.creatorId)return e;let r=e.byBlogId[n.blogId];return r&&r[n.assignedUserId]?(0,o.Ay)(e,e=>{let t=e.byBlogId[n.blogId][n.assignedUserId];t.entriesCount-=1,0===t.entriesCount&&t.attemptStatus===i.ID3.NeedsGrading&&(t.attemptStatus=null)}):e},[(0,r.ok)(d.g.GRADEBOOK_GRADE_PERSIST_BY_USER_ID)]:(e,t)=>{let{grade:n}=t,r=e.gradeColumnToBlog[n.columnId];return e.byBlogId[r]&&e.byBlogId[r][n.memberId]?(0,o.Ay)(e,t=>{t.byBlogId[r][n.memberId].attemptStatus=i.ID3.Completed,b(e,t,r)}):e},[(0,r.ok)(d.g.GRADEBOOK_GRADE_DIRECT_GRADE_ENTRY_MAPPING)]:(e,t)=>{let{grade:n}=t,r=e.gradeColumnToBlog[n.columnId];return e.byBlogId[r]&&e.byBlogId[r][n.memberId]?(0,o.Ay)(e,t=>{if(n.lastAttemptId){let e=n.displayGrade.score?i.ID3.Completed:i.ID3.NeedsGrading;t.byBlogId[r][n.memberId].attemptStatus=e}else{let e=n.manualScore?i.ID3.Completed:void 0;t.byBlogId[r][n.memberId].attemptStatus=e}b(e,t,r)}):e},[(0,r.ok)(d.g.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID)]:(e,t)=>{let{grade:n}=t,r=e.gradeColumnToBlog[n.columnId];return e.byBlogId[r]&&e.byBlogId[r][n.memberId]?(0,o.Ay)(e,t=>{if(n.lastAttemptId){let e=n.displayGrade.score?i.ID3.Completed:i.ID3.NeedsGrading;t.byBlogId[r][n.memberId].attemptStatus=e}else{let e=n.manualScore?i.ID3.Completed:null;t.byBlogId[r][n.memberId].attemptStatus=e}b(e,t,r)}):e},[(0,r.ok)(u.g.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>(0,o.Ay)(e,n=>{for(let[r,i]of Object.entries(e.views.byBlogId))Object.keys(i).forEach(e=>{n.views.byBlogId[r][e].query.courseId===t.attempt.courseId&&(n.views.byBlogId[r][e].isValid=!1),t.attempt.courseId||(n.views.byBlogId[r][e].isValid=!1)})}),[(0,r.ok)(p.g.GRADEBOOK_GROUP_ATTEMPT_UPDATE)]:(e,t)=>{let n,r;let{groupAttempt:i}=t;if(i.columnId&&(n=e.gradeColumnToBlog[i.columnId],r=e.byBlogId[n]),!r)return e;let s=[];return(i.attempts&&i.attempts.length>0&&i.attempts.forEach(t=>{Object.keys(e.byBlogId[n]).forEach(r=>{e.byBlogId[n][r].userId===t.userId&&s.push(e.byBlogId[n][r])})}),0===s.length)?e:(0,o.Ay)(e,t=>{var r;for(let i of s)for(let o of Object.keys(e.views.byBlogId[n]))(null===(r=t.views.byBlogId[n][o].values)||void 0===r?void 0:r.includes(i.courseMembershipId))&&(t.views.byBlogId[n][o].isValid=!1)})},[(0,r.ok)(c.g.STUDENT_PREVIEW_EXIT)]:(e,t)=>(0,o.Ay)(e,t=>{for(let[n,r]of Object.entries(e.views.byBlogId))Object.keys(r).forEach(e=>{t.views.byBlogId[n][e].isValid=!1})})}),A={loadParticipantList:e=>(0,r.RA)(async(t,n)=>{if(f(n(),e)){t((0,r.rc)(E.g.BLOG_PARTICIPANTS_LOAD,{query:e}));try{let n=await s.EP(e);t((0,r.rc)((0,r.ok)(E.g.BLOG_PARTICIPANTS_LOAD),{query:e,data:n}))}catch(n){t((0,r.rc)((0,r.fJ)(E.g.BLOG_PARTICIPANTS_LOAD),{query:e})),t((0,r.rc)((0,r.ok)(m.A.APP_ERROR),{error:n}))}}}),updateParticipantActivity:(e,t)=>(0,r.rc)(E.g.BLOG_PARTICIPANT_CLEAR_ACTIVITY_FLAG,{participantId:e,blogId:t})},v={getBlogParticipantByMembershipId:(e,t,n)=>{let r=e.blog.participants.byBlogId[t];return r?r[n]:null},getBlogParticipantsByQuery:(e,t)=>{let{view:n}=h(e.blog.participants,t);return n&&n.values?n.values.map(n=>e.blog.participants.byBlogId[t.blogId][n]):null},getPagingByQuery:(e,t)=>{let{view:n}=h(e.blog.participants,t);return n?n.paging:null},isLoading:(e,t)=>{let{view:n}=h(e.blog.participants,t);return n?n.isLoading:null}}},368737:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={BLOG_PARTICIPANTS_LOAD:"blog.participants.load",BLOG_PARTICIPANT_CLEAR_ACTIVITY_FLAG:"blog.participants.clear.ActivityFlag"}},968062:function(e,t,n){"use strict";n.d(t,{o1:function(){return d},Ff:function(){return u},Lt:function(){return c}});var r=n(968554),i=n(487967),o=n(905898),s=n(645250);let a="blog.participation.summary.load",l={[a]:r.r1,[(0,r.ok)(a)]:(e,t)=>{let n=(0,o.Ay)(e,e=>{let{byBlogId:n}=t;Object.keys(n).forEach(t=>{e.byBlogId[t]=n[t]})});return(0,r.Zg)(n,t)},[(0,r.fJ)(a)]:r.Nh},u=(0,r.vy)({byBlogId:{},isLoading:!1},l),d={loadParticipationSummary:(e,t)=>(0,r.VP)(a,()=>(0,i.qW)(e,t).then(e=>e).catch(e=>{throw{err:e}}))},c={getSummaryByBlogId:(e,t)=>(0,s.find)(e.blog.summary.byBlogId,{id:t}),isLoading:e=>e.blog.summary.isLoading}},535324:function(e,t,n){"use strict";n.d(t,{o1:function(){return f},Ff:function(){return y},Lt:function(){return b}});var r=n(905898),i=n(968554),o=n(973589),s=n(318728),a=n(477305);let l="calendars.load",u="calendar.update",d="calendars.batch.update",c="calendar.clear.in.store",p="calendar.event.available.load";var m=n(612918);let g=()=>["eventsAvailable"],E=(e,t)=>{let n=t.getState().calendar.eventsAvailable;return(0,m.qO)(null==n?void 0:n.status)},h=e=>{e.sort((e,t)=>e.labelLocalizable.languageKey&&t.labelLocalizable.languageKey||e.labelLocalizable.languageKey&&!t.labelLocalizable.languageKey?e.id===s.pUi.Institution?1:-1:t.labelLocalizable.languageKey&&!e.labelLocalizable.languageKey?t.id===s.pUi.Institution?-1:1:e.labelLocalizable.rawValue<t.labelLocalizable.rawValue?-1:1)},y=(0,i.vy)({byId:{},isLoading:!1,eventsAvailable:void 0},{[l]:i.r1,[(0,i.ok)(l)]:(e,t)=>{let{byId:n}=t,o=(0,r.jM)(e,t=>{Object.keys(n).forEach(r=>{let i={...n[r],api:{isUpdating:!1,isDeleting:!1},ui:e.byId[r]&&e.byId[r].ui};t.byId[i.id]=i})});return(0,i.Zg)(o,t)},[(0,i.fJ)(l)]:i.Nh,[u]:(e,t)=>{let{id:n}=t;return(0,r.jM)(e,e=>{e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!0})},[(0,i.ok)(u)]:(e,t)=>{let{calendar:n}=t;return(0,r.jM)((0,i.Zg)(e,t),t=>{t.byId[n.id]={...e.byId[n.id],...n,api:{...e.byId[n.id].api,isUpdating:!1},ui:e.byId[n.id]&&e.byId[n.id].ui}})},[(0,i.fJ)(u)]:(e,t)=>{let{id:n}=t;return(0,r.jM)(e,e=>{e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!1})},[d]:(e,t)=>{let{byId:n}=t;return(0,r.jM)(e,e=>{Object.keys(n).forEach(t=>{e.byId[t]||(e.byId[t]={}),e.byId[t].api||(e.byId[t].api={}),e.byId[t].api.isUpdating=!0})})},[(0,i.ok)(d)]:(e,t)=>{let{byId:n}=t,o=e;return Object.keys(n).forEach(t=>{o=(0,r.jM)(o,r=>{r.byId[t]={...o.byId[t],...n[t],api:{...e.byId[t].api,isUpdating:!1},ui:o.byId[t]&&o.byId[t].ui}})}),(0,i.Zg)(o,t)},[(0,i.fJ)(d)]:(e,t)=>{let{byId:n}=t,i=e;return Object.keys(n).forEach(e=>{i=(0,r.jM)(i,t=>{t.byId[e]||(t.byId[e]={}),t.byId[e].api||(t.byId[e].api={}),t.byId[e].api.isUpdating=!1})}),i},[p]:(0,m.vR)(g,m.vq),[(0,i.ok)(p)]:(e,t)=>{let{eventsAvailable:n}=t;return(0,r.jM)(e,e=>{e.eventsAvailable={value:n,status:m.y_}})},[(0,i.fJ)(p)]:(0,m.vR)(g,m.JL),[c]:e=>(0,r.jM)(e,e=>{e.byId={}})}),f={fetchCalendars:()=>(0,i.VP)(l,()=>(0,o.Xt)().then(e=>e).catch(e=>{throw{err:e}})),updateCalendar:(e,t)=>(0,i.VP)(u,()=>(0,o.md)(e,t).then(e=>({calendar:e})).catch(t=>{throw{id:e,err:t}}),{id:e}),batchUpdateCalendar:e=>(0,i.VP)(d,()=>(0,o.G2)(e).then(e=>e).catch(t=>{throw{byId:(0,a.jD)(e),err:t}}),{byId:(0,a.jD)(e)}),fetchCalendarEventsAvailable:()=>(0,i.Vy)(p,async()=>({eventsAvailable:await (0,o.tH)()}),{condition:E}),clearCalendarsInStore:()=>(0,i.rc)(c)},b={getCalendarsSortedByType:e=>{let t=Object.values(e.calendar.byId);return h(t),t},getCalendarEventsAvailable:e=>{var t,n,r;return null!==(r=null===(n=null===(t=e.calendar.eventsAvailable)||void 0===t?void 0:t.value)||void 0===n?void 0:n.isCalendarEventsAvailable)&&void 0!==r&&r}}},264106:function(e,t,n){"use strict";n.d(t,{o1:function(){return l},Ff:function(){return a},Lt:function(){return u}});var r=n(905898),i=n(968554);let o="column-statistics.load";var s=n(559667);let a=(0,i.vy)({byColumnId:{}},{[o]:(e,t)=>{let n=(0,r.jM)(e,e=>{let{columnId:n}=t;e.byColumnId[n]?e.byColumnId[n].isLoading=!0:e.byColumnId[n]={isLoading:!0}});return(0,i.r1)(n,t)},[(0,i.ok)(o)]:(e,t)=>{let n=(0,r.jM)(e,e=>{let{columnId:n,columnStatistics:r}=t;e.byColumnId[n]={columnStatistics:r,isLoading:!1}});return(0,i.Zg)(n,t)},[(0,i.fJ)(o)]:(e,t)=>{let n=(0,r.jM)(e,e=>{let{columnId:n}=t;e.byColumnId[n]={isLoading:!1}});return(0,i.Nh)(n,t)}}),l={loadColumnStatistics:e=>(0,i.VP)(o,()=>(0,s.m)(e).then(t=>({columnId:e.columnId,columnStatistics:t})).catch(t=>{throw{columnId:e.columnId,err:t}}),{columnId:e.columnId})},u={getColumnStatisticsByColumnId:(e,t)=>{var n;return null===(n=e.columnStatistics.byColumnId[t])||void 0===n?void 0:n.columnStatistics},isColumnStatisticsLoading:(e,t)=>{var n,r;return null!==(r=null===(n=e.columnStatistics.byColumnId[t])||void 0===n?void 0:n.isLoading)&&void 0!==r&&r}}},968460:function(e,t,n){"use strict";n.d(t,{o1:function(){return U},Ff:function(){return w},Lt:function(){return M}});var r=n(905898),i=n(477305),o=n(968554),s=n(828736);let a="column-summary.load",l="column-summary.set.loading",u="column-summary.multiple.load",d="column-summary-invalidate",c="column-summaries-overview.load.by.query",p="column-summaries-overview.load.counts",m="column-summary-invalidate.by.course.id";var g=n(170228),E=n(97082),h=n(895703),y=n(808954),f=n(437272),b=n(246206);let I=(0,n(139552).Mz)((e,t)=>{var n;return null===(n=e.columnSummary.byCourseId[t])||void 0===n?void 0:n.columns},(e,t)=>t,(e,t,n)=>null!=n?n:i.Lr.MyStudents,(e,t,n)=>{if(!e)return[];let r=null!=n?n:i.Lr.MyStudents;return Object.values(e).filter(e=>void 0!==e[r]).map(e=>e[r])});var A=n(645250),v=/*#__PURE__*/n.n(A),S=n(764209),_=n(612918);let T=(e,t)=>(0,r.Ay)(e,e=>{var n;for(let r of Object.values(i.Lr))(null===(n=e.byColumnId[t])||void 0===n?void 0:n[r])&&(e.byColumnId[t]={...e.byColumnId[t],[r]:{...e.byColumnId[t][r],status:_.E1}})}),O=(e,t)=>(0,r.Ay)(e,e=>{var n;if(t){let r=e.views.byCourseId[t];r&&Object.keys(r).forEach(e=>r[e].isValid=!1);let i=null===(n=e.byCourseId[t])||void 0===n?void 0:n.columnSummariesCounts;i&&(void 0!==i.needsGrading&&(i.needsGrading.status=_.E1),void 0!==i.needsPosting&&(i.needsPosting.status=_.E1),void 0!==i.needsReconciling&&(i.needsReconciling.status=_.E1))}}),C=(e,t)=>{var n;for(let r of[i.Lr.Default,i.Lr.MyStudents,i.Lr.Overview]){let i=null===(n=e.byColumnId[t])||void 0===n?void 0:n[r];if(null==i?void 0:i.value)return i.value.courseId}},R=e=>["views","byCourseId",e.courseId],L=e=>["byColumnId",e.columnId,e.columnSummaryType],D=e=>["byCourseId",e.courseId,"columnSummariesCounts",e.filter],N=(e,t)=>{if(!t)return o.Vc;let n=e.views.byCourseId[t.courseId]||{},r=Object.keys(n).find(e=>{let r=n[e],i=v().isEqual(r.query.paging,t.paging),o=v().isEqual(r.query.filter,t.filter),s=v().isEqual(r.query.sort,t.sort);return i&&s&&o});return r?{id:r,view:n[r]}:o.Vc},P=(e,t)=>{var n;if(!(null===(n=e.query)||void 0===n?void 0:n.courseId))return!1;let{view:r}=N(t.getState().columnSummary,e.query);return!r||!r.isLoading&&!r.isValid};function k(e,t,n){var r,o,s,a,l;let u=null!=n?n:i.Lr.MyStudents,d=function(e,t,n){var r,o,s,a,l;let{columnId:u}=e,d=null===(o=null===(r=n.byColumnId[u])||void 0===r?void 0:r[t])||void 0===o?void 0:o.value,c=function(e,t,n){var r,o,s,a;if(n!==i.Lr.Overview)return;let{columnId:l}=e,u=null===(s=null===(o=null===(r=t.byColumnId)||void 0===r?void 0:r[l])||void 0===o?void 0:o[i.Lr.Overview])||void 0===s?void 0:s.value;return null!==(a=e.oldestUngradedAttempt)&&void 0!==a?a:null==u?void 0:u.oldestUngradedAttempt}(e,n,t);return t!==i.Lr.Overview?{...e,oldestUngradedAttempt:c}:{...e,oldestUngradedAttempt:c,numSubmissionsNeedsGrading:null!==(s=e.numSubmissionsNeedsGrading)&&void 0!==s?s:null==d?void 0:d.numSubmissionsNeedsGrading,numStudentsSubmissionGradedNeedsPosting:null!==(a=e.numStudentsSubmissionGradedNeedsPosting)&&void 0!==a?a:null==d?void 0:d.numStudentsSubmissionGradedNeedsPosting,numSubmissionsNeedsReconciling:null!==(l=e.numSubmissionsNeedsReconciling)&&void 0!==l?l:null==d?void 0:d.numSubmissionsNeedsReconciling}}(t,u,e);e.byColumnId[t.columnId]={...e.byColumnId[t.columnId],[u]:{value:d,status:_.y_}},e.byCourseId[t.courseId]={...e.byCourseId[t.courseId],columns:{...null===(r=e.byCourseId[t.courseId])||void 0===r?void 0:r.columns,[t.columnId]:{...null===(s=null===(o=e.byCourseId[t.courseId])||void 0===o?void 0:o.columns)||void 0===s?void 0:s[t.columnId],[u]:d}},columnSummariesCounts:null!==(l=null===(a=e.byCourseId[t.courseId])||void 0===a?void 0:a.columnSummariesCounts)&&void 0!==l?l:{}}}let w=(0,o.vy)({byColumnId:{},byCourseId:{},isLoading:!1,views:{byCourseId:{}}},{[a]:(0,_.vR)(L,_.vq),[l]:(0,_.vR)(L,_.vq),[d]:(e,t)=>{let n=t.columnId,r=C(e=T(e,n),n);return O(e,r)},[(0,o.ok)(g.g.GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID)]:(e,t)=>{let n=t.columnId,r=C(e=T(e,n),n);return O(e,r)},[(0,o.ok)(E.g.GRADEBOOK_GROUP_GRADE_POST_GRADE_BY_GROUP_ASSOCIATION_ID)]:(e,t)=>{let n=t.columnId,r=C(e=T(e,n),n);return O(e,r)},[(0,o.ok)(g.g.GRADEBOOK_GRADE_PERSIST_BY_USER_ID)]:(e,t)=>{let n=t.grade.columnId,r=C(e=T(e,n),n);return O(e,r)},[(0,o.ok)(h.g.GRADEBOOK_COLUMN_POST_READY_GRADES)]:(e,t)=>{let n=t.columnId,r=C(e=T(e,n),n);return O(e,r)},[(0,o.ok)(g.g.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID)]:(e,t)=>{let n=t.grade.columnId,r=C(e=T(e,n),n);return O(e,r)},[(0,o.ok)(a)]:(e,t)=>{let n=(0,r.Ay)(e,e=>{let{columnSummary:n,columnSummaryType:r}=t;n&&k(e,n,r)});return(0,o.Zg)(n,t)},[(0,o.fJ)(a)]:(0,_.vR)(L,_.JL),[u]:o.r1,[(0,o.ok)(u)]:(e,t)=>{let n=(0,r.Ay)(e,e=>{let{columnSummaries:n,columnSummaryType:r}=t;n&&Object.keys(n).forEach(t=>{k(e,n[t],r)})});return(0,o.Zg)(n,t)},[(0,o.fJ)(u)]:o.Nh,[(0,o.ok)(y.g.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>{let{attempt:n}=t,r=n.columnId;return r&&(e=T(e,r)),O(e,n.courseId)},[(0,o.ok)(f.g.GRADEBOOK_GROUP_ATTEMPT_UPDATE)]:(e,t)=>{let{groupAttempt:n}=t,r=n.columnId;return r&&(e=T(e,r)),O(e,n.courseId)},[(0,o.ok)(b.g.GRADED_QUESTION_ATTEMPT_PERSIST)]:(e,t)=>{let{columnId:n,courseId:r}=t.data.dependents;return n?O(e=T(e,n),r):e},[(0,o.ok)(b.g.GRADED_QUESTION_ATTEMPT_FOR_GROUP_PERSIST)]:(e,t)=>{let{columnId:n,courseId:r}=t.data.dependents;return n?O(e=T(e,n),r):e},[(0,o.ok)(h.g.GRADEBOOK_COLUMN_DELETE)]:(e,t)=>{let{gradebookColumn:n}=t;return(null==n?void 0:n.id)?e:O(e=T(e,null==n?void 0:n.id),null==n?void 0:n.courseId)},[c]:(0,o.Dh)(N,R),[(0,o.ok)(c)]:(e,t)=>{let{columnSummariesOverview:n,columnIds:s,paging:a}=t.data;return n?(e=(0,r.Ay)(e,e=>{Object.keys(n).forEach(t=>{k(e,n[t],i.Lr.Overview)})}),(0,o.lY)(e,t,{viewResolver:N,viewsPathResolver:R,paging:a,values:s})):(0,o.Zg)(e,t)},[(0,o.fJ)(c)]:o.Nh,[(0,o.ok)(S.g.CONTENT_DELETE_IN_STORE)]:(e,t)=>{let{courseId:n}=t;return O(e,n)},[(0,o.ok)(h.g.GRADEBOOK_COLUMN_PERSIST)]:(e,t)=>{let{gradebookColumn:n}=t;return O(e,null==n?void 0:n.courseId)},[(0,o.fJ)(p)]:(0,_.vR)(D,_.JL),[p]:(0,_.vR)(D,_.vq),[(0,o.ok)(p)]:(e,t)=>{let{courseId:n,needsGrading:i,needsPosting:s,needsReconciling:a}=t.data;if(n){let t=e=>void 0!==e?{value:e,status:_.y_}:void 0,o=t(i),l=t(s),u=t(a);e=(0,r.Ay)(e,e=>{let t=e.byCourseId[n],r=t.columnSummariesCounts;e.byCourseId[n]={...t,columnSummariesCounts:{needsGrading:null!=o?o:r.needsGrading,needsPosting:null!=l?l:r.needsPosting,needsReconciling:null!=u?u:r.needsReconciling}}})}return(0,o.Zg)(e,t)},[(0,o.ok)(m)]:(e,t)=>O(e,t.courseId),[(0,o.ok)(y.g.GRADEBOOK_ATTEMPT_DELETE)]:(e,t)=>{let{attempt:n}=t,r=n.columnId;return r&&(e=T(e,r)),O(e,n.courseId)}}),U={loadColumnSummary:({courseId:e,columnId:t,columnSummaryType:n=i.Lr.MyStudents})=>(0,o.Vy)(a,async()=>({columnSummary:await (0,s.l$3)(e,t,n===i.Lr.Default?{allStudents:!0}:void 0),columnSummaryType:n}),{data:{columnId:t,courseId:e,columnSummaryType:n},condition:(e,t)=>{var n;let r=null===(n=t.getState().columnSummary.byColumnId[e.columnId])||void 0===n?void 0:n[e.columnSummaryType];return(0,_.qO)(null==r?void 0:r.status)}}),loadColumnSummaries:({courseId:e,columnIds:t,columnSummaryType:n=i.Lr.MyStudents})=>(0,o.VP)(u,async r=>(0,s.xP2)(e,t,n===i.Lr.Default?{allStudents:!0}:void 0).then(e=>({columnSummaries:e.columnSummaries,columnSummaryType:n}))),loadColumnSummariesOverviewByQuery:e=>(0,o.Vy)(c,async()=>({data:await (0,s.F9B)(e),query:e}),{data:{query:e},condition:P}),loadColumnSummariesOverviewCount:e=>(0,o.Vy)(p,async()=>({data:await (0,s.uW3)(e),query:e}),{data:{...e},condition:(e,t)=>{var n;let r=null===(n=t.getState().columnSummary.byCourseId[e.courseId])||void 0===n?void 0:n.columnSummariesCounts[e.filter];return(0,_.qO)(null==r?void 0:r.status)}}),setColumnSummaryInStore:({columnSummary:e,columnSummaryType:t=i.Lr.MyStudents})=>(0,o.rc)((0,o.ok)(a),{columnSummary:e,columnSummaryType:t}),invalidateColumnSummary:e=>(0,o.rc)(d,{columnId:e}),invalidateColumnSummaryViewsByCourseId:e=>(0,o.RA)(async t=>{t((0,o.rc)((0,o.ok)(m),{courseId:e}))}),setLoading:({courseId:e,columnId:t,columnSummaryType:n=i.Lr.MyStudents})=>(0,o.rc)(l,{courseId:e,columnId:t,columnSummaryType:n})},M={getColumnSummaryByColumnId:(e,t,n=i.Lr.MyStudents)=>{var r,o;return null===(o=null===(r=e.columnSummary.byColumnId[t])||void 0===r?void 0:r[n])||void 0===o?void 0:o.value},getColumnSummariesByCourseId:I,isLoading:(e,t,n=i.Lr.MyStudents)=>{var r,o;return(null===(o=null===(r=e.columnSummary.byColumnId[t])||void 0===r?void 0:r[n])||void 0===o?void 0:o.status)===_.vq},isValid:(e,t,n=i.Lr.MyStudents)=>{var r,o;return(null===(o=null===(r=e.columnSummary.byColumnId[t])||void 0===r?void 0:r[n])||void 0===o?void 0:o.status)===_.y_},shouldFetchColumnSummary:(e,t,n=i.Lr.MyStudents)=>{var r,o;return(0,_.qO)(null===(o=null===(r=e.columnSummary.byColumnId[t])||void 0===r?void 0:r[n])||void 0===o?void 0:o.status)},getColumnSummariesOverviewByQuery:(e,t)=>{let{view:n}=N(e.columnSummary,t);return n?(n.values||[]).map(n=>{var r,o,s;return null===(s=null===(r=e.columnSummary.byColumnId[n])||void 0===r?void 0:r[null!==(o=t.columnSummaryType)&&void 0!==o?o:i.Lr.MyStudents])||void 0===s?void 0:s.value}):[]},getColumnSummariesOverviewViewStatusByQuery:(e,t)=>{let{view:n}=N(e.columnSummary,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getColumnSummariesCount:(e,t)=>{var n,r;return null===(r=null===(n=e.columnSummary.byCourseId[t.courseId])||void 0===n?void 0:n.columnSummariesCounts[t.filter])||void 0===r?void 0:r.value},shouldFetchColumnSummariesCountbyQuery:(e,t)=>{var n,r;return(0,_.qO)(null===(r=null===(n=e.columnSummary.byCourseId[t.courseId])||void 0===n?void 0:n.columnSummariesCounts[t.filter])||void 0===r?void 0:r.status)},isLoadingColumnSummariesCountByQuery:(e,t)=>{var n,r,i,o;if(null===(r=null===(n=e.columnSummary.byCourseId[t.courseId])||void 0===n?void 0:n.columnSummariesCounts[t.filter])||void 0===r?void 0:r.status)return(null===(o=null===(i=e.columnSummary.byCourseId[t.courseId])||void 0===i?void 0:i.columnSummariesCounts[t.filter])||void 0===o?void 0:o.status)===_.vq}}},26070:function(e,t,n){"use strict";n.d(t,{Ff:function(){return P},Lt:function(){return M},o1:function(){return U}});var r,i,o=n(905898),s=n(645250),a=n(968554),l=n(477305),u=n(758247),d=n(243502),c=n(895703),p=n(502059),m=n(764209),g=n(318728),E=n(881934),h=n(139552),y=n(300474),f=n(583596),b=n(542644),I=n(107870);function A(e,t){var n;e.contents[t]||(e.contents[t]={});let r=null!==(n=e.contents[t].api)&&void 0!==n?n:{};return e.contents[t].api=r,r}function v(e,t,n,r){var o;let s=r===i.Criteria?{criteria:{type:""},api:{isUpdating:n}}:{rule:{},api:{isUpdating:n}},a=null!==(o=e.adaptiveRelease[r][t])&&void 0!==o?o:s;a.api.isUpdating=n,e.adaptiveRelease[r][t]=a}function S(e,t){(0,s.forEach)(e.views.byCourseId,(n,r)=>{(0,s.forEach)(n,(n,i)=>{var o;(null===(o=n.values)||void 0===o?void 0:o.includes(t))&&delete e.views.byCourseId[r][i]})})}(r=i||(i={})).Criteria="byCriteriaId",r.Rule="byRuleId";let _=(e,t)=>(0,o.Ay)(e,n=>{var r;let{contentId:i}=t,o=e.contents[i],a=null!==(r=null==o?void 0:o.inSequence)&&void 0!==r&&r;(0,s.forEach)(e.adaptiveRelease.byCriteriaId,e=>{e.criteria.id&&e.criteria.contentId===i&&l.iF.shouldRemoveReleaseCriteria(a,e.criteria.type)&&delete n.adaptiveRelease.byCriteriaId[e.criteria.id]})}),T=(e,t)=>{let n=t.contents[e.id];return n?{...n,...e,permissions:{...n.permissions,...e.permissions},ui:null==n?void 0:n.ui}:e},O=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=(null===(n=e.views)||void 0===n?void 0:n.byCourseId[t.filter.courseId])||{},i=Object.keys(r).find(e=>{let n=r[e];return(0,s.isEqual)(n.query,t)});return i?{id:i,view:r[i]}:a.Vc},C=e=>["views","byCourseId",e.filter.courseId],R=(e,t,n)=>{if(!t)return;let r=e.views.byCourseId[t];r&&Object.keys(r).forEach(e=>{let t=r[e];t.query.filter.contentId!==n&&(t.isValid=!1)})};function L(e,t){let n={type:t.type};t.id&&(n=e.adaptiveRelease.byCriteriaId[t.id].criteria);let r={...n,...t};return n.type===g.Z_d.Date&&(r={...r,start:t.start,end:t.end}),{criteria:r,api:{isUpdating:!1}}}let D={[m.g.CONTENT_LOAD]:(e,t)=>{let n=(0,a.r1)(e,t),{query:r}=t;return r?(0,a.Dh)(O,C)(n,{query:r,...t}):n},[(0,a.ok)(m.g.CONTENT_LOAD)]:(e,t)=>{let{query:n}=t,r=(0,l.jD)(Object.values(t.contents||{}).map(t=>T({...t,api:{isUpdating:!1,isDeleting:!1}},e))),i=(0,a.Zg)(e,t,{contents:{...e.contents,...r}});if(!n)return i;let o=Object.values(r).map(e=>e.id).filter(e=>!!e);return(0,a.lY)(i,t,{viewResolver:O,viewsPathResolver:C,values:o})},[(0,a.fJ)(m.g.CONTENT_LOAD)]:(e,t)=>{let n=(0,a.Nh)(e,t),{query:r}=t;return r?(0,a.To)(O,C)(n,{query:r,...t}):n},[m.g.CONTENT_LOAD_BY_GROUP_ID]:(0,a.Dh)(O,C),[(0,a.ok)(m.g.CONTENT_LOAD_BY_GROUP_ID)]:(e,t)=>{let{data:n}=t;if(!n)return(0,a.Zg)(e,t);let{contents:r,paging:i}=n,s=Object.keys(r),u=(0,o.Ay)(e,t=>{let n=(0,l.jD)(Object.values(r).map(t=>T({...t,api:{isUpdating:!1,isDeleting:!1}},e)));t.contents={...e.contents,...n}});return(0,a.lY)(u,t,{viewResolver:O,viewsPathResolver:C,paging:i,values:s})},[(0,a.fJ)(m.g.CONTENT_LOAD_BY_GROUP_ID)]:(0,a.To)(O,C),[m.g.CONTENT_PERSIST]:(e,t)=>(0,o.Ay)(e,e=>{var n;A(e,t.prevContent.id).isUpdating=!0,I.mO.info("ContentPersist - persisting",`${null===(n=t.prevContent)||void 0===n?void 0:n.id}`)}),[(0,a.ok)(m.g.CONTENT_PERSIST)]:(e,t)=>(0,o.Ay)(e,n=>{let{contents:r}=t;Object.values(r||{}).forEach(t=>{let r=t.id,i=e.contents[r];n.contents[r]={...i,...t,api:{...null==i?void 0:i.api,isUpdating:!1}},t.thumbnailImage||(n.contents[r].thumbnailImage=""),R(n,t.courseId,r),I.mO.info("ContentPersist - ok",r)})}),[(0,a.fJ)(m.g.CONTENT_PERSIST)]:(e,t)=>(0,o.Ay)(e,e=>{var n;A(e,t.prevContent.id).isUpdating=!1,I.mO.info("ContentPersist - fail",`${null===(n=t.prevContent)||void 0===n?void 0:n.id}`)}),[m.g.CONTENT_PERSIST_MULTIPLE]:(e,t)=>(0,o.Ay)(e,e=>{let{prevContents:n}=t;(0,s.each)(n,t=>{A(e,t.content.id).isUpdating=!0})}),[(0,a.ok)(m.g.CONTENT_PERSIST_MULTIPLE)]:(e,t)=>(0,o.Ay)(e,n=>{let{contents:r}=t;Object.keys(r).forEach(t=>{let i=r[t];i.isOk?n.contents[t]={...i.result,api:{isUpdating:!1,isDeleting:!1},ui:e.contents[t]&&e.contents[t].ui}:A(n,t).isUpdating=!1})}),[(0,a.fJ)(m.g.CONTENT_PERSIST_MULTIPLE)]:(e,t)=>(0,o.Ay)(e,e=>{let{prevContents:n}=t;(0,s.each)(n,t=>{A(e,t.content.id).isUpdating=!1})}),[m.g.CONTENT_DELETE]:(e,t)=>(0,o.Ay)(e,e=>{let{contents:n}=t;n.forEach(t=>{A(e,t).isDeleting=!0})}),[(0,a.ok)(m.g.CONTENT_DELETE)]:(e,t)=>(0,o.Ay)(e,e=>{let{results:n}=t;n.forEach(t=>{delete e.contents[t],S(e,t)})}),[(0,a.fJ)(m.g.CONTENT_DELETE)]:(e,t)=>(0,o.Ay)(e,e=>{let{results:n}=t;n.forEach(t=>{A(e,t).isDeleting=!1})}),[(0,a.ok)(m.g.CONTENT_UPDATE_IN_STORE)]:(e,t)=>(0,o.Ay)(e,e=>{let{nextContent:n}=t;e.contents[n.id]=n}),[(0,a.ok)(m.g.CONTENT_DELETE_IN_STORE)]:(e,t)=>(0,o.Ay)(e,e=>{let{contentId:n}=t;delete e.contents[n],S(e,n)}),[(0,a.ok)(m.g.CONTENT_MOVE_IN_STORE)]:(e,t)=>{let{originalContent:n,movedContent:r,sortedTargetSiblings:i}=t;return n?(0,o.Ay)(e,t=>{let o=n.parentId===r.parentId,a=G(i,r.position);if(t.contents={...t.contents,...a.contents},t.contents[r.id]=r,!o){let r=G((0,s.filter)(e.contents,e=>e.parentId===n.parentId&&e.id!==n.id));t.contents={...t.contents,...r.contents}}}):e},[m.g.CONTENT_SEARCH_LOAD]:(0,a.Dh)(O,C),[(0,a.ok)(m.g.CONTENT_SEARCH_LOAD)]:(e,t)=>{let{data:n}=t;if(!n)return(0,a.Zg)(e,t);let{contents:r,paging:i}=n,s=Object.keys(r);return e=(0,o.Ay)(e,t=>{let n=(0,l.jD)(Object.values(r||{}).map(t=>T({...t,api:{isUpdating:!1,isDeleting:!1}},e)));t.contents={...e.contents,...n}}),(0,a.lY)(e,t,{viewResolver:O,viewsPathResolver:C,paging:i,values:s})},[(0,a.fJ)(m.g.CONTENT_SEARCH_LOAD)]:(0,a.To)(O,C),[(0,a.ok)(c.g.GRADEBOOK_COLUMN_PERSIST)]:(e,t)=>(0,o.Ay)(e,n=>{let{gradebookColumn:r}=t;if(r&&r.contentId){let t=(0,s.find)(e.contents,{id:r.contentId});t&&(n.contents[t.id].genericReadOnlyData={...e.contents[t.id].genericReadOnlyData,hasGradeColumn:!0,dueDate:r.dueDate})}}),[(0,a.ok)(p.gK.CONTENTS_REVIEW_STATES_GET)]:(e,t)=>{let{contentStates:n}=t;return(0,o.Ay)(e,t=>{if(n){let r=(0,l.jD)(Object.values(n).map(t=>T({id:t.contentId,state:t.state},e)));t.contents={...e.contents,...r}}})}},N={[(0,a.ok)(m.g.CONTENT_LOAD)]:(e,t)=>{let{adaptiveRelease:n}=t;return n?(0,o.Ay)(e,e=>{Object.keys(n).forEach(t=>{let r=n[t];e.adaptiveRelease.byCriteriaId[t]={api:{isUpdating:!1},criteria:{...r}}})}):e},[(0,a.ok)(m.g.CONTENT_LOAD_ADAPTIVE_RELEASE_RULE)]:(e,t)=>(0,o.Ay)(e,n=>{let{adaptiveReleaseRules:r,content:i}=t;Object.keys(r).forEach(t=>{var o;n.adaptiveRelease.byRuleId[t]={api:{isUpdating:!1},rule:{...r[t],contentId:i.id}};let s=null!==(o=e.contents[t])&&void 0!==o?o:{};s={...s,api:{...s.api,isUpdating:!1},id:r[t].id,courseId:r[t].courseId},n.contents[t]=s})}),[m.g.CONTENT_CREATE_ADAPTIVE_RELEASE_RULE]:(e,t)=>(0,o.Ay)(e,n=>{var r;let{adaptiveReleaseRule:i}=t,o=null!==(r=e.contents[i.contentId])&&void 0!==r?r:{};o={...o,api:{...o.api,isUpdating:!0}},n.contents[i.contentId]=o}),[(0,a.ok)(m.g.CONTENT_CREATE_ADAPTIVE_RELEASE_RULE)]:(e,t)=>(0,o.Ay)(e,n=>{var r;let{result:i,isOk:o,contentId:s}=t;if(o){let{criteria:t}=i;t.forEach(t=>{t.id&&(n.adaptiveRelease.byCriteriaId[t.id]={criteria:{...t,ruleId:i.id,contentId:s,courseId:e.contents[s].courseId},api:{isUpdating:!1}})}),n.adaptiveRelease.byRuleId[i.id]={rule:i,api:{isUpdating:!1}};let o=null!==(r=e.contents[s])&&void 0!==r?r:{};o={...o,api:{...o.api,isUpdating:!1}},n.contents[s]=o}}),[(0,a.fJ)(m.g.CONTENT_CREATE_ADAPTIVE_RELEASE_RULE)]:(e,t)=>(0,o.Ay)(e,n=>{var r;let{contentId:i}=t,o=null!==(r=e.contents[i])&&void 0!==r?r:{};o={...o,api:{...o.api,isUpdating:!1}},n.contents[i]=o}),[m.g.CONTENT_CREATE_ADAPTIVE_RELEASE_CRITERIA]:(e,t)=>(0,o.Ay)(e,n=>{let{adaptiveReleaseRuleId:r,content:o}=t;n.contents[o.id]={...e.contents[o.id],api:{isUpdating:!0}},v(n,r,!0,i.Rule),n.contents[r]={...e.contents[r],api:{isUpdating:!0}}}),[(0,a.ok)(m.g.CONTENT_CREATE_ADAPTIVE_RELEASE_CRITERIA)]:(e,t)=>(0,o.Ay)(e,n=>{var r;let{result:o,contentId:s,ruleId:a,id:l,isOk:u}=t;if(u){n.adaptiveRelease.byCriteriaId[l]={api:{isUpdating:!1},criteria:{...o,id:l,ruleId:a,contentId:s,courseId:e.contents[s].courseId}};let t=e.adaptiveRelease.byRuleId[a].rule,i={...t,criteria:[...null!==(r=t.criteria)&&void 0!==r?r:[],o]};n.adaptiveRelease.byRuleId[a]={rule:i,api:{isUpdating:!1}},n.contents[a]={...i,api:{isUpdating:!1}}}else v(n,a,!1,i.Rule),n.contents[a]={...e.contents[a],api:{isUpdating:!1}};n.contents[s]={...e.contents[s],api:{isUpdating:!1}}}),[(0,a.fJ)(m.g.CONTENT_CREATE_ADAPTIVE_RELEASE_CRITERIA)]:(e,t)=>(0,o.Ay)(e,e=>{let{ruleId:n}=t;v(e,n,!1,i.Rule)}),[m.g.CONTENT_PERSIST_ADAPTIVE_RELEASE]:(e,t)=>(0,o.Ay)(e,e=>{let{criteriaId:n}=t;v(e,n,!0,i.Criteria)}),[(0,a.ok)(m.g.CONTENT_PERSIST_ADAPTIVE_RELEASE)]:(e,t)=>(0,o.Ay)(e,n=>{let{isOk:r,id:o,result:s}=t;r&&s?n.adaptiveRelease.byCriteriaId[o]=L(e,s):v(n,o,!1,i.Criteria)}),[(0,a.fJ)(m.g.CONTENT_PERSIST_ADAPTIVE_RELEASE)]:(e,t)=>(0,o.Ay)(e,e=>{let{id:n}=t;v(e,n,!1,i.Criteria)}),[m.g.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE]:(e,t)=>(0,o.Ay)(e,e=>{let{criteriaList:n}=t;(0,s.each)(n,t=>{t.id&&v(e,t.id,!0,i.Criteria),t.ruleId&&v(e,t.ruleId,!0,i.Rule)})}),[(0,a.ok)(m.g.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE)]:(e,t)=>(0,o.Ay)(e,n=>{let{results:r}=t;Object.keys(r).forEach(t=>{let o=r[t];o.isOk&&o.result?n.adaptiveRelease.byCriteriaId[t]=L(e,o.result):v(n,t,!1,i.Criteria)})}),[(0,a.fJ)(m.g.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE)]:(e,t)=>(0,o.Ay)(e,e=>{let{prevContents:n}=t;(0,s.forEach)(n,t=>{t.id&&v(e,t.id,!1,i.Criteria)})}),[m.g.CONTENT_DELETE_ADAPTIVE_RELEASE]:(e,t)=>(0,o.Ay)(e,n=>{let{contents:r}=t;r.forEach(t=>{Object.values(e.adaptiveRelease.byCriteriaId).filter(({criteria:e})=>e.contentId===t.id).forEach(e=>{e.criteria.id&&v(n,e.criteria.id,!0,i.Criteria)})})}),[(0,a.ok)(m.g.CONTENT_DELETE_ADAPTIVE_RELEASE)]:(e,t)=>(0,o.Ay)(e,n=>{let{results:r}=t;Object.values(r).forEach(t=>{Object.values(e.adaptiveRelease.byCriteriaId).forEach(r=>{var o,s;if(r.criteria.contentId===t.id){if(t.isOk){let i=e.contents[t.id],s=null!==(o=null==i?void 0:i.inSequence)&&void 0!==o&&o;l.iF.shouldRemoveReleaseCriteria(s,r.criteria.type)&&delete n.adaptiveRelease.byCriteriaId[r.criteria.id]}else v(n,null!==(s=r.criteria.id)&&void 0!==s?s:"",!1,i.Criteria)}})})}),[(0,a.fJ)(m.g.CONTENT_DELETE_ADAPTIVE_RELEASE)]:(e,t)=>(0,o.Ay)(e,n=>{let{contents:r}=t;r.reduce((t,n)=>t.concat((0,s.filter)(e.adaptiveRelease.byCriteriaId,{criteria:{contentId:n.id}})),[]).forEach(e=>{e.criteria.id&&v(n,e.criteria.id,!1,i.Criteria)})}),[(0,a.ok)(m.g.CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE)]:(e,t)=>_(e,t),[(0,a.ok)(d.gK.ADAPTIVE_RELEASE_DELETE)]:(e,t)=>_(e,t),[(0,a.ok)(m.g.CONTENT_DELETE_ADAPTIVE_RELEASE_RULE_IN_STORE)]:(e,t)=>(0,o.Ay)(e,n=>{let{contentId:r,ruleType:i}=t;(0,s.forEach)(e.adaptiveRelease.byCriteriaId,e=>{e.criteria.contentId===r&&e.criteria.type===i&&delete n.adaptiveRelease.byCriteriaId[e.criteria.id]})}),[m.g.CONTENT_DELETE_ADAPTIVE_RELEASE_CRITERIA]:(e,t)=>(0,o.Ay)(e,e=>{let{criteriaId:n}=t;v(e,n,!0,i.Criteria)}),[(0,a.ok)(m.g.CONTENT_DELETE_ADAPTIVE_RELEASE_CRITERIA)]:(e,t)=>(0,o.Ay)(e,e=>{let{isOk:n,id:r,ruleId:o}=t;n?(delete e.adaptiveRelease.byCriteriaId[r],delete e.adaptiveRelease.byRuleId[o],delete e.contents[o]):v(e,r,!1,i.Criteria)}),[(0,a.fJ)(m.g.CONTENT_DELETE_ADAPTIVE_RELEASE_CRITERIA)]:(e,t)=>(0,o.Ay)(e,e=>{let{id:n}=t;v(e,n,!1,i.Criteria)}),[(0,a.ok)(p.gK.CONTENT_REVIEW_STATE_PERSIST)]:(e,t)=>{let{contentStates:n}=t;return(0,o.Ay)(e,e=>{n.forEach(t=>{let n=e.contents[t.contentId];n&&(n.state=t.state,t.completion&&(n.stateCompletion=t.completion))})})},[(0,a.ok)(p.gK.CONTENTS_REVIEW_STATES_GET)]:(e,t)=>{let{contentStates:n}=t;return(0,o.Ay)(e,e=>{n.forEach(t=>{let n=e.contents[t.contentId];n&&(n.state=t.state,t.completion&&(n.stateCompletion=t.completion))})})},[(0,a.ok)(d.gK.ADAPTIVE_RELEASE_RULES_CREATE)]:(e,t)=>(0,o.Ay)(e,e=>{t.rules.forEach(t=>{t.id&&(e.adaptiveRelease.byRuleId[t.id]={rule:t,api:{isUpdating:!1}})})}),[(0,a.ok)(d.gK.ADAPTIVE_RELEASE_RULE_DELETE)]:(e,t)=>(0,o.Ay)(e,e=>{delete e.adaptiveRelease.byRuleId[t.ruleId]})},P=(0,a.vy)({contents:{},adaptiveRelease:{byCriteriaId:{},byRuleId:{}},permissions:null,paging:void 0,isLoading:!1,views:{byCourseId:{}}},D,N);async function k(e){let{paging:t}=await E.wL({filter:{contentId:e.contentId,courseId:e.courseId},params:{paging:{limit:1}}});return t}async function w(e,t){let n=M.getContentsByParentContentId(e,t.contentId),r=M.getContentById(e,t.contentId),i=await k({contentId:t.contentId,courseId:t.courseId}),o={contents:{},assessments:{},groups:{},columns:{},adaptiveRelease:{},blogs:{}},s=!!r&&Array.isArray(n)&&n.length===i.count;s&&n.forEach(e=>{(null==e?void 0:e.id)&&(o.contents[e.id]=e)});let a=await (s?Promise.resolve(o):E.Ro(t)),{contents:u}=a,d=Object.values(u).filter(e=>e.id!==t.contentId&&l.eC.isFolderOrLearningModule(e)).map(n=>w(e,{...t,contentId:n.id}));return o=await Promise.all(d).then(e=>e.reduce((e,t)=>{let n={...e.contents,...t.contents},r={...e.assessments,...t.assessments},i={...e.groups,...t.groups};return{contents:n,assessments:r,groups:i,columns:{...e.columns,...t.columns},adaptiveRelease:{...e.adaptiveRelease,...t.adaptiveRelease},blogs:{...e.blogs,...t.blogs}}},a))}let U={getTotalChildren:e=>(0,a.VP)(m.g.CONTENT_LOAD,async t=>await k(e)),loadAllChildren:e=>(0,a.VP)(m.g.CONTENT_LOAD,async t=>{let n=await w(t(),e);return{query:{filter:e},...n}}),loadContents:(e,t={force:!0})=>(0,a.RA)(async(n,r)=>{if(!function(e,t,n){if(n.force)return!0;let{view:r}=O(e.content,{filter:t});return null==r||!r.isValid||2!==Object.keys(t).length||!t.courseId||!t.contentId}(r(),e,t))return null;let i={filter:e};n((0,a.rc)(m.g.CONTENT_LOAD,{query:i}));try{let t={...await E.Ro(e),query:i};return n((0,a.rc)((0,a.ok)(m.g.CONTENT_LOAD),t)),t}catch(t){n((0,a.rc)((0,a.fJ)(m.g.CONTENT_LOAD),{query:i,err:t}));let e=(0,y.xt)(t);throw n((0,a.rc)((0,a.ok)(u.A.APP_ERROR),{error:e})),{err:t}}}),loadContentNeighbor:(e,t,n,r)=>{let i={query:{filter:{courseId:e,contentId:t},neighborDirection:r,contentOwnerId:n}};return(0,a.RA)(async(o,s)=>{let l=M.getNeighborContentViewStatus(s(),r,e,t,n);return(null==l?void 0:l.isLoading)?null:(o((0,a.rc)(m.g.CONTENT_SEARCH_LOAD,i)),E.zI(e,t,n,r).then(e=>o((0,a.rc)((0,a.ok)(m.g.CONTENT_SEARCH_LOAD),{...i,data:e}))).catch(e=>{let t=(0,y.xt)(e);throw o((0,a.rc)((0,a.fJ)(m.g.CONTENT_SEARCH_LOAD),{...i,err:e})),o((0,a.rc)((0,a.ok)(u.A.APP_ERROR),{error:t})),{err:e}}))})},loadLinkedContent:(e,t)=>U.loadLinkedContentHelper(e,t,[]),loadLinkedContentHelper:(e,t,n)=>(0,a.RA)(async(r,i)=>{var o,s;let a=i(),u=M.getContentById(a,t);if(u||(u=null===(s=null===(o=await r(U.loadContents({courseId:e,contentId:t})))||void 0===o?void 0:o.contents)||void 0===s?void 0:s[t]),(null==u?void 0:u.id)&&l.iF.isNonDiscussionCourseLink(u)){let t=l.iF.getCourseLinkSourceId(u);if(t&&!n.find(e=>e===t))return await r(U.loadLinkedContentHelper(e,t,[...n,u.id]))}}),setContents:e=>(0,a.rc)((0,a.ok)(m.g.CONTENT_LOAD),E.uM(e)),createContent:e=>(0,a.VP)(m.g.CONTENT_PERSIST,async()=>{try{return await E.sY(e)}catch(t){throw new a.GS(t).setData({prevContent:e})}},{prevContent:{}}),persistContent:(e,t)=>(0,a.VP)(m.g.CONTENT_PERSIST,()=>E.OU(e,t).then(t=>({...t,prevContent:e})).catch(t=>{throw{prevContent:e,err:t}}),{prevContent:e,nextContent:t}),persistContentSync:e=>(0,a.RA)((t,n)=>{let r=n().content.contents[e.id];t((0,a.rc)((0,a.ok)(m.g.CONTENT_PERSIST),{prevContent:r,...E.uM([e])}))}),persistContents:e=>(0,a.VP)(m.g.CONTENT_PERSIST_MULTIPLE,()=>E.Ne(e).then(t=>({prevContents:e,...t})).catch(t=>{throw{prevContents:e,err:t}}),{contents:e}),deleteContents:(e,t)=>(0,a.RA)((n,r)=>{let i=r(),o={};return e.forEach(e=>{let t=B(e.id,i);o[e.id]=t,n((0,a.rc)(m.g.CONTENT_DELETE,{contents:t}))}),E.kb(e,t).then(e=>(Object.keys(e.results).forEach(r=>{let s=e.results[r],l=o[s.id];if(s.isOk){let e={};o[r].forEach(t=>{if(!i.content.contents[t])return;let{assessmentId:n,courseId:r}=i.content.contents[t];n&&r&&e[r]?e[r]=[...e[r],n]:r&&!e[r]&&(e[r]=n?[n]:[])}),n((0,a.rc)((0,a.ok)(m.g.CONTENT_DELETE),{courseAssessmentIds:Object.keys(e).length>0?e:void 0,results:o[r],deletedGrades:!t||!!(null==t?void 0:t.shouldDeleteGrades)}))}else n((0,a.rc)((0,a.fJ)(m.g.CONTENT_DELETE),{results:l}))}),e)).catch(t=>{throw e.forEach(e=>{let t=o[e.id];n((0,a.rc)((0,a.fJ)(m.g.CONTENT_DELETE),{results:t}))}),n((0,a.rc)((0,a.ok)(u.A.APP_ERROR),{error:t})),{contents:e,err:t}})}),updateContentInStore:e=>(0,a.VP)(m.g.CONTENT_UPDATE_IN_STORE,()=>Promise.resolve({nextContent:e}),{nextContent:e}),deleteContentInStore:e=>(0,a.RA)((t,n)=>{let r=n();B(e,r).forEach(e=>{var n,i,o,s;let l=r.content.contents[e],u={assessmentId:null===(n=r.content.contents[e])||void 0===n?void 0:n.assessmentId,courseId:null===(i=r.content.contents[e])||void 0===i?void 0:i.courseId,contentId:e,invalidateGradingSchemas:(0,f.iW)(l)||(0,E.fx)(l)?null!==(s=null===(o=null==l?void 0:l.genericReadOnlyData)||void 0===o?void 0:o.hasGradeColumn)&&void 0!==s&&s:!!b.Lt.getGradebookColumnByContentId(r,e)};t((0,a.rc)(m.g.CONTENT_DELETE_IN_STORE,{contentId:e})),t((0,a.rc)((0,a.ok)(m.g.CONTENT_DELETE_IN_STORE),u))})}),moveContentInStore:(e,t,n)=>(0,a.VP)(m.g.CONTENT_MOVE_IN_STORE,r=>{let i=r(),o=M.getContentById(i,e);if(!o)return Promise.resolve({});let a=M.getContentsByParentContentId(i,t),l=(0,s.sortBy)((0,s.filter)(a,t=>t.id!==e),["position"]),u={...o,parentId:t,position:n};return Promise.resolve({originalContent:o,movedContent:u,sortedTargetSiblings:l})},{contentId:e,targetFolderId:t,targetPosition:n}),loadAdaptiveReleaseRule:e=>(0,a.VP)(m.g.CONTENT_LOAD_ADAPTIVE_RELEASE_RULE,()=>E.sL(e).then(t=>({...t,content:e}))),createAdaptiveReleaseRule:(e,t)=>(0,a.VP)(m.g.CONTENT_CREATE_ADAPTIVE_RELEASE_RULE,()=>E.m1(e,t).then(e=>({...e,contentId:t.id})).catch(e=>{throw{err:e}}),{adaptiveReleaseRule:e}),createAdaptiveReleaseCriteria:(e,t,n)=>(0,a.VP)(m.g.CONTENT_CREATE_ADAPTIVE_RELEASE_CRITERIA,()=>E.rj(e,t,n).then(e=>{var r;return{...e,contentId:null!==(r=n.id)&&void 0!==r?r:"",ruleId:t}}),{adaptiveReleaseRuleId:t,content:n}),persistAdaptiveReleaseCriteria:e=>(0,a.VP)(m.g.CONTENT_PERSIST_ADAPTIVE_RELEASE,()=>E.vm(e),{criteriaId:e.id}),persistAdaptiveReleaseCriteriaMultiple:e=>(0,a.VP)(m.g.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE,()=>E.HG(e).then(t=>({prevContents:e,...t})).catch(t=>{throw{prevContents:e,err:t}}),{criteriaList:e}),deleteAdaptiveReleaseRules:e=>(0,a.Vy)(m.g.CONTENT_DELETE_ADAPTIVE_RELEASE,async()=>{try{let t={results:{}},n=await E.K0(e);return t.results=n.results,{results:t.results}}catch(t){throw new a.GS(t).setData({contents:e})}},{data:{contents:e}}),deleteAdaptiveReleaseRulesInStore:e=>(0,a.rc)((0,a.ok)(m.g.CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE),{contentId:e}),deleteAdaptiveReleaseRuleInStore:(e,t)=>(0,a.rc)((0,a.ok)(m.g.CONTENT_DELETE_ADAPTIVE_RELEASE_RULE_IN_STORE),{contentId:e,ruleType:t}),deleteAdaptiveReleaseCriteria:e=>(0,a.VP)(m.g.CONTENT_DELETE_ADAPTIVE_RELEASE_CRITERIA,()=>E.c8(e),{criteriaId:e.id}),notifyContentImportComplete:e=>(0,a.rc)((0,a.ok)(m.g.CONTENT_IMPORT_COMPLETE),{courseId:e}),loadContentsByQuery:e=>(0,a.RA)(async(t,n)=>{if(function(e,t){let{view:n}=O(e.content,t);return(null==n||!n.isValid)&&(null==n||!n.isLoading)}(n(),e)){t((0,a.rc)(m.g.CONTENT_SEARCH_LOAD,{query:e}));try{let n=await E.wL({filter:{contentId:g.Ox$.Root,contentSearchMode:g.dSI.courseContent,...e.filter},params:e.params});t((0,a.rc)((0,a.ok)(m.g.CONTENT_SEARCH_LOAD),{query:e,data:n}))}catch(r){t((0,a.rc)((0,a.fJ)(m.g.CONTENT_SEARCH_LOAD),{query:e,err:r}));let n=(0,y.xt)(r);throw t((0,a.rc)((0,a.ok)(u.A.APP_ERROR),{error:n})),r.error||r.type?r:new y.Dr(r.message)}}}),loadContentsByGroupIdAndQuery:e=>(0,a.VP)(m.g.CONTENT_LOAD_BY_GROUP_ID,async()=>({data:await E.tS(e),query:e}),{query:e})},M={getContentByAssessmentId:(e,t)=>(0,s.find)(e.content.contents,{assessmentId:t}),getContentById:(e,t)=>(0,s.find)(e.content.contents,{id:t}),getContentsByParentContentId:(e,t)=>(0,s.filter)(e.content.contents,{parentId:t}),getRootFolderByCourseId:(e,t,n)=>Object.values(e.content.contents).find(e=>e.courseId===t&&e.title===n&&!e.parentId),getContentLinksByLinkedContentId:(e,t)=>(0,s.filter)(e.content.contents,{contentDetail:{[l._h.CourseLink.toString()]:{linkSourceId:t}}}),getHasContentLinksByLinkedContentId:(e,t)=>Object.values(e.content.contents).some(e=>{var n,r,i;return(null===(n=e.contentDetail)||void 0===n?void 0:n[l._h.CourseLink.toString()])&&(null===(i=null===(r=e.contentDetail)||void 0===r?void 0:r[l._h.CourseLink.toString()])||void 0===i?void 0:i.linkSourceId)===t}),getAdaptiveReleaseCriteriaByContentId:(0,h.Mz)(e=>e.content.adaptiveRelease,(e,t)=>t,(e,t)=>(0,s.filter)(e.byCriteriaId,{criteria:{contentId:t}})),getContentsByQuery:(e,t)=>{var n,r;let{view:i}=O(e.content,t);return i&&null!==(r=null===(n=i.values)||void 0===n?void 0:n.map(t=>(0,s.find)(e.content.contents,{id:t})))&&void 0!==r?r:[]},getNeighborContent:(e,t,n,r,i)=>{var o,a;let{view:l}=O(e.content,{filter:{courseId:n,contentId:r},neighborDirection:t,contentOwnerId:i});return null===(a=null===(o=null==l?void 0:l.values)||void 0===o?void 0:o.map(t=>(0,s.find)(e.content.contents,{id:t})))||void 0===a?void 0:a[0]},getNeighborContentViewStatus:(e,t,n,r,i)=>{let{view:o}=O(e.content,{filter:{courseId:n,contentId:r},neighborDirection:t,contentOwnerId:i});return o?{isLoading:o.isLoading,isValid:o.isValid,paging:o.paging}:null},getLinkedContent:(e,t)=>{let n=M.getContentById(e,t);for(;n&&l.iF.isNonDiscussionCourseLink(n);){let t=l.iF.getCourseLinkSourceId(n);t&&(n=M.getContentById(e,t))}return n},getContentsViewStatusByQuery:(e,t)=>{let{view:n}=O(e.content,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getCountBySearchCriteria:(e,t)=>{var n,r;let{view:i}=O(e.content,t);return i&&null!==(r=null===(n=i.paging)||void 0===n?void 0:n.count)&&void 0!==r?r:0},isLoading:(e,t)=>{let{view:n}=O(e.content,t);return n?n.isLoading:e.content.isLoading},getUpdatingContentByCourseId:(e,t)=>{var n;return(0,s.filter)(null===(n=null==e?void 0:e.content)||void 0===n?void 0:n.contents,{courseId:t}).filter(e=>{var t,n;return null!==(n=null===(t=null==e?void 0:e.api)||void 0===t?void 0:t.isUpdating)&&void 0!==n&&n}).map(e=>e.id).filter(e=>void 0!==e)}};function B(e,t){let n=M.getContentsByParentContentId(t,e).map(e=>e.id),r=[e].concat(n).map(e=>M.getContentLinksByLinkedContentId(t,e).map(e=>e.id)).reduce((e,t)=>t.concat(e),[]);return[e].concat(n).concat(r)}function G(e,t){let n={contents:{}};return(0,s.forEach)(e,(e,r)=>{n.contents[e.id]={...e,position:void 0!==t&&t>=0&&r>=t?r+1:r}}),n}},764209:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={CONTENT_LOAD:"content.load",CONTENT_PERSIST:"content.persist",CONTENT_PERSIST_MULTIPLE:"content.persist.multiple",CONTENT_DELETE:"content.delete",CONTENT_LOAD_ADAPTIVE_RELEASE_RULE:"content.load.adaptive.release.rule",CONTENT_CREATE_ADAPTIVE_RELEASE_RULE:"content.create.adaptive.release.rule",CONTENT_CREATE_ADAPTIVE_RELEASE_CRITERIA:"content.create.adaptive.release.criteria",CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE:"content.persist.adaptive.release.multiple",CONTENT_PERSIST_ADAPTIVE_RELEASE:"content.persist.adaptive.release",CONTENT_DELETE_ADAPTIVE_RELEASE:"content.delete.adaptive.release",CONTENT_DELETE_ADAPTIVE_RELEASE_CRITERIA:"content.delete.adaptive.release.criteria",CONTENT_UPDATE_IN_STORE:"content.update.in.store",CONTENT_DELETE_IN_STORE:"content.delete.in.store",CONTENT_MOVE_IN_STORE:"content.move.in.store",CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE:"content.delete.adaptive.release.in.store",CONTENT_DELETE_ADAPTIVE_RELEASE_RULE_IN_STORE:"content.delete.adaptive.release.in.store.individual",CONTENT_IMPORT_COMPLETE:"content.import.complete",CONTENT_SEARCH_LOAD:"content.search.load",CONTENT_LOAD_BY_GROUP_ID:"content.load.by.group.id"}},846442:function(e,t,n){"use strict";n.d(t,{Ff:function(){return l},Lt:function(){return d},o1:function(){return c}});var r=n(968554),i=n(452657),o=n(905898),s=n(237165);let a={[s.g.CONTENT_INDICATORS_LOAD]:(e,t)=>(0,o.Ay)(e,e=>{let{courseId:n}=t.meta;e.dateLoadedByCourseId[n]||(e.dateLoadedByCourseId[n]={}),e.dateLoadedByCourseId[n].isLoading=!0}),[(0,r.ok)(s.g.CONTENT_INDICATORS_LOAD)]:(e,t)=>(0,o.Ay)(e,e=>{let n=t.meta.courseId,r=t.indicators;e.dateLoadedByCourseId[n]||(e.dateLoadedByCourseId[n]={}),r&&(r.forEach(t=>{e.byContentId[t.contentId]=t}),e.contentIdsByCourseId[n]=new Set(r.map(e=>e.contentId)),e.dateLoadedByCourseId[n].dateLoaded=new Date),e.dateLoadedByCourseId[n].isLoading=!1}),[(0,r.fJ)(s.g.CONTENT_INDICATORS_LOAD)]:(e,t)=>(0,o.Ay)(e,e=>{let n=t.meta.courseId;e.dateLoadedByCourseId[n]||(e.dateLoadedByCourseId[n]={}),e.dateLoadedByCourseId[n].isLoading=!1}),[s.g.DISABLE_CLASS_CONVERSATION_INDICATOR]:(e,t)=>(0,o.Ay)(e,e=>{let n=t.payload.contentId;e.byContentId[n]||(e.byContentId[n]={}),e.byContentId[n].classConversationHasIndicator=!1}),[s.g.REMOVE_GROUPID_FROM_INDICATORS]:(e,t)=>(0,o.Ay)(e,e=>{let{contentId:n,groupId:r}=t.payload;e.byContentId[n]||(e.byContentId[n]={});let i=e.byContentId[n].groupIds;i&&(e.byContentId[n].groupIds=i.filter(e=>e!==r))})},l=(0,r.vy)({byContentId:{},contentIdsByCourseId:{},dateLoadedByCourseId:{}},a),u=(e,t,n)=>{let r=e.contentIndicators.dateLoadedByCourseId[t];if(!r)return!0;let{isLoading:i,dateLoaded:o}=r;return!i&&(!!n||!o||Date.now()-o.getTime()>s.y)},d={getIndicatorByContentId:(e,t)=>e.contentIndicators.byContentId[t],isLoadingIndicators:(e,t)=>{var n,r;return null!==(r=null===(n=e.contentIndicators.dateLoadedByCourseId[t])||void 0===n?void 0:n.isLoading)&&void 0!==r&&r}},c={loadIndicators:(e,t)=>(0,r.RA)(async(n,o)=>{let a=d.isLoadingIndicators(o(),e),l=u(o(),e,t);if(!a&&l){n({type:s.g.CONTENT_INDICATORS_LOAD,meta:{courseId:e}});try{let{indicators:t}=await (0,i.j)(e);n({type:(0,r.ok)(s.g.CONTENT_INDICATORS_LOAD),meta:{courseId:e},indicators:t})}catch(t){throw n({type:(0,r.fJ)(s.g.CONTENT_INDICATORS_LOAD),meta:{courseId:e}}),{err:t}}}}),removeGroupIdFromIndicatorCache:(e,t)=>({type:s.g.REMOVE_GROUPID_FROM_INDICATORS,payload:{contentId:e,groupId:t}}),setClassConversationHasIndicatorToFalseInCache:e=>({type:s.g.DISABLE_CLASS_CONVERSATION_INDICATOR,payload:{contentId:e}})}},237165:function(e,t,n){"use strict";n.d(t,{g:function(){return i},y:function(){return o}});var r=n(968554);let i={CONTENT_INDICATORS_LOAD:"indicators.load",REMOVE_GROUPID_FROM_INDICATORS:"indicators.removeGroupId",DISABLE_CLASS_CONVERSATION_INDICATOR:"indicators.disableClassConversationIndicator"},o=9e5;(0,r.ok)(i.CONTENT_INDICATORS_LOAD)},502059:function(e,t,n){"use strict";n.d(t,{Ff:function(){return y},Lt:function(){return A},gK:function(){return d},o1:function(){return f}});var r=n(645250),i=n(477305),o=n(968554),s=n(905898),a=n(270194),l=n(764209),u=n(139552);let d={CONTENT_REVIEW_STATE_PERSIST:"content-review-state.persist",CONTENTS_REVIEW_STATES_GET:"contents-review-states-get",CONTENTS_REVIEW_STATES_USERS_GET:"contents-review-states-users-get",CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET:"contents-review-states-users-reports-states-get",CONTENTS_REVIEW_STATES_USER_CONTENT_GET:"contents-review-states-user-content-get"},c=(e,t)=>{var n;if(!t)return{id:null,view:null};let i=(null===(n=e.contentReviewState.byContentId[t.contentId])||void 0===n?void 0:n.byViewId)||{},o=Object.keys(i).find(e=>{let n=i[e];return r.isEqual(n.query,t)});return{id:null!=o?o:null,view:void 0!==o?i[o]:null}},p=(e,t)=>{var n;if(!t)return{id:null,view:null};let i=(null===(n=e.contentReviewState.byUserId[t.userId])||void 0===n?void 0:n.byViewId)||{},o=Object.keys(i).find(e=>{let n=i[e];return r.isEqual(n.query,t)});return{id:null!=o?o:null,view:void 0!==o?i[o]:null}},m=e=>["contentReviewState","byContentId",e.contentId,"byViewId"],g=e=>["contentReviewState","byUserId",e.userId,"byViewId"];function E(e,t){e.contentReviewState.byContentId[t]||(e.contentReviewState.byContentId[t]={byUserId:{},byViewId:{},reports:{states:{isLoading:!1,states:void 0}}})}function h(e){return(0,s.Ay)(e,e=>{e.contentReviewState.byUserId={}})}let y=(0,o.vy)({contentReviewState:{byContentId:{},byUserId:{}}},{[d.CONTENT_REVIEW_STATE_PERSIST]:(e,t)=>{let{contentId:n,userId:r}=t;return(0,s.Ay)(e,e=>{E(e,n),e.contentReviewState.byContentId[n].byUserId[r]||(e.contentReviewState.byContentId[n].byUserId[r]={status:null,isLoading:!0}),e.contentReviewState.byContentId[n].byUserId[r].isLoading=!0})},[(0,o.ok)(d.CONTENT_REVIEW_STATE_PERSIST)]:(e,t)=>{let{contentId:n,contentStates:r,userId:i}=t;return(0,s.Ay)(e,e=>{e.contentReviewState.byContentId[n].byUserId[i].isLoading=!1,r&&Object.values(r).forEach(t=>{let n=t.contentId;E(e,n),e.contentReviewState.byContentId[n].byUserId[i]={status:{state:t.state,startedDate:null,reviewedDate:null},isLoading:!1}})})},[(0,o.fJ)(d.CONTENT_REVIEW_STATE_PERSIST)]:(e,t)=>{let{contentId:n,userId:r}=t;return(0,s.Ay)(e,e=>{E(e,n),e.contentReviewState.byContentId[n].byUserId[r].isLoading=!1})},[d.CONTENTS_REVIEW_STATES_GET]:(e,t)=>{let{contentId:n,userId:r}=t;return(0,s.Ay)(e,e=>{E(e,n),e.contentReviewState.byContentId[n].byUserId[r]||(e.contentReviewState.byContentId[n].byUserId[r]={status:null,isLoading:!0}),e.contentReviewState.byContentId[n].byUserId[r].isLoading=!0})},[(0,o.ok)(d.CONTENTS_REVIEW_STATES_GET)]:(e,t)=>{let{contentStates:n,contentId:r,userId:i}=t;return(0,s.Ay)(e,e=>{n&&Object.values(n).forEach(t=>{let n=t.contentId;E(e,n),e.contentReviewState.byContentId[n].byUserId[i]={status:{state:t.state,startedDate:null,reviewedDate:null},isLoading:!1}}),e.contentReviewState.byContentId[r].byUserId[i].isLoading=!1})},[(0,o.fJ)(d.CONTENTS_REVIEW_STATES_GET)]:(e,t)=>{let{contentId:n,userId:r}=t;return(0,s.Ay)(e,e=>{E(e,n),e.contentReviewState.byContentId[n].byUserId[r].isLoading=!1})},[d.CONTENTS_REVIEW_STATES_USERS_GET]:(e,t)=>{let n=(0,s.Ay)(e,e=>{E(e,t.query.contentId)});return(0,o.Dh)(c,m)(n,t)},[(0,o.ok)(d.CONTENTS_REVIEW_STATES_USERS_GET)]:(e,t)=>{let{data:n,query:r}=t,i=(0,s.Ay)(e,e=>{E(e,r.contentId),void 0===r.fields&&n.results.forEach(t=>{e.contentReviewState.byContentId[r.contentId].byUserId[t.courseMembership.userId]={status:t.status,isLoading:!1}}),e.contentReviewState.byContentId[r.contentId].permissions=n.permissions});return(0,o.lY)(i,t,{viewResolver:c,viewsPathResolver:m,paging:n.paging,values:n.results.map(e=>e.courseMembership.userId)})},[(0,o.fJ)(d.CONTENTS_REVIEW_STATES_USERS_GET)]:(0,o.To)(c,m),[d.CONTENTS_REVIEW_STATES_USER_CONTENT_GET]:(e,t)=>{let n=(0,s.Ay)(e,n=>{e.contentReviewState.byUserId[t.query.userId]||(n.contentReviewState.byUserId[t.query.userId]={byContentId:{},byViewId:{}})});return(0,o.Dh)(p,g)(n,t)},[(0,o.ok)(d.CONTENTS_REVIEW_STATES_USER_CONTENT_GET)]:(e,t)=>{let{data:n,query:r}=t,i=(0,s.Ay)(e,e=>{n.results.forEach(t=>{e.contentReviewState.byUserId[r.userId].byContentId[t.contentId]=t})});return(0,o.lY)(i,t,{viewResolver:p,viewsPathResolver:g,paging:n.paging,values:n.results.map(e=>e.contentId)})},[(0,o.fJ)(d.CONTENTS_REVIEW_STATES_USER_CONTENT_GET)]:(0,o.To)(p,g),[d.CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET]:(e,t)=>(0,s.Ay)(e,e=>{E(e,t.query.contentId),e.contentReviewState.byContentId[t.query.contentId].reports.states={isLoading:!0,states:void 0}}),[(0,o.ok)(d.CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET)]:(e,t)=>{let{data:n,query:{contentId:r}}=t;return(0,s.Ay)(e,e=>{E(e,r),e.contentReviewState.byContentId[t.query.contentId].reports.states={...e.contentReviewState.byContentId[t.query.contentId].reports.states,isLoading:!1,states:n.states}})},[(0,o.fJ)(d.CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET)]:(e,t)=>(0,s.Ay)(e,e=>{e.contentReviewState.byContentId[t.query.contentId].reports.states.isLoading=!1}),[(0,o.ok)(l.g.CONTENT_LOAD)]:(e,t)=>{let{contents:n}=t;return n=(0,i.jD)(Object.values(n||{})),(0,s.Ay)(e,e=>{Object.values(n).forEach(t=>{let n=t.id;E(e,n),e.contentReviewState.byContentId[n].byUserId[a.dC]={status:{state:t.state,startedDate:null,reviewedDate:null},isLoading:!1}})})},[(0,o.ok)(l.g.CONTENT_DELETE)]:h,[(0,o.ok)(l.g.CONTENT_DELETE_ADAPTIVE_RELEASE)]:h,[(0,o.ok)(l.g.CONTENT_DELETE_ADAPTIVE_RELEASE_RULE_IN_STORE)]:h,[(0,o.ok)(l.g.CONTENT_DELETE_ALL_ADAPTIVE_RELEASE_IN_STORE)]:h,[(0,o.ok)(l.g.CONTENT_DELETE_IN_STORE)]:h,[(0,o.ok)(l.g.CONTENT_PERSIST)]:h,[(0,o.ok)(l.g.CONTENT_PERSIST_MULTIPLE)]:h,[(0,o.ok)(l.g.CONTENT_PERSIST_ADAPTIVE_RELEASE_MULTIPLE)]:h,[(0,o.ok)(l.g.CONTENT_MOVE_IN_STORE)]:h,[(0,o.ok)(l.g.CONTENT_UPDATE_IN_STORE)]:h}),f={persistContentReviewState:(e,t,n)=>(0,o.VP)(d.CONTENT_REVIEW_STATE_PERSIST,async()=>{try{let r={courseId:e,contentId:t,userId:a.dC,state:n};return await (0,a.Qq)(r),{contentStates:(await (0,a.Iu)({courseId:e,contentId:t,includeRelated:!0,includeNextIncompleteChild:!1})).contentStates,contentId:t,userId:a.dC}}catch(e){throw{contentId:t,userId:a.dC,err:e}}},{contentId:t,userId:a.dC}),getContentReviewState:(e,t,n,r=!1)=>(0,o.VP)(d.CONTENTS_REVIEW_STATES_GET,async()=>{try{return{contentStates:(await (0,a.Iu)({courseId:e,contentId:t,includeRelated:n,includeNextIncompleteChild:r})).contentStates,contentId:t,userId:a.dC}}catch(e){throw{contentId:t,userId:a.dC,err:e}}},{contentId:t,userId:a.dC}),fetchContentReviewUserStatesByQuery:e=>(0,o.VP)(d.CONTENTS_REVIEW_STATES_USERS_GET,async()=>{try{return{data:await (0,a.Rz)(e),query:e}}catch(t){throw{query:e,err:t}}},{query:e}),fetchContentReviewStateUsersReportStates:e=>(0,o.VP)(d.CONTENTS_REVIEW_STATES_USERS_REPORTS_STATES_GET,async()=>{try{return{data:await (0,a.dh)(e),query:e}}catch(t){throw{query:e,err:t}}},{query:e}),fetchMoreContentReviewStateUserContent:e=>(0,o.VP)(d.CONTENTS_REVIEW_STATES_USER_CONTENT_GET,async()=>{try{return{data:await (0,a.hZ)(e),query:e}}catch(t){throw{query:e,err:t}}},{query:e})},b=(0,u.Mz)([(e,t)=>e.contentReviewState.contentReviewState.byUserId[t.userId],(e,t)=>t],(e,t)=>{var n;return{byViewId:null!==(n=null==e?void 0:e.byViewId)&&void 0!==n?n:{},query:t}}),I=(0,u.Mz)(b,({byViewId:e,query:t})=>({views:Object.values(e).filter(e=>e.query.courseId===t.courseId&&e.query.contentId===t.contentId).sort((e,t)=>{var n,r,i,o;return(null!==(r=null===(n=t.query.paging)||void 0===n?void 0:n.offset)&&void 0!==r?r:0)-(null!==(o=null===(i=e.query.paging)||void 0===i?void 0:i.offset)&&void 0!==o?o:0)}),query:t})),A={getContentReviewStateForContextUser:(e,t)=>{var n,r,i;return null===(i=null===(r=null===(n=e.contentReviewState.contentReviewState.byContentId[t])||void 0===n?void 0:n.byUserId[a.dC])||void 0===r?void 0:r.status)||void 0===i?void 0:i.state},getLoadingStatusForContentReviewStateForContextUser:(e,t)=>{var n,r;return null===(r=null===(n=e.contentReviewState.contentReviewState.byContentId[t])||void 0===n?void 0:n.byUserId[a.dC])||void 0===r?void 0:r.isLoading},getContentReviewStateUsersByQuery:(e,t)=>{var n;let{view:r}=c(e.contentReviewState,t);return r?(null!==(n=r.values)&&void 0!==n?n:[]).map(n=>{let r=e.contentReviewState.contentReviewState.byContentId[t.contentId].byUserId[n];return{contentId:t.contentId,status:r.status,courseMembership:Object.values(e.courseMembership.byCourseMembershipId).find(e=>e.courseId===t.courseId&&e.userId===n)}}):[]},getContentReviewStateUsersStatusByQuery:(e,t)=>{let{view:n}=c(e.contentReviewState,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getContentReviewStateUsersPermissions:(e,t)=>{var n;return null===(n=e.contentReviewState.contentReviewState.byContentId[t])||void 0===n?void 0:n.permissions},getContentReviewStateUsersReportStates:(e,t)=>{var n;return null===(n=e.contentReviewState.contentReviewState.byContentId[t])||void 0===n?void 0:n.reports.states},hasMoreContentReviewStateUserContent:(0,u.Mz)(I,({views:e,query:t})=>{var n,r,i;if(0===e.length)return{isLoading:!1,canLoadMore:!0,nextOffset:0};let o=e[0],s=!!(null===(n=o.paging)||void 0===n?void 0:n.nextPage),a=(null===(r=o.paging)||void 0===r?void 0:r.nextPage)?o.paging.offset+t.limit:void 0;return{isLoading:o.isLoading,canLoadMore:s,nextOffset:a,count:null===(i=o.paging)||void 0===i?void 0:i.count}}),getContentReviewStateFirstUserContent:(0,u.Mz)([(e,t)=>{var n,r;return null!==(r=null===(n=e.contentReviewState.contentReviewState.byUserId[t.userId])||void 0===n?void 0:n.byContentId)&&void 0!==r?r:{}},(e,t)=>t],(e,t)=>Object.values(e).filter(e=>e.content.parentId===t.contentId&&(!t.visibility||e.content.visibility&&t.visibility.includes(e.content.visibility))).sort((e,t)=>{var n,r;return(null!==(n=e.content.position)&&void 0!==n?n:0)-(null!==(r=t.content.position)&&void 0!==r?r:0)}))}},688084:function(e,t,n){"use strict";n.d(t,{o1:function(){return f},Ff:function(){return h},Lt:function(){return y}});let r={COURSE_ANNOUNCEMENTS_LOAD:"course-announcements.load",COURSE_ANNOUNCEMENTS_INVALIDATE:"course-announcements.invalidate",GET_COURSE_ANNOUNCEMENTS_COUNTS:"get.course-announcements.counts",UPDATE_COURSE_ANNOUNCEMENTS_READ_STATUS:"update.course-announcements.read.status"};var i=n(828736),o=n(968554),s=n(905898),a=n(758247),l=n(588335),u=n(352290),d=n(839781),c=n(645250);let p=(e,t)=>{var n;if(!t)return o.Vc;let[r,i]=null!==(n=Object.entries(e.views.byCourseId[t.courseId]||{}).find(([,e])=>(0,c.isEqual)(e.query,t)))&&void 0!==n?n:[null,null];return r?{id:r,view:i}:o.Vc},m=e=>["views","byCourseId",e.courseId],g=(e,t)=>{let{view:n}=p(e.courseAnnouncements,t);return!n||!n.isLoading&&!n.isValid},E=(e,t)=>e=(0,s.jM)(e,e=>{var n;Object.values(null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{}).forEach(e=>{e.isValid=!1})}),h=(0,o.vy)({byId:{},views:{byCourseId:{}},announcementsCounts:{}},{[r.COURSE_ANNOUNCEMENTS_LOAD]:(0,o.Dh)(p,m),[(0,o.ok)(r.COURSE_ANNOUNCEMENTS_LOAD)]:(e,t)=>{let{data:n}=t,{announcements:r,paging:i}=n,a=Object.keys(r);return e=(0,s.jM)(e,e=>{a.forEach(t=>{e.byId[t]=r[t]})}),(0,o.lY)(e,t,{viewResolver:p,viewsPathResolver:m,paging:i,values:a})},[(0,o.fJ)(r.COURSE_ANNOUNCEMENTS_LOAD)]:(0,o.To)(p,m),[r.COURSE_ANNOUNCEMENTS_INVALIDATE]:(e,t)=>E(e,t.courseId),[u.g.GRANULAR_CONTENT_COPY_COMPLETE]:(e,t)=>{let{courseId:n}=t;return E(e,n)},[(0,o.ok)(l.gK.ANNOUNCEMENT_SAVE)]:(e,t)=>{let{courseId:n}=t;return E(e,n)},[(0,o.ok)(l.gK.ANNOUNCEMENT_REMOVE)]:(e,t)=>{let{courseId:n}=t;return E(e,n)},[(0,o.ok)(r.GET_COURSE_ANNOUNCEMENTS_COUNTS)]:(e,t)=>(0,s.jM)(e,e=>{e.announcementsCounts[t.courseId]=t.announcementsCounts}),[(0,o.ok)(r.UPDATE_COURSE_ANNOUNCEMENTS_READ_STATUS)]:(e,t)=>{var n;let{courseId:r,id:i,readStatus:o}=t.announcement;if(void 0===r)return e;let a=null!==(n=e.announcementsCounts[r].unreadCount)&&void 0!==n?n:0;return(0,s.jM)(e,t=>{var n;t.byId[i]={...e.byId[i],readStatus:{isRead:null!==(n=null==o?void 0:o.isRead)&&void 0!==n&&n}},t.announcementsCounts[r]={...e.announcementsCounts[r],unreadCount:(null==o?void 0:o.isRead)?a-1:a+1}})},[(0,o.fJ)(r.GET_COURSE_ANNOUNCEMENTS_COUNTS)]:(e,t)=>(0,o.Nh)(e,t)}),y={getCourseAnnouncementsByQuery:(0,d.n)((e,t)=>{let{view:n}=p(e.courseAnnouncements,t);return n?(n.values||[]).map(t=>e.courseAnnouncements.byId[t]):[]},e=>e),getAnnouncementsCounts:(e,t)=>{var n,r;return null!==(r=null===(n=e.courseAnnouncements)||void 0===n?void 0:n.announcementsCounts[t])&&void 0!==r?r:{}},getCourseAnnouncementsViewByQuery:(e,t)=>{let{view:n}=p(e.courseAnnouncements,t);return n},getCourseAnnouncementById(e,t){return e.courseAnnouncements.byId[t]}},f={loadCourseAnnouncementsByQuery:(e,t={})=>(0,o.RA)(async(n,s)=>{let l=!g(s(),e);if(!t.forceReload&&l)return y.getCourseAnnouncementsByQuery(s(),e);n((0,o.rc)(r.COURSE_ANNOUNCEMENTS_LOAD,{query:e}));try{let t=await (0,i.Xh_)(e);return n((0,o.rc)((0,o.ok)(r.COURSE_ANNOUNCEMENTS_LOAD),{query:e,data:t})),y.getCourseAnnouncementsByQuery(s(),e)}catch(t){throw n((0,o.rc)((0,o.fJ)(r.COURSE_ANNOUNCEMENTS_LOAD),{query:e})),n((0,o.rc)((0,o.ok)(a.A.APP_ERROR),{error:t})),t}}),loadAnnouncementsCounts:e=>(0,o.VP)(r.GET_COURSE_ANNOUNCEMENTS_COUNTS,async()=>await (0,i.Noo)(e)),changeReadStatusAnnouncement:(e,t,n)=>(0,o.VP)(r.UPDATE_COURSE_ANNOUNCEMENTS_READ_STATUS,async()=>(await (0,i.f9L)(e,t,n),{announcementId:t,isRead:n})),invalidateCourseAnnouncementViews:e=>(0,o.RA)(async t=>{t((0,o.rc)(r.COURSE_ANNOUNCEMENTS_INVALIDATE,{courseId:e}))})}},727168:function(e,t,n){"use strict";n.d(t,{o1:function(){return m},Ff:function(){return p},Lt:function(){return g}});var r=n(905898),i=n(968554),o=n(397965);let s="/public/v1/courses/%courseId%/children",a=`${s}/%childCourseId%`;async function l(e){let t;try{t=await (0,o.Jt)((0,o.c$)(s,e))}catch(e){if(e.error.code&&"bb-blackboard-core-course-has-no-children"===e.error.code)t={results:[]};else throw e.error}return t}async function u(e){return await (0,o.Jt)((0,o.c$)(a,{courseId:e.parentCourseId,childCourseId:e.childCourseId,fields:e.fields}))}let d="child-courses.load",c="child-course.load",p=(0,i.vy)({byParentCourseId:{},byChildCourseId:{}},{[d]:i.r1,[(0,i.ok)(d)]:(e,t)=>{let n=t.childCourses,o=t.courseId;return(0,r.jM)(e,t=>(t.byParentCourseId[o]=n.map(e=>e.id),n.forEach(n=>{let r=e.byChildCourseId[n.id];t.byChildCourseId[n.id]={...(0,i.rL)(r,n)}}),t))},[(0,i.fJ)(d)]:i.Nh,[(0,i.ok)(c)]:(e,t)=>{let{childCourse:n}=t;return(0,r.jM)(e,t=>{let r=e.byChildCourseId[n.id];t.byChildCourseId[n.id]={...(0,i.rL)(r,n)}})}}),m={loadChildCourses:e=>(0,i.VP)(d,async()=>{try{let t=await l({courseId:e,fields:["id","childCourse"]});return{courseId:e,childCourses:t.results}}catch(e){throw{err:e}}}),loadChildCourse:(e,t)=>(0,i.VP)(c,async()=>{try{let n=await u({parentCourseId:e,childCourseId:t,fields:["id","childCourse"]});return{childCourseId:t,childCourse:n}}catch(e){throw{err:e}}})},g={byParentCourseId:(e,t)=>{let n=e.courseChildren.byParentCourseId[t];if(n)return n.map(t=>e.courseChildren.byChildCourseId[t])},byChildCourseId:(e,t)=>e.courseChildren.byChildCourseId[t]}},316581:function(e,t,n){"use strict";n.d(t,{o1:function(){return p},Ff:function(){return c},Lt:function(){return m}});var r=n(905898),i=n(645250),o=n(968554),s=n(397965);async function a(e){let t=await (0,s.Jt)((0,s.c$)("/v1/courses/%courseId%/ultraConversionReports/%taskId%/summary",e));return{courseId:t.courseId,courseName:t.courseName,tasks:{[t.taskId]:{risks:t.risks.reduce((e,t)=>(e[t.riskClassification.toLowerCase()]={count:t.count,messages:t.exceptionMessages.reduce((e,t)=>(e[t.name]={count:t.count},e),{})},e),{})}}}}async function l(e){let t=await (0,s.Jt)((0,s.c$)("/v1/courses/%courseId%/ultraConversionReports/%taskId%/messages",e)),n=t.results;for(;t.paging.nextPage;)t=await (0,s.Jt)("/"+t.paging.nextPage.split("/").slice(3).join("/")),n=n.concat(t.results);return{courseId:e.courseId,tasks:{[e.taskId]:n.reduce((e,t)=>{let n=t.riskClassification?t.riskClassification.toLowerCase():"null";return e[n]=e[n]||{},e[n][t.message]=e[n][t.message]||[],e[n][t.message].push(t),e},{})}}}let u="conversion.summary.load",d="conversion.messages.load",c=(0,o.vy)({conversionSummaries:{},conversionMessages:{},isLoading:!1},{[u]:(e,t)=>(0,o.r1)(e,t),[(0,o.ok)(u)]:(e,t)=>{let n={};return t&&t.data&&(n={conversionSummaries:{[t.data.courseId]:t.data}}),(0,r.jM)((0,o.Zg)(e,t),e=>{i.merge(e,n)})},[(0,o.fJ)(u)]:(e,t)=>(0,o.Nh)(e,t),[d]:(e,t)=>(0,o.r1)(e,t),[(0,o.ok)(d)]:(e,t)=>{let n={};return t&&t.data&&(n={conversionMessages:{[t.data.courseId]:t.data}}),(0,r.jM)((0,o.Zg)(e,t),e=>{i.merge(e,n)})},[(0,o.cw)(d)]:(e,t)=>{let{courseId:n,taskId:i}=t,s=(0,r.jM)(e,e=>{e.conversionMessages[n]&&e.conversionMessages[n].tasks||(e.conversionMessages[n]={courseId:n,tasks:{}}),e.conversionMessages[n].tasks[i]={}});return(0,o.Zg)(s,t)},[(0,o.fJ)(d)]:(e,t)=>(0,o.Nh)(e,t)}),p={loadSummary:e=>(0,o.VP)(u,t=>{var n;let{courseId:r,taskId:i}=e;return(n=t()).courseConversion.conversionSummaries[r]&&n.courseConversion.conversionSummaries[r].tasks[i]?Promise.resolve(null):a({courseId:r,taskId:i}).then(e=>({data:e}))}),loadMessages:(e,t)=>(0,o.VP)(d,t=>{var n;let{courseId:r,taskId:i}=e;return(n=t()).courseConversion.conversionMessages[r]&&n.courseConversion.conversionMessages[r].tasks[i]?Promise.resolve(null):l({courseId:r,taskId:i}).then(e=>({courseId:r,taskId:i,data:e})).catch(e=>{throw{err:e}})},e,t)},m={getConversionSummaryById:(e,t,n)=>e.courseConversion.conversionSummaries[t]&&e.courseConversion.conversionSummaries[t].tasks[n],getConversionMessagesById:(e,t,n)=>e.courseConversion.conversionMessages[t]&&e.courseConversion.conversionMessages[t].tasks[n],getRawConversionMessagesByTaskIds:(e,t,n)=>{let r=e.courseConversion.conversionMessages[t]&&e.courseConversion.conversionMessages[t].tasks;return i.transform(r,(e,t,r)=>{if(n.indexOf(r)>-1){let n=i.transform(t,(e,t)=>{let n=i.values(t);i.flatten(n).forEach(t=>{e.push(t)})},[]);e[r]=n}},{})}}},326199:function(e,t,n){"use strict";n.d(t,{o1:function(){return b},Ff:function(){return f},Lt:function(){return I}});var r=n(905898),i=n(968554),o=n(769224),s=n(566416);let a="courses.load",l="course.load",u="course.update",d="course.load.student.count";var c=n(612918),p=n(645250),m=n(352290);let g=e=>["byId",e.courseId],E=(e,t)=>{var n;let i=null===(n=t.byId[e.id])||void 0===n?void 0:n.value;return i?(0,r.jM)(i,t=>{Object.assign(t,e),Object.assign(t,{studentCount:e.studentCount})}):e},h=(e,t)=>{let n=Object.keys(e.views).find(n=>{let r=e.views[n];return(0,p.isEqual)(r.query,t)});return n?{id:n,view:e.views[n]}:i.Vc},y=()=>["views"],f=(0,i.vy)({byId:{},views:{}},{[a]:(0,c.FV)(h,y,c.vq),[(0,i.ok)(a)]:(e,t)=>{var n;let{query:r,paging:o}=t,s=Object.values(null!==(n=t.courses)&&void 0!==n?n:{}).map(t=>({value:E(t,e),status:(0,c.Lx)(c.hu.Load,e.byId[t.id],c.U8)})).reduce(c.TR,{}),a=(0,i.Zg)(e,t,{byId:{...e.byId,...s}});if(!r)return a;let l=Object.keys(s).filter(e=>!!e);return(0,c.FV)(h,y,c.y_,{values:l,paging:o})(a,t)},[(0,i.fJ)(a)]:(0,c.FV)(h,y,c.JL),[l]:(0,c.rK)(g,c.hu.Load,c.p_),[(0,i.fJ)(l)]:(0,c.rK)(g,c.hu.Load,c.XP),[(0,i.ok)(l)]:(e,t)=>{let{course:n}=t;return(0,r.jM)(e,t=>{var r,i;t.byId[n.id]={value:{...n,studentCount:null===(i=null===(r=e.byId[n.id])||void 0===r?void 0:r.value)||void 0===i?void 0:i.studentCount},status:(0,c.Lx)(c.hu.Load,t.byId[n.id],c.U8)}})},[m.g.GRANULAR_CONTENT_COPY_COMPLETE]:(e,t)=>{let{courseId:n}=t;return(0,r.jM)(e,e=>{e.byId[n]={status:(0,c.Lx)(c.hu.Load,e.byId[n],c.gO)}})},[u]:(0,c.rK)(g,c.hu.Update,c.J7),[(0,i.fJ)(u)]:(0,c.rK)(g,c.hu.Update,c.XP),[(0,i.ok)(u)]:(e,t)=>{let{course:n}=t;return(0,r.jM)(e,t=>{var r,i;t.byId[n.id]={value:{...n,studentCount:null===(i=null===(r=e.byId[n.id])||void 0===r?void 0:r.value)||void 0===i?void 0:i.studentCount},status:(0,c.Lx)(c.hu.Update,t.byId[n.id],c.U8)}})},[d]:i.r1,[(0,i.ok)(d)]:(e,t)=>{if(!t||!t.courseId)return(0,i.Zg)(e,t);let{courseId:n,studentCount:o}=t,s=(0,r.jM)(e,e=>{var t;(null===(t=e.byId[n])||void 0===t?void 0:t.value)&&(e.byId[n].value.studentCount=o)});return(0,i.Zg)(s,t)},[(0,i.fJ)(d)]:i.Nh,[(0,i.ok)(s.g.USER_MEMBERSHIPS_LOAD)]:(e,t)=>{var n;let i=null===(n=null==t?void 0:t.data)||void 0===n?void 0:n.courses;return i?(0,r.jM)(e,t=>{Object.values(i).forEach(n=>{var r,i;t.byId[n.id]={value:{...n,studentCount:null===(i=null===(r=e.byId[n.id])||void 0===r?void 0:r.value)||void 0===i?void 0:i.studentCount},status:(0,c.Lx)(c.hu.Load,t.byId[n.id],c.U8)}})}):e}}),b={fetchCourse:e=>(0,i.Vy)(l,async()=>{try{return{courseId:e,course:await (0,o.aR)(e)}}catch(t){throw new i.GS(t).setData({courseId:e})}},{data:{courseId:e},condition:(t,{getState:n})=>!!e&&(0,c.gE)(I.getCourseStatus(n(),e))}),fetchCourses:(e,t)=>(0,i.Vy)(a,async()=>{try{let{results:n,paging:r}=await (0,o.D)(e,t);return{query:e,courses:n,paging:r}}catch(t){throw new i.GS(t).setData({query:e})}},{data:{query:e},condition:(n,{getState:r})=>null!=t&&!!t.paging||!!e&&(0,c.qO)(I.getCourseViewStatus(r(),e))}),updateCourse:(e,t,n,r)=>(0,i.Vy)(u,async()=>{try{return{courseId:e,course:await (0,o.J4)(t,n,r)}}catch(t){throw new i.GS(t).setData({courseId:e})}},{data:{courseId:e}}),fetchCourseStudentCount:e=>(0,i.Vy)(d,async()=>{let t=await (0,o.EX)(e);return{courseId:e,studentCount:t}}),setCourseInStore:e=>(0,i.rc)((0,i.ok)(l),{course:e,courseId:e.id})},I={getCourseById:(e,t)=>{var n;return null===(n=e.course.byId[t])||void 0===n?void 0:n.value},getCourseStatus:(e,t)=>{var n;return null===(n=e.course.byId[t])||void 0===n?void 0:n.status},getCourseStudentCount:(e,t)=>{var n,r;return null!==(r=null===(n=e.course.byId[t].value)||void 0===n?void 0:n.studentCount)&&void 0!==r?r:0},getCourses:(e,t)=>{var n,r;let{view:i}=h(e.course,t);return i&&null!==(r=null===(n=i.values)||void 0===n?void 0:n.map(t=>{var n;return null===(n=e.course.byId[t])||void 0===n?void 0:n.value}).filter(e=>!!e))&&void 0!==r?r:[]},getCourseViewStatus:(e,t)=>{let{view:n}=h(e.course,t);return null==n?void 0:n.status},getCoursesWithPagination:(e,t)=>{var n,r;let i=h(e.course,t);if(i&&i.id){let t=e.course.views[i.id],o=null!==(r=null===(n=t.values)||void 0===n?void 0:n.map(t=>{var n;return null===(n=e.course.byId[t])||void 0===n?void 0:n.value}).filter(e=>!!e))&&void 0!==r?r:[];return{...t,results:o}}return{results:[]}}}},278764:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={COURSE_ENTITLEMENTS_LOAD:"courseEntitlements.load"}},571568:function(e,t,n){"use strict";n.d(t,{Ff:function(){return k},Lt:function(){return U},o1:function(){return w}});var r=n(905898),i=n(645250),o=n(968554),s=n(300474),a=n(758247),l=n(43375),u=n(909892),d=n(435624),c=n(274643),p=n(631372),m=n(836714),g=n(477305),E=n(26070),h=n(764209),y=n(584059),f=n(139552);let b={groups:{byId:{},byGroupSetId:{},views:{byCourseId:{},byContentId:{},byGroupSetId:{}},loadingStatus:y.Z.HasNotStarted},groupMemberships:{},isLoading:!1},I=(0,o.vy)(b,{[h.g.CONTENT_LOAD]:o.r1,[(0,o.ok)(h.g.CONTENT_LOAD)]:(e,t)=>{if(i.has(t,"groups")){let n=(0,r.Ay)(e,e=>{let{groups:n}=t;Object.keys(n).forEach(t=>{var r;let i=null!==(r=e.groups.byId[t])&&void 0!==r?r:{};e.groups.byId[t]={...i,...n[t],api:{isUpdating:!1,isDeleting:!1}}})});return(0,o.Zg)(n,t)}return(0,o.Zg)(e,t)},[(0,o.fJ)(h.g.CONTENT_LOAD)]:o.Nh,[l.A.GROUPS_LOAD_BY_CONTENT_ID]:o.r1,[(0,o.ok)(l.A.GROUPS_LOAD_BY_CONTENT_ID)]:(e,t)=>{let n=(0,r.Ay)(e,e=>{let{contentId:n,groups:r}=t;Object.keys(r).forEach(t=>{e.groups.byId[t]={...r[t],contentId:n}})});return(0,o.Zg)(n,t)},[(0,o.fJ)(l.A.GROUPS_LOAD_BY_CONTENT_ID)]:o.Nh,[l.A.GROUP_DELETE_BATCH]:(e,t)=>(0,r.Ay)(e,e=>{let{deletedGroups:n}=t;n.forEach(t=>{e.groups.byId[t.id]||(e.groups.byId[t.id]={}),e.groups.byId[t.id].api||(e.groups.byId[t.id].api={}),e.groups.byId[t.id].api.isDeleting=!0})}),[(0,o.ok)(l.A.GROUP_DELETE_BATCH)]:(e,t)=>{let{deletedGroups:n,groupSetId:i}=t;return(0,r.Ay)(e,e=>{var r,o;n.forEach(t=>{delete e.groups.byId[t.id]}),n.length&&R(e.groups);let s=null!=i?i:null===(r=null==n?void 0:n[0])||void 0===r?void 0:r.groupSetId;if(!s)return;let a=null!==(o=e.groups.byGroupSetId[s])&&void 0!==o?o:[],l=new Set(t.deletedGroups.map(e=>e.id)),u=a.filter(e=>!l.has(e));e.groups.byGroupSetId[i]=u})},[(0,o.fJ)(l.A.GROUP_DELETE_BATCH)]:(e,t)=>(0,r.Ay)(e,e=>{let{deletedGroups:n}=t;n.forEach(t=>{e.groups.byId[t.id].api.isDeleting=!1})}),[(0,o.ok)(l.A.GROUP_LOAD_BY_ID)]:(e,t)=>{let{group:n,groupId:i}=t;return(0,r.Ay)(e,t=>{let r=e.groups.byId[i];t.groups.byId[i]={...(0,o.rL)(r,n)}})}}),A=(e,t)=>Object.keys(e).find(n=>{let r=e[n],o=i.isEqual(r.query.paging,t.paging),s=!("filter"in r.query)||!("filter"in t)||i.isEqual(r.query.filter,t.filter);return o&&s}),v=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byCourseId[t.courseId]||{},r=A(n,t);return r?{id:r,view:n[r]}:o.Vc},S=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byContentId[t.contentId]||{},r=A(n,t);return r?{id:r,view:r?n[r]:null}:{id:null,view:null}},_=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byGroupSetId[t.groupSetId]||{},r=A(n,t);return r?{id:r,view:r?n[r]:null}:{id:null,view:null}},T=e=>["views","byCourseId",e.courseId],O=e=>["views","byContentId",e.contentId],C=e=>["views","byGroupSetId",e.groupSetId],R=e=>{Object.keys(e.views.byCourseId).forEach(t=>{let n=e.views.byCourseId[t];n&&Object.keys(n).forEach(e=>{n[e].isValid=!1})}),Object.keys(e.views.byGroupSetId).forEach(t=>{let n=e.views.byGroupSetId[t];n&&Object.keys(n).forEach(e=>{n[e].isValid=!1})})},L=(e,t)=>(0,r.Ay)(e,e=>{let n=!1;Object.keys(t).forEach(r=>{var i;e.byId[r]&&e.byId[r].title===t[r].title&&e.byId[r].studentCount===t[r].studentCount&&e.byId[r].isAvailable===t[r].isAvailable||(n=!0),e.byId[r]={...e.byId[r],...t[r],ui:{...null===(i=e.byId[r])||void 0===i?void 0:i.ui}},delete e.byId[r].groupSet}),n&&R(e)}),D=(0,o.vy)(b.groups,{[l.A.GROUPS_LOAD]:(e,t)=>(0,o.r1)(e,t,{loadingStatus:y.Z.Loading}),[(0,o.ok)(l.A.GROUPS_LOAD)]:(e,t)=>(0,r.Ay)(e,e=>{let{groups:n}=t;Object.keys(n).forEach(t=>{let r=n[t];if(e.byId[t]={...r,api:{isUpdating:!1,isDeleting:!1}},!r.groupSetId)return;let i=new Set(e.byGroupSetId[r.groupSetId]).add(r.id);e.byGroupSetId[r.groupSetId]=Array.from(i)}),e.loadingStatus=y.Z.Loaded}),[(0,o.fJ)(l.A.GROUPS_LOAD)]:e=>(0,r.Ay)(e,e=>{e.loadingStatus=y.Z.Error}),[l.A.GROUPS_LOAD_BY_QUERY]:(0,o.Dh)(v,T),[(0,o.fJ)(l.A.GROUPS_LOAD_BY_QUERY)]:(0,o.To)(v,T),[(0,o.ok)(l.A.GROUPS_LOAD_BY_QUERY)]:(e,t)=>{let{data:n}=t;if(!n)return(0,o.Zg)(e,t);let{groupIds:r,paging:i,groups:s}=n;return e=L(e,s),(0,o.lY)(e,t,{viewResolver:v,viewsPathResolver:T,paging:i,values:r})},[l.A.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY]:(0,o.Dh)(S,O),[(0,o.fJ)(l.A.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY)]:(0,o.To)(S,O),[(0,o.ok)(l.A.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY)]:(e,t)=>{let{data:n}=t;if(!n)return(0,o.Zg)(e,t);let{groupIds:r,paging:i,groups:s}=n,a={};return Object.values(s).forEach(e=>{if(e.memberships){let t=e.memberships.map(e=>{let{user:t,...n}=e;return n}),n={...e,memberships:t};e.id&&(a[e.id]=n)}else e.id&&(a[e.id]=e)}),e=L(e,a),(0,o.lY)(e,t,{viewResolver:S,viewsPathResolver:O,paging:i,values:r})},[l.A.GROUPS_LOAD_BY_GROUP_SET_ID_AND_QUERY]:(0,o.Dh)(_,C),[(0,o.fJ)(l.A.GROUPS_LOAD_BY_GROUP_SET_ID_AND_QUERY)]:(0,o.To)(_,C),[(0,o.ok)(l.A.GROUPS_LOAD_BY_GROUP_SET_ID_AND_QUERY)]:(e,t)=>{let{data:n}=t;if(!n)return(0,o.Zg)(e,t);let{groupIds:r,paging:i,groups:s}=n;return e=L(e,s),(0,o.lY)(e,t,{viewResolver:_,viewsPathResolver:C,paging:i,values:r})},[(0,o.ok)(c.g.GROUP_SET_REMOVE)]:(e,t)=>(0,r.Ay)(e,n=>{let{groupSetId:r}=t;Object.keys(e.byId).forEach(t=>{e.byId[t].groupSetId===r&&delete n.byId[t]}),R(n)}),[(0,o.ok)(c.g.GROUP_SET_MODIFY)]:(e,t)=>(0,r.Ay)(e,n=>{let{groupSet:r}=t,i=e.byGroupSetId[r.id];null==i||i.forEach(e=>n.byId[e].isAvailable=r.isAvailable)}),[(0,o.ok)(l.A.GROUPS_ADD)]:(e,t)=>{let{addedGroupsById:n,groupSetId:i}=t,o=L(e,n);return i&&t.addedCourseGroupIds&&(o=(0,r.Ay)(o,n=>{var r;let o=null!==(r=e.byGroupSetId[i])&&void 0!==r?r:[],s=new Set([...t.addedCourseGroupIds,...o]);n.byGroupSetId[i]=Array.from(s)})),o},[(0,o.ok)(l.A.GROUPS_UPDATE)]:(e,t)=>{let{updatedGroupsById:n}=t;return L(e,n)},[(0,o.fJ)(l.A.GROUPS_UPDATE)]:o.Nh,[(0,o.ok)(l.A.GROUP_STUDENT_COUNT_LOAD)]:(e,t)=>(0,r.Ay)(e,n=>{let{groups:r}=t;Object.keys(r).forEach(t=>{n.byId[t]={...e.byId[t],...r[t]}})}),[(0,o.ok)(l.A.ADD_GROUP_MEMBERSHIP)]:(e,t)=>(0,r.Ay)(e,n=>{let{groupId:r,userId:o}=t,s=e.byId[r];!s||!s.memberships||i.findIndex(s.memberships,["userId",o])>=0||(n.byId[r]={...s,memberships:[...s.memberships,{groupId:r,userId:o}],studentCount:s.studentCount+1})}),[(0,o.ok)(l.A.REMOVE_GROUP_MEMBERSHIP)]:(e,t)=>(0,r.Ay)(e,n=>{let{userId:r,enrolledGroupId:o}=t,s=e.byId[o];if(!s||!s.memberships||-1===i.findIndex(s.memberships,["userId",r]))return;let a=s.memberships.filter(e=>e.userId!==r);n.byId[s.id]={...s,memberships:a,studentCount:s.studentCount-1}})}),N=(0,o.vy)(b.groupMemberships,{[(0,o.ok)(l.A.GROUP_MEMBERSHIPS_LOAD)]:(e,t)=>(0,r.Ay)(e,e=>{let{memberships:n}=t;Object.keys(n).forEach(t=>{e[t]={...n[t]}})}),[(0,o.ok)(l.A.ADD_GROUP_MEMBERSHIP)]:(e,t)=>(0,r.Ay)(e,n=>{let{groupId:r,userId:o}=t,s=Array.from(e[r]||[]);i.findIndex(s,["userId",o])>=0||(n[r]=[...s,{groupId:r,userId:o}])}),[(0,o.ok)(l.A.REMOVE_GROUP_MEMBERSHIP)]:(e,t)=>(0,r.Ay)(e,n=>{let{userId:r,enrolledGroupId:o}=t,s=e[o];s&&-1!==i.findIndex(s,["userId",r])&&(n[o]=s.filter(e=>e.userId!==r))})}),P=(0,o.HY)({groups:D,groupMemberships:N}),k=(0,o._1)(I,P,b),w={deleteByContentId:e=>(0,o.RA)((t,n)=>{let r=U.getGroupsByContentId(n(),e),i=E.Lt.getContentById(n(),e).courseId;t((0,o.rc)(l.A.GROUP_DELETE_BATCH,{deletedGroups:r}));let s=()=>{let t=E.Lt.getContentById(n(),e),r={...t,isGroupContent:!1,assignedGroups:[]};return{prevContent:t,nextContent:r}};return(0,m.GL)(i,r).then(()=>{let{prevContent:e,nextContent:n}=s();return t(E.o1.persistContent(e,n))}).then(()=>{let{nextContent:e}=s();return t(E.o1.persistContentSync(e))}).then(()=>{t((0,o.rc)((0,o.ok)(l.A.GROUP_DELETE_BATCH),{deletedGroups:r}))}).catch(e=>{throw t((0,o.rc)((0,o.fJ)(l.A.GROUP_DELETE_BATCH),{deletedGroups:r})),t((0,o.rc)((0,o.ok)(a.A.APP_ERROR),{error:e})),{err:e}})}),loadGroupsByQuery:e=>(0,o.VP)(l.A.GROUPS_LOAD_BY_QUERY,async()=>{try{return{data:await (0,m.Sl)(e),query:e}}catch(t){throw{err:t,query:e}}},{query:e}),loadByContentId:(e,t)=>(0,o.VP)(l.A.GROUPS_LOAD_BY_CONTENT_ID,n=>t||M(n(),e.contentId)?(0,m.qf)(e).catch(e=>{throw{err:e}}):Promise.resolve({groups:{}})),loadByContentIdAndQuery:e=>(0,o.RA)(async(t,n)=>{let{view:r}=S(n().group.groups,e);if(null==r||!r.isLoading){t((0,o.rc)(l.A.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY,{query:e}));try{let n=await (0,m.Z8)(e);t((0,o.rc)((0,o.ok)(l.A.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY),{data:n,query:e}))}catch(n){t((0,o.rc)((0,o.fJ)(l.A.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY),{err:n,query:e})),t((0,o.rc)((0,o.ok)(a.A.APP_ERROR),{error:n}))}}}),loadByGroupSetId:(e,t,n)=>(0,o.RA)(async(r,i)=>{if(!d.Lt.isLoading(i(),t))try{r((0,o.rc)(l.A.GROUPS_LOAD,{groupSetId:t}));let i=await p.WV(e,t,n),s=Object.keys(i.groups);r((0,o.rc)((0,o.ok)(l.A.GROUPS_LOAD),{...i,groupSetId:t,assignedGroups:s}))}catch(e){r((0,o.rc)((0,o.fJ)(l.A.GROUPS_LOAD),{err:e})),r((0,o.rc)((0,o.ok)(a.A.APP_ERROR),{error:e}))}}),loadByGroupSetIdAndQuery:e=>(0,o.RA)(async(t,n)=>{let{view:r}=_(n().group.groups,e);if(null==r||!r.isLoading){t((0,o.rc)(l.A.GROUPS_LOAD_BY_GROUP_SET_ID_AND_QUERY,{query:e}));try{let n=await (0,m.Z4)(e);t((0,o.rc)((0,o.ok)(l.A.GROUPS_LOAD_BY_GROUP_SET_ID_AND_QUERY),{data:n,query:e}))}catch(n){t((0,o.rc)((0,o.fJ)(l.A.GROUPS_LOAD_BY_GROUP_SET_ID_AND_QUERY),{err:n,query:e})),t((0,o.rc)((0,o.ok)(a.A.APP_ERROR),{error:n}))}}}),loadGroupsByCourse:e=>(0,o.VP)(l.A.GROUPS_LOAD,()=>(0,m.aK)(e).catch(e=>{throw{err:e}})),loadMembershipsByGroupSetId:(e,t)=>(0,o.VP)(l.A.GROUP_MEMBERSHIPS_LOAD,async()=>{let n=await p.F5(e,t),r=n.memberships;return{...n,groupSetId:t,memberships:r}}),addGroupMembership:e=>(0,o.RA)(async(t,n)=>{t((0,o.rc)(l.A.ADD_GROUP_MEMBERSHIP)),t((0,o.rc)(l.A.REMOVE_GROUP_MEMBERSHIP));try{let n=await (0,m.Fn)(e);return t((0,o.rc)((0,o.ok)(l.A.ADD_GROUP_MEMBERSHIP),n)),t((0,o.rc)((0,o.ok)(l.A.REMOVE_GROUP_MEMBERSHIP),{userId:n.userId,enrolledGroupId:e.enrolledGroupId,courseId:e.courseId})),await t(u.o1.loadUser(n.userId)),n}catch(e){if(t((0,o.rc)((0,o.fJ)(l.A.ADD_GROUP_MEMBERSHIP),e)),t((0,o.rc)((0,o.fJ)(l.A.REMOVE_GROUP_MEMBERSHIP),e)),e instanceof s.$$||e instanceof s.X7||e instanceof s.dC||e instanceof s.H3||e instanceof s.ny||e instanceof s.$u)throw e;return t((0,o.rc)((0,o.ok)(a.A.APP_ERROR),{error:e})),null}}),loadStudentCountByGroupSetId:(e,t)=>(0,o.VP)(l.A.GROUP_STUDENT_COUNT_LOAD,async()=>{let n=await p.GP(e,t),r=n.groups,i=Object.keys(r).reduce((e,t)=>e+r[t].studentCount,0);return{...n,groupSetId:t,groups:r,groupSetStudentCount:i}}),addByGroupSetId:(e,t)=>{if(!e)throw Error("Expected an existing group set id");let n=(0,g.jD)(t);return(0,o.rc)((0,o.ok)(l.A.GROUPS_ADD),{addedGroupsById:n,groupSetId:e,addedCourseGroupIds:Object.keys(n)})},updateByGroupSetId:(e,t,n)=>{if(!e)throw Error("Expected an existing group set id");let r=(0,g.jD)(t);return(0,o.rc)((0,o.ok)(l.A.GROUPS_UPDATE),{updatedGroupsById:r,groupSetId:e,courseId:n})},deleteByGroupSetId:(e,t)=>{if(!e)throw Error("Expected an existing group set id");return(0,o.rc)((0,o.ok)(l.A.GROUP_DELETE_BATCH),{deletedGroups:t,groupSetId:e})},removeGroupsFromStore:e=>(0,o.rc)((0,o.ok)(l.A.GROUP_DELETE_BATCH),{deletedGroups:e}),loadGroupById:(e,t)=>(0,o.VP)(l.A.GROUP_LOAD_BY_ID,async()=>{let n=await m._P(e,t);return(0,o.rc)((0,o.ok)(l.A.GROUP_LOAD_BY_ID),{group:n,courseId:e,groupId:t})})},U={getGroupsByQuery:(e,t)=>{var n;let{view:r}=v(e.group.groups,t);return r&&r.isValid&&!r.isLoading?(null!==(n=r.values)&&void 0!==n?n:[]).map(t=>{var n,r;let i=e.group.groups.byId[t];if(!i)return null;let o={...i},s=null===(r=null===(n=e.groupWorkspace)||void 0===n?void 0:n.groupSets)||void 0===r?void 0:r.byId[i.groupSetId];return o.groupSet=s,o}).filter(e=>e):[]},getGroupByGroupId:(e,t)=>e.group.groups.byId[t],getCourseGroupsByIds:(e,t)=>t.map(t=>e.group.groups.byId[t]),getCourseGroupViewStatusByQuery:(e,t)=>{let{view:n}=v(e.group.groups,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getCourseGroupByGroupSetIdViewStatusByQuery:(e,t)=>{var n;let{view:r}=_(e.group.groups,t);return r?{isLoading:r.isLoading,isValid:r.isValid,paging:null!==(n=r.paging)&&void 0!==n?n:null}:null},getGroupsByContentId:(e,t)=>i.filter(e.group.groups.byId,{contentId:t}),getGroupsByContentIdAndQuery:(e,t)=>{var n;let{view:r}=S(e.group.groups,t);return r&&r.isValid&&!r.isLoading?(null!==(n=r.values)&&void 0!==n?n:[]).map(t=>{let n;let r=e.group.groups.byId[t];if(!r)return null;let i={...r};return r.groupSetId&&(n=d.Lt.getGroupSetById(e,r.groupSetId)),i.groupSet=n,i}).filter(e=>!!e):[]},getCourseGroupByContentIdViewStatusByQuery:(0,f.Mz)((e,t)=>S(e.group.groups,t).view,e=>{var t;return e?{isLoading:e.isLoading,isValid:e.isValid,paging:null!==(t=e.paging)&&void 0!==t?t:null}:null}),getGroupsByGroupSetId:(e,t)=>{var n,r;return null!==(r=null===(n=e.group.groups.byGroupSetId[t])||void 0===n?void 0:n.map(t=>e.group.groups.byId[t]))&&void 0!==r?r:[]},getGroupsByGroupSetIdByQuery:(e,t)=>{var n;let{view:r}=_(e.group.groups,t);return r&&r.isValid&&!r.isLoading?(null!==(n=r.values)&&void 0!==n?n:[]).map(t=>{var n,r;let i=e.group.groups.byId[t];if(!i)return null;let o={...i};return i.groupSetId&&(o.groupSet=null===(r=null===(n=e.groupWorkspace)||void 0===n?void 0:n.groupSets)||void 0===r?void 0:r.byId[i.groupSetId]),o}).filter(e=>e):[]},getGroupMembershipsByGroupSetId:(e,t)=>{if(!t||!e.groupWorkspace.groupSets.byId.hasOwnProperty(t))return[];let n=e.group.groups.byGroupSetId[t];return Array.isArray(n)?n.map(t=>e.group.groupMemberships[t]):[]},hasJoined:(e,t)=>{let n=i.filter(e.group.groups.byId,{...t.contentId&&{contentId:t.contentId},...t.groupSetId&&{groupSetId:t.groupSetId}});return i.some(n,e=>!!e.memberships&&i.find(e.memberships,{userId:t.userId}))},getGroupsLoadingStatus:e=>e.group.groups.loadingStatus,isLoading:e=>e.group.isLoading},M=(e,t)=>0===U.getGroupsByContentId(e,t).length},584059:function(e,t,n){"use strict";var r,i;n.d(t,{Z:function(){return r}}),(i=r||(r={})).HasNotStarted="hasNotStarted",i.Loading="loading",i.Loaded="loaded",i.Error="error"},435624:function(e,t,n){"use strict";n.d(t,{Ff:function(){return O},Lt:function(){return R},o1:function(){return C}});var r=n(905898),i=n(645250),o=n(968554),s=n(477305),a=n(758247),l=n(43375),u=n(631372),d=n(274643);let c={groupSets:{byId:{},byCourseId:{}},permissions:{},paging:{count:0},status:{isLoading:!1,loadingGroupSetIds:[]},totalGroupCount:0,lastGroupSetId:"",ui:{newGroupSetIds:[]},views:{byCourseId:{}}},p=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=(null===(n=e.views)||void 0===n?void 0:n.byCourseId[t.courseId])||{},o=Object.keys(r).find(e=>{let n=r[e],o=i.isEqual(n.query.paging,t.paging),s=i.isEqual(n.query.filter,t.filter);return o&&s});return{id:o,view:o?r[o]:null}},m=e=>["views","byCourseId",e.courseId],g=(e,t)=>{let{groupSets:n}=t;return(0,r.Ay)(e,e=>{let t=Object.values(n.byId),r=[...Object.values(e.groupSets.byId),...t];e.groupSets.byId=(0,s.jD)(r)})},E=(e,t)=>{let n=e.loadingGroupSetIds.filter(e=>e!==t.groupSetId);return{...e,loadingGroupSetIds:n}},h=(0,o.vy)(c.groupSets,{[(0,o.ok)(d.g.GROUP_SET_LOAD)]:(e,t)=>(0,r.Ay)(e,e=>{e.byId[t.groupSetId]={...e.byId[t.groupSetId],...t.groupSet}}),[(0,o.ok)(d.g.GROUP_SETS_LOAD)]:(e,t)=>(0,r.Ay)(e,e=>{var n;e.byId=t.groupSets.byId;let r=null!==(n=e.byCourseId[t.courseId])&&void 0!==n?n:[];e.byCourseId[t.courseId]=[...new Set([...Object.keys(t.groupSets.byId),...r])]}),[(0,o.ok)(d.g.GROUP_SETS_LOAD_MORE)]:(e,t)=>(0,r.Ay)(e,e=>{var n;i.merge(e.byId,t.groupSets.byId);let r=null!==(n=e.byCourseId[t.courseId])&&void 0!==n?n:[];e.byCourseId[t.courseId]=[...new Set([...r,...Object.keys(t.groupSets.byId)])]}),[(0,o.ok)(d.g.GROUP_SET_ADD)]:(e,t)=>(0,r.Ay)(e,e=>{var n;let{groupSet:r,courseId:i}=t;e.byId[r.id]=r;let o=null!==(n=e.byCourseId[i])&&void 0!==n?n:[];e.byCourseId[i]=[...new Set([...o,r.id])]}),[d.g.GROUP_SET_MODIFY]:(e,t)=>(0,r.Ay)(e,e=>{let n=t.groupSet.id;e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!0}),[(0,o.ok)(d.g.GROUP_SET_MODIFY)]:(e,t)=>(0,r.Ay)(e,e=>{let n=t.groupSet.id;e.byId[n]=t.groupSet,e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!1}),[(0,o.fJ)(d.g.GROUP_SET_MODIFY)]:(e,t)=>(0,r.Ay)(e,e=>{let n=t.groupSet.id;e.byId[n]||(e.byId[n]={}),e.byId[n].api||(e.byId[n].api={}),e.byId[n].api.isUpdating=!1}),[(0,o.ok)(d.g.GROUP_SET_REMOVE)]:(e,t)=>(0,r.Ay)(e,e=>{let{groupSetId:n,courseId:r}=t;delete e.byId[t.groupSetId],e.byCourseId[r]=e.byCourseId[r].filter(e=>e!==n)}),[(0,o.ok)(l.A.GROUPS_ADD)]:(e,t)=>{var n;let i=null!==(n=e.byId[t.groupSetId].groupCount)&&void 0!==n?n:0;return(0,r.Ay)(e,e=>{e.byId[t.groupSetId].groupCount=i+t.addedCourseGroupIds.length})},[(0,o.ok)(l.A.GROUPS_LOAD_BY_QUERY)]:(e,t)=>(0,r.Ay)(e,e=>{let n=Object.values(t.data.groups),r=[];n.forEach(e=>{e.groupSet&&(e.groupSet.permissions=e.permissions,r.push(e.groupSet))});let i=[...r,...Object.values(e.byId)];e.byId=(0,s.jD)(i)}),[(0,o.ok)(l.A.GROUP_DELETE_BATCH)]:(e,t)=>{var n,i;let o=t.groupSetId||(null===(i=null===(n=t.deletedGroups)||void 0===n?void 0:n[0])||void 0===i?void 0:i.groupSetId),s=e.byId[o];if(o&&s){let n=s.groupCount||0;return(0,r.Ay)(e,e=>{e.byId[o].groupCount=n-t.deletedGroups.length})}return e},[(0,o.ok)(l.A.GROUP_STUDENT_COUNT_LOAD)]:(e,t)=>(0,r.Ay)(e,e=>{e.byId[t.groupSetId]||(e.byId[t.groupSetId]={}),e.byId[t.groupSetId].studentCount=t.groupSetStudentCount})}),y=(0,o.vy)(c.status,{[d.g.GROUP_SETS_LOAD]:o.r1,[d.g.GROUP_SET_LOAD]:(e,t)=>{let n=e.loadingGroupSetIds.concat(t.groupSetId);return{...e,loadingGroupSetIds:n}},[(0,o.ok)(d.g.GROUP_SETS_LOAD)]:o.Zg,[(0,o.ok)(d.g.GROUP_SET_LOAD)]:E,[(0,o.fJ)(d.g.GROUP_SETS_LOAD)]:o.Nh,[(0,o.fJ)(d.g.GROUP_SET_LOAD)]:E,[(0,o.ok)(d.g.GROUP_SETS_LOAD_MORE)]:o.Zg,[l.A.GROUPS_LOAD]:(e,t)=>{let n=e.loadingGroupSetIds.concat(t.groupSetId);return{...e,loadingGroupSetIds:n}},[(0,o.ok)(l.A.GROUPS_LOAD)]:E,[(0,o.fJ)(l.A.GROUPS_LOAD)]:E}),f=(0,o.vy)(c.permissions,{[(0,o.ok)(d.g.GROUP_SETS_LOAD)]:(e,t)=>(0,r.Ay)(e,e=>({...e,...t.permissions})),[(0,o.fJ)(d.g.GROUP_SETS_LOAD)]:(e,t)=>({}),[(0,o.ok)(d.g.GET_GROUP_AND_SET_COUNT)]:(e,t)=>(0,r.Ay)(e,e=>({...e,...t.permissions})),[(0,o.fJ)(d.g.GET_GROUP_AND_SET_COUNT)]:(e,t)=>({})}),b=(0,o.vy)(c.paging,{[(0,o.ok)(d.g.GROUP_SETS_LOAD)]:(e,t)=>t.paging,[(0,o.ok)(d.g.GROUP_SETS_LOAD_MORE)]:(e,t)=>t.paging,[(0,o.ok)(d.g.GROUP_SET_ADD)]:(e,t)=>(0,r.Ay)(e,e=>{e.count+=1}),[(0,o.ok)(d.g.GROUP_SET_REMOVE)]:(e,t)=>(0,r.Ay)(e,e=>{e.count-=1}),[(0,o.ok)(d.g.GET_GROUP_AND_SET_COUNT)]:(e,t)=>t.paging,[(0,o.fJ)(d.g.GROUP_SETS_LOAD)]:(e,t)=>c.paging,[d.g.GROUP_WORKSPACE_RESET_COUNT]:(e,t)=>c.paging}),I=(0,o.vy)(c.totalGroupCount,{[(0,o.ok)(d.g.GET_GROUP_AND_SET_COUNT)]:(e,t)=>t.results.map(e=>e.groupCount).reduce((e,t)=>e+t,0),[(0,o.ok)(d.g.GROUP_SET_REMOVE)]:(e,t)=>e-t.groupCount,[(0,o.ok)(l.A.GROUPS_ADD)]:(e,t)=>e+t.addedCourseGroupIds.length,[(0,o.ok)(l.A.GROUPS_UPDATE)]:(e,t)=>e,[(0,o.ok)(l.A.GROUP_DELETE_BATCH)]:(e,t)=>{var n,r;return t.groupSetId||(null===(r=null===(n=t.deletedGroups)||void 0===n?void 0:n[0])||void 0===r?void 0:r.groupSetId)?e-t.deletedGroups.length:e},[d.g.GROUP_WORKSPACE_RESET_COUNT]:(e,t)=>c.totalGroupCount}),A=(0,o.vy)(c.lastGroupSetId,{[(0,o.ok)(d.g.GROUP_SET_ADD)]:(e,t)=>t.groupSet.id,[(0,o.ok)(d.g.GROUP_SET_MODIFY)]:(e,t)=>t.groupSet.id}),v=(0,o.vy)(c.ui,{[(0,o.ok)(d.g.GROUP_SET_ADD)]:(e,t)=>{let n=t.groupSet.id;return -1===e.newGroupSetIds.indexOf(n)?(0,r.Ay)(e,t=>{t.newGroupSetIds=[...e.newGroupSetIds,n]}):e},[(0,o.ok)(d.g.GROUP_SET_MODIFY)]:(e,t)=>{let n=t.groupSet.id;return -1===e.newGroupSetIds.indexOf(n)?(0,r.Ay)(e,t=>{t.newGroupSetIds=[...e.newGroupSetIds,n]}):e},[d.g.GROUP_SET_MARK_AS_OLD]:(e,t)=>(0,r.Ay)(e,n=>{n.newGroupSetIds=e.newGroupSetIds.filter(e=>e!==t.groupSetId)})}),S=(0,o.vy)(c.views,{[(0,o.ok)(d.g.GROUP_SET_ADD)]:(e,t)=>{let{courseId:n}=t;return e.byCourseId[n]?(0,r.Ay)(e,e=>{Object.keys(e.byCourseId[n]).forEach(t=>{e.byCourseId[n][t].isValid=!1})}):e},[(0,o.ok)(d.g.GROUP_SET_REMOVE)]:(e,t)=>{let{courseId:n}=t;return e.byCourseId[n]?(0,r.Ay)(e,e=>{Object.keys(e.byCourseId[n]).forEach(t=>{e.byCourseId[n][t].isValid=!1})}):e}}),_=(0,o.vy)(c,{[d.g.GROUP_SETS_LOAD_BY_QUERY]:(0,o.Dh)(p,m),[(0,o.ok)(d.g.GROUP_SETS_LOAD_BY_QUERY)]:(e,t)=>{let{data:n}=t;if(!n)return(0,o.Zg)(e,t);let{groupSets:r,paging:i}=n;return e=g(e,n),(0,o.lY)(e,t,{viewResolver:p,viewsPathResolver:m,paging:i,values:Object.keys(r.byId)})},[(0,o.fJ)(d.g.GROUP_SETS_LOAD_BY_QUERY)]:(0,o.To)(p,m)}),T=(0,o.HY)({groupSets:h,permissions:f,paging:b,status:y,totalGroupCount:I,lastGroupSetId:A,ui:v,views:S}),O=(0,o._1)(_,T,c),C={loadGroupSetsByQuery:e=>(0,o.VP)(d.g.GROUP_SETS_LOAD_BY_QUERY,async()=>{try{return{data:await u.SR(e),query:e}}catch(t){throw{err:t,query:e}}},{query:e}),loadGroupSets:(e,t,n=!1)=>(0,o.RA)(async(r,i)=>{if(!R.isLoading(i()))try{r((0,o.rc)(d.g.GROUP_SETS_LOAD));let i=await u.LA(e,t);r(n?(0,o.rc)((0,o.ok)(d.g.GROUP_SETS_LOAD_MORE),{...i,courseId:e}):(0,o.rc)((0,o.ok)(d.g.GROUP_SETS_LOAD),{...i,courseId:e}))}catch(e){r((0,o.rc)((0,o.fJ)(d.g.GROUP_SETS_LOAD),{err:e})),r((0,o.rc)((0,o.ok)(a.A.APP_ERROR),{error:e}))}}),loadGroupSetById:(e,t)=>(0,o.RA)(async(n,r)=>{if(!R.isLoading(r(),t))try{n((0,o.rc)(d.g.GROUP_SET_LOAD,{groupSetId:t}));let r=await u.ky(e,t);n((0,o.rc)((0,o.ok)(d.g.GROUP_SET_LOAD),{...r,groupSetId:t}))}catch(e){n((0,o.rc)((0,o.fJ)(d.g.GROUP_SET_LOAD),{groupSetId:t,err:e})),n((0,o.rc)((0,o.ok)(a.A.APP_ERROR),{error:e}))}}),saveGroupSet:(e,t)=>(0,o.VP)(t.id?d.g.GROUP_SET_MODIFY:d.g.GROUP_SET_ADD,async()=>{try{let n=t.id&&"permissions,groupCount,studentCount,hasAssociatedContent";return{groupSet:await u.ib(e,t,n),courseId:e}}catch(e){throw{groupSet:t,err:e}}},{groupSet:t}),removeGroupSet:(e,t)=>(0,o.VP)(d.g.GROUP_SET_REMOVE,async n=>{try{return await u.X4(e,t),{groupSetId:t,groupCount:R.getGroupsCountByGroupSetId(n(),t),courseId:e}}catch(e){throw{err:e}}}),getGroupAndSetCount:e=>(0,o.VP)(d.g.GET_GROUP_AND_SET_COUNT,async()=>{try{return{...await u.U7(e)}}catch(e){throw{err:e}}}),markAsOld:e=>(0,o.rc)(d.g.GROUP_SET_MARK_AS_OLD,{groupSetId:e}),reset:()=>(0,o.rc)(d.g.GROUP_WORKSPACE_RESET_COUNT)},R={getGroupsSetsByQuery:(e,t)=>{let{view:n}=p(e.groupWorkspace,t);return n?(n.values||[]).map(t=>e.groupWorkspace.groupSets.byId[t]).filter(e=>!!e):[]},getCourseGroupSetsViewStatusByQuery:(e,t)=>{let{view:n}=p(e.groupWorkspace,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getLastCreatedGroupSetId:e=>e.groupWorkspace.lastGroupSetId,getGroupSetById:(e,t)=>t&&e.groupWorkspace.groupSets.byId.hasOwnProperty(t)?e.groupWorkspace.groupSets.byId[t]:null,getGroupsCountByGroupSetId:(e,t)=>{var n,r;return t&&null!==(r=null===(n=e.groupWorkspace.groupSets.byId[t])||void 0===n?void 0:n.groupCount)&&void 0!==r?r:0},getTotalGroupSetCount:e=>e.groupWorkspace.paging&&e.groupWorkspace.paging.count,getTotalGroupCount:e=>e.groupWorkspace.totalGroupCount,isLoading:(e,t)=>t?-1!==e.groupWorkspace.status.loadingGroupSetIds.indexOf(t):e.groupWorkspace.status.isLoading,canCreate:e=>e.groupWorkspace.permissions.createGroups,isNew:(e,t)=>-1!==e.groupWorkspace.ui.newGroupSetIds.indexOf(t)}},274643:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={GROUP_SETS_LOAD:"group.sets.load",GROUP_SETS_LOAD_BY_QUERY:"group.sets.load.by.query",GROUP_SETS_LOAD_MORE:"group.sets.load.more",GROUP_SETS_SWITCH_SORT_CRITERIA:"group.sets.switch.sort.criteria",GROUP_SET_ADD:"group.set.add",GROUP_SET_MODIFY:"group.set.modify",GROUP_SET_REMOVE:"group.set.remove",GROUP_SET_MARK_AS_OLD:"group.set.mark.as.old",GROUP_SET_LOAD:"group.set.load",GET_COURSE_CONTEXT:"get.course.context",GET_GROUP_AND_SET_COUNT:"get.group.and.set.count",GET_GROUP_MEMBERSHIP_COUNT:"get.group.membership.count",GROUP_WORKSPACE_RESET_COUNT:"group.workspace.reset.count"}},379492:function(e,t,n){"use strict";n.d(t,{o1:function(){return f},Ff:function(){return y},Lt:function(){return I}});var r=n(645250),i=n(905898),o=n(800996),s=n(758247),a=n(968554);let l={COURSE_LOGS_LOAD:"course-logs.load",COURSE_LOGS_DELETE:"course-logs.delete",COURSE_LOGS_INVALIDATE:"course-logs.invalidate"};var u=n(139552),d=n(443873),c=n(732583),p=n(839781);let m=(e,t)=>{var n;if(!t)return{id:null,view:null};let i=e.views.byCourseId[t.courseId]||{},o=null!==(n=Object.keys(i).find(e=>{let n=i[e],o=r.isEqual(n.query.paging,t.paging),s=r.isEqual(n.query.queryParams,t.queryParams);return o&&s}))&&void 0!==n?n:null;return{id:o,view:o?i[o]:null}},g=e=>["views","byCourseId",e.courseId],E=(e,t)=>{let{view:n}=m(e.courseLogs,t);return!n||!n.isLoading&&!n.isValid},h=(e,t)=>e=(0,i.jM)(e,e=>{var n;let r=null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{};Object.keys(r).forEach(e=>{r[e].isValid=!1})}),y=(0,a.vy)({byCourseLogId:{},views:{byCourseId:{}}},{[l.COURSE_LOGS_LOAD]:(0,a.Dh)(m,g),[(0,a.ok)(l.COURSE_LOGS_LOAD)]:(e,t)=>{let{data:n}=t;n||(0,a.Zg)(e,t);let{logIds:r,logs:o,paging:s}=n;return e=(0,i.jM)(e,e=>{Object.keys(o).forEach(t=>{e.byCourseLogId[t]={...e.byCourseLogId[t],...o[t]}})}),(0,a.lY)(e,t,{viewResolver:m,viewsPathResolver:g,paging:s,values:r})},[(0,a.fJ)(l.COURSE_LOGS_LOAD)]:(0,a.To)(m,g),[l.COURSE_LOGS_DELETE]:(e,t)=>(0,i.jM)(e,e=>{let n={...e.byCourseLogId[t.logId].api,isDeleting:!0};e.byCourseLogId[t.logId].api=n}),[(0,a.ok)(l.COURSE_LOGS_DELETE)]:(e,t)=>h(e,t.courseId),[(0,a.fJ)(l.COURSE_LOGS_DELETE)]:(e,t)=>(e=(0,i.jM)(e,e=>{let n={...e.byCourseLogId[t.logId].api,isDeleting:!1};e.byCourseLogId[t.logId].api=n}),(0,a.Nh)(e,t)),[l.COURSE_LOGS_INVALIDATE]:(e,t)=>h(e,t.courseId)}),f={loadCourseLogsByQuery:e=>(0,a.RA)(async(t,n)=>{if(E(n(),e)){t((0,a.rc)(l.COURSE_LOGS_LOAD,{query:e}));try{let n=await (0,o.z)(e);t((0,a.rc)((0,a.ok)(l.COURSE_LOGS_LOAD),{query:e,data:n}))}catch(n){throw t((0,a.rc)((0,a.fJ)(l.COURSE_LOGS_LOAD),{query:e})),t((0,a.rc)((0,a.ok)(s.A.APP_ERROR),{error:n})),{error:n}}}}),deleteCourseLogByLogId:(e,t)=>(0,a.RA)(async n=>{n((0,a.rc)(l.COURSE_LOGS_DELETE,{courseId:t,logId:e}));try{await (0,o.Z)(e,t),n((0,a.rc)((0,a.ok)(l.COURSE_LOGS_DELETE),{courseId:t,logId:e}))}catch(r){throw n((0,a.rc)((0,a.fJ)(l.COURSE_LOGS_DELETE),{courseId:t,logId:e})),n((0,a.rc)((0,a.ok)(s.A.APP_ERROR),{error:r})),{error:r}}}),invalidateCourseLogViews:e=>(0,a.RA)(async t=>{t((0,a.rc)(l.COURSE_LOGS_INVALIDATE,{courseId:e}))})},b=(0,u.Ad)(d.UI,c.Y_)((e,t)=>{let{view:n}=m(e.courseLogs,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},e=>e),I={getCourseLogsByQuery:(0,p.n)((e,t)=>{let{view:n}=m(e.courseLogs,t);return n?(n.values||[]).map(t=>e.courseLogs.byCourseLogId[t]):[]},e=>e),getCourseLogViewStatusByQuery:b}},590503:function(e,t,n){"use strict";n.d(t,{Ff:function(){return U},Lt:function(){return B},o1:function(){return M}});var r=n(645250),i=n(905898),o=n(968554),s=n(318728),a=n(865337),l=n(95418),u=n(170228),d=n(437272),c=n(43375),p=n(502059),m=n(169921),g=n(758247),E=n(566416),h=n(808954),y=n(729113),f=n(842804),b=n(246206);function I(e){return!!e.sort&&0!==e.sort.length}let A=e=>null==e||Array.isArray(e)&&0===e.length,v=(e,t)=>{let{courseId:n}=t,i=e.views.byCourseId[n];return Object.keys(i).filter(e=>{var n;let o=i[e];return!!(!I(t)&&!I(o.query)||r.isEqual(o.query.sort,t.sort))&&((n=o.query).filter?t.filter?Array.from(new Set([...Object.keys(n.filter),...Object.keys(t.filter)])).every(e=>{let i=n.filter[e],o=t.filter[e];return!!(i===o||r.isEqual(i,o))||A(i)&&A(o)}):Object.values(n.filter).every(A):!t.filter||Object.values(t.filter).every(A))})},S=(e,t)=>{if(!t)return o.Vc;let n=e.views.byCourseId[t.courseId]||{},i=Object.keys(n).find(e=>{let i=n[e],o=r.isEqual(i.query.columnId,t.columnId),s=r.isEqual(i.query.paging,t.paging),a=r.isEqual(i.query.filter,t.filter),l=r.isEqual(i.query.sort,t.sort);return s&&l&&a&&o});return{id:i,view:i?n[i]:null}},_=e=>["views","byCourseId",e.courseId],T=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byUserId[t.userId]||{},r=Object.keys(n).find(e=>n[e].query.userId===t.userId);return{id:r,view:r?n[r]:null}},O=e=>["views","byUserId",e.userId],C=(e,t)=>{let{view:n}=S(e.courseMembership,t);return!n||!n.isLoading&&!n.isValid},R=(e,t,n=!0)=>{let r=e.courseMembership.byCourseMembershipId[t];return n?!(null==r?void 0:r.user):!r},L=(e,t,n,r=!0)=>{let i=Object.values(e.courseMembership.byCourseMembershipId).find(e=>e.courseId===t&&e.userId===n);return r?!(null==i?void 0:i.user):!i},D=e=>null==e,N=(e,t,n)=>{if(!n)return;let r={};Object.values(n).forEach(e=>{e.courseId&&(r[e.courseId]||(r[e.courseId]=[]),r[e.courseId].push(e))}),Object.keys(r).forEach(n=>{var i;if(!n||!(null===(i=e.views.byCourseId)||void 0===i?void 0:i[n]))return;let o=P(e,r[n]);k(t,n,o)})},P=(e,t)=>t.reduce((t,n)=>{var r,i,o,s;let a=e.byCourseMembershipId[n.id];if(!a||!n)return t;let l=!D(n.dueDateExceptionType)&&!D(a.dueDateExceptionType)&&n.dueDateExceptionType!==a.dueDateExceptionType,u=!D(n.isAvailable)&&!D(a.isAvailable)&&n.isAvailable!==a.isAvailable,d=!D(n.role)&&!D(a.role)&&n.role!==a.role||!D(null===(r=n.user)||void 0===r?void 0:r.systemRole)&&!D(null===(i=a.user)||void 0===i?void 0:i.systemRole)&&(null===(o=n.user)||void 0===o?void 0:o.systemRole)!==(null===(s=a.user)||void 0===s?void 0:s.systemRole),c=!D(n.timeLimitExceptionType)&&!D(a.timeLimitExceptionType)&&n.timeLimitExceptionType!==a.timeLimitExceptionType,p=a.displayOrder!==n.displayOrder;return{accommodationChanged:t.accommodationChanged||l,availabilityChanged:t.availabilityChanged||u,roleChanged:t.roleChanged||d,timeLimitExceptionChanged:t.timeLimitExceptionChanged||c,displayOrderChanged:t.displayOrderChanged||p}},{}),k=(e,t,n)=>{var r;let i=n.accommodationChanged||n.availabilityChanged||n.roleChanged||n.timeLimitExceptionChanged||n.displayOrderChanged||n.gradesChanged||n.groupsChanged||n.studentPreviewStatusChanged||n.studentAttemptStatusChanged,o=null===(r=e.views.byCourseId)||void 0===r?void 0:r[t];i&&o&&Object.values(o).forEach(e=>{var t,r;if(!e.isValid)return;let i=null===(t=e.query)||void 0===t?void 0:t.filter,o=i&&(0,y.Q2)(i)?i:void 0,a=(null==o?void 0:o.hasDueDateExceptionOnly)&&n.accommodationChanged,l=n.availabilityChanged,u=(null==o?void 0:o.roleBucket)&&n.roleChanged,d=(null==o?void 0:o.hasTimeLimitExceptionOnly)&&n.timeLimitExceptionChanged,c=n.displayOrderChanged,p=n.gradesChanged&&(null===(r=e.query.sort)||void 0===r?void 0:r.some(e=>e.field===s.i8N.Grade)),m=(0,y.iU)(i)?i.studentStatusFilter&&n.studentAttemptStatusChanged:void 0,g=(0,y.iU)(i)&&i.gradingStatusFilter!==s.z_c.AllStatuses&&n.gradesChanged;(l||u||a||d||c||p||m||g||n.groupsChanged||n.studentPreviewStatusChanged)&&(e.isValid=!1)})},w=(e,t)=>{t&&Object.keys(t).forEach(n=>{var r,i;e.byCourseMembershipId[n]={...e.byCourseMembershipId[n],...t[n],displayOrder:t[n].displayOrder,assignedBlogEntries:(null===(r=e.byCourseMembershipId[n])||void 0===r?void 0:r.assignedBlogEntries)||[],ui:{...null===(i=e.byCourseMembershipId[n])||void 0===i?void 0:i.ui}}})},U=(0,o.vy)({byCourseMembershipId:{},permissions:{byCourseId:{}},paging:null,isLoading:!1,views:{byCourseId:{},byUserId:{}}},{[(0,o.ok)(a.g.BLOG_ENTRIES_LOAD)]:(e,t)=>(0,i.Ay)(e,e=>{e.byCourseMembershipId[t.query.assignedUserId]||(e.byCourseMembershipId[t.query.assignedUserId]={}),e.byCourseMembershipId[t.query.assignedUserId].assignedBlogEntries=Object.keys(t.data.byId)}),[(0,o.ok)(a.g.BLOG_ENTRY_ADD)]:(e,t)=>{let{assignedUserId:n}=t,r=e.byCourseMembershipId[n];if(r&&t&&t.byId){let o=[...Object.keys(t.byId),...r.assignedBlogEntries];return(0,i.Ay)(e,e=>{e.byCourseMembershipId[n]||(e.byCourseMembershipId[n]={}),e.byCourseMembershipId[n].assignedBlogEntries=o})}return e},[(0,o.ok)(a.g.BLOG_ENTRY_REMOVE)]:(e,t)=>{let n=e.byCourseMembershipId[t.assignedUserId];if(n){let o=r.filter(n.assignedBlogEntries,e=>e!==t.entryId);return(0,i.Ay)(e,e=>{e.byCourseMembershipId[t.assignedUserId]||(e.byCourseMembershipId[t.assignedUserId]={}),e.byCourseMembershipId[t.assignedUserId].assignedBlogEntries=o})}return e},[(0,o.ok)(p.gK.CONTENTS_REVIEW_STATES_USERS_GET)]:(e,t)=>(0,i.Ay)(e,e=>{void 0===t.query.fields&&t.data.results.forEach(t=>{e.byCourseMembershipId[t.courseMembership.id]=t.courseMembership})}),[(0,o.ok)(u.g.GRADEBOOK_GRADES_LOAD)]:(e,t)=>{let n=new Set(t.grades.map(e=>e.courseId));return n.size?(0,i.Ay)(e,e=>{n.forEach(t=>{k(e,t,{gradesChanged:!0})})}):e},[(0,o.ok)(u.g.GRADEBOOK_GRADES_INVALIDATE)]:(e,t)=>{let n=new Set(t.grades.map(e=>e.courseId));return n.size?(0,i.Ay)(e,e=>{n.forEach(t=>{k(e,t,{gradesChanged:!0})})}):e},[(0,o.ok)(u.g.GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID)]:(e,t)=>{var n;return(null===(n=null==t?void 0:t.grade)||void 0===n?void 0:n.courseId)?(0,i.Ay)(e,e=>{k(e,t.grade.courseId,{gradesChanged:!0})}):e},[(0,o.ok)(b.g.GRADED_QUESTION_ATTEMPT_PERSIST)]:(e,t)=>{let{courseId:n}=t.data.dependents;return(0,i.Ay)(e,e=>{k(e,n,{gradesChanged:!0})})},[(0,o.ok)(b.g.GRADED_QUESTION_ATTEMPT_FOR_GROUP_PERSIST)]:(e,t)=>{let{courseId:n}=t.data.dependents;return(0,i.Ay)(e,e=>{k(e,n,{gradesChanged:!0})})},[(0,o.ok)(E.g.COURSE_MEMBERSHIP_LOAD)]:(e,t)=>{let{data:n}=t;return n?(0,i.Ay)(e,t=>{let r={[n.id]:n};N(e,t,r),w(t,r)}):(0,o.Zg)(e,t)},[(0,o.ok)(E.g.COURSE_MEMBERSHIP_SET)]:(e,t)=>{let{data:n}=t;return(0,i.Ay)(e,t=>{let r={[n.id]:n};N(e,t,r),w(t,r)})},[E.g.COURSE_MEMBERSHIPS_LOAD]:(0,o.Dh)(S,_),[(0,o.ok)(E.g.COURSE_MEMBERSHIPS_LOAD)]:(e,t)=>{let{data:n}=t;if(!n)return(0,o.Zg)(e,t);let{membershipIds:r,paging:s,courseId:a,permissions:l}=n;return e=(0,i.Ay)(e,t=>{k(t,a,P(e,Object.values(n.byCourseMembershipId))),w(t,n.byCourseMembershipId),t.permissions.byCourseId[a]=l}),(0,o.lY)(e,t,{viewResolver:S,viewsPathResolver:_,paging:s,values:r})},[(0,o.fJ)(E.g.COURSE_MEMBERSHIPS_LOAD)]:(0,o.To)(S,_),[E.g.USER_MEMBERSHIPS_LOAD]:(0,o.Dh)(T,O),[(0,o.ok)(E.g.USER_MEMBERSHIPS_LOAD)]:(e,t)=>{let{data:n}=t;if(!n)return(0,o.Zg)(e,t);let{membershipIds:r,paging:s}=n;return e=(0,i.Ay)(e,t=>{N(e,t,n.byMembershipId),w(t,n.byMembershipId)}),(0,o.lY)(e,t,{viewResolver:T,viewsPathResolver:O,paging:s,values:r})},[(0,o.fJ)(E.g.USER_MEMBERSHIPS_LOAD)]:(0,o.To)(T,O),[(0,o.fJ)(E.g.COURSE_MEMBERSHIP_USERS_LOAD)]:(0,o.To)(S,_),[E.g.COURSE_MEMBERSHIP_USERS_LOAD]:(0,o.Dh)(S,_),[(0,o.ok)(E.g.COURSE_MEMBERSHIP_USERS_LOAD)]:(e,t)=>{let{data:n}=t;if(!n)return(0,o.Zg)(e,t);let{paging:r,permissions:i,userIds:s}=n;return(0,o.lY)(e,t,{viewResolver:S,viewsPathResolver:_,paging:r,permissions:i,values:s})},[(0,o.ok)(l.g.STUDENT_PREVIEW_EXIT)]:(e,t)=>{let{courseId:n}=t.data;return(0,i.Ay)(e,e=>{n&&k(e,t.data.courseId,{studentPreviewStatusChanged:!0})})},[(0,o.ok)(c.A.REMOVE_GROUP_MEMBERSHIP)]:(e,t)=>{let{courseId:n}=t;return(0,i.Ay)(e,e=>{k(e,n,{groupsChanged:!0})})},[(0,o.ok)(c.A.GROUPS_UPDATE)]:(e,t)=>{let{courseId:n}=t;return(0,i.Ay)(e,e=>{k(e,n,{groupsChanged:!0})})},[(0,o.ok)(h.g.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>{let{courseId:n,studentAttemptStatusChanged:r}=t;return(0,i.Ay)(e,e=>{r&&k(e,n,{studentAttemptStatusChanged:!0})})},[(0,o.ok)(d.g.GRADEBOOK_GROUP_ATTEMPT_UPDATE)]:(e,t)=>{let{groupAttempt:n,groupAttemptStatusChanged:r}=t;return(0,i.Ay)(e,e=>{r&&k(e,n.courseId,{studentAttemptStatusChanged:!0})})},[(0,o.ok)(h.g.GRADEBOOK_ATTEMPT_DELETE)]:(e,t)=>{let n=t.attempt.courseId;return(0,i.Ay)(e,e=>{k(e,n,{studentAttemptStatusChanged:!0,gradesChanged:!0})})},[(0,o.ok)(d.g.GRADEBOOK_GROUP_ATTEMPT_DELETE)]:(e,t)=>{let n=t.groupAttempt.courseId;return(0,i.Ay)(e,e=>{k(e,n,{studentAttemptStatusChanged:!0,gradesChanged:!0})})},[(0,o.ok)(f.g.QUESTION_PERSIST)]:(e,t)=>{let{courseId:n}=t.question;return(0,i.Ay)(e,e=>{n&&k(e,n,{studentAttemptStatusChanged:!0,gradesChanged:!0})})}}),M={loadCourseMembershipsByCourseId:e=>(0,o.RA)(async(t,n)=>{let{courseId:r,limit:i,offset:o,roleBucket:s}=e,a={courseId:r,paging:{...i?{limit:i}:{},...o?{offset:o}:{}},sort:null,filter:{...s?{roleBucket:[s]}:{}}};return t(M.loadCourseMembershipsByQuery(a))}),loadCourseMembershipsByQuery:e=>(0,o.RA)(async(t,n)=>{if(C(n(),e)){t((0,o.rc)(E.g.COURSE_MEMBERSHIPS_LOAD,{query:e}));try{let n=await (0,m.TE)(e);t((0,o.rc)((0,o.ok)(E.g.COURSE_MEMBERSHIPS_LOAD),{data:n,query:e}))}catch(n){throw t((0,o.rc)((0,o.fJ)(E.g.COURSE_MEMBERSHIPS_LOAD),{query:e})),t((0,o.rc)((0,o.ok)(g.A.APP_ERROR),{error:n})),{err:n}}}}),loadCourseMembershipUserIdsByCourseIdWithFields:e=>(0,o.RA)(async t=>{var n,r;let{courseId:i,columnId:s,filter:a}=e,l=(0,y.Q2)(a)?a:void 0,u=(0,y.XY)(a)?a:void 0,d=(0,y.se)(a)?a:void 0,c=(0,y.iU)(a)?a:void 0,p={courseId:i,filter:{...(null==l?void 0:l.roleBucket)?{roleBucket:[l.roleBucket]}:{},...(null==u?void 0:u.fields)?{fields:u.fields}:{},...c?{...c}:{},...(null==d?void 0:d.searchString)?{searchString:d.searchString}:{},...(null==l?void 0:l.membershipAvailable)?{membershipAvailable:[l.membershipAvailable]}:{}},columnId:s};t((0,o.rc)(E.g.COURSE_MEMBERSHIP_USERS_LOAD,{query:p}));try{let e;let i=[],s=0;do{let t={...p,paging:{limit:5e3,offset:s}},o=await (0,m.J5)(t),a=o.paging;e=null!==(n=null==a?void 0:a.nextPage)&&void 0!==n?n:"",i.push(o),s=(null!==(r=null==a?void 0:a.offset)&&void 0!==r?r:0)+5e3}while(e);let a=(0,m.eP)(i,p);t((0,o.rc)((0,o.ok)(E.g.COURSE_MEMBERSHIP_USERS_LOAD),{data:a,query:p}))}catch(e){throw t((0,o.rc)((0,o.fJ)(E.g.COURSE_MEMBERSHIP_USERS_LOAD),{query:p})),t((0,o.rc)((0,o.ok)(g.A.APP_ERROR),{error:e})),{err:e}}}),loadCourseMembershipByMemberId:(e,t,n=!0)=>(0,o.RA)(async(r,i)=>{if(!R(i(),t,n))return B.getCourseMembershipByMembershipId(i(),t);try{r((0,o.rc)(E.g.COURSE_MEMBERSHIP_LOAD,{courseId:e}));let i=await (0,m.OX)(e,t,n);return r((0,o.rc)((0,o.ok)(E.g.COURSE_MEMBERSHIP_LOAD),{data:i,courseId:e})),i}catch(e){throw r((0,o.rc)((0,o.ok)(g.A.APP_ERROR),{error:e})),{err:e}}}),loadCourseMembershipByUserId:(e,t,n=!0)=>(0,o.RA)(async(r,i)=>{if(!L(i(),e,t,n))return B.getCourseMembershipByUserId(i(),e,t);try{r((0,o.rc)(E.g.COURSE_MEMBERSHIP_LOAD,{courseId:e}));let n=await (0,m.nV)(e,t);return r((0,o.rc)((0,o.ok)(E.g.COURSE_MEMBERSHIP_LOAD),{data:n,courseId:e})),n}catch(e){if(e instanceof s.om3&&404===e.body.status)throw{err:e};throw r((0,o.rc)((0,o.ok)(g.A.APP_ERROR),{error:e})),{err:e}}}),setCourseMembershipsInStore:(e,t)=>{let n=(0,m.Tj)(t,e);return(0,o.rc)((0,o.ok)(E.g.COURSE_MEMBERSHIPS_LOAD),{data:n,query:e})},setUserMembershipsInStore:(e,t)=>{let n=(0,m.T2)(t,e);return(0,o.rc)((0,o.ok)(E.g.USER_MEMBERSHIPS_LOAD),{data:n,query:e})},setMembershipInStore:e=>(0,o.RA)(async t=>{t((0,o.rc)((0,o.ok)(E.g.COURSE_MEMBERSHIP_SET),{data:e}))})},B={getCourseMembershipsByQuery:(e,t)=>{let{view:n}=S(e.courseMembership,t);return n?(n.values||[]).map(t=>e.courseMembership.byCourseMembershipId[t]):[]},getCourseMembershipsWithUsersByQuery:(e,t)=>B.getCourseMembershipsByQuery(e,t).map(t=>{let n=B.getUserFromMembershipId(e,t.id);return{...t,user:n}}),getCourseMembershipsByCourseId:(e,t,n,r,i)=>{let o={courseId:t,paging:{...r?{limit:r}:{},...i?{offset:i}:{}},sort:null,filter:{...n?{roleBucket:[n]}:{}}};return B.getCourseMembershipsByQuery(e,o)},getCourseMembershipUserIdsByCourseId:(e,t)=>{var n;let{courseId:r,columnId:i,filter:o}=t,s=(0,y.Q2)(o)?o:void 0,a=(0,y.XY)(o)?o:void 0,l=(0,y.se)(o)?o:void 0,u=(0,y.iU)(o)?o:void 0,d={courseId:r,filter:{...(null==s?void 0:s.roleBucket)?{roleBucket:[s.roleBucket]}:{},...(null==a?void 0:a.fields)?{fields:a.fields}:{},...u?{...u}:{},...(null==l?void 0:l.searchString)?{searchString:l.searchString}:{},...(null==s?void 0:s.membershipAvailable)?{membershipAvailable:[s.membershipAvailable]}:{}},columnId:i},{view:c}=S(e.courseMembership,d);return c?null!==(n=c.values)&&void 0!==n?n:[]:null},isLoading:(e,t)=>{let{view:n}=S(e.courseMembership,t);return n?n.isLoading:e.courseMembership.isLoading},getCourseMembershipViewStatusByQuery:(e,t)=>{let{view:n}=S(e.courseMembership,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},getCourseMembershipViewByQuery:(e,t)=>{let{view:n}=S(e.courseMembership,t);return n},getCourseMembershipByMembershipId:(e,t)=>e.courseMembership.byCourseMembershipId[t],getCourseMembershipsByMembershipIds:(e,t)=>t.map(t=>e.courseMembership.byCourseMembershipId[t]),getUserFromMembershipId:(e,t)=>{let n=e.courseMembership.byCourseMembershipId[t];return n?n.user?n.user:n.userId?e.user.byId[n.userId]:void 0:void 0},getUsersFromMembershipIds:(e,t)=>t.map(t=>B.getUserFromMembershipId(e,t)),getMembershipPermissions:(e,t)=>e.courseMembership.permissions.byCourseId[t],getCourseMembershipsByUserIds:(e,t,n)=>n.map(n=>r.find(e.courseMembership.byCourseMembershipId,e=>t===e.courseId&&n===e.userId)),getCourseMembershipByUserId:(e,t,n)=>Object.values(e.courseMembership.byCourseMembershipId).find(e=>t===e.courseId&&n===e.userId),getLatestViewWithMembershipId:(e,t,n)=>{let{courseId:r}=n;if(!(t in e.courseMembership.byCourseMembershipId)||!(r in e.courseMembership.views.byCourseId))return null;let i=v(e.courseMembership,n).map(n=>{var i,o,s;let a=e.courseMembership.views.byCourseId[r][n];if(a.isLoading||!a.isValid)return{viewId:n,indexInView:-1,indexInCollection:-1,lastFetched:-1};let l=null!==(i=a.values.indexOf(t))&&void 0!==i?i:-1,u={viewId:n,indexInView:l,indexInCollection:l,lastFetched:a.lastFetched};return l<0||(u.indexInCollection=(null!==(s=null===(o=a.paging)||void 0===o?void 0:o.offset)&&void 0!==s?s:0)+l),u}).filter(e=>e.indexInView>-1);return 0===i.length?null:i.reduce((e,t)=>e.lastFetched>t.lastFetched?e:t,i[0])}}},566416:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={COURSE_MEMBERSHIPS_LOAD:"course.memberships.load",USER_MEMBERSHIPS_LOAD:"user.memberships.load",COURSE_MEMBERSHIP_SET:"course.membership.set",COURSE_MEMBERSHIP_LOAD:"course.membership.load",COURSE_MEMBERSHIP_USERS_LOAD:"course.membership.users.load"}},746404:function(e,t,n){"use strict";n.d(t,{Ff:function(){return u},Lt:function(){return c},o1:function(){return d}});var r=n(905898),i=n(467338),o=n(968554),s=n(12679);let a={totalCount:0,unreadCount:0},l={courseMessageCount:{...a},isLoading:!1,isValid:!1},u=(0,o.vy)({counts:{overall:{totalCount:0,unreadCount:0},byCourseId:{}},isLoading:!1,courseMessageOption:{byCourseId:{}}},{[s.g.COURSE_MESSAGE_COUNT_LOAD_ALL]:o.r1,[(0,o.ok)(s.g.COURSE_MESSAGE_COUNT_LOAD_ALL)]:(e,t)=>{if(!(null==t?void 0:t.count))return(0,o.Zg)(e,t);let n=(0,r.Ay)(e,e=>{e.counts.overall=t.count});return(0,o.Zg)(n,t)},[(0,o.fJ)(s.g.COURSE_MESSAGE_COUNT_LOAD_ALL)]:o.Nh,[s.g.COURSE_MESSAGE_COUNT_LOAD_SINGLE]:(e,t)=>{let{courseId:n}=t;return(0,r.Ay)(e,e=>{e.counts.byCourseId[n]?e.counts.byCourseId[n].isLoading=!0:e.counts.byCourseId[n]={...l,isLoading:!0}})},[(0,o.ok)(s.g.COURSE_MESSAGE_COUNT_LOAD_SINGLE)]:(e,t)=>{let{courseId:n,courseMessageCount:i}=t;return n?i?(0,r.Ay)(e,e=>{e.counts.byCourseId[n]={...l,courseMessageCount:i,isValid:!0}}):(0,r.Ay)(e,e=>{e.counts.byCourseId[n]={...l,isValid:!0}}):(0,o.Zg)(e,t)},[(0,o.fJ)(s.g.COURSE_MESSAGE_COUNT_LOAD_SINGLE)]:(e,t)=>{let{courseId:n}=t;return(0,r.Ay)(e,e=>{e.counts.byCourseId[n]?(e.counts.byCourseId[n].isLoading=!1,e.counts.byCourseId[n].isValid=!1):e.counts.byCourseId[n]={...l}})},[(0,o.ok)(s.g.COURSE_MESSAGE_OPTION_LOAD)]:(e,t)=>{let{courseId:n,courseMessageOption:i}=t;return n&&i?(0,r.Ay)(e,e=>{e.courseMessageOption.byCourseId[n]={courseMessageOption:i}}):(0,o.Zg)(e,t)},[(0,o.fJ)(s.g.COURSE_MESSAGE_OPTION_LOAD)]:(e,t)=>(0,o.Nh)(e,t,{}),[(0,o.ok)(s.g.COURSE_MESSAGE_OPTION_UPDATE)]:(e,t)=>{let{courseId:n,courseMessageOption:i}=t;return(0,r.Ay)(e,e=>{e.courseMessageOption.byCourseId[n]={courseMessageOption:i}})},[(0,o.ok)(s.g.COURSE_MESSAGE_COUNT_UPDATE_SINGLE)]:(e,t)=>(0,r.Ay)(e,e=>{var n,r;let i=null!==(n=e.counts.byCourseId[t.courseId])&&void 0!==n?n:{...l},o=null!==(r=i.courseMessageCount)&&void 0!==r?r:{...a};o.unreadCount>0&&(o.unreadCount=o.unreadCount-t.readCount),i.courseMessageCount=o,e.counts.byCourseId[t.courseId]=i})}),d={loadOverallCourseMessageCount:e=>(0,o.VP)(s.g.COURSE_MESSAGE_COUNT_LOAD_ALL,async()=>{try{return{count:await i.l1(e)}}catch(e){throw{err:e}}}),loadCourseMessageCount:e=>(0,o.VP)(s.g.COURSE_MESSAGE_COUNT_LOAD_SINGLE,async()=>({courseMessageCount:await i.yi(e),courseId:e})),loadCourseMessageOption:e=>(0,o.VP)(s.g.COURSE_MESSAGE_OPTION_LOAD,async()=>({courseMessageOption:await i.pp(e),courseId:e})),setCourseMessageOption:(e,t)=>(0,o.VP)(s.g.COURSE_MESSAGE_OPTION_UPDATE,async()=>({courseMessageOption:await i.wE(e,t),courseId:e})),updateCourseMessageCount:(e,t)=>(0,o.VP)(s.g.COURSE_MESSAGE_COUNT_UPDATE_SINGLE,async()=>({readCount:t,courseId:e}))},c={getOverallUnreadMessageCount:e=>{var t,n,r,i;return null!==(i=null===(r=null===(n=null===(t=e.courseMessage)||void 0===t?void 0:t.counts)||void 0===n?void 0:n.overall)||void 0===r?void 0:r.unreadCount)&&void 0!==i?i:0},getCourseUnreadMessageCount:(e,t)=>{var n,r,i;let o=null===(r=null===(n=e.courseMessage)||void 0===n?void 0:n.counts)||void 0===r?void 0:r.byCourseId[t];return null!==(i=null==o?void 0:o.courseMessageCount)&&void 0!==i?i:{...a}},getCourseMessageOption:(e,t)=>{var n,r;let i=null===(r=null===(n=e.courseMessage)||void 0===n?void 0:n.courseMessageOption)||void 0===r?void 0:r.byCourseId[t];if(i)return i.courseMessageOption}}},12679:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={COURSE_MESSAGE_COUNT_LOAD_ALL:"course.message.count.load.all",COURSE_MESSAGE_COUNT_LOAD_SINGLE:"course.message.count.load.single",COURSE_MESSAGE_COUNT_UPDATE_SINGLE:"course.message.count.update.single",COURSE_MESSAGE_OPTION_LOAD:"course.message.option.load",COURSE_MESSAGE_OPTION_UPDATE:"course.message.option.update"}},596269:function(e,t,n){"use strict";n.d(t,{Ff:function(){return u},Lt:function(){return c},o1:function(){return d}});var r=n(905898),i=n(196973),o=n(968554),s=n(449454),a=n(12679);let l={},u=(0,o.vy)({courses:l,paging:null,isLoading:!1,isValid:!0,canFetchCourseMessagesSummaries:!0},{[s.g.COURSE_MESSAGE_SUMMARIES_LOAD]:o.r1,[(0,o.ok)(s.g.COURSE_MESSAGE_SUMMARIES_LOAD)]:(e,t)=>{let n=(0,r.Ay)(e,n=>{var r;n.courses=(null===(r=t.paging)||void 0===r?void 0:r.offset)>0?{...e.courses,...t.courses}:t.courses,n.paging=t.paging,n.isValid=!0,n.canFetchCourseMessagesSummaries=Object.keys(t.courses).length>=s.N});return(0,o.Zg)(n,t)},[(0,o.fJ)(s.g.COURSE_MESSAGE_SUMMARIES_LOAD)]:(e,t)=>(0,o.Nh)(e,t,{courses:l,paging:null}),[s.g.COURSE_MESSAGE_SUMMARIES_INVALIDATE]:e=>(0,r.Ay)(e,e=>{e.isValid=!1}),[(0,o.ok)(a.g.COURSE_MESSAGE_COUNT_LOAD_SINGLE)]:(e,t)=>e.courses[t.courseId]?(0,r.Ay)(e,e=>{e.courses[t.courseId].numUnreadMessages=t.courseMessageCount.unreadCount}):e,[(0,o.ok)(a.g.COURSE_MESSAGE_COUNT_UPDATE_SINGLE)]:(e,t)=>e.courses[t.courseId]?(0,r.Ay)(e,e=>{let{numUnreadMessages:n}=e.courses[t.courseId];n>0&&(e.courses[t.courseId].numUnreadMessages=n-t.readCount)}):e}),d={loadCourseMessageSummaries:e=>(0,o.VP)(s.g.COURSE_MESSAGE_SUMMARIES_LOAD,async()=>{let t=null!=e?e:{offset:0,limit:s.N};return await (0,i.p)(t)}),invalidateCourseMessageSummaries:()=>(0,o.rc)(s.g.COURSE_MESSAGE_SUMMARIES_INVALIDATE)},c={getCourseMessageSummaries:e=>e.courseMessageSummary.courses,getCourseMessageSummariesCount:e=>{var t;return(null===(t=e.courseMessageSummary)||void 0===t?void 0:t.courses)?Object.keys(e.courseMessageSummary.courses).length:0},getCanFetchCourseMessageSummaries:e=>e.courseMessageSummary.canFetchCourseMessagesSummaries,isLoadingCourseMessageSummaries:e=>e.courseMessageSummary.isLoading,isValidCourseMessageSummaries:e=>e.courseMessageSummary.isValid}},449454:function(e,t,n){"use strict";n.d(t,{N:function(){return r},g:function(){return i}});let r=25,i={COURSE_MESSAGE_SUMMARIES_LOAD:"course.message.summaries.load",COURSE_MESSAGE_SUMMARIES_INVALIDATE:"course.message.summaries.invalidate"}},166360:function(e,t,n){"use strict";n.d(t,{o1:function(){return p},Ff:function(){return c},Lt:function(){return m}});var r=n(905898),i=n(645250),o=n(318728),s=n(968554),a=n(776601);let l="course-preference.load",u="course-preference.persist",d="course-preference.delete",c=(0,s.vy)({byCourseId:{},isLoading:!1},{[l]:s.r1,[(0,s.ok)(l)]:(e,t)=>{let{courseId:n}=t,{coursePreference:o}=t,a=i.get(e,["byCourseId",n],{});o={...o,api:{isUpdating:!1,isDeleting:!1},ui:i.get(a,[o.key,"ui"])};let l=(0,r.jM)(e,e=>{e.byCourseId[n]||(e.byCourseId[n]={}),e.byCourseId[n][o.key]=o});return(0,s.Zg)(l,t)},[(0,s.cw)(l)]:s.Zg,[(0,s.fJ)(l)]:s.Nh,[u]:(e,t)=>(0,r.jM)(e,e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={}),e.byCourseId[t.courseId][t.nextCoursePreference.key]||(e.byCourseId[t.courseId][t.nextCoursePreference.key]={}),e.byCourseId[t.courseId][t.nextCoursePreference.key].api||(e.byCourseId[t.courseId][t.nextCoursePreference.key].api={}),e.byCourseId[t.courseId][t.nextCoursePreference.key].api.isUpdating=!0}),[(0,s.ok)(u)]:(e,t)=>{let{courseId:n}=t,{coursePreference:o}=t,s=i.get(e,["byCourseId",n],{});return o={...o,api:{...i.get(s,[o.key,"api"]),isUpdating:!1},ui:i.get(s,[o.key,"ui"])},(0,r.jM)(e,e=>{e.byCourseId[n]||(e.byCourseId[n]={}),e.byCourseId[n][o.key]=o})},[(0,s.fJ)(u)]:(e,t)=>(0,r.jM)(e,e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={}),e.byCourseId[t.courseId][t.nextCoursePreference.key]||(e.byCourseId[t.courseId][t.nextCoursePreference.key]={}),e.byCourseId[t.courseId][t.nextCoursePreference.key].api||(e.byCourseId[t.courseId][t.nextCoursePreference.key].api={}),e.byCourseId[t.courseId][t.nextCoursePreference.key].api.isUpdating=!1}),[d]:(e,t)=>(0,r.jM)(e,e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={}),e.byCourseId[t.courseId][t.coursePreferenceKey]||(e.byCourseId[t.courseId][t.coursePreferenceKey]={}),e.byCourseId[t.courseId][t.coursePreferenceKey].api||(e.byCourseId[t.courseId][t.coursePreferenceKey].api={}),e.byCourseId[t.courseId][t.coursePreferenceKey].api.isDeleting=!0}),[(0,s.ok)(d)]:(e,t)=>{let{courseId:n,coursePreferenceKey:o}=t,s=i.get(e,["byCourseId",n],{});return s=(0,r.jM)(s,e=>{delete e[o]}),(0,r.jM)(e,e=>{e.byCourseId[n]=s})},[(0,s.fJ)(d)]:(e,t)=>{let n=(0,r.jM)(e,e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={}),e.byCourseId[t.courseId][t.coursePreferenceKey]||(e.byCourseId[t.courseId][t.coursePreferenceKey]={}),e.byCourseId[t.courseId][t.coursePreferenceKey].api||(e.byCourseId[t.courseId][t.coursePreferenceKey].api={}),e.byCourseId[t.courseId][t.coursePreferenceKey].api.isDeleting=!1});return(0,s.Nh)(n,t)}}),p={loadCoursePreference:e=>(0,s.VP)(l,t=>{var n;return t(),(0,a.rM)(e).then(t=>({coursePreference:t,courseId:e.courseId})).catch(e=>{throw{err:e}})},null,[o.t3V.NotFound]),persistCoursePreference:(e,t)=>(0,s.VP)(u,()=>(0,a.PY)(e,{courseId:t}).then(e=>({coursePreference:e,courseId:t})).catch(e=>{throw{err:e}}),{nextCoursePreference:e,courseId:t}),deleteCoursePreference:e=>(0,s.VP)(d,()=>(0,a.M0)(e).then(()=>({coursePreferenceKey:e.key,courseId:e.courseId})).catch(e=>{throw{err:e}}),{coursePreferenceKey:e.key,courseId:e.courseId})},m={getCoursePreferenceByKeyAndCourseId:(e,t,n)=>{var r,i,o;return null===(o=null===(i=null===(r=null==e?void 0:e.coursePreference)||void 0===r?void 0:r.byCourseId)||void 0===i?void 0:i[n])||void 0===o?void 0:o[t]},isPreferenceLoading:e=>e.coursePreference.isLoading}},455494:function(e,t,n){"use strict";n.d(t,{o1:function(){return p},Ff:function(){return c},Lt:function(){return m}});var r=n(968554),i=n(744756),o=n(905898),s=n(758247),a=n(352290);let l={COURSE_PROGRESS_CONFIGURATION_LOAD:"course-progress.configuration.load",COURSE_PROGRESS_CONFIGURATION_PERSIST:"course-progress.configuration.persist",COURSE_PROGRESS_CONFIGURATION_INVALIDATE:"course-progress.configuration.invalidate"},u={courseProgressConfiguration:void 0,isLoading:!1,isValid:!1,hasError:!1},d=(e,t)=>(0,o.Ay)(e,e=>{e.courseProgressConfiguration.byCourseId[t]?e.courseProgressConfiguration.byCourseId[t].isValid=!1:e.courseProgressConfiguration.byCourseId[t]={...u}}),c=(0,r.vy)({courseProgressConfiguration:{byCourseId:{}}},{[l.COURSE_PROGRESS_CONFIGURATION_LOAD]:(e,t)=>{let{courseId:n}=t;return(0,o.Ay)(e,e=>{e.courseProgressConfiguration.byCourseId[n]?e.courseProgressConfiguration.byCourseId[n].isLoading=!0:e.courseProgressConfiguration.byCourseId[n]={...u,isLoading:!0}})},[(0,r.ok)(l.COURSE_PROGRESS_CONFIGURATION_LOAD)]:(e,t)=>{let{courseId:n,courseProgressConfiguration:r}=t;return(0,o.Ay)(e,e=>{e.courseProgressConfiguration.byCourseId[n]={...u,courseProgressConfiguration:r,isValid:!0}})},[(0,r.fJ)(l.COURSE_PROGRESS_CONFIGURATION_LOAD)]:(e,t)=>{let{courseId:n}=t;return(0,o.Ay)(e,e=>{e.courseProgressConfiguration.byCourseId[n]?(e.courseProgressConfiguration.byCourseId[n].isLoading=!1,e.courseProgressConfiguration.byCourseId[n].hasError=!0):e.courseProgressConfiguration.byCourseId[n]={...u}})},[l.COURSE_PROGRESS_CONFIGURATION_PERSIST]:(e,t)=>{let{courseId:n}=t;return(0,o.Ay)(e,e=>{e.courseProgressConfiguration.byCourseId[n]?e.courseProgressConfiguration.byCourseId[n].isLoading=!0:e.courseProgressConfiguration.byCourseId[n]={...u,isLoading:!0}})},[(0,r.ok)(l.COURSE_PROGRESS_CONFIGURATION_PERSIST)]:(e,t)=>{let{courseId:n,updatedCourseProgressConfiguration:r}=t;return(0,o.Ay)(e,e=>{e.courseProgressConfiguration.byCourseId[n]={...u,courseProgressConfiguration:r,isValid:!0}})},[(0,r.fJ)(l.COURSE_PROGRESS_CONFIGURATION_PERSIST)]:(e,t)=>{let{courseId:n}=t;return(0,o.Ay)(e,e=>{e.courseProgressConfiguration.byCourseId[n]?e.courseProgressConfiguration.byCourseId[n].isLoading=!1:e.courseProgressConfiguration.byCourseId[n]={...u}})},[l.COURSE_PROGRESS_CONFIGURATION_INVALIDATE]:(e,t)=>{let{courseId:n}=t;return d(e,n)},[a.g.GRANULAR_CONTENT_COPY_COMPLETE]:(e,t)=>{let{courseId:n}=t;return d(e,n)}}),p={loadCourseProgressConfiguration:e=>async(t,n)=>{if(!function(e,t){var n,r;let i=!!(null===(n=e.courseProgress.courseProgressConfiguration.byCourseId[t])||void 0===n?void 0:n.isLoading),o=!!(null===(r=e.courseProgress.courseProgressConfiguration.byCourseId[t])||void 0===r?void 0:r.isValid);return!i&&!o}(n(),e.courseId))return m.getCourseProgressConfiguration(n(),e.courseId);t((0,r.rc)(l.COURSE_PROGRESS_CONFIGURATION_LOAD,{courseId:e.courseId}));try{let n=await (0,i.f)(e);return t((0,r.rc)((0,r.ok)(l.COURSE_PROGRESS_CONFIGURATION_LOAD),{courseProgressConfiguration:n,courseId:e.courseId})),n}catch(n){throw t((0,r.rc)((0,r.fJ)(l.COURSE_PROGRESS_CONFIGURATION_LOAD),{courseId:e.courseId,err:n})),t((0,r.rc)((0,r.ok)(s.A.APP_ERROR),{error:n})),n}},persistCourseProgress:(e,t)=>(0,r.VP)(l.COURSE_PROGRESS_CONFIGURATION_PERSIST,async()=>{try{return{updatedCourseProgressConfiguration:await (0,i.$)(e,{courseId:t}),courseId:t}}catch(e){throw{err:e}}},{courseId:t}),invalidateCourseProgressConfiguration:e=>(0,r.rc)(l.COURSE_PROGRESS_CONFIGURATION_INVALIDATE,{courseId:e})},m={getCourseProgressConfiguration:(e,t)=>{var n;return null===(n=e.courseProgress.courseProgressConfiguration.byCourseId[t])||void 0===n?void 0:n.courseProgressConfiguration},getCourseProgressConfigurationView:(e,t)=>e.courseProgress.courseProgressConfiguration.byCourseId[t]}},31894:function(e,t,n){"use strict";n.d(t,{o1:function(){return g},Ff:function(){return m},Lt:function(){return E}});var r=n(905898),i=n(732583),o=n(2797),s=n(612918);let a="course.reports.load";var l=n(968554);let u=(e,t)=>{var n;if(!(null==t?void 0:t.courseId))return l.Vc;let[r,o]=null!==(n=Object.entries(e.views.byCourseId[null==t?void 0:t.courseId]||{}).find(([,e])=>(0,i.Y_)(e.query,t)))&&void 0!==n?n:[null,null];return r?{id:r,view:o}:l.Vc},d=e=>["views","byCourseId",e.courseId],c=(e,t)=>{let{view:n}=u(t.getState().courseReports,e.query);return!n||!n.isLoading&&!n.isValid},p=()=>["reports"],m=(0,l.vy)({views:{byCourseId:{}},byReportId:{}},{[a]:(0,s.rK)(p,s.hu.Load,s.p_),[(0,l.ok)(a)]:(e,t)=>{let{reports:n,query:i}=t;if(!i.courseId)return e;let o=(0,r.Ay)(e,e=>{n.forEach(t=>{e.byReportId[t.id]=t})});return(0,l.lY)(o,t,{viewResolver:u,viewsPathResolver:d,values:n.map(e=>e.id)})},[(0,l.fJ)(a)]:(0,s.rK)(p,s.hu.Load,s.XP)}),g={loadReportsByQuery:e=>(0,l.Vy)(a,async()=>({reports:(await (0,o.DB)(e)).results,query:e}),{data:{query:e},condition:c})},E={getCourseReportsByQuery:(e,t)=>{var n;let{view:r}=u(e.courseReports,t);return r?(null!==(n=r.values)&&void 0!==n?n:[]).map(t=>e.courseReports.byReportId[t]).filter(e=>!!e):[]},getCourseReportsViewByQuery:(e,t)=>{let{view:n}=u(e.courseReports,t);return n||null}}},446692:function(e,t,n){"use strict";n.d(t,{o1:function(){return E},Ff:function(){return g},Lt:function(){return h}});var r=n(905898);let i={COURSE_RESOURCES_BATCH_DELETE:"course.resources.batch.delete",COURSE_RESOURCES_INVALIDATE:"course.resources.invalidate",COURSE_RESOURCE_LOAD_ALL:"course.resources.load.all"};var o=n(968554),s=n(645250),a=n(828736),l=n(758247),u=n(839781);let d=(e,t)=>e=(0,r.Ay)(e,e=>{var n;let r=null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{};Object.keys(r).forEach(e=>{r[e].isValid=!1})}),c=(e,t)=>{if(!t)return o.Vc;let n=e.views.byCourseId[t.courseId]||{},r=Object.keys(n).find(e=>{let r=n[e],i=s.isEqual(r.query.paging,t.paging),o=s.isEqual(r.query.queryParams,t.queryParams);return i&&o});return r?{id:r,view:n[r]}:o.Vc},p=e=>["views","byCourseId",e.courseId],m=(e,t)=>{let{view:n}=c(e.courseResources,t);return!n||!n.isLoading&&!n.isValid},g=(0,o.vy)({byCourseResourceId:{},views:{byCourseId:{}},unusedFilesTotal:{}},{[i.COURSE_RESOURCES_BATCH_DELETE]:(e,t)=>(0,r.Ay)(e,e=>{t.content.fileIdsToDelete.forEach(t=>{let n={...e.byCourseResourceId[t].api,isDeleting:!0};e.byCourseResourceId[t].api=n})}),[(0,o.ok)(i.COURSE_RESOURCES_BATCH_DELETE)]:(e,t)=>d(e,t.courseId),[(0,o.fJ)(i.COURSE_RESOURCES_BATCH_DELETE)]:(e,t)=>(e=(0,r.Ay)(e,e=>{t.content.fileIdsToDelete.forEach(t=>{let n={...e.byCourseResourceId[t].api,isDeleting:!1};e.byCourseResourceId[t].api=n})}),(0,o.Nh)(e,t)),[i.COURSE_RESOURCES_INVALIDATE]:(e,t)=>d(e,t.courseId),[i.COURSE_RESOURCE_LOAD_ALL]:(0,o.Dh)(c,p),[(0,o.ok)(i.COURSE_RESOURCE_LOAD_ALL)]:(e,t)=>{let{data:n}=t,{resourceIds:i,resources:s,paging:a,unusedFilesTotal:l}=n;return e=(0,r.Ay)(e,e=>{l&&(e.unusedFilesTotal[t.query.courseId]=l),Object.keys(s).forEach(t=>{e.byCourseResourceId[t]={...s[t]}})}),(0,o.lY)(e,t,{viewResolver:c,viewsPathResolver:p,paging:a,values:i})},[(0,o.fJ)(i.COURSE_RESOURCE_LOAD_ALL)]:(0,o.To)(c,p)}),E={batchDelete:(e,t)=>(0,o.RA)(async n=>{n((0,o.rc)(i.COURSE_RESOURCES_BATCH_DELETE,{courseId:e,content:t}));try{await (0,a.lYu)(e,t),n((0,o.rc)((0,o.ok)(i.COURSE_RESOURCES_BATCH_DELETE),{courseId:e,content:t}))}catch(r){throw n((0,o.rc)((0,o.fJ)(i.COURSE_RESOURCES_BATCH_DELETE),{courseId:e,content:t})),n((0,o.rc)((0,o.ok)(l.A.APP_ERROR),{error:r})),{error:r}}}),invalidateCourseResourceViews:e=>(0,o.RA)(async t=>{t((0,o.rc)(i.COURSE_RESOURCES_INVALIDATE,{courseId:e}))}),loadCourseResourcesByQuery:e=>(0,o.RA)(async(t,n)=>{if(m(n(),e)){t((0,o.rc)(i.COURSE_RESOURCE_LOAD_ALL,{query:e}));try{let n=await (0,a.wD0)(e);t((0,o.rc)((0,o.ok)(i.COURSE_RESOURCE_LOAD_ALL),{query:e,data:n}))}catch(n){throw t((0,o.rc)((0,o.fJ)(i.COURSE_RESOURCE_LOAD_ALL),{query:e})),t((0,o.rc)((0,o.ok)(l.A.APP_ERROR),{error:n})),{error:n}}}})},h={getAllCourseResourcesByQuery:(0,u.n)((e,t)=>{let{view:n}=c(e.courseResources,t);return n?(n.values||[]).map(t=>e.courseResources.byCourseResourceId[t]):[]},e=>e),getCourseResourceViewStatusByQuery:(e,t)=>{var n;let{view:r}=c(e.courseResources,t);return r?{isLoading:r.isLoading,isValid:r.isValid,paging:null!==(n=r.paging)&&void 0!==n?n:null}:null},getUnusedFilesTotal:(e,t)=>e.courseResources.unusedFilesTotal[t]?e.courseResources.unusedFilesTotal[t]:null}},474403:function(e,t,n){"use strict";n.d(t,{o:function(){return a}});var r=n(968554),i=n(318728),o=n(825271);let s=(0,n(853400).Y)(i.FYu,o.dZ),a={createRubric:(e,t)=>(0,r.VP)("course.rubrics.create",async()=>{let n=await s({courseId:e},t);return{courseId:e,rubric:n}},{courseId:e})}},196186:function(e,t,n){"use strict";n.d(t,{o1:function(){return m},Ff:function(){return p},Lt:function(){return g}});var r=n(318728),i=n(968554);let o={COURSE_RUBRICS_USER_PREFERENCE_LOAD:"course.rubrics.user.preference.load",COURSE_RUBRICS_USER_PREFERENCE_SAVE:"course.rubrics.user.preference.save"};var s=n(3266),a=n(905898),l=n(758247),u=n(300474);let d=Object.freeze({preference:void 0,isLoading:!1});function c(e,t,n){var r,i,o,s;let{courseId:a,userId:l,rubricId:u}=t,c=e.byCourseId[a]=null!==(r=e.byCourseId[a])&&void 0!==r?r:{byRubricId:{}},p=c.byRubricId[u]=null!==(i=c.byRubricId[u])&&void 0!==i?i:{byUserId:{}},m=p.byUserId[l]=null!==(o=p.byUserId[l])&&void 0!==o?o:{byPreferenceKey:{}};return m.byPreferenceKey[n]=null!==(s=m.byPreferenceKey[n])&&void 0!==s?s:{...d}}let p=(0,i.vy)({byCourseId:{}},{[o.COURSE_RUBRICS_USER_PREFERENCE_LOAD]:(e,t)=>(0,a.Ay)(e,e=>{let{courseId:n,rubricId:r,userId:i,preferenceKey:o}=t;c(e,{courseId:n,rubricId:r,userId:i},o).isLoading=!0}),[(0,i.ok)(o.COURSE_RUBRICS_USER_PREFERENCE_LOAD)]:(e,t)=>{let{courseId:n,rubricId:r,userId:i,preferenceKey:o,data:s}=t;return(0,a.Ay)(e,e=>{let t=c(e,{courseId:n,rubricId:r,userId:i},o);t.preference=s,t.isLoading=!1})},[(0,i.cw)(o.COURSE_RUBRICS_USER_PREFERENCE_LOAD)]:(e,t)=>{let{courseId:n,rubricId:r,userId:i,preferenceKey:o,data:s}=t;return(0,a.Ay)(e,e=>{let t=c(e,{courseId:n,rubricId:r,userId:i},o);t.preference=s,t.isLoading=!1})},[(0,i.fJ)(o.COURSE_RUBRICS_USER_PREFERENCE_LOAD)]:(e,t)=>{let{courseId:n,rubricId:r,userId:i,preferenceKey:o}=t;return(0,a.Ay)(e,e=>{c(e,{courseId:n,rubricId:r,userId:i},o).isLoading=!1})},[(0,i.ok)(o.COURSE_RUBRICS_USER_PREFERENCE_SAVE)]:(e,t)=>{let{courseId:n,rubricId:r,userId:i,data:o}=t;return(0,a.Ay)(e,e=>{c(e,{courseId:n,rubricId:r,userId:i},o.key).preference=o})}}),m={getCourseRubricsUserPreference:(e,t)=>(0,i.RA)(async(n,a)=>{let c=g.getCourseRubricsUserPreference(a(),e,t);if(c.isLoading||c.preference)return c.preference;let p={...e,preferenceKey:t};n((0,i.rc)(o.COURSE_RUBRICS_USER_PREFERENCE_LOAD,p));try{let e=await (0,s.E)(p);return n((0,i.rc)((0,i.ok)(o.COURSE_RUBRICS_USER_PREFERENCE_LOAD),{...p,data:e})),e}catch(e){if((0,u.rh)((0,u.xt)(e),[r.t3V.NotFound])){let e=d.preference;return n((0,i.rc)((0,i.cw)(o.COURSE_RUBRICS_USER_PREFERENCE_LOAD),{...p,data:e})),e}throw n((0,i.rc)((0,i.fJ)(o.COURSE_RUBRICS_USER_PREFERENCE_LOAD),{...p,err:e})),n((0,i.rc)((0,i.ok)(l.A.APP_ERROR),{error:e})),{err:e}}}),saveCourseRubricsUserPreference:(e,t)=>(0,i.VP)(o.COURSE_RUBRICS_USER_PREFERENCE_SAVE,async()=>{let n=await (0,s.l)({...e},t);return{...e,data:n}},e)},g={getCourseRubricsUserPreference:(e,t,n)=>{var r,i,o;let{courseId:s,userId:a,rubricId:l}=t,u=null===(o=null===(i=null===(r=e.courseRubricsUserPreference.byCourseId[s])||void 0===r?void 0:r.byRubricId[l])||void 0===i?void 0:i.byUserId[a])||void 0===o?void 0:o.byPreferenceKey[n];return null!=u?u:{...d}}}},648142:function(e,t,n){"use strict";n.d(t,{o1:function(){return b},Ff:function(){return f},Lt:function(){return A}});var r=n(645250),i=n(905898),o=n(637213),s=n(758247),a=n(968554);let l={COURSE_TASKS_LOAD:"course-tasks.load",COURSE_TASK_DELETE:"course-tasks.delete",COURSE_TASK_INVALIDATE:"course-tasks.invalidate"};var u=n(139552),d=n(443873),c=n(732583),p=n(839781),m=n(352290);let g=(e,t)=>e=(0,i.jM)(e,e=>{var n;let r=null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{};Object.keys(r).forEach(e=>{r[e].isValid=!1})}),E=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byCourseId[t.courseId]||{},i=Object.keys(n).find(e=>{let i=n[e],o=r.isEqual(i.query.paging,t.paging),s=r.isEqual(i.query.queryParams,t.queryParams);return o&&s});return{id:i,view:i?n[i]:null}},h=e=>["views","byCourseId",e.courseId],y=(e,t)=>{let{view:n}=E(e.courseTasks,t);return!n||!n.isLoading&&!n.isValid},f=(0,a.vy)({byCourseTaskId:{},views:{byCourseId:{}}},{[l.COURSE_TASKS_LOAD]:(0,a.Dh)(E,h),[(0,a.ok)(l.COURSE_TASKS_LOAD)]:(e,t)=>{let{data:n}=t;n||(0,a.Zg)(e,t);let{tasksIds:r,tasks:o,paging:s}=n;return e=(0,i.jM)(e,e=>{Object.keys(o).forEach(t=>{e.byCourseTaskId[t]={...e.byCourseTaskId[t],...o[t]}})}),(0,a.lY)(e,t,{viewResolver:E,viewsPathResolver:h,paging:s,values:r})},[(0,a.fJ)(l.COURSE_TASKS_LOAD)]:(0,a.To)(E,h),[l.COURSE_TASK_DELETE]:(e,t)=>(0,i.jM)(e,e=>{let n={...e.byCourseTaskId[t.taskId].api,isDeleting:!0};e.byCourseTaskId[t.taskId].api=n}),[(0,a.ok)(l.COURSE_TASK_DELETE)]:(e,t)=>g(e,t.courseId),[(0,a.fJ)(l.COURSE_TASK_DELETE)]:(e,t)=>(e=(0,i.jM)(e,e=>{let n={...e.byCourseTaskId[t.taskId].api,isDeleting:!1};e.byCourseTaskId[t.taskId].api=n}),(0,a.Nh)(e,t)),[l.COURSE_TASK_INVALIDATE]:(e,t)=>g(e,t.courseId),[(0,a.ok)(m.g.CREATE_COPY_TASK)]:(e,t)=>(0,i.jM)(e,e=>{e.byCourseTaskId[t.data.taskId]=t.data})}),b={deleteTaskByCourseIdAndTaskId:(e,t)=>(0,a.RA)(async n=>{n((0,a.rc)(l.COURSE_TASK_DELETE,{courseId:e,taskId:t}));try{await (0,o.qh)(e,t),n((0,a.rc)((0,a.ok)(l.COURSE_TASK_DELETE),{courseId:e,taskId:t}))}catch(r){throw n((0,a.rc)((0,a.fJ)(l.COURSE_TASK_DELETE),{courseId:e,taskId:t})),n((0,a.rc)((0,a.ok)(s.A.APP_ERROR),{error:r})),{error:r}}}),loadCourseTasksByQuery:e=>(0,a.RA)(async(t,n)=>{if(y(n(),e)){t((0,a.rc)(l.COURSE_TASKS_LOAD,{query:e}));try{let n=await (0,o.G8)(e);t((0,a.rc)((0,a.ok)(l.COURSE_TASKS_LOAD),{query:e,data:n}))}catch(n){throw t((0,a.rc)((0,a.fJ)(l.COURSE_TASKS_LOAD),{query:e})),t((0,a.rc)((0,a.ok)(s.A.APP_ERROR),{error:n})),{error:n}}}}),invalidateCourseTaskViews:e=>(0,a.RA)(async t=>{t((0,a.rc)(l.COURSE_TASK_INVALIDATE,{courseId:e}))})},I=(0,u.Ad)(d.UI,c.Y_)((e,t)=>{let{view:n}=E(e.courseTasks,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},e=>e),A={getCourseTasksById:(e,t)=>(0,r.find)(e.courseTasks.byCourseTaskId,{taskId:t}),getCourseTasksByQuery:(0,p.n)((e,t)=>{let{view:n}=E(e.courseTasks,t);return n?(n.values||[]).map(t=>e.courseTasks.byCourseTaskId[t]):[]},e=>e),getCourseTaskViewStatusByQuery:I}},557574:function(e,t,n){"use strict";n.d(t,{o1:function(){return d},Ff:function(){return u},Lt:function(){return c}});var r=n(318728),i=n(825271);let o="course-tool",s="course-tool-set-visibility";var a=n(968554),l=n(905898);let u=(0,a.vy)({byCourseId:{}},{[(0,a.ok)(o)]:(e,t)=>{let{courseId:n,toolId:r,toolEnabledSetting:i,observerAllowedSetting:o}=t;return(0,l.Ay)(e,e=>{e.byCourseId[n]||(e.byCourseId[n]={}),e.byCourseId[n][r]={toolEnabledSetting:i,observerAllowedSetting:o}})},[(0,a.ok)(s)]:(e,t)=>{let{courseId:n,toolId:r,toolEnabledSetting:i}=t;return(0,l.Ay)(e,e=>{e.byCourseId[n][r]={toolEnabledSetting:i}})},[(0,a.cw)(o)]:(e,t)=>{let{courseId:n,toolId:r}=t;return(0,l.Ay)(e,e=>{e.byCourseId[n]||(e.byCourseId[n]={}),e.byCourseId[n][r]={toolEnabledSetting:{isAvailable:!1,isLocked:!0}}})},[(0,a.fJ)(o)]:(e,{toolConfiguration:t})=>{let{courseId:n,toolId:r}=t;return(0,l.Ay)(e,e=>{delete e.byCourseId[n][r]})}}),d={loadCourseToolConfiguration:(e,t)=>(0,a.VP)(o,async()=>{try{var n;let{toolEnabledSetting:o,observerAllowedSetting:s}=await (n={courseId:e,toolId:t},(0,r.kpH)(n,i.dZ));return{toolEnabledSetting:o,courseId:e,toolId:t,observerAllowedSetting:s}}catch(n){throw{err:n,courseId:e,toolId:t}}},{courseId:e,toolId:t},[r.t3V.Forbidden]),setCourseToolConfiguration:(e,t,n)=>(0,a.VP)(s,async()=>{var o;let{toolEnabledSetting:s}=await (o={courseId:e,toolId:t},(0,r.bEL)(o,i.dZ,n));return{toolEnabledSetting:s,courseId:e,toolId:t}})},c={getCourseTool:(e,t,n)=>{let r=e.courseTools.byCourseId[t];if(r)return r[n]}}},947226:function(e,t,n){"use strict";n.d(t,{o1:function(){return E},Ff:function(){return g},Lt:function(){return h}});var r=n(968554);let i="course.user.notes.get",o="course.user.notes.create",s="course.user.notes.update",a="course.user.notes.delete";var l=n(318728),u=n(825271),d=n(905898),c=n(758247);let p=Object.freeze({hasError:!1,hasLoaded:!1,isLoading:!1,notes:[],totalNotes:void 0});function m(e,t,n){var r,i;let o=e.byCourseId[t]=null!==(r=e.byCourseId[t])&&void 0!==r?r:{byUserId:{}};return o.byUserId[n]=null!==(i=o.byUserId[n])&&void 0!==i?i:{...p}}let g=(0,r.vy)({byCourseId:{}},{[i]:(e,t)=>(0,d.Ay)(e,e=>{let{courseId:n,userId:r}=t,i=m(e,n,r);i&&(i.isLoading=!0,i.hasLoaded=!1,i.hasError=!1)}),[(0,r.ok)(i)]:(e,t)=>{let{courseId:n,userId:r,response:{results:i,paging:o,permissions:s}}=t;return(0,d.Ay)(e,e=>{let t=m(e,n,r);return t.isLoading=!1,t.hasLoaded=!0,t.notes=t.notes.concat(i),t.totalNotes=null==o?void 0:o.count,t.permissions=s,e})},[(0,r.fJ)(i)]:(e,t)=>(0,d.Ay)(e,e=>{let{courseId:n,userId:r}=t,i=m(e,n,r);i.isLoading=!1,i.hasLoaded=!0,i.hasError=!0}),[(0,r.ok)(o)]:(e,t)=>(0,d.Ay)(e,e=>{var n;let{courseId:r,userId:i,note:o}=t,s=m(e,r,i);s.notes.push(o),s.totalNotes=(null!==(n=s.totalNotes)&&void 0!==n?n:0)+1}),[(0,r.ok)(s)]:(e,t)=>(0,d.Ay)(e,e=>{let{courseId:n,userId:r,note:i}=t,o=m(e,n,r),s=o.notes.findIndex(e=>e.id===i.id);-1!==s&&(o.notes[s]=i)}),[(0,r.ok)(a)]:(e,t)=>(0,d.Ay)(e,e=>{var n;let{courseId:r,userId:i,noteId:o}=t,s=m(e,r,i);s.notes=s.notes.filter(e=>e.id!==o),s.totalNotes=(null!==(n=s.totalNotes)&&void 0!==n?n:1)-1})}),E={fetchNotes:e=>(0,r.RA)(async(t,n)=>{var o,s,a;let{courseId:d,userId:p,limit:m}=e,g=null===(o=n().courseUserNotes.byCourseId[d])||void 0===o?void 0:o.byUserId[p];if((null==g?void 0:g.isLoading)||(null==g?void 0:g.hasError))return Promise.resolve(null);let E=null!==(s=null==g?void 0:g.notes.length)&&void 0!==s?s:0,h={courseId:d,userId:p};t((0,r.rc)(i,h));try{let e=await (a={offset:E,limit:m},(0,l.tIq)(u.dZ,h,a,void 0));return t((0,r.rc)((0,r.ok)(i),{courseId:d,userId:p,response:e})),e}catch(n){throw t((0,r.rc)((0,r.fJ)(i),{...e,err:n})),t((0,r.rc)((0,r.ok)(c.A.APP_ERROR),{error:n})),n}}),createNote:(e,t,n)=>(0,r.VP)(o,async()=>{var r;let i=await (r={courseId:e,userId:t},(0,l.HW$)(u.dZ,r,n));return{courseId:e,userId:t,note:i}},{courseId:e,userId:t}),updateNote:(e,t,n,i)=>{let o={courseId:e,userId:t,noteId:n};return(0,r.VP)(s,async()=>{let e=await (0,l.w8h)(u.dZ,o,i);return{...o,note:e}},o)},deleteNote:(e,t,n)=>{let i={courseId:e,userId:t,noteId:n};return(0,r.VP)(a,async()=>(await (0,l.WKo)(u.dZ,i),i),i)}},h={getNotes:(e,t,n)=>{var r;let i=null===(r=e.courseUserNotes.byCourseId[t])||void 0===r?void 0:r.byUserId[n];return null!=i?i:p}}},353239:function(e,t,n){"use strict";n.d(t,{o1:function(){return A},Ff:function(){return I},Lt:function(){return _}});var r=n(645250),i=/*#__PURE__*/n.n(r),o=n(905898),s=n(139552),a=n(443873),l=n(732583),u=n(968554);let d="dashboardCourses.load",c="dashboardIsEntitled.load";var p=n(612918),m=n(828736);let g=e=>["views","byUserId",e.userId],E=(e,t)=>{if(!t)return u.Vc;let n=e.views.byUserId[t.userId]||{},r=Object.keys(n).find(e=>{let r=n[e];return i().isEqual(r.query,t)});return r?{id:r,view:n[r]}:u.Vc},h=()=>["isEntitled"],y=(e,t)=>{let{view:n}=E(t.getState().dashboard,e.query);return!n||!n.isLoading&&!n.isValid},f=(e,t)=>{var n;let r=t.getState();return(0,p.qO)(null===(n=r.dashboard.isEntitled)||void 0===n?void 0:n.status)},b=(e,t)=>{0!==Object.keys(t).length&&Object.keys(t).forEach(n=>{e.byCourseId[n]={...e.byCourseId[n],...t[n]}})},I=(0,u.vy)({byCourseId:{},views:{byUserId:{}}},{[d]:(0,u.Dh)(E,g),[(0,u.ok)(d)]:(e,t)=>{if(!(null==t?void 0:t.data))return(0,u.Zg)(e,t);let{dashboardCourses:n,dashboardCourseIds:r,paging:i}=t.data,s=(0,o.Ay)(e,e=>{b(e,n)});return(0,u.lY)(s,t,{viewResolver:E,viewsPathResolver:g,values:r,paging:i})},[(0,u.fJ)(d)]:(0,u.To)(E,g),[c]:(0,p.vR)(h,p.vq),[(0,u.ok)(c)]:(e,t)=>{let{isEntitled:n}=t.data;return(0,o.Ay)(e,e=>{e.isEntitled={value:n,status:p.y_}})},[(0,u.fJ)(c)]:(0,p.vR)(h,p.JL)}),A={loadDashboardCoursesByQuery:e=>(0,u.Vy)(d,async()=>{try{return{data:await (0,m.fH5)(e),query:e}}catch(t){throw new u.GS(t).setData({query:e})}},{data:{query:e},condition:y}),loadDashboardIsEntitled:()=>(0,u.Vy)(c,async()=>({data:await (0,m.YvV)()}),{condition:f})},v=(0,s.Ad)(a.UI,l.oJ),S=(0,s.Ad)(a.UI,l.Y_),_={getByCourseId:(e,t)=>e.dashboard.byCourseId[t],getIsEntitled:e=>{var t;return null===(t=e.dashboard.isEntitled)||void 0===t?void 0:t.value},getIsEntitledStatus:e=>{var t;return null===(t=e.dashboard.isEntitled)||void 0===t?void 0:t.status},getDashboardCoursesByQuery:v((e,t)=>{let{view:n}=E(e.dashboard,t);return n&&void 0!==n.values?n.values.map(t=>_.getByCourseId(e,t)).filter(e=>!!e):null},e=>e),getDashboardViewStatusByQuery:S((e,t)=>{let{view:n}=E(e.dashboard,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},e=>e)}},818339:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={COMPLETED_DELEGATED_ATTEMPT_GRADE_BY_GRADER_LOAD:"completed.delegatedAttemptGradeByGraderLoad",COMPLETED_DELEGATED_ATTEMPT_GRADE_ON_ATTEMPT_LOAD:"completed.delegatedAttemptGradeOnAttemptLoad",PATCH_DELEGATED_ATTEMPT_GRADE:"patch.delegatedAttemptGrade",INSTRUCTOR_SUBMISSION_LIST_ATTEMPT_DELETED_EVENT:"instructor-submission-list-attempt-deleted-event",TOGGLE_VISIBILITY_DELEGATED_ATTEMPT_GRADE:"toggle.visibility.delegatedAttemptGrade"}},497220:function(e,t,n){"use strict";n.d(t,{Ff:function(){return d},Lt:function(){return m},o1:function(){return c}});var r=n(905898),i=n(193752),o=n(968554),s=n(909892),a=n(818339),l=n(758247);let u=(e,t)=>(0,r.Ay)(e,e=>{Object.keys(t.byStagedAttemptId).forEach(n=>{e.byStagedAttemptId[n]={...t.byStagedAttemptId[n],api:{isDeleting:!1,isUpdating:!1,isInvalidated:!1}}})}),d=(0,o.vy)({byStagedAttemptId:{}},{[(0,o.ok)(a.g.COMPLETED_DELEGATED_ATTEMPT_GRADE_BY_GRADER_LOAD)]:u,[(0,o.ok)(a.g.COMPLETED_DELEGATED_ATTEMPT_GRADE_ON_ATTEMPT_LOAD)]:u,[(0,o.ok)(a.g.PATCH_DELEGATED_ATTEMPT_GRADE)]:(e,t)=>{let n=t.stagedAttempt;return(0,r.Ay)(e,e=>{let t=e.byStagedAttemptId[n.stagedAttemptId];e.byStagedAttemptId[n.stagedAttemptId]={...t,...n,api:{isDeleting:!1,isUpdating:!1,isInvalidated:!1}}})},[(0,o.ok)(a.g.INSTRUCTOR_SUBMISSION_LIST_ATTEMPT_DELETED_EVENT)]:(e,t)=>{let n=Object.values(e.byStagedAttemptId);return(0,r.Ay)(e,e=>{let{attemptId:r}=t;n.forEach(t=>{t.attemptId===r&&delete e.byStagedAttemptId[t.stagedAttemptId]})})}}),c={loadCompletedDelegatedAttemptGradesByGrader:e=>(0,o.VP)(a.g.COMPLETED_DELEGATED_ATTEMPT_GRADE_BY_GRADER_LOAD,async()=>{try{return await (0,i.Gq)(e)}catch(e){throw{err:e}}}),loadDelegatedAttemptGradesOnAttempt:e=>(0,o.VP)(a.g.COMPLETED_DELEGATED_ATTEMPT_GRADE_ON_ATTEMPT_LOAD,async()=>{try{return await (0,i.C)(e)}catch(e){throw{err:e}}}),patchDelegatedAttemptGrade:e=>(0,o.VP)(a.g.PATCH_DELEGATED_ATTEMPT_GRADE,async()=>{try{return await (0,i.Th)(e)}catch(e){throw{err:e}}}),deleteDelegatedAttemptsOnDeletedSubmission:e=>(0,o.rc)((0,o.ok)(a.g.INSTRUCTOR_SUBMISSION_LIST_ATTEMPT_DELETED_EVENT),{attemptId:e.attemptId}),toggleVisibilityOfDelegatedAttemptGrade:e=>(0,o.RA)(async(t,n)=>{var r;try{let s=n().delegatedAttemptGrade.byStagedAttemptId[e];if(s){let{columnId:e,attemptId:l,stagedAttemptId:u}=s,d=null===(r=n().gradebookAttempt.byGradebookAttemptId[l])||void 0===r?void 0:r.value;if(!d)return;let{courseId:c,gradeId:p}=d,m=await (0,i.Th)({courseId:c,columnId:e,gradeId:p,attemptId:l,stagedAttemptId:u,updatedProperties:{showFeedbackToStudent:!s.showFeedbackToStudent}});t((0,o.rc)((0,o.ok)(a.g.PATCH_DELEGATED_ATTEMPT_GRADE),m))}}catch(e){throw t((0,o.rc)((0,o.ok)(l.A.APP_ERROR),{error:e})),{err:e}}})},p=(e,t)=>{let{graderId:n,userBeingGradedId:r}=t;return{...t,grader:n?s.Lt.getUserById(e,n):null,userBeingGraded:r?s.Lt.getUserById(e,r):null}},m={getCompletedDelegatedAttemptGradesByGrader:(e,t,n)=>Object.values(e.delegatedAttemptGrade.byStagedAttemptId).filter(e=>e.graderId===t&&e.columnId===n).map(t=>p(e,t)),getCompletedDelegatedAttemptGradesOnAttempt:(e,t)=>Object.values(e.delegatedAttemptGrade.byStagedAttemptId).filter(e=>e.attemptId===t).map(t=>p(e,t)),getDelegatedAttemptByStagedAttemptId:(e,t)=>p(e,Object.values(e.delegatedAttemptGrade.byStagedAttemptId).find(e=>e.stagedAttemptId===t))}},740042:function(e,t,n){"use strict";n.d(t,{o1:function(){return c},Ff:function(){return d},Lt:function(){return p}});var r=n(905898),i=n(56518),o=n(968554),s=n(612918);let a="reveal.anonymous.discussion",l=e=>["byMessageId",e.messageId],u=(e,t)=>{let n=t.getState().discussionBoardAnonymous.byMessageId[e.messageId];return(0,s.gE)(null==n?void 0:n.status)},d=(0,o.vy)({byMessageId:{}},{[a]:(0,s.rK)(l,s.hu.Load,s.p_),[(0,o.ok)(a)]:(e,t)=>{let{messageId:n,learnUser:i}=t;return(0,r.Ay)(e,e=>{e.byMessageId[n]={value:i,status:(0,s.Lx)(s.hu.Load,e.byMessageId[n],s.U8)}})},[(0,o.fJ)(a)]:(0,s.rK)(l,s.hu.Load,s.XP)}),c={getRevealAuthorInfo:(e,t)=>(0,o.Vy)(a,async()=>{try{let n=await (0,i.V9)(e,{reason:t});return{messageId:e.messageId,learnUser:n}}catch(t){throw new o.GS(t).setData({messageId:e.messageId})}},{data:{messageId:e.messageId},condition:u})},p={getRevealAuthorInfoStateByMessageId:(e,t)=>{var n;return null===(n=e.discussionBoardAnonymous.byMessageId[t])||void 0===n?void 0:n.value}}},739126:function(e,t,n){"use strict";n.d(t,{o1:function(){return E},Ff:function(){return g},Lt:function(){return h}});var r=n(905898),i=n(56518),o=n(968554);let s="discussion.message-state.update",a="discussion.message-state.load",l="discussion.subscription.message.id.persist";var u=n(764209),d=n(612918);let c=e=>["byMessageId",e.messageId],p=(e,t)=>{let n=t.getState().discussionBoardMessageState.byMessageId[e.messageId];return(0,d.gE)(null==n?void 0:n.status)},m=(e,t)=>{let n=t.getState().discussionBoardMessageState.byMessageId[e.messageId];return(0,d.zO)(null==n?void 0:n.status)},g=(0,o.vy)({byMessageId:{},byForumId:{}},{[s]:(0,d.rK)(c,d.hu.Update,d.p_),[(0,o.fJ)(s)]:(0,d.rK)(c,d.hu.Update,d.XP),[(0,o.ok)(s)]:(e,t)=>{let{messageId:n,discussionMessageState:i}=t;return(0,r.Ay)(e,e=>{e.byMessageId[n]={value:i,status:(0,d.Lx)(d.hu.Update,e.byMessageId[n],d.U8)}})},[a]:(0,d.rK)(c,d.hu.Load,d.p_),[(0,o.fJ)(a)]:(0,d.rK)(c,d.hu.Load,d.XP),[(0,o.ok)(a)]:(e,t)=>{let{messageId:n,discussionMessageState:i}=t;return(0,r.Ay)(e,e=>{e.byMessageId[n]={value:i,status:(0,d.Lx)(d.hu.Load,e.byMessageId[n],d.U8)}})},[(0,o.ok)(l)]:(e,t)=>{let{forumId:n,messageId:i}=t;return(0,r.Ay)(e,e=>{n&&i&&(e.byForumId[n]={subscribableMessageId:i})})},[(0,o.ok)(u.g.CONTENT_LOAD)]:(e,t)=>{let{discussionsMessageStates:n}=t;return(0,r.Ay)(e,e=>{n&&0!==Object.keys(n).length&&Object.values(n).forEach(t=>{if(t){let n=t.msgMainId;e.byMessageId[n]={value:t,status:(0,d.Lx)(d.hu.Load,e.byMessageId[n],d.U8)},t.forumId&&(e.byForumId[t.forumId]={subscribableMessageId:n})}})})}}),E={loadDiscussionMessageState:e=>(0,o.Vy)(a,async()=>{try{let t=await (0,i.gF)(e);return{messageId:e.messageId,discussionMessageState:t}}catch(t){throw new o.GS(t).setData({messageId:e.messageId})}},{data:{messageId:e.messageId},condition:p}),updateDiscussionMessageState:(e,t)=>(0,o.Vy)(s,async()=>{try{let n=await (0,i.pA)(e,t);return{messageId:e.messageId,discussionMessageState:n}}catch(t){throw new o.GS(t).setData({messageId:e.messageId})}},{data:{messageId:e.messageId},condition:m}),persistSubscribableMessageId:(e,t)=>(0,o.RA)(async n=>{n((0,o.rc)((0,o.ok)(l),{messageId:e,forumId:t}))})},h={getDiscussionMessageStateByMessageId:(e,t)=>{var n;return null===(n=e.discussionBoardMessageState.byMessageId[t])||void 0===n?void 0:n.value},getSubscribableMessageIdByForumId:(e,t)=>{var n;return null===(n=e.discussionBoardMessageState.byForumId[t])||void 0===n?void 0:n.subscribableMessageId}}},331543:function(e,t,n){"use strict";n.d(t,{o1:function(){return g},Ff:function(){return p},Lt:function(){return m}});var r=n(905898),i=n(645250),o=n(968554),s=n(397965);let a="/v1/courses/%courseId%/discussionboards/settings";async function l(e){return(0,s.Jt)((0,s.c$)(a,e))}async function u(e,t,n){let r=(0,s.BI)(e,t);return(0,i.isEmpty)(r)?t:(0,s.F6)((0,s.c$)(a,n),r)}let d="discussionboard-settings.load",c="discussionboard-settings.persist",p=(0,o.vy)({byCourseId:{},isLoading:!1},{[d]:(e,t)=>(0,o.r1)(e,t),[(0,o.ok)(d)]:(e,t)=>{let{discussionSettings:n,courseId:i}=t,s=(0,r.Ay)(e,e=>{let t={...n,api:{isUpdating:!1,isDeleting:!1}};e.byCourseId[i]=t});return(0,o.Zg)(s,t)},[(0,o.fJ)(d)]:(e,t)=>(0,o.Nh)(e,t),[c]:(e,t)=>{let{courseId:n}=t;return(0,r.Ay)(e,e=>{let t=e.byCourseId[n];e.byCourseId[n]={...t,api:{...null==t?void 0:t.api,isUpdating:!0}}})},[(0,o.ok)(c)]:(e,t)=>{let{discussionSettings:n,courseId:i}=t,s=(0,r.Ay)(e,e=>{let t={...n,api:{isUpdating:!1,isDeleting:!1}};e.byCourseId[i]=t});return(0,o.Zg)(s,t)},[(0,o.fJ)(c)]:(e,t)=>{let{courseId:n}=t;return(0,r.Ay)(e,e=>{e.byCourseId[n].api.isUpdating=!1})}}),m={getDiscussionboardSettings:(e,t)=>(0,i.get)(e,["discussionBoardSettings","byCourseId",t],{allowStudentsToCreateDiscussionContent:!1}),isSettingLoading:e=>(0,i.get)(e,["discussionBoardSettings","isLoading"])},g={loadDiscussionboardSetting:e=>(0,o.VP)(d,async t=>{var n,r;if(n=t(),r=e.courseId,m.isSettingLoading(n)&&null!=n.discussionBoardSettings.byCourseId[r])return Promise.resolve(null);try{return{discussionSettings:await l(e),courseId:e.courseId}}catch(e){throw{err:e}}}),persistDiscussionSettings:e=>(0,o.VP)(c,t=>u((0,i.get)(t(),["discussionBoardSettings","byCourseId",e.courseId],{}),e.settings,{courseId:e.courseId}).then(t=>({discussionSettings:t,courseId:e.courseId})).catch(t=>{throw{err:t,courseId:e.courseId}}),{courseId:e.courseId})}},713082:function(e,t,n){"use strict";n.d(t,{o1:function(){return m},Ff:function(){return p},Lt:function(){return g}});var r=n(905898),i=n(349134),o=n(56174),s=n(747265),a=n(968554);let l=(0,n(139552).Mz)(e=>e.exceptionDetails.byCourseMembershipId,(e,t)=>t,(e,t)=>Object.values(e).map(e=>null==e?void 0:e.byColumnId[t]).filter(e=>void 0!==e));var u=n(645250);let d=e=>["views","byCourseId",e.courseId],c=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=null!==(n=e.views.byCourseId[t.courseId])&&void 0!==n?n:{},i=Object.keys(r).find(e=>{let n=r[e];return"membershipId"in n.query?t.columnId===n.query.columnId&&"membershipId"in t&&t.membershipId===n.query.membershipId:"groupId"in n.query?t.columnId===n.query.columnId&&"groupId"in t&&t.groupId===n.query.groupId:(0,u.isEqual)(n.query,t)});return{id:null!=i?i:null,view:i?r[i]:null}},p=(0,a.vy)({views:{byCourseId:{}},byCourseMembershipId:{},byGroupId:{},isLoading:!1},{[o.g.EXCEPTION_DETAILS_LOAD]:(e,t)=>{let n=(0,r.jM)(e,e=>{let{courseId:n,columnIds:r,membershipId:i}=t.query;r.forEach(t=>{(0,a.gD)(e,(0,a.Dh)(c,d)(e,{type:o.g.EXCEPTION_DETAILS_LOAD,query:{courseId:n,columnId:t,membershipId:i}}))})});return(0,a.r1)(n,t)},[(0,a.ok)(o.g.EXCEPTION_DETAILS_LOAD)]:(e,t)=>{let{query:n,data:{learnExceptionDetails:i}}=t,{courseId:s,columnIds:l,membershipId:u}=n,p=(0,r.jM)(e,e=>{i&&i.length>0?i.forEach(t=>{var n,r,i,l;let p=null!==(r=e.byCourseMembershipId[null!==(n=t.membershipId)&&void 0!==n?n:u])&&void 0!==r?r:{byColumnId:{}};p.byColumnId[t.columnId]=t,e.byCourseMembershipId[null!==(i=t.membershipId)&&void 0!==i?i:u]=p,(0,a.gD)(e,(0,a.lY)(e,{type:(0,a.ok)(o.g.EXCEPTION_DETAILS_LOAD),query:{courseId:s,columnId:t.columnId,membershipId:null!==(l=t.membershipId)&&void 0!==l?l:u}},{viewResolver:c,viewsPathResolver:d}))}):(u&&!l.length&&(0,a.gD)(e,(0,a.lY)(e,{type:(0,a.ok)(o.g.EXCEPTION_DETAILS_LOAD),query:{courseId:s,columnId:u}},{viewResolver:c,viewsPathResolver:d})),l.forEach(t=>{var n,r;(null===(n=e.byCourseMembershipId[u])||void 0===n?void 0:n.byColumnId[t])&&(null===(r=e.byCourseMembershipId[u])||void 0===r||delete r.byColumnId[t]),(0,a.gD)(e,(0,a.lY)(e,{type:(0,a.ok)(o.g.EXCEPTION_DETAILS_LOAD),query:{courseId:s,columnId:t,membershipId:u}},{viewResolver:c,viewsPathResolver:d}))})),u&&l.forEach(t=>{(0,a.gD)(e,(0,a.lY)(e,{type:(0,a.ok)(o.g.EXCEPTION_DETAILS_LOAD),query:{courseId:s,columnId:t,membershipId:u}},{viewResolver:c,viewsPathResolver:d}))})});return(0,a.Zg)(p,t)},[(0,a.fJ)(o.g.EXCEPTION_DETAILS_LOAD)]:a.Nh,[s.gK.GRADABLE_USER_OPTION_ITEM_LOAD]:(0,a.Dh)(c,d),[(0,a.ok)(s.gK.GRADABLE_USER_OPTION_ITEM_LOAD)]:(e,t)=>{let{courseId:n,columnId:i,byCourseMembershipId:o,byGroupId:s,type:l,...u}=t,p=(0,r.jM)(e,e=>{var t;u.fullDetails&&(s&&Object.entries(null!=s?s:{}).forEach(([t,r])=>{var o,s;null!==(o=(s=e.byGroupId)[t])&&void 0!==o||(s[t]={byColumnId:{}}),e.byGroupId[t].byColumnId[i]=r,(0,a.gD)(e,(0,a.lY)(e,{type:l,query:{courseId:n,columnId:i,groupId:t}},{viewResolver:c,viewsPathResolver:d}))}),o&&Object.keys(o).forEach(t=>{var r,s;let u={...o[t]};null!==(r=(s=e.byCourseMembershipId)[t])&&void 0!==r||(s[t]={byColumnId:{}}),e.byCourseMembershipId[t].byColumnId[i]=u,(0,a.gD)(e,(0,a.lY)(e,{type:l,query:{courseId:n,columnId:i,membershipId:t}},{viewResolver:c,viewsPathResolver:d}))}),null===(t=u.groupIds)||void 0===t||t.forEach(t=>{(0,a.gD)(e,(0,a.lY)(e,{type:l,query:{courseId:n,columnId:i,groupId:t}},{viewResolver:c,viewsPathResolver:d}))}),u.membershipIds&&u.membershipIds.forEach(t=>{(0,a.gD)(e,(0,a.lY)(e,{type:l,query:{courseId:n,columnId:i,membershipId:t}},{viewResolver:c,viewsPathResolver:d}))}))});return(0,a.lY)(p,{type:l,query:{courseId:n,columnId:i,...u}},{viewResolver:c,viewsPathResolver:d})},[(0,a.fJ)(s.gK.GRADABLE_USER_OPTION_ITEM_LOAD)]:(0,a.To)(c,d),[(0,a.ok)(s.gK.GRADABLE_USER_OPTION_ITEM_PUT)]:(e,t)=>{let{courseId:n,columnId:i,membershipId:o,groupId:s}=t.params;return(0,r.jM)(e,e=>{if(s){let t=c(e,{courseId:n,columnId:i,groupId:s});t.view&&(t.view.isValid=!1)}if(o){let t=c(e,{courseId:n,columnId:i,membershipId:o});t.view&&(t.view.isValid=!1)}})},[(0,a.ok)(s.gK.GRADABLE_USER_OPTION_ITEM_DELETE)]:(e,t)=>(0,r.jM)(e,e=>{var n,r;null===(n=e.byGroupId[t.groupId])||void 0===n||delete n.byColumnId[t.columnId],null===(r=e.byCourseMembershipId[t.membershipId])||void 0===r||delete r.byColumnId[t.columnId]}),[o.g.EXCEPTION_DETAILS_INVALIDATE_BY_COLUMN_ID]:(e,t)=>{let{columnId:n}=t;return(0,r.jM)(e,e=>{Object.values(e.views.byCourseId).forEach(e=>{Object.values(e).forEach(e=>{e.query.columnId===n&&(e.isValid=!1)})})})}}),m={fetchExceptionDetails:(e,t)=>{var n;let r={courseId:e.courseId,columnIds:null!==(n=t.columnId)&&void 0!==n?n:[],membershipId:e.membershipId},s={type:o.g.EXCEPTION_DETAILS_LOAD,query:r};return(0,a.VP)(o.g.EXCEPTION_DETAILS_LOAD,async()=>({query:r,data:await (0,i.s)(e,t)}),s)},deleteExceptionDetailByColumnIdAndMembershipIdInStore:(e,t)=>(0,a.rc)((0,a.ok)(s.gK.GRADABLE_USER_OPTION_ITEM_DELETE),{columnId:e,membershipId:t}),setExceptionDetailInStore:(e,t)=>(0,a.rc)((0,a.ok)(o.g.EXCEPTION_DETAILS_LOAD),{data:{learnExceptionDetails:t},query:{courseId:e,columnIds:[],membershipId:""}}),invalidateExceptionDetailsByColumnId:e=>(0,a.rc)(o.g.EXCEPTION_DETAILS_INVALIDATE_BY_COLUMN_ID,{columnId:e})},g={getExceptionDetailsMembershipId:(e,t)=>e.exceptionDetails.byCourseMembershipId[t],getExceptionDetailsByColumnIdAndMembershipId:(e,t,n)=>{var r;return null===(r=e.exceptionDetails.byCourseMembershipId[n])||void 0===r?void 0:r.byColumnId[t]},getExceptionDetailsByColumnId:l,isExceptionDetailsLoading:e=>e.exceptionDetails.isLoading,getExceptionDetailsViewStatusByQuery:(e,t)=>{let{view:n}=c(e.exceptionDetails,t);return n?{isLoading:n.isLoading,isValid:n.isValid}:null}}},56174:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={EXCEPTION_DETAILS_LOAD:"exception.details.load",EXCEPTION_DETAILS_INVALIDATE_BY_COLUMN_ID:"exception.invalidate.byColumnId"}},236003:function(e,t,n){"use strict";n.d(t,{o1:function(){return c},Ff:function(){return u},Lt:function(){return d}});var r=n(611826),i={},o=n(968554),s=n(905898),a=n(318728);let l={FEATURE_FLAG_LOAD_ALL:"feature.flags.load.all",FEATURE_FLAG_GET_VALUE_BY_KEY:"feature.flags.get.by.key",FEATURE_FLAG_UPDATE_VALUE_BY_KEY:"feature.flags.update.by.key",CLEAR_FEATURE_FLAG_BY_KEY:"feature.flags.clear.by.key"},u=(0,o.vy)({featureFlags:{byKey:{}},featureFlagValues:{byKey:{}},isLoading:!1},{[l.FEATURE_FLAG_LOAD_ALL]:o.r1,[(0,o.ok)(l.FEATURE_FLAG_LOAD_ALL)]:(e,t)=>{if(!t||!t.featureFlags)return(0,o.Zg)(e,t);let{featureFlags:n}=t;return(0,s.Ay)(e,e=>{let t={};Object.keys(n.byKey).forEach(e=>{let r={...n.byKey[e],api:{isUpdating:!1,isDeleting:!1}};t[e]=r}),e.featureFlags.byKey=t,e.isLoading=!1})},[(0,o.fJ)(l.FEATURE_FLAG_LOAD_ALL)]:o.Nh,[l.FEATURE_FLAG_GET_VALUE_BY_KEY]:(e,t)=>(0,s.Ay)(e,e=>{e.featureFlagValues.byKey[t.flagKey]||(e.featureFlagValues.byKey[t.flagKey]={}),e.featureFlagValues.byKey[t.flagKey].isLoading=!0}),[(0,o.ok)(l.FEATURE_FLAG_GET_VALUE_BY_KEY)]:(e,t)=>{if(!t||!t.flagKey||!t.flagValue)return(0,o.Zg)(e,t);let{flagKey:n,flagValue:r}=t;return(0,s.Ay)(e,e=>{e.featureFlagValues.byKey[n]={...e.featureFlagValues.byKey[n],flagKey:n,flagValue:r},e.featureFlagValues.byKey[n].isLoading=!1})},[(0,o.cw)(l.FEATURE_FLAG_GET_VALUE_BY_KEY)]:(e,t)=>(0,s.Ay)(e,e=>{e.featureFlagValues.byKey[t.flagKey]||(e.featureFlagValues.byKey[t.flagKey]={}),e.featureFlagValues.byKey[t.flagKey].isLoading=!1}),[(0,o.fJ)(l.FEATURE_FLAG_GET_VALUE_BY_KEY)]:(e,t)=>(0,s.Ay)(e,e=>{e.featureFlagValues.byKey[t.flagKey]||(e.featureFlagValues.byKey[t.flagKey]={}),e.featureFlagValues.byKey[t.flagKey].isLoading=!1}),[l.FEATURE_FLAG_UPDATE_VALUE_BY_KEY]:(e,t)=>(0,s.Ay)(e,e=>{let n=e.featureFlags.byKey[t.flagKey];n.api||(n.api={}),n.api.isUpdating=!0}),[l.CLEAR_FEATURE_FLAG_BY_KEY]:(e,t)=>(0,s.Ay)(e,e=>{delete e.featureFlagValues.byKey[t.flagKey],delete e.featureFlags.byKey[t.flagKey]}),[(0,o.ok)(l.FEATURE_FLAG_UPDATE_VALUE_BY_KEY)]:(e,t)=>{if(!t||!t.flagKey||!t.flagValue)return(0,o.Zg)(e,t);let{flagKey:n,flagValue:r}=t,a={...e.featureFlags.byKey[n],flagValue:{...e.featureFlags.byKey[n].flagValue,value:r},api:{...e.featureFlags.byKey[n].api,isUpdating:!1}},l={...e.featureFlagValues.byKey[n],flagKey:n,flagValue:i[n]?i[n]:r};return(0,s.Ay)(e,e=>{e.featureFlags.byKey[n]=a,e.featureFlagValues.byKey[n]=l})},[(0,o.fJ)(l.FEATURE_FLAG_UPDATE_VALUE_BY_KEY)]:(e,t)=>(0,s.Ay)(e,e=>{let n=e.featureFlags.byKey[t.flagKey];n.api||(n.api={}),n.api.isUpdating=!1})}),d={getFeatureFlags:e=>e.featureFlags.featureFlags.byKey,getFeatureFlagValues:e=>e.featureFlags.featureFlagValues.byKey,getFeatureFlagValue:(e,t)=>e.featureFlags.featureFlagValues.byKey[t],isLoading:e=>e.featureFlags.isLoading},c={loadFeatureFlags:()=>(0,o.VP)(l.FEATURE_FLAG_LOAD_ALL,()=>r.CL()),loadFeatureFlagValueByKey:e=>(0,o.RA)(async(t,n)=>{var s;if(function(e,t){let n=e.featureFlags.featureFlagValues.byKey[t];return!n||!1===n.isLoading}(n(),e.flagKey)){if(t((0,o.rc)(l.FEATURE_FLAG_GET_VALUE_BY_KEY,e)),i[e.flagKey]){let n={flagKey:e.flagKey,flagValue:i[e.flagKey]};t((0,o.rc)((0,o.ok)(l.FEATURE_FLAG_GET_VALUE_BY_KEY),n));return}try{let n=await r._D(e);t((0,o.rc)((0,o.ok)(l.FEATURE_FLAG_GET_VALUE_BY_KEY),n))}catch(n){if((null===(s=null==n?void 0:n.body)||void 0===s?void 0:s.status)===a.t3V.NotFound){t((0,o.rc)((0,o.cw)(l.FEATURE_FLAG_GET_VALUE_BY_KEY),{flagKey:e.flagKey}));return}t((0,o.rc)((0,o.fJ)(l.FEATURE_FLAG_GET_VALUE_BY_KEY),{err:n,flagKey:e.flagKey}))}}}),clearFeatureFlagByKey:e=>(0,o.RA)(t=>{t((0,o.rc)(l.CLEAR_FEATURE_FLAG_BY_KEY,{flagKey:e})),t(c.loadFeatureFlagValueByKey({flagKey:e}))}),updateFeatureFlagValueByKey:e=>(0,o.VP)(l.FEATURE_FLAG_UPDATE_VALUE_BY_KEY,()=>r.tz(e),{flagKey:e.flagKey,flagValue:e.flagValue})}},810978:function(e,t,n){"use strict";n.d(t,{FZ:function(){return m},Ff:function(){return g},Lt:function(){return c},o1:function(){return p}});var r=n(968554),i=n(157701),o=n(905898),s=n(771199),a=n(416488),l=n(477305),u=n(828736);let d=Object.freeze({}),c={getFileConversionSettings:(e,t)=>{var n;return null!==(n=e.fileConversion.settingsByCourseId[t])&&void 0!==n?n:d},getFileConversionById:(e,t)=>e.fileConversion.byId[t],getFileConversionStatusById:(e,t)=>{var n,r,o,u;let{source:d,...p}=c.getFileConversionById(e,t),m="uploadId"in d?s.Lt.getFileUploadById(e,d.uploadId):void 0,g=null==m?void 0:m.filename,E="fileName"in d?d.fileName:void 0,h=null!==(n=null!=g?g:E)&&void 0!==n?n:"";return"body"in p?{status:"complete",fileName:h,body:p.body}:"error"in p?{status:"failed",fileName:h,conversionError:p.error}:l.a5.isUploadingFile(null==m?void 0:m.status)?{status:"uploading",fileName:h,percent:null!==(o=l.a5.calculateUploadPercentage(null===(r=m.uploadProgress)||void 0===r?void 0:r.progress))&&void 0!==o?o:0}:(null==m?void 0:m.status)===a.yW.Canceled?{status:"failed",fileName:h,conversionError:{errorType:i.j.Aborted}}:(null==m?void 0:m.status)===a.yW.Failed?{status:"failed",fileName:h,uploadError:null!==(u=m.error)&&void 0!==u?u:{errorType:a.oW.Api}}:{status:"converting",fileName:h}}},p={loadConversionSettings:(e,t)=>(0,r.Vy)(i.g.LOAD_CONVERSION_SETTINGS,async()=>{try{let n=await (0,u.xRH)(e,t);return{payload:{courseId:e,contentId:t,settings:n}}}catch(n){throw new r.GS(n,{payload:{courseId:e,contentId:t}})}},{condition:({payload:{courseId:e}},{getState:t})=>{let{isLoading:n,isFailed:r,settings:i}=c.getFileConversionSettings(t(),e);return!n&&!r&&!i},data:{payload:{courseId:e,contentId:t}}}),abortConversion:e=>({type:i.g.ABORT_CONVERSION,meta:{conversionId:e}}),startConversion:(e,t,n,r)=>({type:i.g.START_CONVERSION,meta:{conversionId:n},payload:{courseId:e,contentId:t,source:r}})},m={conversionSuccessful:(e,t)=>({type:(0,r.ok)(i.g.START_CONVERSION),meta:{conversionId:e},payload:{body:t}}),conversionFailed:(e,t)=>({type:(0,r.fJ)(i.g.START_CONVERSION),meta:{conversionId:e},payload:{error:t}})},g=(0,r.vy)({byId:{},settingsByCourseId:{}},{[i.g.LOAD_CONVERSION_SETTINGS]:(e,t)=>(0,o.Ay)(e,e=>{var n,r,i;(null!==(n=(r=e.settingsByCourseId)[i=t.payload.courseId])&&void 0!==n?n:r[i]={...d}).isLoading=!0}),[(0,r.ok)(i.g.LOAD_CONVERSION_SETTINGS)]:(e,t)=>(0,o.Ay)(e,e=>{let n=e.settingsByCourseId[t.payload.courseId];n&&(n.isLoading=!1,n.isFailed=!1,n.settings=t.payload.settings)}),[(0,r.fJ)(i.g.LOAD_CONVERSION_SETTINGS)]:(e,t)=>(0,o.Ay)(e,e=>{let n=e.settingsByCourseId[t.payload.courseId];n&&(n.isLoading=!1,n.isFailed=!0)}),[i.g.START_CONVERSION]:(e,t)=>{let{meta:{conversionId:n},payload:{source:r}}=t;return(0,o.Ay)(e,e=>{e.byId[n]={source:r}})},[(0,r.ok)(i.g.START_CONVERSION)]:(e,t)=>{let{meta:{conversionId:n},payload:{body:r}}=t;return(0,o.Ay)(e,e=>{e.byId[n]={source:e.byId[n].source,body:r}})},[(0,r.fJ)(i.g.START_CONVERSION)]:(e,t)=>{let{meta:{conversionId:n},payload:{error:r}}=t;return(0,o.Ay)(e,e=>{e.byId[n]={source:e.byId[n].source,error:r}})}})},487361:function(e,t,n){"use strict";n.d(t,{S:function(){return y}});var r=n(157701),i=n(810978),o=n(416488),s=n(771199),a=n(968554),l=n(967516),u=n(828736),d=n(477305);function*c(e,t,n){let{meta:{conversionId:o},payload:{courseId:s,contentId:a}}=e;try{let e=yield(0,l.T1)(u.OMd,s,a,t,n);yield(0,l.yJ)(i.FZ.conversionSuccessful(o,e))}catch(e){e instanceof DOMException&&"AbortError"===e.name?yield(0,l.yJ)(i.FZ.conversionFailed(o,{errorType:r.j.Aborted})):yield(0,l.yJ)(i.FZ.conversionFailed(o,{errorType:r.j.Unknown}))}}function*p(e){let t=yield(0,l.s)(t=>-1!==[(0,a.ok)(o.gK.FILE_UPLOAD),(0,s.h2)(o.gK.FILE_UPLOAD),(0,a.fJ)(o.gK.FILE_UPLOAD)].indexOf(t.type)&&t.meta.uploadId.correlationId===e);if("payload"in t&&"file"in t.payload)return t.payload.file}function*m(e){let{status:t,uploadedFile:n}=yield(0,l.Lt)(s.Lt.getFileUploadById,e);if(d.a5.didNotCompleteFileUpload(t))return;let r=null!=n?n:yield(0,l.T1)(p,e);if(!r)return;let{fileLocation:i,fileName:o}=r;if(!i||!o)throw Error("Invalid file upload");return{fileLocation:i,fileName:o}}function*g(e){let{payload:{source:t}}=e;return"fileLocation"in t?t:yield(0,l.T1)(m,t.uploadId)}function*E(e,t){let{meta:{conversionId:n},payload:{source:i}}=e;yield(0,l.s)(e=>e.type===r.g.ABORT_CONVERSION&&e.meta.conversionId===n),t.abort(),"uploadId"in i&&(yield(0,l.yJ)(s.o1.abortUpload({correlationId:i.uploadId})))}function*h(e){let t=new AbortController,n=yield(0,l.Zy)(E,e,t);yield(0,l.Zy)(function*(){try{let n=yield(0,l.T1)(g,e);if(!n)return;yield(0,l.T1)(c,e,n,t.signal)}finally{yield(0,l.ZT)(n)}})}function*y(){yield(0,l.jP)(r.g.START_CONVERSION,h)}},157701:function(e,t,n){"use strict";var r,i;n.d(t,{g:function(){return o},j:function(){return r}});let o={ABORT_CONVERSION:"file-conversion.abort",START_CONVERSION:"file-conversion.start",LOAD_CONVERSION_SETTINGS:"file-conversion.settings.load"};(i=r||(r={})).Aborted="aborted",i.Unknown="unknown"},911332:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={FILE_UPLOAD_SETTINGS_LOAD:"file-upload-settings.load"}},771199:function(e,t,n){"use strict";n.d(t,{Dg:function(){return v},Ff:function(){return f},Lt:function(){return b},h2:function(){return p},o1:function(){return m}});var r=n(318728),i=n(760975),o=n(967516),s=n(968554),a=n(11144),l=n(416488),u=n(905898),d=n(331427),c=n(522189);function p(e){return`${e}.aborted`}let m={updateDirectoryUploadStatus:(e,t)=>({type:l.gK.DIRECTORY_UPLOAD_STATUS,meta:{groupId:e,status:t}}),filesUploadRequest:(e,t,n={})=>(0,s.RA)(async(r,i)=>{let o=i();if(t){let e=o.fileUpload.byGroupId[t];if((null==e?void 0:e.status)===l.yW.Canceled)return}let s=e;n.skipMaxSizeCheck||(s=await E(r,i,e,{groupUploadId:t,maxFileSizeLimit:n.maxFileSizeLimit})),s.forEach(({file:e,queryParams:n,correlationId:i})=>{r(m.fileUploadRequest({file:e},{correlationId:i,groupId:t},n))})}),cloudFilesUploadRequest:(e,t,n={})=>(0,s.RA)(async(r,i)=>{let o=e;n.skipMaxSizeCheck||(o=await E(r,i,e,{groupUploadId:t,maxFileSizeLimit:n.maxFileSizeLimit})),o.forEach(({file:e,accessToken:n,correlationId:i})=>{r(m.cloudFileUploadRequest(e,n,{correlationId:i,groupId:t}))})}),fileUploadRequest:(e,t,n)=>({type:l.gK.FILE_UPLOAD_REQUEST,payload:{file:e,queryParams:n},meta:{uploadId:t}}),cloudFileUploadRequest:(e,t,n)=>({type:l.gK.CLOUD_FILE_UPLOAD_REQUEST,payload:{file:e,accessToken:t},meta:{uploadId:n}}),invalidFileUpload:(e,t,n)=>({type:l.gK.INVALID_FILE_UPLOAD,payload:{file:e,isCloudUpload:n},meta:{uploadId:t}}),startFileUpload:(e,t)=>({type:l.gK.FILE_UPLOAD,payload:{aborter:t},meta:{uploadId:e}}),updateFileUploadProgress:(e,t)=>({type:l.gK.FILE_UPLOAD,payload:{progress:t},meta:{uploadId:e}}),fileUploadSuccess:(e,t)=>({type:(0,s.ok)(l.gK.FILE_UPLOAD),payload:{file:t},meta:{uploadId:e}}),fileUploadFailure:(e,t)=>({type:(0,s.fJ)(l.gK.FILE_UPLOAD),payload:t,meta:{uploadId:e}}),fileUploadAborted:e=>({type:p(l.gK.FILE_UPLOAD),meta:{uploadId:e}}),canUpdateFileDetails:e=>({type:l.gK.CAN_UPDATE_FILE_DETAILS,meta:{uploadId:e}}),fileDetailsUpdated:(e,t=!1)=>({type:l.gK.UPDATED_FILE_DETAILS,meta:{uploadId:e},payload:{cancelled:t}}),abortGroupUploads:e=>(0,s.RA)((t,n)=>{let r=n().fileUpload.byGroupId[e];r&&(r.pendingUploads.forEach(n=>{t(m.abortUpload({groupId:e,correlationId:n}))}),t(m.updateDirectoryUploadStatus(e,l.yW.Canceled)))}),abortUpload:e=>(0,s.RA)((t,n)=>{let r=n().fileUpload.byId[e.correlationId];if(!r)return;let i=r.uploadProgress.aborter;i?i.abort():r.status===l.yW.Queued&&t(m.fileUploadAborted(e))}),overSizedFiles:(e,t)=>({type:l.gK.FILE_UPLOAD_OVERSIZED,payload:t,meta:{groupUploadId:e}}),updateFile:(e,t)=>({type:l.gK.UPDATE_FILE,payload:{file:t},meta:{uploadId:e}})};async function g(e,t,n,i){var o,s,a;await e(d.o1.loadFileUploadSettings());let l=null===(o=t().fileUploadSettings.fileUploadSettings)||void 0===o?void 0:o.value,u=null!==(s=null==l?void 0:l.maxUploadSizeInBytes)&&void 0!==s?s:r.xRq,p=null!==(a=null==l?void 0:l.customFileUploadSettings)&&void 0!==a?a:[],m=[],g=[];return n.forEach(e=>{let{file:t}=e;if(!t.name)return;let n=(0,c.kT)(t.name,p,u,i);t.size>n?m.push({request:e,fileSizeLimit:n}):g.push(e)}),{oversizedRequests:m,validRequests:g}}async function E(e,t,n,{groupUploadId:r,maxFileSizeLimit:i}){let{validRequests:o,oversizedRequests:s}=await g(e,t,n,i);return s.length>0&&e(m.overSizedFiles(r,s)),o}function h(e,t,n){var r;let{correlationId:i,groupId:o}=t,s={...e.byId[i],filename:n.name,filesize:n.size,groupId:o,status:l.yW.InProgress,uploadProgress:{},isCloudUpload:!1};if(e.byId[i]=s,o){let t=null!==(r=e.byGroupId[o])&&void 0!==r?r:{groupId:o,pendingUploads:[],uploads:[],oversizedFiles:[],status:l.yW.InProgress};t.uploads.push(i),t.pendingUploads.push(i),e.byGroupId[o]=t}return s}function y(e,t,n){let r=n&&e.byGroupId[n];if(r){let e=r.pendingUploads.indexOf(t);r.pendingUploads.splice(e,1),r.pendingUploads.length||r.status!==l.yW.InProgress||(r.status=l.yW.Complete)}}let f=(0,s.vy)({byGroupId:{},byId:{}},{[l.gK.DIRECTORY_UPLOAD_STATUS]:(e,t)=>(0,u.Ay)(e,e=>{!function(e,t,n){if(t){let r=e.byGroupId[t],i=r?{...r,groupId:t,status:n}:{groupId:t,pendingUploads:[],uploads:[],oversizedFiles:[],status:n};e.byGroupId[t]=i}}(e,t.meta.groupId,t.meta.status)}),[l.gK.FILE_UPLOAD_REQUEST]:(e,t)=>(0,u.Ay)(e,e=>{let n=t.payload.file.file;h(e,t.meta.uploadId,n);let r=e.byId[t.meta.uploadId.correlationId];r&&(r.status=l.yW.Queued)}),[l.gK.CLOUD_FILE_UPLOAD_REQUEST]:(e,t)=>(0,u.Ay)(e,e=>{let{file:n}=t.payload;h(e,t.meta.uploadId,n).isCloudUpload=!0}),[l.gK.INVALID_FILE_UPLOAD]:(e,t)=>{let n=(0,u.Ay)(e,e=>{let{file:n,isCloudUpload:r}=t.payload,{correlationId:i,groupId:o}=t.meta.uploadId,s=h(e,t.meta.uploadId,n);s.status=l.yW.Failed,s.error={errorType:l.oW.Invalid},r&&(s.isCloudUpload=!0),y(e,i,o)});return(0,s.Nh)(n,t)},[l.gK.FILE_UPLOAD]:(e,t)=>{let n=(0,u.Ay)(e,e=>{var n;let{progress:r,aborter:i}=t.payload,{correlationId:o}=t.meta.uploadId,s=null!==(n=e.byId[o])&&void 0!==n?n:h(e,t.meta.uploadId,{});s&&(s.status=l.yW.InProgress,s.uploadProgress.progress=r,i&&(s.uploadProgress.aborter=i))});return(0,s.r1)(n,t)},[(0,s.ok)(l.gK.FILE_UPLOAD)]:(e,t)=>{let n=(0,u.Ay)(e,e=>{var n;let{file:r}=t.payload,{correlationId:i,groupId:o}=t.meta.uploadId,s=e.byId[i],a=null===(n=e.byId[i])||void 0===n?void 0:n.uploadProgress;a&&(delete a.progress,delete a.aborter),s&&(s.status=l.yW.Complete,s.uploadedFile=r),y(e,i,o)});return(0,s.Zg)(n,t)},[(0,s.fJ)(l.gK.FILE_UPLOAD)]:(e,t)=>{let n=(0,u.Ay)(e,e=>{var n;let{correlationId:r,groupId:i}=t.meta.uploadId,o=e.byId[r],s=null===(n=e.byId[r])||void 0===n?void 0:n.uploadProgress;s&&(delete s.progress,delete s.aborter),o&&(o.status=l.yW.Failed,o.error=t.payload),y(e,r,i)});return(0,s.Nh)(n,t)},[p(l.gK.FILE_UPLOAD)]:(e,t)=>{let n=(0,u.Ay)(e,e=>{var n;let{correlationId:r,groupId:i}=t.meta.uploadId,o=e.byId[r],s=null===(n=e.byId[r])||void 0===n?void 0:n.uploadProgress;s&&(delete s.progress,delete s.aborter),o&&(o.status=l.yW.Canceled),y(e,r,i)});return(0,s.Nh)(n,t)},[l.gK.CAN_UPDATE_FILE_DETAILS]:(e,t)=>(0,u.Ay)(e,e=>{let{correlationId:n}=t.meta.uploadId,r=e.byId[n];r&&(r.uploadDetails={canUpdateFileDetails:!0})}),[l.gK.UPDATED_FILE_DETAILS]:(e,t)=>(0,u.Ay)(e,e=>{let{correlationId:n}=t.meta.uploadId,r=e.byId[n];(null==r?void 0:r.uploadDetails)&&(r.uploadDetails.canUpdateFileDetails=!1)}),[l.gK.FILE_UPLOAD_OVERSIZED]:(e,t)=>(0,u.Ay)(e,e=>{let{groupUploadId:n}=t.meta;t.payload.forEach(({request:{correlationId:t,file:r},fileSizeLimit:i})=>{h(e,{correlationId:t,groupId:n},r),function(e,t,n,r){let i=e.byId[t];i&&(i.status=l.yW.Failed,i.error={errorType:l.oW.Oversized,fileSizeLimit:r});let o=n&&e.byGroupId[n];o&&(o.oversizedFiles.push(t),y(e,t,n))}(e,t,n,i)})}),[l.gK.UPDATE_FILE]:(e,t)=>(0,u.Ay)(e,e=>{let{correlationId:n}=t.meta.uploadId,r=e.byId[n];r&&(e.byId[n]={...r,...t.payload.file})})}),b={getFileUploadById:(e,t)=>{var n;return null===(n=e.fileUpload)||void 0===n?void 0:n.byId[t]},getGroupStatusById:(e,t)=>{var n;return null===(n=e.fileUpload)||void 0===n?void 0:n.byGroupId[t]},getAllFileUploads:e=>{var t,n;return Object.entries(null!==(n=null===(t=e.fileUpload)||void 0===t?void 0:t.byId)&&void 0!==n?n:{}).map(([e,t])=>({correlationId:e,...t}))}};function*I(e,t,n,s){let u=yield(0,o.Lt)(b.getFileUploadById,t);if((null==u?void 0:u.status)===l.yW.Canceled)return;let{result:d,progress:c,abort:p}=(0,a.v)(e,s,["mimeType","isMedia"]);yield(0,o.yJ)(m.startFileUpload({correlationId:t,groupId:n},p));let g=(0,i.Od)(e=>{let o=c.subscribe(r=>{e(m.updateFileUploadProgress({correlationId:t,groupId:n},r))});return d.then(r=>{e(m.fileUploadSuccess({correlationId:t,groupId:n},r)),e(i.Kp)}).catch(()=>{}),d.catch(o=>{if(o.errorType===r.M5S.Aborted)e(m.fileUploadAborted({correlationId:t,groupId:n}));else{let i;o instanceof r.aDm&&(i=o.status),e(m.fileUploadFailure({correlationId:t,groupId:n},{errorType:l.oW.Api,errorCode:i}))}e(i.Kp)}),o});for(;;){let e=yield(0,o.s)(g);yield(0,o.yJ)(e)}}function*A(e){for(;;){let t=yield(0,o.s)(e),{file:n,queryParams:r}=t.payload,{correlationId:i,groupId:s}=t.meta.uploadId;yield(0,o.T1)(I,n,i,s,r)}}function*v(){let e=yield(0,o.T1)(i.Ix);for(let t=0;t<5;t++)yield(0,o.Zy)(A,e);for(;;){let t=yield(0,o.s)(l.gK.FILE_UPLOAD_REQUEST);yield(0,o.yJ)(e,t)}}},416488:function(e,t,n){"use strict";var r,i,o,s;n.d(t,{gK:function(){return a},oW:function(){return i},yW:function(){return r}});let a={FILE_UPLOAD_REQUEST:"file-upload.request",CLOUD_FILE_UPLOAD_REQUEST:"cloud.file-upload.request",INVALID_FILE_UPLOAD:"invalid-file-upload",FILE_UPLOAD:"file-upload",FILE_UPLOAD_ABORT:"file-upload.abort",FILE_UPLOAD_GROUP_ABORT:"file-upload.group.abort",FILE_UPLOAD_OVERSIZED:"file-upload.oversized",CAN_UPDATE_FILE_DETAILS:"file-upload.can-update-file-details",UPDATED_FILE_DETAILS:"file-upload.updated-file-details",DIRECTORY_UPLOAD_STATUS:"file-upload.status",UPDATE_FILE:"file-upload.update-file"};(o=r||(r={})).Queued="QUEUED",o.InProgress="IN PROGRESS",o.Complete="COMPLETE",o.Failed="FAILED",o.Canceled="CANCELED",(s=i||(i={})).Api="API",s.Oversized="OVERSIZED",s.Invalid="INVALID"},239715:function(e,t,n){"use strict";n.d(t,{o1:function(){return l},Ff:function(){return a},Lt:function(){return u}});var r=n(905898),i=n(968554),o=n(429837);let s={FTUE_REGISTER:"ftue.register",FTUE_DISPLAY_NEXT:"ftue.displayNext",FTUE_PAUSE:"ftue.pause",FTUE_RESUME:"ftue.resume"},a=(0,i.vy)({ftueCollectionMap:{}},{[(0,i.ok)(s.FTUE_REGISTER)]:(e,t)=>{let n=e;if(e.ftueCollectionMap[t.collectionKey]){let i=[...e.ftueCollectionMap[t.collectionKey].ftueKeys,t.ftueKey];n=(0,r.jM)(e,e=>{e.ftueCollectionMap[t.collectionKey]||(e.ftueCollectionMap[t.collectionKey]={}),e.ftueCollectionMap[t.collectionKey].ftueKeys=i})}else{let i={isPaused:!1,ftueKeys:[t.ftueKey]};n=(0,r.jM)(e,e=>{e.ftueCollectionMap[t.collectionKey]=i})}return(0,i.Zg)(n,t)},[(0,i.fJ)(s.FTUE_REGISTER)]:i.Nh,[(0,i.ok)(s.FTUE_DISPLAY_NEXT)]:(e,t)=>{let n=Array(...e.ftueCollectionMap[t.collectionKey].ftueKeys);return n.shift(),(0,r.jM)(e,e=>{e.ftueCollectionMap[t.collectionKey]||(e.ftueCollectionMap[t.collectionKey]={}),e.ftueCollectionMap[t.collectionKey].ftueKeys=n})},[(0,i.fJ)(s.FTUE_DISPLAY_NEXT)]:i.Nh,[(0,i.ok)(s.FTUE_PAUSE)]:(e,t)=>(0,r.jM)(e,e=>{e.ftueCollectionMap[t.collectionKey]||(e.ftueCollectionMap[t.collectionKey]={}),e.ftueCollectionMap[t.collectionKey].isPaused=!0}),[(0,i.fJ)(s.FTUE_PAUSE)]:i.Nh,[(0,i.ok)(s.FTUE_RESUME)]:(e,t)=>(0,r.jM)(e,e=>{e.ftueCollectionMap[t.collectionKey]||(e.ftueCollectionMap[t.collectionKey]={}),e.ftueCollectionMap[t.collectionKey].isPaused=!1}),[(0,i.fJ)(s.FTUE_RESUME)]:i.Nh}),l={registerFtue:(e,t)=>(0,i.RA)(async(n,r)=>{var a,l;let u,d;let c=`${e}.${t}`;try{await n(o.o1.loadUserPreference({key:c})),u=null===(l=null===(a=o.Lt.getUserPreferenceByKey(r(),c))||void 0===a?void 0:a.value)||void 0===l?void 0:l.value}catch(e){e&&"error"in e&&(d=e.error)}(u&&2>parseInt(u,10)||d&&404===d.status)&&n((0,i.rc)((0,i.ok)(s.FTUE_REGISTER),{collectionKey:e,ftueKey:t}))}),markCurrentFtueAsShown:e=>(0,i.RA)((t,n)=>{let r=u.getCurrentFtueKey(n(),e);if(!r)return t((0,i.rc)((0,i.fJ)(s.FTUE_DISPLAY_NEXT))),Promise.resolve(null);let a=`${e}.${r}`;t((0,i.rc)((0,i.ok)(s.FTUE_DISPLAY_NEXT),{collectionKey:e}));let l=o.Lt.getUserPreferenceByKey(n(),a),d=(null==l?void 0:l.value)?parseInt(l.value.value,10)+1:1;return t(o.o1.persistUserPreference({key:a,value:`${d}`}))}),pauseFtueSequence:e=>(0,i.rc)((0,i.ok)(s.FTUE_PAUSE),{collectionKey:e}),resumeFtueSequence:e=>(0,i.rc)((0,i.ok)(s.FTUE_RESUME),{collectionKey:e})},u={getCurrentFtueKey:(e,t)=>{let n=e.ftue.ftueCollectionMap[t];if(n){let{ftueKeys:e,isPaused:t}=n;return!t&&e?e[0]:null}return null}}},218916:function(e,t,n){"use strict";n.d(t,{o1:function(){return m},Ff:function(){return p},Lt:function(){return g}});var r=n(905898),i=n(968554),o=n(612918),s=n(91129);let a="goal.mastery.goals.load";var l=n(732583);let u=(e,t)=>{var n,r;if(!t.courseId)return i.Vc;let[o,s]=null!==(r=Object.entries(null!==(n=e.views.byCourseId[t.courseId])&&void 0!==n?n:{}).find(([,e])=>(0,l.Y_)(e.query,t)))&&void 0!==r?r:[null,null];return o?{id:o,view:s}:i.Vc},d=e=>["views","byCourseId",e.courseId],c=(e,t)=>{var n;if(!(null===(n=e.query)||void 0===n?void 0:n.courseId))return!1;let{view:r}=u(t.getState().goalMastery.goal,e.query);return!r||!r.isLoading&&!r.isValid},p=(0,i.vy)({byId:{},views:{byCourseId:{}}},{[a]:(0,i.Dh)(u,d),[(0,i.ok)(a)]:(e,t)=>{let{data:n}=t,s=(0,r.Ay)(e,e=>{Object.keys(n.goalsById).forEach(t=>{e.byId[t]?e.byId[t]={value:n.goalsById[t],status:e.byId[t].status}:e.byId[t]={value:n.goalsById[t],status:o.U8}})});return(0,i.lY)(s,t,{viewResolver:u,viewsPathResolver:d,values:n.goalIds,paging:n.paging})},[(0,i.fJ)(a)]:(0,i.To)(u,d)}),m={loadMasteryGoalsByQuery:e=>(0,i.Vy)(a,async()=>{try{return{data:await (0,s.tX)(e),query:e}}catch(t){throw new i.GS(t).setData({query:e})}},{data:{query:e},condition:c})},g={getMasteryGoalsByQuery:(e,t)=>{let{view:n}=u(e.goalMastery.goal,t);return n?(n.values||[]).map(t=>{var n;return null===(n=e.goalMastery.goal.byId[t])||void 0===n?void 0:n.value}).filter(e=>!!e):[]},getMasteryGoalsViewByQuery:(e,t)=>{let{view:n}=u(e.goalMastery.goal,t);return n}}},196182:function(e,t,n){"use strict";n.d(t,{Ff:function(){return h},Lt:function(){return b},o1:function(){return f}});var r=n(905898),i=n(968554),o=n(91129),s=n(271218),a=n(732583),l=n(612918),u=n(106535);let d=(e,t)=>{var n,r;if(!t.courseId)return i.Vc;let[o,s]=null!==(r=Object.entries(null!==(n=e.bulkViews.byCourseId[t.courseId])&&void 0!==n?n:{}).find(([,e])=>(0,a.Y_)(e.query,t)))&&void 0!==r?r:[null,null];return o?{id:o,view:s}:i.Vc},c=(e,t)=>{var n,r,o;let[s,l]=null!==(o=Object.entries(null!==(r=null===(n=e.views.byCourseId[t.courseId])||void 0===n?void 0:n.byUserId[t.userId])&&void 0!==r?r:{}).find(([,e])=>(0,a.Y_)(e.query,t)))&&void 0!==o?o:[null,null];return s?{id:s,view:l}:i.Vc},p=e=>["bulkViews","byCourseId",e.courseId],m=e=>["views","byCourseId",e.courseId,"byUserId",e.userId],g=(e,t)=>{var n;if(!(null===(n=e.query)||void 0===n?void 0:n.courseId))return!1;let{view:r}=d(t.getState().goalMastery.performance,e.query);return!r||!r.isLoading&&!r.isValid},E=(e,t)=>{let{view:n}=c(t.getState().goalMastery.performance,e.query);return!n||!n.isLoading&&!n.isValid},h=(0,i.vy)({byCourseId:{},bulkViews:{byCourseId:{}},views:{byCourseId:{}}},{[s.g.GOAL_MASTERY_GOAL_PERFORMANCE_USER_LOAD]:(0,i.Dh)(c,m),[(0,i.ok)(s.g.GOAL_MASTERY_GOAL_PERFORMANCE_USER_LOAD)]:(e,t)=>{let n=y(e,t.query,t.data);return(0,i.lY)(n,t,{viewResolver:c,viewsPathResolver:m,values:t.data.performanceIds})},[(0,i.fJ)(s.g.GOAL_MASTERY_GOAL_PERFORMANCE_USER_LOAD)]:(0,i.To)(c,m),[s.g.GOAL_MASTERY_GOAL_PERFORMANCE_BULK_VIEW_LOAD]:(0,i.Dh)(d,p),[(0,i.ok)(s.g.GOAL_MASTERY_GOAL_PERFORMANCE_BULK_VIEW_LOAD)]:(e,t)=>{let n=y(e,t.query,t.data);return(0,i.lY)(n,t,{viewResolver:d,viewsPathResolver:p,values:t.data.performanceIds})},[(0,i.fJ)(s.g.GOAL_MASTERY_GOAL_PERFORMANCE_BULK_VIEW_LOAD)]:(0,i.To)(d,p),[s.g.GOAL_MASTERY_GOAL_PERFORMANCE_BULK_INVALIDATE]:(e,t)=>(0,r.Ay)(e,e=>{e.bulkViews.byCourseId[t.courseId]&&Object.values(e.bulkViews.byCourseId[t.courseId]).forEach(e=>{e.isValid=!1})}),[s.g.GOAL_MASTERY_GOAL_PERFORMANCE_USER_INVALIDATE]:(e,t)=>(0,r.Ay)(e,e=>{var n,r;(null===(n=e.views.byCourseId[t.courseId])||void 0===n?void 0:n.byUserId[t.userId])&&Object.values(null===(r=e.views.byCourseId[t.courseId])||void 0===r?void 0:r.byUserId[t.userId]).forEach(e=>{e.isValid=!1})})}),y=(e,t,n)=>(0,r.Ay)(e,e=>{n.performance.forEach(n=>{var r,i,o,a,u,d,c,p,m;let g=null!==(o=(p=(null!==(i=(d=(null!==(r=(a=e.byCourseId)[u=t.courseId])&&void 0!==r?r:a[u]={byGoalId:{}}).byGoalId)[c=n.goalId])&&void 0!==i?i:d[c]={byUserId:{}}).byUserId)[m=n.userId])&&void 0!==o?o:p[m]={value:n,status:l.U8};(0,s.J)(n)?g.value=n:g.value={...n,...(0,s.J)(g.value)?{contentItems:g.value.contentItems}:{}}})}),f={loadMasteryGoalPerformanceBulkViewByQuery:e=>(0,i.Vy)(s.g.GOAL_MASTERY_GOAL_PERFORMANCE_BULK_VIEW_LOAD,async()=>{try{return{data:await (0,o.ZG)(e),query:e}}catch(t){throw new i.GS(t).setData({query:e})}},{data:{query:e},condition:g}),loadMasteryGoalPerformanceUserByQuery:e=>(0,i.Vy)(s.g.GOAL_MASTERY_GOAL_PERFORMANCE_USER_LOAD,async()=>{try{return{data:await (0,o.Tm)(e),query:e}}catch(t){throw new i.GS(t).setData({query:e})}},{data:{query:e},condition:E}),invalidateBulkViewsByCourseId:e=>(0,i.rc)(s.g.GOAL_MASTERY_GOAL_PERFORMANCE_BULK_INVALIDATE,{courseId:e}),invalidateUserViewsByCourseIdAndUserId:(e,t)=>(0,i.rc)(s.g.GOAL_MASTERY_GOAL_PERFORMANCE_USER_INVALIDATE,{courseId:e,userId:t})},b={getMasteryGoalPerformanceBulkViewByQuery:(e,t)=>{var n;let{view:r}=d(e.goalMastery.performance,t);return r?(null!==(n=r.values)&&void 0!==n?n:[]).map(t=>{var n,i,o;let s=(0,u.s)(t);return null===(o=null===(i=null===(n=e.goalMastery.performance.byCourseId[r.query.courseId])||void 0===n?void 0:n.byGoalId[s.goalId])||void 0===i?void 0:i.byUserId[s.userId])||void 0===o?void 0:o.value}).filter(e=>!!e):[]},getMasteryGoalPerformanceBulkViewViewByQuery:(e,t)=>{let{view:n}=d(e.goalMastery.performance,t);return n},getMasteryGoalPerformanceUserByQuery:(e,t)=>{var n;let{view:r}=c(e.goalMastery.performance,t);return r?(null!==(n=r.values)&&void 0!==n?n:[]).map(t=>{var n,i,o;let s=(0,u.s)(t);return null===(o=null===(i=null===(n=e.goalMastery.performance.byCourseId[r.query.courseId])||void 0===n?void 0:n.byGoalId[s.goalId])||void 0===i?void 0:i.byUserId[s.userId])||void 0===o?void 0:o.value}).filter(e=>!!e):[]},getMasteryGoalPerformanceUserViewByQuery:(e,t)=>{let{view:n}=c(e.goalMastery.performance,t);return n}}},271218:function(e,t,n){"use strict";n.d(t,{J:function(){return i},g:function(){return r}});let r={GOAL_MASTERY_GOAL_PERFORMANCE_BULK_VIEW_LOAD:"goal.mastery.goals.performance.bulk-view.load",GOAL_MASTERY_GOAL_PERFORMANCE_USER_LOAD:"goal.mastery.goals.performance.user.load",GOAL_MASTERY_GOAL_PERFORMANCE_BULK_INVALIDATE:"goal.mastery.goals.performance.bulk.invalidate",GOAL_MASTERY_GOAL_PERFORMANCE_USER_INVALIDATE:"goal.mastery.goals.performance.user.invalidate"},i=e=>!!e&&"contentItems"in e},168850:function(e,t,n){"use strict";n.d(t,{o1:function(){return c},Ff:function(){return d},Lt:function(){return p}});let r="goal.mastery.scale.load";var i=n(968554),o=n(905898),s=n(612918),a=n(91129);let l=(e,t)=>{let n=t.getState().goalMastery.scale.scale;return(0,s.qO)(null==n?void 0:n.status)},u=()=>["scale"],d=(0,i.vy)({scale:void 0},{[r]:(0,s.vR)(u,s.vq),[(0,i.ok)(r)]:(e,t)=>{let{scale:n}=t;return(0,o.Ay)(e,e=>{e.scale={value:n,status:s.y_}})},[(0,i.fJ)(r)]:(0,s.vR)(u,s.JL)}),c={loadGoalMasterScale:()=>(0,i.Vy)(r,async()=>({scale:(await (0,a.Dh)()).results}),{condition:l})},p={getGoalMasteryScale:e=>{var t,n;return null!==(n=null===(t=e.goalMastery.scale.scale)||void 0===t?void 0:t.value)&&void 0!==n?n:[]},isLoading:e=>{var t,n;return null===(t=e.goalMastery.scale.scale)||void 0===t||!t.value||(null===(n=e.goalMastery.scale.scale)||void 0===n?void 0:n.status)!==s.y_}}},747265:function(e,t,n){"use strict";n.d(t,{Ff:function(){return l},Lt:function(){return d},gK:function(){return a},o1:function(){return u}});var r=n(968554),i=n(504566),o=n(905898),s=n(56174);let a={GRADABLE_USER_OPTION_ITEM_PUT:"gradable.user.option.item.put",GRADABLE_USER_OPTION_ITEM_DELETE:"gradable.user.option.item.delete",GRADABLE_USER_OPTION_ITEM_LOAD:"gradable.item.user.option.load",GRADABLE_USER_OPTION_COUNT_ITEM_LOAD:"gradable.item.user.option.count.load",GRADABLE_USER_OPTION_EXCEPTIONS_ITEM_LOAD:"gradable.item.user.option.exceptions.load"},l=(0,r.vy)({byColumnId:{},isLoading:!1,exceptionsCount:{fixedDueDateExceptionCount:void 0,relativeDueDateExceptionCount:void 0,unlimitedDueDateExceptionCount:void 0,withDueDateExceptionCount:void 0}},{[a.GRADABLE_USER_OPTION_ITEM_PUT]:r.r1,[(0,r.ok)(a.GRADABLE_USER_OPTION_ITEM_PUT)]:(e,t)=>{let{item:n}=t,{membershipId:i,groupId:s,columnId:a}=n,l=(0,o.Ay)(e,e=>{var t,r,o,l,u,d;let c={[a]:{}};i&&(c[a].byCourseMembershipId={...null===(t=e.byColumnId[a])||void 0===t?void 0:t.byCourseMembershipId,[i]:{...null===(o=null===(r=e.byColumnId[a])||void 0===r?void 0:r.byCourseMembershipId)||void 0===o?void 0:o[i],...n}}),s&&(c[a].byGroupId={...null===(l=e.byColumnId[a])||void 0===l?void 0:l.byGroupId,[s]:{...null===(d=null===(u=e.byColumnId[a])||void 0===u?void 0:u.byGroupId)||void 0===d?void 0:d[s],...n}}),e.byColumnId={...e.byColumnId,[n.columnId]:c[a]}});return(0,r.Zg)(l,t)},[(0,r.fJ)(a.GRADABLE_USER_OPTION_ITEM_PUT)]:r.Nh,[a.GRADABLE_USER_OPTION_ITEM_DELETE]:r.r1,[(0,r.ok)(a.GRADABLE_USER_OPTION_ITEM_DELETE)]:(e,t)=>{let n=(0,o.Ay)(e,e=>{e.byColumnId[t.columnId]&&delete e.byColumnId[t.columnId]});return(0,r.Zg)(n,t)},[(0,r.fJ)(a.GRADABLE_USER_OPTION_ITEM_DELETE)]:r.Nh,[a.GRADABLE_USER_OPTION_ITEM_LOAD]:r.r1,[(0,r.ok)(a.GRADABLE_USER_OPTION_ITEM_LOAD)]:(e,t)=>{let n;let{columnId:i,byCourseMembershipId:s,byGroupId:a}=t;return s?n=(0,o.Ay)(e,e=>{var t;e.byColumnId[i]||(e.byColumnId[i]={byCourseMembershipId:{}}),e.byColumnId[i].byCourseMembershipId={...null!==(t=e.byColumnId[i].byCourseMembershipId)&&void 0!==t?t:{},...Object.keys(s).reduce((e,t)=>({...e,[t]:{...s[t],groupId:void 0}}),{})}}):a&&(n=(0,o.Ay)(e,e=>{var t;e.byColumnId[i]||(e.byColumnId[i]={byGroupId:{}}),e.byColumnId[i].byGroupId={...null!==(t=e.byColumnId[i].byGroupId)&&void 0!==t?t:{},...Object.keys(a).reduce((e,t)=>({...e,[t]:{...a[t],membershipId:void 0}}),{})}})),(0,r.Zg)(null!=n?n:e,t)},[(0,r.fJ)(a.GRADABLE_USER_OPTION_ITEM_LOAD)]:r.Nh,[a.GRADABLE_USER_OPTION_COUNT_ITEM_LOAD]:r.r1,[(0,r.ok)(a.GRADABLE_USER_OPTION_COUNT_ITEM_LOAD)]:(e,t)=>{let n=(0,o.Ay)(e,e=>{e.exceptionsCount=t.results});return(0,r.Zg)(n,t)},[(0,r.fJ)(a.GRADABLE_USER_OPTION_COUNT_ITEM_LOAD)]:r.Nh,[a.GRADABLE_USER_OPTION_EXCEPTIONS_ITEM_LOAD]:r.r1,[(0,r.ok)(a.GRADABLE_USER_OPTION_EXCEPTIONS_ITEM_LOAD)]:(e,t)=>{let{membershipId:n,byColumnId:i}=t,s=(0,o.Ay)(e,e=>{Object.keys(i).forEach(t=>{let n=i[t];if(null==n?void 0:n.hasDueDateException){let r=n.membershipId,i=n.groupId;e.byColumnId[t]||(e.byColumnId[t]={}),r?(e.byColumnId[t].byCourseMembershipId||(e.byColumnId[t].byCourseMembershipId={}),e.byColumnId[t].byCourseMembershipId[r]=n):i&&(e.byColumnId[t].byGroupId||(e.byColumnId[t].byGroupId={}),e.byColumnId[t].byGroupId[i]=n)}})});return(0,r.Zg)(s,t)},[(0,r.ok)(s.g.EXCEPTION_DETAILS_LOAD)]:(e,t)=>{let{data:{learnExceptionDetails:n}}=t;return(0,o.Ay)(e,e=>{n&&n.length>0&&n.forEach(t=>{let{membershipId:n,groupId:r,columnId:i}=t;e.byColumnId[i]||(e.byColumnId[i]={}),(null==t?void 0:t.hasDueDateException)&&(n?(e.byColumnId[i].byCourseMembershipId||(e.byColumnId[i].byCourseMembershipId={}),e.byColumnId[i].byCourseMembershipId[n]=t):r&&(e.byColumnId[i].byGroupId||(e.byColumnId[i].byGroupId={}),e.byColumnId[i].byGroupId[r]=t))})})},[(0,r.fJ)(a.GRADABLE_USER_OPTION_EXCEPTIONS_ITEM_LOAD)]:r.Nh}),u={persistGradableItemUserOptionByMembershipId:(e,t)=>(0,r.VP)(a.GRADABLE_USER_OPTION_ITEM_PUT,()=>(0,i.T8)(e,t).then(t=>({params:e,item:t})).catch(e=>{throw{err:e}}),{}),deleteGradableItemUserOptionByMembershipId:e=>(0,r.VP)(a.GRADABLE_USER_OPTION_ITEM_DELETE,async()=>{try{return await (0,i.n6)(e),{courseId:e.courseId,columnId:e.columnId,membershipId:e.membershipId,groupId:e.groupId,byCourseMembershipId:{},byGroupId:{}}}catch(e){throw{err:e}}}),persistGradableItemUserOptionByGroupId:(e,t)=>(0,r.VP)(a.GRADABLE_USER_OPTION_ITEM_PUT,async()=>{try{let n=await (0,i.QN)(e,t);return{params:e,item:n}}catch(e){throw{err:e}}},{}),deleteGradableItemUserOptionByGroupId:e=>(0,r.VP)(a.GRADABLE_USER_OPTION_ITEM_DELETE,async()=>{try{return await (0,i.gB)(e),{courseId:e.courseId,columnId:e.columnId,byGroupId:{}}}catch(e){throw{err:e}}}),fetchGradableItemUserOption:(e,t)=>{let n={courseId:e.courseId,columnId:e.columnId,...t};return(0,r.VP)(a.GRADABLE_USER_OPTION_ITEM_LOAD,async()=>{try{return await (0,i.ml)(e,t)}catch(e){throw{err:e,query:n}}},{query:n})},fetchGradableItemUserOptionCount:(e,t)=>(0,r.VP)(a.GRADABLE_USER_OPTION_COUNT_ITEM_LOAD,async()=>{try{return await (0,i.Lf)(e)}catch(e){throw{err:e}}}),fetchGradableItemUserOptionExceptions:(e,t)=>(0,r.VP)(a.GRADABLE_USER_OPTION_EXCEPTIONS_ITEM_LOAD,async()=>{try{return await (0,i.Yn)(e,t)}catch(e){throw{err:e}}})},d={getGradableItemUserOptionByColumnAndMembershipId:(e,t,n)=>{var r;let i=e.gradableItemUserOption.byColumnId[t];return null===(r=null==i?void 0:i.byCourseMembershipId)||void 0===r?void 0:r[n]},getGradableItemUserOptionByColumnAndGroupId:(e,t,n)=>{var r;let i=e.gradableItemUserOption.byColumnId[t];return null===(r=null==i?void 0:i.byGroupId)||void 0===r?void 0:r[n]}}},457969:function(e,t,n){"use strict";n.d(t,{Ff:function(){return D},Lt:function(){return P},kK:function(){return O},o1:function(){return N}});var r=n(905898),i=n(139552),o=n(645250),s=n(232955),a=n(758247),l=n(968554),u=n(842804),d=n(246206),c=n(820656),p=n(437272),m=n(477305),g=n(300474),E=n(808954),h=n(764209),y=n(612918),f=n(170228);let b=e=>["views","byColumnId",e.columnId],I=e=>["byGradebookAttemptId",e.attemptId];function A(e){return{columnId:e.columnId,gradeId:"gradeId"in e?e.gradeId:void 0,attemptId:"attemptId"in e?e.attemptId:void 0,groupAttemptId:"groupAttemptId"in e?e.groupAttemptId:void 0,expand:"expand"in e?e.expand:void 0}}let v=["columnId","gradeId","attemptId","groupAttemptId","expand"],S=(e,t)=>{var n;let r=Object.keys(t);return Object.values(null!==(n=e.views.byColumnId[t.columnId])&&void 0!==n?n:{}).filter(e=>o.isEqual(o.pick(A(t),...r),o.pick(A(e.query),...r)))},_=(e,t)=>{var n;if(!t)return l.Vc;let r=null!==(n=e.views.byColumnId[t.columnId])&&void 0!==n?n:{},i=Object.keys(r).find(e=>{let n=r[e];return o.isEqual(o.pick(A(t),...v),o.pick(A(n.query),...v))});return i?{id:i,view:r[i]}:l.Vc},T=(e,t)=>{let{view:n}=_(t.getState().gradebookAttempt,e.query);return!(null==n?void 0:n.isLoading)&&(!!e.needsRefresh||!(null==n?void 0:n.isValid))},O=e=>{var t,n;return null===(n=null===(t=e.toolAttemptDetail)||void 0===t?void 0:t[m.Qc.Test.toString()])||void 0===n?void 0:n.assessment},C=(e,t)=>{var n;let r=null===(n=O(t))||void 0===n?void 0:n.id;if(r&&t.id){let n=e.byGradebookAttemptId[t.id].value;n&&(n.assessmentId=r)}},R=(e,t)=>{let n=e.views.byColumnId[t];n&&Object.values(n).forEach(t=>{t.values&&(t.values.some(t=>{var n;return null===(n=e.byGradebookAttemptId[t])||void 0===n?void 0:n.value})||(t.isValid=!1))})},L=(e,t)=>{t.forEach(t=>{let n=(0,s.Rg)(t);e.byGradebookAttemptId[n.id]={value:n,status:y.U8},C(e,n)})},D=(0,l.vy)({views:{byColumnId:{}},byGradebookAttemptId:{},deletedAttemptsByColumnId:{},paging:void 0,isLoading:!1},{[E.g.GRADEBOOK_ATTEMPT_LOAD]:(0,l.Dh)(_,b),[E.g.GRADEBOOK_CLEAR_STUDENT_SUBMISSION_WITH_VIEW_URL_EXPANDED]:(e,t)=>{let{attemptId:n}=t;return(0,r.Ay)(e,t=>{let r=e.byGradebookAttemptId[n].value;if(r){let e={...r};delete e.studentSubmissionViewUrlExpanded,t.byGradebookAttemptId[n].value=e}})},[(0,l.ok)(E.g.GRADEBOOK_ATTEMPT_LOAD)]:(e,t)=>{let{attempt:n,courseId:i,columnId:o,viewUrlRequested:s}=t,a=(0,r.Ay)(e,t=>{var r;if(n){let a=null===(r=e.byGradebookAttemptId[n.id])||void 0===r?void 0:r.value;t.byGradebookAttemptId[n.id]={value:{...a,...n,studentSubmissionViewUrlExpanded:s?n.studentSubmission:null==a?void 0:a.studentSubmissionViewUrlExpanded,courseId:i,columnId:o},status:y.U8},C(t,n)}});return(0,l.lY)(a,t,{viewResolver:_,viewsPathResolver:b,values:[n.id]})},[(0,l.fJ)(E.g.GRADEBOOK_ATTEMPT_LOAD)]:(0,l.To)(_,b),[(0,l.ok)(p.g.GRADEBOOK_GROUP_ATTEMPT_LOAD)]:(e,t)=>{let{groupAttempt:n,columnId:i}=t,o=n.attempts;if(!(null==o?void 0:o.length))return e;let s=(0,r.Ay)(e,e=>{let t=[];o.forEach(n=>{e.byGradebookAttemptId[n.id]={value:n,status:y.U8},C(e,n),t.push(n.id),(0,l.gD)(e,(0,l.lY)(e,{type:p.g.GRADEBOOK_GROUP_ATTEMPT_LOAD,query:{attemptId:n.id,columnId:i}},{viewResolver:_,viewsPathResolver:b,values:[n.id]}))}),(0,l.gD)(e,(0,l.lY)(e,{type:p.g.GRADEBOOK_GROUP_ATTEMPT_LOAD,query:{groupAttemptId:n.id,columnId:i}},{viewResolver:_,viewsPathResolver:b,values:t}))});return(0,l.Zg)(s,t)},[(0,l.ok)(p.g.GRADEBOOK_GROUP_ATTEMPT_DELETE)]:(e,t)=>{let{groupAttempt:{id:n}}=t;return n?(0,r.Ay)(e,e=>{Object.values(e.byGradebookAttemptId).forEach(t=>{var r,i;let o=null===(r=t.value)||void 0===r?void 0:r.id;o&&(null===(i=t.value)||void 0===i?void 0:i.groupAttemptId)===n&&delete e.byGradebookAttemptId[o]})}):e},[(0,l.ok)(p.g.SET_GRADEBOOK_GROUP_ATTEMPT_UPDATE)]:(e,t)=>{let{groupAttempt:n}=t,i=n.attempts;return(null==i?void 0:i.length)?(0,r.Ay)(e,e=>{L(e,i)}):e},[(0,l.ok)(p.g.GRADEBOOK_GROUP_ATTEMPT_UPDATE)]:(e,t)=>{let{groupAttempt:n}=t,i=n.attempts;return(null==i?void 0:i.length)?(0,r.Ay)(e,e=>{L(e,i)}):e},[E.g.GRADEBOOK_ATTEMPT_DELETE]:(0,y.rK)(I,y.hu.Delete,y.nn),[(0,l.ok)(E.g.GRADEBOOK_ATTEMPT_DELETE)]:(e,t)=>{let{attempt:n}=t,i=n.id;return(0,r.Ay)(e,e=>{delete e.byGradebookAttemptId[i]})},[(0,l.fJ)(E.g.GRADEBOOK_ATTEMPT_DELETE)]:(0,y.rK)(I,y.hu.Delete,y.XP),[E.g.GRADEBOOK_ATTEMPTS_LOAD]:(e,t)=>(0,l.Dh)(_,b)((0,l.r1)(e,t),t),[(0,l.ok)(E.g.GRADEBOOK_ATTEMPTS_LOAD)]:(e,t)=>{let{byGradebookAttemptId:n={},deletedAttempts:i,courseId:o,columnId:s,viewUrlRequested:a,gradeId:u,query:d}=t,c=(0,r.Ay)(e,t=>{s&&!u&&(t.deletedAttemptsByColumnId[s]={value:[...i].sort((e,t)=>{var n,r;return(null!==(n=e.delegatedGraderOrder)&&void 0!==n?n:1/0)-(null!==(r=t.delegatedGraderOrder)&&void 0!==r?r:1/0)}),status:y.U8}),Object.entries(n).forEach(([n,r])=>{var i;let u=null===(i=e.byGradebookAttemptId[n])||void 0===i?void 0:i.value;t.byGradebookAttemptId[n]={value:{...u,...r,studentSubmissionViewUrlExpanded:a?r.studentSubmission:null==u?void 0:u.studentSubmissionViewUrlExpanded,courseId:o,columnId:s},status:y.U8},(0,l.gD)(t,(0,l.lY)(t,{type:E.g.GRADEBOOK_ATTEMPTS_LOAD,query:{...d,attemptId:n}},{viewResolver:_,viewsPathResolver:b,values:[n]}))}),(0,l.gD)(t,(0,l.lY)(t,{type:E.g.GRADEBOOK_ATTEMPTS_LOAD,query:d},{viewResolver:_,viewsPathResolver:b,values:Object.keys(n)}))});return(0,l.Zg)(c,t)},[(0,l.fJ)(E.g.GRADEBOOK_ATTEMPTS_LOAD)]:(0,l.To)(_,b),[E.g.GRADEBOOK_ATTEMPT_UPDATE]:(0,y.rK)(I,y.hu.Update,y.J7),[(0,l.ok)(E.g.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>{let{attempt:n,columnId:i}=t,{byGradebookAttemptId:o}=e;return(0,r.Ay)(e,e=>{var t;let r=null===(t=o[n.id])||void 0===t?void 0:t.value;r?e.byGradebookAttemptId[n.id]={value:{...r,...n},status:y.U8}:(e.byGradebookAttemptId[n.id]={value:n,status:y.U8},R(e,i)),C(e,n)})},[(0,l.fJ)(E.g.GRADEBOOK_ATTEMPT_UPDATE)]:(0,y.rK)(I,y.hu.Update,y.XP),[(0,l.ok)(u.g.QUESTION_PERSIST)]:(e,t)=>{let{columnId:n}=t;return(0,r.Ay)(e,e=>{let t=e.views.byColumnId[n];t&&Object.values(t).forEach(e=>{e.isValid=!1})})},[(0,l.ok)(d.g.GRADED_QUESTION_ATTEMPT_PERSIST)]:(e,t)=>{let{dependents:{columnId:n,attemptId:i}}=t.data;return(0,r.Ay)(e,e=>{if(n)for(let t of S(e,{columnId:n,attemptId:i}))t.isValid=!1})},[E.g.GRADEBOOK_ATTEMPTS_INVALIDATE_BY_COLUMN_ID]:(e,t)=>{let{columnId:n}=t;return(0,r.Ay)(e,e=>{for(let t of S(e,{columnId:n}))("attemptId"in t.query&&t.query.attemptId||"gradeId"in t.query&&t.query.gradeId)&&(t.isValid=!1)})},[E.g.GRADEBOOK_ATTEMPT_INVALIDATE_BY_ID]:(e,t)=>(0,r.Ay)(e,e=>{S(e,{columnId:t.columnId,attemptId:t.attemptId}).forEach(e=>{e.isValid=!1})}),[(0,l.ok)(h.g.CONTENT_PERSIST)]:(e,t)=>(0,r.Ay)(e,e=>{var n,r;let{contents:i,prevContent:o,columns:s}=t;if(i&&(null==o?void 0:o.id)&&s){let t=i[o.id];(null===(n=null==t?void 0:t.gradingColumn)||void 0===n?void 0:n.gradingSchemaId)!==(null===(r=null==o?void 0:o.gradingColumn)||void 0===r?void 0:r.gradingSchemaId)&&Object.keys(s).forEach(t=>{for(let n of S(e,{columnId:t}))n.isValid=!1})}}),[(0,l.ok)(c.g.QUESTION_ATTEMPTS_PERSIST)]:(e,t)=>{let{data:n,columnId:i}=t;return(0,r.Ay)(e,e=>{Object.values(n).forEach(t=>{var n;let r=null===(n=t.result)||void 0===n?void 0:n.attemptId;if(i)for(let t of S(e,{columnId:i,attemptId:r}))t.isValid=!1})})},[(0,l.fJ)(c.g.QUESTION_ATTEMPTS_PERSIST)]:(e,t)=>(0,l.Nh)(e,t),[E.g.GRADEBOOK_ATTEMPT_CREATE]:l.r1,[(0,l.ok)(E.g.GRADEBOOK_ATTEMPT_CREATE)]:(e,t)=>{let{attempt:n,columnId:i}=t,o=n.id,s=(0,r.Ay)(e,e=>{e.byGradebookAttemptId[o]={value:n,status:y.U8};let t=e.views.byColumnId[i];t&&Object.values(t).forEach(e=>{e.isValid=!1})});return(0,l.Zg)(s,t)},[(0,l.fJ)(E.g.GRADEBOOK_ATTEMPT_CREATE)]:l.Nh,[(0,l.ok)(f.g.GRADEBOOK_GRADE_DIRECT_GRADE_ENTRY_MAPPING)]:(e,t)=>{let{attempts:n}=t;return n&&(e=(0,r.Ay)(e,e=>{n.forEach(t=>{let n=t.id;e.byGradebookAttemptId[n]={value:t,status:y.U8}})})),(0,l.Zg)(e,t)}}),N={loadGradebookAttemptByAttemptId:({needsRefresh:e,...t},n)=>(0,l.Vy)(E.g.GRADEBOOK_ATTEMPT_LOAD,async()=>{var e;try{let n=await (0,s.EJ)(t),r=o.includes(null===(e=t.expand)||void 0===e?void 0:e.split(","),"viewUrl");return{...n,query:t,viewUrlRequested:r}}catch(e){throw new l.GS(e).setData({query:t})}},{data:{query:t,needsRefresh:e},condition:T,allowedErrors:n}),clearSubmissionTextWithViewUrlByAttemptId:e=>(0,l.rc)(E.g.GRADEBOOK_CLEAR_STUDENT_SUBMISSION_WITH_VIEW_URL_EXPANDED,{attemptId:e}),loadGradebookAttemptsByColumnId:e=>(0,l.Vy)(E.g.GRADEBOOK_ATTEMPTS_LOAD,async()=>{var t;try{let n=await (0,s.lq)(e),r=o.includes(null===(t=e.expand)||void 0===t?void 0:t.split(","),"viewUrl");return{...n,query:o.pick(e,...v),viewUrlRequested:r}}catch(t){throw new l.GS(t).setData({query:o.pick(e,...v)})}},{data:{query:e},condition:T}),loadGradebookAttemptsByGradeId:e=>(0,l.Vy)(E.g.GRADEBOOK_ATTEMPTS_LOAD,async()=>{var t;try{let n=await (0,s.lq)(e),r=o.includes(null===(t=e.expand)||void 0===t?void 0:t.split(","),"viewUrl");return{...n,query:o.pick(e,...v),viewUrlRequested:r,gradeId:e.gradeId}}catch(t){throw new l.GS(t).setData({query:o.pick(e,...v)})}},{data:{query:e},condition:T}),createAttempt:(e,t,n)=>(0,l.Vy)(E.g.GRADEBOOK_ATTEMPT_CREATE,async()=>({attempt:await (0,s.Cz)(e,n,t),columnId:t})),updateAttemptById:e=>(0,l.VP)(E.g.GRADEBOOK_ATTEMPT_UPDATE,async(t,n)=>{let{courseId:r,attemptId:i,payload:o,columnId:a,queryParams:u}=e;try{return await (0,s.dO)(r,i,o,{columnId:a},u)}catch(e){throw n((0,l.rc)((0,l.fJ)(E.g.GRADEBOOK_ATTEMPT_UPDATE),{attemptId:i})),e}},{attemptId:e.attemptId,courseId:e.courseId,studentAttemptStatusChanged:!!e.payload.status}),deleteAttemptById:e=>(0,l.VP)(E.g.GRADEBOOK_ATTEMPT_DELETE,async t=>{let{courseId:n,attemptId:r}=e,i=t().gradebookAttempt.byGradebookAttemptId[r].value;try{return await (0,s.v8)(n,r),{attempt:i}}catch(t){throw new l.GS(t).setData(e)}},{attemptId:e.attemptId}),assignNewAttemptForPeerReview:e=>(0,l.RA)(async t=>{try{let n=await (0,s.JN)(e),r={courseId:e.courseId,columnId:e.columnId,gradeId:n.gradeId,reviewableAttemptsOnly:!0};return await t(N.loadGradebookAttemptsByColumnId(r)),{...n}}catch(e){throw e instanceof g.Zn||t((0,l.rc)((0,l.ok)(a.A.APP_ERROR),{error:e})),e}}),setGradeAttemptInStore:(e,t,n,r)=>(0,l.rc)((0,l.ok)(E.g.GRADEBOOK_ATTEMPT_UPDATE),{attempt:e,courseId:t,studentAttemptStatusChanged:r,columnId:n}),invalidateGradebookAttemptsByColumnId:e=>(0,l.rc)(E.g.GRADEBOOK_ATTEMPTS_INVALIDATE_BY_COLUMN_ID,{columnId:e}),invalidateGradebookAttemptById:e=>(0,l.rc)(E.g.GRADEBOOK_ATTEMPT_INVALIDATE_BY_ID,e),setNewAttemptInStore:(e,t)=>(0,l.rc)((0,l.ok)(E.g.GRADEBOOK_ATTEMPT_CREATE),{attempt:e,columnId:t})},P={getGradebookAttemptByAttemptId:(e,t)=>{var n;return null===(n=e.gradebookAttempt.byGradebookAttemptId[t])||void 0===n?void 0:n.value},getGradebookAttemptsByGroupAttemptId:(e,t)=>P.getGradebookAttemptsByGradeId(e,t),isGradebookAttemptStatusUpdatingByAttemptId:(e,t)=>{var n;return(null===(n=e.gradebookAttempt.byGradebookAttemptId[t])||void 0===n?void 0:n.status)===y.J7},getGradebookAttemptsByColumnId:(e,t)=>{var n;let{view:r}=_(e.gradebookAttempt,t);if(r)return null===(n=r.values)||void 0===n?void 0:n.map(t=>e.gradebookAttempt.byGradebookAttemptId[t].value).filter(e=>!!e)},isGradebookAttemptsLoadingByGradeId:(e,t)=>{let{view:n}=_(e.gradebookAttempt,t);return(null==n?void 0:n.isLoading)===!0},getGradebookAttemptsByGradeId:(e,t)=>{var n;let{view:r}=_(e.gradebookAttempt,t);if(r)return null===(n=r.values)||void 0===n?void 0:n.map(t=>{var n;return null===(n=e.gradebookAttempt.byGradebookAttemptId[t])||void 0===n?void 0:n.value}).filter(e=>!!e)},getGradebookAttemptsByUserId:(e,t,n,r)=>Object.values(e.gradebookAttempt.byGradebookAttemptId).filter(e=>{var i,o,s;return(null===(i=e.value)||void 0===i?void 0:i.courseId)===t&&(null===(o=e.value)||void 0===o?void 0:o.columnId)===n&&(null===(s=e.value)||void 0===s?void 0:s.userId)===r}).map(e=>e.value),getReviewableGradebookAttempts:(e,t,n,r)=>Object.values(e.gradebookAttempt.byGradebookAttemptId).filter(e=>{var i;return(null===(i=e.value)||void 0===i?void 0:i.courseId)===t&&e.value.columnId===n&&e.value.userId!==r}).map(e=>e.value),getDeletedReviewableGradebookAttempts:(e,t)=>{var n,r;return null!==(r=null===(n=e.gradebookAttempt.deletedAttemptsByColumnId[t])||void 0===n?void 0:n.value)&&void 0!==r?r:[]},isLoading:e=>e.gradebookAttempt.isLoading,getGradebookAttemptViewStateByQuery:(0,i.Mz)((e,t)=>_(e.gradebookAttempt,t).view,e=>{if(!e)return null;let{query:t,...n}=e;return n}),getNumberOfIndividualAttemptsByGroupAttemptId:(e,t)=>{var n;return null===(n=P.getGradebookAttemptsByGroupAttemptId(e,t))||void 0===n?void 0:n.length},getFirstIndividualAttemptByGroupAttemptId:(e,t)=>{var n;return null===(n=P.getGradebookAttemptsByGroupAttemptId(e,t))||void 0===n?void 0:n[0]}}},808954:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={GRADEBOOK_ATTEMPTS_LOAD:"gradebook-attempts.load",GRADEBOOK_ATTEMPT_LOAD:"gradebook-attempt.load",GRADEBOOK_ATTEMPT_CREATE:"gradebook-attempt.create",GRADEBOOK_ATTEMPT_UPDATE:"gradebook-attempt.update",GRADEBOOK_ATTEMPT_DELETE:"gradebook-attempt.delete",GRADEBOOK_ATTEMPT_LOAD_BY_GRADE_ID_AND_QUERY:"gradebook-attempt.load.by.grade.id.by.query",GRADEBOOK_CLEAR_STUDENT_SUBMISSION_WITH_VIEW_URL_EXPANDED:"gradebook-attempt.clear-student-submission-with-view-url-expanded",GRADEBOOK_ATTEMPT_INVALIDATE_BY_ID:"gradebook-attempt.invalidate.byAttemptId",GRADEBOOK_ATTEMPTS_INVALIDATE_BY_COLUMN_ID:"gradebook-attempts.invalidate.byColumnId",GRADEBOOK_ATTEMPTS_LIST_INVALIDATE_BY_COLUMN_ID:"gradebook-attempts.list.invalidate.byColumnId"}},197434:function(e,t,n){"use strict";n.d(t,{o1:function(){return l},Ff:function(){return a},Lt:function(){return u}});var r=n(905898),i=n(968554),o=n(143276);let s="gradebook-categories.load.by.course.id",a=(0,i.vy)({byCourseId:{},byId:{}},{[(0,i.ok)(s)]:(e,t)=>{let{courseId:n,response:o}=t;return(0,r.Ay)(e,t=>{t.byCourseId[n]=o.results.map(e=>e.id),o.results.forEach(n=>{let r=e.byId[n.id];t.byId[n.id]={...(0,i.rL)(r,n)}})})},[(0,i.ok)("gradebook-categories.load.by.id")]:(e,t)=>{let{response:n}=t;return(0,r.Ay)(e,t=>{let r=e.byId[n.id];t.byId[n.id]={...(0,i.rL)(r,n)}})}}),l={loadGradebookCategoriesByCourseId:e=>(0,i.VP)(s,async()=>{try{let t=await o.I(e);return{courseId:e,response:t}}catch(e){throw{err:e}}})},u={getGradebookCategoriesByCourseId:(e,t)=>{let n=e.gradebookCategory.byCourseId[t];if(n)return n.map(t=>e.gradebookCategory.byId[t])},getGradebookCategoryById:(e,t)=>e.gradebookCategory.byId[t]}},118273:function(e,t,n){"use strict";n.d(t,{o1:function(){return E},Ff:function(){return g},Lt:function(){return h}});let r="gradebook-column.non-visible-count.load";var i=n(764209),o=n(968554),s=n(612918),a=n(905898),l=n(828736),u=n(895703);let d=(e,t,n)=>{let r=e.byCourseId[t];(null==r?void 0:r.value)?(Object.assign(r.value,n),r.status=s.y_):e.byCourseId[t]={value:n,status:s.y_}},c=(e,t)=>{let n=t.getState().gradebookColumnCount.byCourseId[e.courseId];return(0,s.qO)(null==n?void 0:n.status)},p=e=>["byCourseId",e.courseId],m=(e,t)=>(0,a.Ay)(e,e=>{let n=e.byCourseId[t];n&&(n.status=s.E1)}),g=(0,o.vy)({byCourseId:{}},{[r]:(0,s.vR)(p,s.vq),[(0,o.ok)(r)]:(e,t)=>{let{courseId:n,courseGradebookColumnCount:r}=t;return(0,a.Ay)(e,e=>{d(e,n,r)})},[(0,o.fJ)(r)]:(0,s.vR)(p,s.JL),[(0,o.ok)(i.g.CONTENT_DELETE_IN_STORE)]:(e,t)=>{let{courseId:n}=t;return n?m(e,n):e},[(0,o.ok)(u.g.GRADEBOOK_COLUMN_DELETE)]:(e,t)=>{let{gradebookColumn:n}=t;return n.courseId?m(e,n.courseId):e},[(0,o.ok)(i.g.CONTENT_DELETE)]:(e,t)=>{let{courseId:n}=t;return n?m(e,n):e},[(0,o.ok)(u.g.GRADEBOOK_COLUMN_PERSIST)]:(e,t)=>{let{gradebookColumn:n}=t;return(null==n?void 0:n.courseId)?m(e,n.courseId):e},[(0,o.ok)(u.g.GRADEBOOK_COLUMN_VISIBILITY_UPDATE)]:(e,t)=>{let{courseId:n}=t;return n?m(e,n):e}}),E={loadGradebookColumnNonVisibleCount:e=>(0,o.Vy)(r,async()=>({courseGradebookColumnCount:await (0,l.Xh9)(e),courseId:e}),{data:{courseId:e},condition:c})},h={getGradebookColumnNonVisibleCount:(e,t)=>{var n,r,i;return null===(i=null===(r=null===(n=e.gradebookColumnCount)||void 0===n?void 0:n.byCourseId)||void 0===r?void 0:r[t])||void 0===i?void 0:i.value},isInvalidateNonVisibleCount:(e,t)=>{var n,r,i;return(null===(i=null===(r=null===(n=e.gradebookColumnCount)||void 0===n?void 0:n.byCourseId)||void 0===r?void 0:r[t])||void 0===i?void 0:i.status)===s.E1},isLoadingGradebookColumnNonVisibleCount:(e,t)=>{var n;return(null===(n=e.gradebookColumnCount.byCourseId[t])||void 0===n?void 0:n.status)===s.vq}}},542644:function(e,t,n){"use strict";n.d(t,{Ff:function(){return S},Lt:function(){return C},o1:function(){return _}});var r=n(905898),i=n(645250),o=n(968554),s=n(948922),a=n(76013),l=n(764209),u=n(758247),d=n(352290),c=n(842804),p=n(895703),m=n(139552),g=n(443873),E=n(732583),h=n(583596);let y=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byCourseId[t.courseId]||{},r=Object.keys(n).find(e=>{let r=n[e],o=i.isEqual(r.query.paging,t.paging),s=i.isEqual(r.query.filter,t.filter),a=i.isEqual(r.query.sort,t.sort);return o&&a&&s});return{id:r,view:r?n[r]:null}},f=e=>["views","byCourseId",e.courseId],b=(e,t)=>{let{view:n}=y(e.gradebookColumn,t);return!n||!n.isLoading&&!n.isValid},I=(e,t,n,r=!1)=>{let{courseId:i,id:o}=t,s=e.views.byCourseId[i];s&&Object.values(s).forEach(e=>{let t=e.values.some(e=>e===o);(r||n&&t||!n&&!t)&&(e.isValid=!1)})};function A(e,t){let{courseId:n,id:r}=t;if(!n)return;let i=e.views.byCourseId[n];i&&Object.values(e.byColumnId).find(e=>!!e.externalGrade&&e.courseId===n)&&Object.values(i).forEach(e=>{var t;(null===(t=e.values)||void 0===t?void 0:t.some(e=>e===r))&&(e.isValid=!1)})}function v(e,t,n,i=!1){let s=(0,r.Ay)(e,t=>{var r;Object.values(null!==(r=n.columns)&&void 0!==r?r:{}).forEach(n=>{let r=e.byColumnId[n.id];t.byColumnId[n.id]={...(0,o.rL)(r,n),api:{isUpdating:!1,isDeleting:!1},ui:e.byColumnId[n.id]&&e.byColumnId[n.id].ui},i&&r&&r.possible!==n.possible&&A(t,n)})});return(0,o.Zg)(s,t)}let S=(0,o.vy)({byColumnId:{},permissions:{byCourseId:{}},isLoading:!1,views:{byCourseId:{}}},{[p.g.GRADEBOOK_COLUMN_LOAD]:o.r1,[(0,o.ok)(p.g.GRADEBOOK_COLUMN_LOAD)]:(e,t)=>{let{gradebookColumn:n}=t,i=(0,r.Ay)(e,e=>{if(!n)return;let r={...t.gradebookColumn,api:{isUpdating:!1,isDeleting:!1,isInvalidated:!1}};e.byColumnId[n.id]=r});return(0,o.Zg)(i,t)},[(0,o.cw)(p.g.GRADEBOOK_COLUMN_LOAD)]:e=>(0,r.Ay)(e,e=>{e.isLoading=!1}),[(0,o.fJ)(p.g.GRADEBOOK_COLUMN_LOAD)]:o.Nh,[p.g.GRADEBOOK_COLUMN_LOAD_MULTIPLE]:o.r1,[(0,o.ok)(p.g.GRADEBOOK_COLUMN_LOAD_MULTIPLE)]:(e,t)=>{let{gradebookColumns:n}=t,i=(0,r.Ay)(e,e=>{n&&Object.keys(n).forEach(t=>{let r={...n[t],api:{isUpdating:!1,isDeleting:!1}};e.byColumnId[r.id]=r})});return(0,o.Zg)(i,t)},[(0,o.fJ)(p.g.GRADEBOOK_COLUMN_LOAD_MULTIPLE)]:o.Nh,[p.g.GRADEBOOK_COLUMN_PERSIST]:(e,t)=>{let n=(0,r.Ay)(e,e=>{let n=t.columnId;if(!n)return;let r=e.byColumnId[n];r||(r={}),r.api||(r.api={}),r.api={isUpdating:!0}});return(0,o.Zg)(n,t)},[(0,o.ok)(p.g.GRADEBOOK_COLUMN_PERSIST)]:(e,t)=>{let n=(0,r.Ay)(e,e=>{let{gradebookColumn:n}=t;n&&(I(e,n,!1),A(e,n),e.byColumnId[n.id]={...n,api:{isUpdating:!1,isDeleting:!1}})});return(0,o.Zg)(n,t)},[(0,o.fJ)(p.g.GRADEBOOK_COLUMN_PERSIST)]:(e,t)=>{let n=(0,r.Ay)(e,e=>{let n=t.columnId;if(!n)return;let r=e.byColumnId[n];if(r.api){r.api.isUpdating=!1;return}r.api={isUpdating:!1}});return(0,o.Nh)(n,t)},[p.g.GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE]:o.r1,[(0,o.ok)(p.g.GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE)]:(e,t)=>{let{gradebookColumn:n}=t;return(0,r.Ay)(e,e=>{e.byColumnId[n.id].rubricAssociations=n.rubricAssociations})},[(0,o.fJ)(p.g.GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE)]:o.Nh,[p.g.GRADEBOOK_COLUMN_DELETE]:(e,t)=>{let{gradebookColumn:n}=t;return(null==n?void 0:n.id)&&(e=(0,r.Ay)(e,e=>{e.byColumnId[n.id]||(e.byColumnId[n.id]={api:{}}),e.byColumnId[n.id].api||(e.byColumnId[n.id].api={}),e.byColumnId[n.id].api.isDeleting=!0})),e},[(0,o.ok)(p.g.GRADEBOOK_COLUMN_DELETE)]:(e,t)=>{let{gradebookColumn:n}=t;return(null==n?void 0:n.id)&&(e=(0,r.Ay)(e,e=>{let t=e.byColumnId[n.id];t&&(I(e,t,!0),delete e.byColumnId[n.id])})),(0,o.Zg)(e,t)},[(0,o.fJ)(p.g.GRADEBOOK_COLUMN_DELETE)]:(e,t)=>{let{gradebookColumn:n}=t;return(null==n?void 0:n.id)&&(e=(0,r.Ay)(e,e=>{e.byColumnId[n.id]||(e.byColumnId[n.id]={api:{}}),e.byColumnId[n.id].api||(e.byColumnId[n.id].api={}),e.byColumnId[n.id].api.isDeleting=!1})),e},[(0,o.ok)(l.g.CONTENT_LOAD)]:(e,t)=>v(e,t,t,!0),[(0,o.ok)(l.g.CONTENT_SEARCH_LOAD)]:(e,t)=>v(e,t,t.data),[(0,o.ok)(l.g.CONTENT_DELETE)]:(e,t)=>t.deletedGrades?(0,r.Ay)(e,n=>{t.results.forEach(t=>{let r=(0,i.find)(e.byColumnId,{contentId:t});r&&(I(n,r,!0),delete n.byColumnId[r.id])})}):e,[(0,o.ok)(l.g.CONTENT_DELETE_IN_STORE)]:(e,t)=>(0,r.Ay)(e,n=>{let{contentId:r}=t,o=(0,i.find)(e.byColumnId,{contentId:r});o&&(I(n,o,!0),delete n.byColumnId[o.id])}),[p.g.GRADEBOOK_COLUMN_INVALIDATE_DATA]:(e,t)=>(0,r.Ay)(e,n=>{let{id:r}=t,i=e.byColumnId[r];i&&I(n,i,!1,!0)}),[(0,o.ok)(l.g.CONTENT_PERSIST)]:(e,t)=>(0,r.Ay)(e,n=>{let{columns:r,contents:i,prevContent:s}=t;Object.values(r||{}).forEach(t=>{let r=e.byColumnId[t.id];n.byColumnId[t.id]={...(0,o.rL)(r,t),api:{isDeleting:!1,isUpdating:!1}},I(n,t,!1)}),Object.values(null!=i?i:{}).forEach(e=>{var t,r,i;let o=null!==(t=e.result)&&void 0!==t?t:e;if(o&&s&&o.contentDetail&&s.contentDetail&&o.contentHandler&&o.id===s.id&&(0,h.iW)(o)){let e=null===(r=null==o?void 0:o.contentDetail[o.contentHandler.toString()])||void 0===r?void 0:r.blog,t=null===(i=null==s?void 0:s.contentDetail[o.contentHandler.toString()])||void 0===i?void 0:i.blog;if(t&&e&&t.gradingAllowed&&!e.gradingAllowed&&t.gradeColumnId){let e=n.byColumnId[t.gradeColumnId];e&&(I(n,e,!0),delete n.byColumnId[e.id])}}}),Object.values(null!=i?i:{}).forEach(e=>{var t,r;let{title:i,id:o}=null!==(t=e.result)&&void 0!==t?t:e;if(!i)return;let s=null===(r=Object.values(n.byColumnId).find(e=>e.contentId===o))||void 0===r?void 0:r.id;s&&(n.byColumnId[s].columnName=i,n.byColumnId[s].effectiveColumnName=i,n.byColumnId[s].localizedColumnName&&(n.byColumnId[s].localizedColumnName={...n.byColumnId[s].localizedColumnName,languageKey:i}))})}),[p.g.GRADEBOOK_COLUMNS_LOAD]:(0,o.Dh)(y,f),[(0,o.ok)(p.g.GRADEBOOK_COLUMNS_LOAD)]:(e,t)=>{let{data:n,query:{courseId:i}}=t;if(!n)return(0,o.Zg)(e,t);let{results:s,paging:a,permissions:l}=n;return e=(0,r.Ay)(e,t=>{s.forEach(n=>{let r=e.byColumnId[n.id];t.byColumnId[n.id]={...(0,o.rL)(r,n)}}),t.permissions.byCourseId[i]=l}),(0,o.lY)(e,t,{viewResolver:y,viewsPathResolver:f,paging:a,values:s.map(e=>e.id)})},[(0,o.fJ)(p.g.GRADEBOOK_COLUMNS_LOAD)]:(0,o.To)(y,f),[(0,o.ok)(c.g.QUESTION_PERSIST)]:(e,t)=>{let{columnId:n}=t;return n?(0,r.Ay)(e,t=>{let r=e.byColumnId[n];t.byColumnId[n]={...r,api:{...null==r?void 0:r.api,isInvalidated:!0}}}):e},[p.g.GRADEBOOK_COLUMN_VISIBILITY_UPDATE]:(e,t)=>{let n=(0,r.Ay)(e,e=>{let{updates:n}=t;n.forEach(t=>{let n=e.byColumnId[t.columnId];n&&(n.api||(n.api={}),n.api.isUpdating=!0)})});return(0,o.Zg)(n,t)},[(0,o.ok)(p.g.GRADEBOOK_COLUMN_VISIBILITY_UPDATE)]:(e,t)=>{let n=(0,r.Ay)(e,e=>{let{results:n}=t;Object.values(n.columns).forEach(t=>{if(t.isOk&&t.result)I(e,t.result,!1),A(e,t.result),e.byColumnId[t.result.id]={...t.result,api:{isUpdating:!1,isDeleting:!1}};else{let n=e.byColumnId[t.id];n&&(n.api?n.api.isUpdating=!1:n.api={isUpdating:!1})}})});return(0,o.Zg)(n,t)},[(0,o.fJ)(p.g.GRADEBOOK_COLUMN_VISIBILITY_UPDATE)]:(e,t)=>(0,o.Nh)(e,t),[d.g.GRANULAR_CONTENT_COPY_COMPLETE]:(e,t)=>{let{courseId:n}=t;return(0,r.Ay)(e,e=>{var t;n&&Object.values(null!==(t=e.views.byCourseId[n])&&void 0!==t?t:{}).forEach(e=>{e.isValid=!1})})},[(0,o.ok)(p.g.GRADEBOOK_COLUMN_UPDATE)]:(e,t)=>{let n=(0,r.Ay)(e,e=>{let{gradebookColumn:n}=t;if(!n)return;let r=e.byColumnId[n.id];r&&(e.byColumnId[n.id]={...r,...n,api:{isUpdating:!1,isDeleting:!1}})});return(0,o.Zg)(n,t)}}),_={loadGradebookColumn:({courseId:e,columnId:t,allowedErrors:n})=>(0,o.VP)(p.g.GRADEBOOK_COLUMN_LOAD,async n=>{var r;let i=null;n();try{i=await (0,s.j7)(e,t)}catch(e){throw{err:e}}return{gradebookColumn:i}},void 0,n),loadGradebookColumns:({courseId:e,columnIds:t})=>(0,o.VP)(p.g.GRADEBOOK_COLUMN_LOAD_MULTIPLE,async n=>{var r;return n(),(0,s.Kb)(e,t)}),loadGradebookColumnsByCourseId:e=>(0,o.VP)(p.g.GRADEBOOK_COLUMN_LOAD_MULTIPLE,async t=>{var n;return t(),(0,s.to)(e)}),loadGradebookColumnByContentId:({courseId:e,contentId:t})=>(0,o.VP)(p.g.GRADEBOOK_COLUMN_LOAD,async n=>{var r;let i=null;return n(),{gradebookColumn:i=await (0,s.u6)({courseId:e,contentId:t})}}),loadGradebookColumnsByQuery:e=>async(t,n)=>{if(b(n(),e)){t((0,o.rc)(p.g.GRADEBOOK_COLUMNS_LOAD,{query:e}));try{let n=await (0,s.Cn)(e);t((0,o.rc)((0,o.ok)(p.g.GRADEBOOK_COLUMNS_LOAD),{data:n,query:e}))}catch(n){throw t((0,o.rc)((0,o.fJ)(p.g.GRADEBOOK_COLUMNS_LOAD),{query:e})),t((0,o.rc)((0,o.ok)(u.A.APP_ERROR),{error:n})),{err:n}}}},setGradebookColumnInStore:e=>(0,o.rc)((0,o.ok)(p.g.GRADEBOOK_COLUMN_LOAD),{gradebookColumn:e}),updateGradebookColumn:(e,t,n)=>(0,o.VP)(p.g.GRADEBOOK_COLUMN_PERSIST,()=>(0,s._W)(e,t,n).then(e=>({gradebookColumn:e})).catch(e=>{throw{columnId:t,err:e}}),{columnId:t}),persistGradebookColumn:(e,t)=>(0,o.VP)(p.g.GRADEBOOK_COLUMN_PERSIST,()=>(0,s.zZ)(e,t).then(e=>({gradebookColumn:e})).catch(n=>{throw{columnId:t.id||(null==e?void 0:e.id),err:n}}),{columnId:t.id||(null==e?void 0:e.id)}),postReadyGradesByColumnId:(e,t,n)=>(0,o.VP)(p.g.GRADEBOOK_COLUMN_POST_READY_GRADES,async()=>{try{return await (0,s.UQ)(e,t,n)}catch(e){throw{err:e}}},null),persistGradebookColumns:(e,t)=>(0,o.RA)(async n=>{e.forEach(e=>{n((0,o.rc)(p.g.GRADEBOOK_COLUMN_PERSIST,{prevColumn:e.prevColumn,nextColumn:e.nextColumn}))});let r=await (0,s.IK)(e,t),i=e.reduce((e,t)=>{var n;return(null===(n=null==t?void 0:t.prevColumn)||void 0===n?void 0:n.id)&&(e[t.prevColumn.id]=t.prevColumn),e},{});return Object.keys(r.columns).forEach(e=>{let t=r.columns[e];t.isOk?n((0,o.rc)((0,o.ok)(p.g.GRADEBOOK_COLUMN_PERSIST),{gradebookColumn:t.result,previousGradebookColumn:i[e]})):(n((0,o.rc)((0,o.fJ)(p.g.GRADEBOOK_COLUMN_PERSIST),{prevColumn:t.previous,err:t.error})),n((0,o.rc)((0,o.ok)(u.A.APP_ERROR),{error:t.error})))}),r}),updateColumnsVisibility:(e,t)=>(0,o.Vy)(p.g.GRADEBOOK_COLUMN_VISIBILITY_UPDATE,async()=>{try{let n=await (0,s.Ay)(e);return{courseId:t,results:n}}catch(t){throw new o.GS(t).setData({updates:e})}},{data:{updates:e}}),removeRubricAssociations:e=>(0,o.VP)(p.g.GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE,async t=>{let n=C.getGradebookColumnById(t(),e);return{gradebookColumn:n=await (0,s.iC)(n.courseId,n.id)}}),removeGradebookColumnFromStore:e=>(0,o.rc)((0,o.ok)(p.g.GRADEBOOK_COLUMN_DELETE),{gradebookColumn:{id:e}}),addGradebookColumnToStore:e=>(0,o.RA)((t,n)=>{t((0,o.rc)((0,o.ok)(p.g.GRADEBOOK_COLUMN_PERSIST),{gradebookColumn:e,previousGradebookColumn:n().gradebookColumn.byColumnId[e.id]}))}),removeColumn:e=>(0,o.VP)(p.g.GRADEBOOK_COLUMN_DELETE,async t=>{let n=C.getGradebookColumnById(t(),e);return await (0,s.$S)(n.courseId,n.id),{gradebookColumn:n}}),invalidateGradebookColumn:e=>(0,o.rc)(p.g.GRADEBOOK_COLUMN_INVALIDATE_DATA,e),updateGradebookColumnInStore:e=>(0,o.rc)((0,o.ok)(p.g.GRADEBOOK_COLUMN_UPDATE),{gradebookColumn:e})},T=(0,m.Ad)(g.UI,E.oJ),O=(0,m.Ad)(g.UI,E.Y_),C={getGradebookColumnById:(e,t)=>(0,i.find)(e.gradebookColumn.byColumnId,{id:t}),getGradebookColumnsByIds:(e,t)=>{let n={};return t.forEach(t=>n[t]=e.gradebookColumn.byColumnId[t]),n},getGradebookColumnByContentId:(e,t)=>{let n=a.Lt.getAssessmentByContentId(e,t);return n?e.gradebookColumn.byColumnId[n.gradableItemId]:(0,i.find)(e.gradebookColumn.byColumnId,{contentId:t})},getGradebookColumnsByCourseId:(0,m.Mz)([e=>e.gradebookColumn.byColumnId,(e,t)=>t],(e,t)=>(0,i.filter)(e,{courseId:t})),getGradebookColumnsByQuery:T((e,t)=>{let{view:n}=y(e.gradebookColumn,t);return n&&n.isValid?(n.values||[]).map(t=>e.gradebookColumn.byColumnId[t]):[]},e=>e),isLoading:(e,t)=>{let{view:n}=y(e.gradebookColumn,t);return n?n.isLoading:e.gradebookColumn.isLoading},getGradebookColumnViewStatusByQuery:O((e,t)=>y(e.gradebookColumn,t),({view:e})=>e?{isLoading:e.isLoading,isValid:e.isValid,paging:e.paging}:null)}},895703:function(e,t,n){"use strict";var r,i;n.d(t,{W:function(){return r},g:function(){return o}});let o={GRADEBOOK_COLUMN_LOAD:"gradebook-column.load",GRADEBOOK_COLUMN_LOAD_MULTIPLE:"gradebook-column.multiple.load",GRADEBOOK_COLUMN_PERSIST:"gradebook-column.persist",GRADEBOOK_COLUMN_VISIBILITY_UPDATE:"gradebook-column.visibility.update",GRADEBOOK_COLUMN_POST_READY_GRADES:"gradebook-column.ready.grades.post",GRADEBOOK_COLUMN_RUBRIC_ASSOCIATIONS_DELETE:"gradebook-column.rubricAssociations.delete",GRADEBOOK_COLUMN_DELETE:"gradebook-column.delete",GRADEBOOK_COLUMNS_LOAD:"gradebook-columns.load",GRADEBOOK_COLUMN_INVALIDATE_DATA:"gradebook-column.invalidate.data",GRADEBOOK_COLUMN_UPDATE:"gradebook-column.update"};(i=r||(r={}))[i.AllStudents=0]="AllStudents",i[i.MyStudentsToGrade=1]="MyStudentsToGrade"},170228:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={GRADEBOOK_GRADE_LOAD_BY_USER:"gradebook-grade.load.by.user",GRADEBOOK_GRADE_LOAD_BY_QUERY:"gradebook-grade.load.by.query",GRADEBOOK_BULKVIEW_LOAD:"gradebook-grade-bulk-view.load",GRADEBOOK_GRADES_LOAD:"gradebook-grades.load",GRADEBOOK_GRADE_PERSIST_BY_GRADE_ID:"gradebook-grade.persist.by.grade.id",GRADEBOOK_GRADE_PERSIST_BY_USER_ID:"gradebook-grade.persist.by.user.id",GRADEBOOK_GRADE_POST_GRADE_BY_GRADE_ID:"gradebook-grade.post.grade.by.grade.id",GRADEBOOK_GRADES_INVALIDATE:"gradebook-grades.invalidate",GRADEBOOK_GRADES_INVALIDATE_BY_COLUMN_ID:"gradebook-grades.invalidate.byColumnId",GRADEBOOK_GRADES_INVALIDATE_BY_GRADE_ID:"gradebook-grades.invalidate.byGradeId",GRADEBOOK_GRADE_DETAIL_LOAD:"gradebook-grade-detail.load",GRADEBOOK_UNREAD_GRADES_COUNT_LOAD:"gradebook-grades.unread-grades-count.load",GRADEBOOK_GRADE_REMOVE_UNREAD_INDICATOR:"gradebook-grade.unread-indicator.remove",GRADEBOOK_GRADE_REMOVE_UNREAD_INDICATOR_BATCH:"gradebook-grade.unread-indicator.remove.batch",GRADEBOOK_GROUP_GRADES_LOAD_BY_COLUMN_ID_AND_GROUP_ASSOCIATION_ID:"gradebook-group-grade.load.byColumnId.and.groupAssociationId",GRADEBOOK_GROUP_MEMBER_GRADES_INVALIDATE_BY_COLUMN_ID:"gradebook-group-member-grades.invalidate.byColumnId",GRADEBOOK_GRADE_DIRECT_GRADE_ENTRY_MAPPING:"gradebook-grade.direct-grade-entry-mapping"}},295092:function(e,t,n){"use strict";n.d(t,{MJ:function(){return u},r7:function(){return l},sV:function(){return d}});var r=n(139552),i=n(443873),o=n(732583),s=n(828736);let a=(0,r.Ad)(i.UI,o.Y_),l=e=>null==e||!e.api||!e.api.isUpdating&&!!e.api.isInvalidated,u=a((e,t,n)=>{let r=(0,s._P8)(n),i=r?n.gradeIds:n.membershipIds,o=e.gradebookGrade.byColumnId[t];if(!o)return n;let a=i.filter(e=>{if(void 0===(r?o.grades:o.byMemberId)[e])return!0;let t=r?e:o.byMemberId[e];if(!t)return!1;let n=o.grades[t];return!!r&&null!=n&&!!n.lastAttemptUrl&&!(null==n?void 0:n.lastAttemptId)||l(n)});return r?{gradeIds:a}:{membershipIds:a}},e=>e),d=a((e,t,n)=>{let r=e.gradebookGrade.byColumnId[t];if(!r)return{};let i=r.byMemberId,o=r.grades,a={},l=(0,s._P8)(n);return(l?n.gradeIds:n.membershipIds).forEach(e=>{let t=l?e:i[e];if(t){let n=o[t];n&&(a[e]=n)}}),a},e=>e)},351663:function(e,t,n){"use strict";n.d(t,{Ff:function(){return I},Lt:function(){return v},o1:function(){return A}});var r=n(905898),i=n(139552),o=n(645250),s=n(110573),a=n(968554),l=n(457969),u=n(437272),d=n(246206),c=n(612918);function p(e){return{columnId:e.columnId,groupAttemptId:"groupAttemptId"in e?e.groupAttemptId:void 0,expand:"expand"in e?e.expand:void 0,groupAssociationId:"groupAssociationId"in e?e.groupAssociationId:void 0}}let m=(e,t)=>{var n;let r=Object.keys(t);return Object.values(null!==(n=e.views.byColumnId[t.columnId])&&void 0!==n?n:{}).filter(e=>o.isEqual(o.pick(p(t),...r),o.pick(p(e.query),...r)))},g=e=>["views","byColumnId",e.columnId],E=["columnId","groupAttemptId","groupAssociationId","expand"],h=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=null!==(n=e.views.byColumnId[t.columnId])&&void 0!==n?n:{},i=Object.keys(r).find(e=>{let n=r[e];return o.isEqual(o.pick(p(t),...E),o.pick(p(n.query),...E))});return i?{id:i,view:r[i]}:a.Vc},y=(e,t)=>{let{view:n}=h(t.getState().gradebookGroupAttempt,e.query);return!n||!n.isLoading&&!n.isValid},f=(e,t)=>{let{view:n}=h(t.getState().gradebookGroupAttempt,e.query);return!n||!n.isLoading&&(!n.isValid||!!e.forceRefresh)},b=(e,t)=>{var n;let r=null===(n=(0,l.kK)(t))||void 0===n?void 0:n.id;if(r&&t.id){let n=e.byGradebookGroupAttemptId[t.id].value;n&&(n.assessmentId=r)}},I=(0,a.vy)({views:{byColumnId:{}},byGradebookGroupAttemptId:{}},{[u.g.GRADEBOOK_GROUP_ATTEMPT_LOAD]:(0,a.Dh)(h,g),[(0,a.ok)(u.g.GRADEBOOK_GROUP_ATTEMPT_LOAD)]:(e,t)=>{var n;let{groupAttempt:i,courseId:o,columnId:s,viewUrlRequested:l}=t,u=(0,r.Ay)(e,t=>{var n;if(null==i?void 0:i.id){let{attempts:r,...a}=i,u=null===(n=e.byGradebookGroupAttemptId[i.id])||void 0===n?void 0:n.value;t.byGradebookGroupAttemptId[i.id]={value:{...u,...a,studentSubmissionViewUrlExpanded:l?a.studentSubmission:null==u?void 0:u.studentSubmissionViewUrlExpanded,courseId:o,columnId:s},status:c.U8},b(t,a)}});return(0,a.lY)(u,t,{viewResolver:h,viewsPathResolver:g,values:[null!==(n=i.id)&&void 0!==n?n:""]})},[(0,a.fJ)(u.g.GRADEBOOK_GROUP_ATTEMPT_LOAD)]:(0,a.To)(h,g),[(0,a.ok)(u.g.GRADEBOOK_GROUP_ATTEMPT_DELETE)]:(e,t)=>{let{groupAttempt:{id:n}}=t;return(0,r.Ay)(e,e=>{n&&delete e.byGradebookGroupAttemptId[n]})},[u.g.GRADEBOOK_GROUP_ATTEMPTS_FOR_GROUP_LOAD]:(0,a.Dh)(h,g),[(0,a.ok)(u.g.GRADEBOOK_GROUP_ATTEMPTS_FOR_GROUP_LOAD)]:(e,t)=>{let{query:n,data:i}=t;return(0,r.Ay)(e,t=>{if(!i){(0,a.gD)(t,(0,a.lY)(t,{type:u.g.GRADEBOOK_GROUP_ATTEMPTS_FOR_GROUP_LOAD,query:n},{viewResolver:h,viewsPathResolver:g,values:[]}));return}let{results:r,courseId:o,columnId:s,viewUrlRequested:l,paging:d,permissions:p}=i;r.forEach(r=>{var i;let d=null===(i=e.byGradebookGroupAttemptId[r.id])||void 0===i?void 0:i.value;t.byGradebookGroupAttemptId[r.id]={value:{...d,...r,studentSubmissionViewUrlExpanded:l?r.studentSubmission:null==d?void 0:d.studentSubmissionViewUrlExpanded,courseId:o,columnId:s},status:c.U8},b(t,r);let{groupAssociationId:p,...m}=n;(0,a.gD)(t,(0,a.lY)(t,{type:u.g.GRADEBOOK_GROUP_ATTEMPTS_FOR_GROUP_LOAD,query:{...m,groupAttemptId:r.id}},{viewResolver:h,viewsPathResolver:g,values:[r.id]}))}),(0,a.gD)(t,(0,a.lY)(t,{type:u.g.GRADEBOOK_GROUP_ATTEMPTS_FOR_GROUP_LOAD,query:n},{viewResolver:h,viewsPathResolver:g,paging:d,permissions:p,values:r.map(e=>e.id)}))})},[(0,a.fJ)(u.g.GRADEBOOK_GROUP_ATTEMPTS_FOR_GROUP_LOAD)]:(0,a.To)(h,g),[u.g.GRADEBOOK_GROUP_ATTEMPT_UPDATE]:(e,t)=>{let{groupAttemptId:n}=t;return(0,r.Ay)(e,e=>{e.byGradebookGroupAttemptId[n]={...e.byGradebookGroupAttemptId[n],status:c.J7}})},[(0,a.fJ)(u.g.GRADEBOOK_GROUP_ATTEMPT_UPDATE)]:(e,t)=>{let{groupAttemptId:n}=t;return n?(0,r.Ay)(e,e=>{e.byGradebookGroupAttemptId[n]={...e.byGradebookGroupAttemptId[n],status:c.XP}}):e},[(0,a.ok)(u.g.GRADEBOOK_GROUP_ATTEMPT_UPDATE)]:(e,t)=>{let{groupAttempt:n}=t,{byGradebookGroupAttemptId:i}=e;return(0,r.Ay)(e,e=>{if(null==n?void 0:n.id){let t=i[n.id],{attempts:r,...o}=n;e.byGradebookGroupAttemptId[n.id]={value:{...null==t?void 0:t.value,...o},status:c.U8}}b(e,n)})},[(0,a.ok)(u.g.SET_GRADEBOOK_GROUP_ATTEMPT_UPDATE)]:(e,t)=>{let{groupAttempt:n}=t,{byGradebookGroupAttemptId:i}=e;return(0,r.Ay)(e,e=>{if(null==n?void 0:n.id){let t=i[n.id],{attempts:r,...o}=n;e.byGradebookGroupAttemptId[n.id]={value:{...null==t?void 0:t.value,...o},status:c.U8}}b(e,n)})},[(0,a.ok)(d.g.GRADED_QUESTION_ATTEMPT_FOR_GROUP_PERSIST)]:(e,t)=>{let{dependents:{columnId:n,groupAttemptId:i}}=t.data;return(0,r.Ay)(e,e=>{if(n)for(let t of m(e,{columnId:n,groupAttemptId:i}))t.isValid=!1})},[u.g.GRADEBOOK_GROUP_ATTEMPTS_INVALIDATE_BY_COLUMN_ID]:(e,t)=>{let{columnId:n}=t;return(0,r.Ay)(e,e=>{for(let t of m(e,{columnId:n}))("groupAttemptId"in t.query&&t.query.groupAttemptId||"groupAssociationId"in t.query&&t.query.groupAssociationId)&&(t.isValid=!1)})},[u.g.GRADEBOOK_GROUP_ATTEMPT_CREATE]:(e,t)=>{let n=t.groupAttempt,i=t.courseId,o=t.columnId,s=null==n?void 0:n.groupAssociationId;return(null==n?void 0:n.id)&&i&&o?(e=(0,r.Ay)(e,e=>{for(let t of(e.byGradebookGroupAttemptId[n.id]={value:{...n,columnId:o,courseId:i},status:c.U8},m(e,{columnId:o,groupAssociationId:s})))"groupAssociationId"in t.query&&t.query.groupAssociationId&&(t.isValid=!1);b(e,n)}),(0,a.lY)(e,{type:u.g.GRADEBOOK_GROUP_ATTEMPT_CREATE,query:{groupAttemptId:n.id,columnId:o,courseId:i}},{viewResolver:h,viewsPathResolver:g,values:[n.id]})):e}}),A={loadGradebookGroupAttemptById:(e,t)=>(0,a.Vy)(u.g.GRADEBOOK_GROUP_ATTEMPT_LOAD,async()=>{var t,n,r;try{let{needsRefresh:i,...o}=e,a=await (0,s.dJ)(o),l=null!==(r=null===(n=null===(t=e.expand)||void 0===t?void 0:t.split(","))||void 0===n?void 0:n.includes("viewUrl"))&&void 0!==r&&r,u=e.courseId,d=e.columnId;return{groupAttempt:a.groupAttempt,courseId:u,columnId:d,query:e,viewUrlRequested:l}}catch(t){throw new a.GS(t).setData({query:e})}},{allowedErrors:t,data:{query:e,forceRefresh:e.needsRefresh},condition:f}),deleteGroupAttemptById:e=>(0,a.Vy)(u.g.GRADEBOOK_GROUP_ATTEMPT_DELETE,async(t,{getState:n})=>{var r;let i=n(),{courseId:o,groupAttemptId:l}=e,u=null===(r=i.gradebookGroupAttempt.byGradebookGroupAttemptId[l])||void 0===r?void 0:r.value;try{return await (0,s.mF)(o,l),{groupAttempt:u}}catch(e){throw new a.GS(e).setData({groupAttempt:u})}},{data:{groupAttemptId:e.groupAttemptId}}),loadGradebookGroupAttemptsByGroupAssocationId:e=>(0,a.Vy)(u.g.GRADEBOOK_GROUP_ATTEMPTS_FOR_GROUP_LOAD,async()=>{var t,n,r;try{let i=await (0,s.kI)(e),o=null!==(r=null===(n=null===(t=e.expand)||void 0===t?void 0:t.split(","))||void 0===n?void 0:n.includes("viewUrl"))&&void 0!==r&&r;return i.viewUrlRequested=o,{data:i,query:e}}catch(t){throw new a.GS(t).setData({query:e})}},{data:{query:e},condition:y}),updateGroupAttemptById:e=>(0,a.Vy)(u.g.GRADEBOOK_GROUP_ATTEMPT_UPDATE,async()=>{let{courseId:t,columnId:n,groupAttemptId:r,payload:i,queryParams:o,expandParams:l}=e;try{return{groupAttempt:{...(await (0,s.OM)(t,r,i,o,l)).groupAttempt,columnId:n}}}catch(e){throw new a.GS(e).setData({groupAttemptId:r})}},{data:{groupAttemptId:e.groupAttemptId,courseId:e.courseId,groupAttemptStatusChanged:!!e.payload.status}}),invalidateGradebookGroupAttemptsByColumnId:e=>(0,a.rc)(u.g.GRADEBOOK_GROUP_ATTEMPTS_INVALIDATE_BY_COLUMN_ID,{columnId:e}),setNewGroupAttemptInStore:e=>(0,a.rc)(u.g.GRADEBOOK_GROUP_ATTEMPT_CREATE,e),setGradeGroupAttemptInStore:e=>(0,a.rc)((0,a.ok)(u.g.SET_GRADEBOOK_GROUP_ATTEMPT_UPDATE),{groupAttempt:e})},v={getGradebookGroupAttemptById:(e,t)=>e.gradebookGroupAttempt.byGradebookGroupAttemptId[t],getGradebookGroupAttemptsByGroupAssociationId:(e,t)=>{var n;let{view:r}=h(e.gradebookGroupAttempt,t);return null===(n=null==r?void 0:r.values)||void 0===n?void 0:n.map(t=>{var n;return null===(n=e.gradebookGroupAttempt.byGradebookGroupAttemptId[t])||void 0===n?void 0:n.value}).filter(e=>!!e)},getGradebookGroupAttemptViewStateByQuery:(0,i.Mz)((e,t)=>h(e.gradebookGroupAttempt,t).view,e=>{if(!e)return null;let{query:t,...n}=e;return n})}},437272:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={GRADEBOOK_GROUP_ATTEMPT_LOAD:"gradebook-group-attempt.load",GRADEBOOK_GROUP_ATTEMPTS_FOR_GROUP_LOAD:"gradebook-group-attempts-for-group.load",GRADEBOOK_GROUP_ATTEMPT_UPDATE:"gradebook-group-attempt.update",GRADEBOOK_GROUP_ATTEMPT_DELETE:"gradebook-group-attempt.delete",GRADEBOOK_GROUP_ATTEMPTS_INVALIDATE_BY_COLUMN_ID:"gradebook-group-attempts.invalidate.byColumnId",GRADEBOOK_GROUP_ATTEMPT_CREATE:"gradebook-group-attempt.create",SET_GRADEBOOK_GROUP_ATTEMPT_UPDATE:"gradebook-group-attempt.update.set"}},611592:function(e,t,n){"use strict";n.d(t,{o1:function(){return M},Ff:function(){return U},Lt:function(){return B}});var r=n(905898),i=n(968554),o=n(323691),s=n(97082),a=n(437272),l=n(139552),u=n(443873),d=n(732583),c=n(612918);let p=(0,l.Ad)(u.UI,d.oJ),m=(0,l.Ad)(u.UI,d.Cu),g=p((e,t,n)=>{let r=e.gradebookGroupGrade.byColumnId[t];return r?n.filter(e=>{var t;if(!r.grades[e])return!0;let n=r.grades[e];return null!==(t=null==n?void 0:n.value)&&void 0!==t&&!!t.lastAttemptUrl&&!n.value.lastAttemptId||!n.status||n.status===c.gO}):n},e=>e),E=m((e,t,n)=>{let r=e.gradebookGroupGrade.byColumnId[t];if(!r)return{};let i={};return n.forEach(e=>{var t;let n=null===(t=r.grades[e])||void 0===t?void 0:t.value;n&&(i[e]=n)}),i},e=>e);var h=n(895703),y=n(318728),f=n(246206),b=n(519241),I=n(645250),A=/*#__PURE__*/n.n(I);function v(){return{isLoading:!1,grades:{}}}function S(e){return{columnId:e.columnId,groupAssociationIds:"groupAssociationIds"in e?e.groupAssociationIds:void 0}}let _=(e,t)=>{var n;let r=Object.keys(t);return Object.values(null!==(n=e.views.byColumnId[t.columnId])&&void 0!==n?n:{}).filter(e=>A().isEqual(A().pick(S(t),...r),A().pick(S(e.query),...r)))};function T(e,t,n){var r;let i=null===(r=e.byColumnId[n])||void 0===r?void 0:r.grades[t];i&&(i.status=c.gO)}function O(e,t,n){var r;let i=e.byColumnId;for(let e of t){let t=null==e?void 0:e.value,o=null==t?void 0:t.id;if(!o)continue;i[t.columnId]||(i[t.columnId]=v());let s=i[t.columnId],a=null===(r=s.grades[o])||void 0===r?void 0:r.value;if(!n&&a&&a.version>t.version)return;s.grades[o]={value:t,status:!function(e,t){var r;return!!n&&(!e||(null===(r=null==e?void 0:e.displayGrade)||void 0===r?void 0:r.isOverride)||e.isCalculatedColumnGrade||(null==e?void 0:e.id)===t)}(a,o)?c.U8:c.gO}}}function C(e,t){return(0,r.Ay)(e,e=>{O(e,t,!0)})}let R=["columnId","groupAssociationIds"],L=(e,t)=>{var n;let r=null!==(n=e.views.byColumnId[t.columnId])&&void 0!==n?n:{},o=Object.keys(r).find(e=>{let n=r[e];return A().isEqual(A().pick(S(t),...R),A().pick(S(n.query),...R))});return o?{id:o,view:r[o]}:i.Vc},D=e=>["views","byColumnId",e.columnId],N=(e,t)=>{let{view:n}=L(t.getState().gradebookGroupGrade,e.query);return!n||!n.isLoading&&!n.isValid},P=(e,t)=>!k(t.getState(),e.columnId),k=(e,t)=>{var n;return!!(null===(n=e.gradebookGroupGrade.byColumnId[t])||void 0===n?void 0:n.isLoading)},w=(e,t,n)=>{e.byColumnId[t]||(e.byColumnId[t]=v()),e.byColumnId[t].isLoading=n},U=(0,i.vy)({byColumnId:{},views:{byColumnId:{}}},{[s.g.GRADEBOOK_GROUP_BULKVIEW_LOAD]:(0,i.Dh)(L,D),[(0,i.ok)(s.g.GRADEBOOK_GROUP_BULKVIEW_LOAD)]:(e,t)=>{var n,o;let s=null!==(o=null===(n=t.data)||void 0===n?void 0:n.grades)&&void 0!==o?o:[];return e=(0,r.Ay)(e,e=>{O(e,s.map(e=>({value:e,status:c.U8})))}),(0,i.lY)(e,t,{viewResolver:L,viewsPathResolver:D,values:s.map(e=>e.id).filter(e=>!!e)})},[(0,i.fJ)(s.g.GRADEBOOK_GROUP_BULKVIEW_LOAD)]:(0,i.To)(L,D),[s.g.GRADEBOOK_GROUP_GRADE_POST_GRADE_BY_GROUP_ASSOCIATION_ID]:(e,t)=>{let{columnId:n}=t;return(0,r.Ay)(e,e=>{e.byColumnId[n]||(e.byColumnId[n]=v())})},[(0,i.ok)(h.g.GRADEBOOK_COLUMN_POST_READY_GRADES)]:(e,t)=>{var n;let{columnId:i}=t;if(!i)return e;let o=(null===(n=e.byColumnId[i])||void 0===n?void 0:n.grades)?Object.values(e.byColumnId[i].grades):[];return(0,r.Ay)(e,e=>{O(e,o,!0)})},[(0,i.ok)(s.g.GRADEBOOK_GROUP_GRADE_POST_GRADE_BY_GROUP_ASSOCIATION_ID)]:(e,t)=>{let{columnId:n,gradeId:i}=t;return(0,r.Ay)(e,e=>{var t;let r=null===(t=e.byColumnId[n])||void 0===t?void 0:t.grades[i];(null==r?void 0:r.value)&&O(e,[{value:{...r.value,manualStatus:y.AP$.IsPosted,hasGradeBeenPosted:!0},status:c.U8}])})},[s.g.GRADEBOOK_GROUP_GRADES_INVALIDATE_BY_COLUMN_ID]:(e,t)=>{let{columnId:n}=t;return(0,r.Ay)(e,e=>{let t=e.byColumnId[n];for(let r of(t&&O(e,Object.values(t.grades),!0),_(e,{columnId:n})))"groupAssociationIds"in r.query&&r.query.groupAssociationIds&&(r.isValid=!1)})},[s.g.GRADEBOOK_GROUP_GRADES_INVALIDATE_BY_COLUMN_ID_AND_GROUP_ASSOCIATION_ID]:(e,t)=>{let{columnId:n,groupAssociationId:i}=t;return(0,r.Ay)(e,e=>T(e,i,n))},[s.g.GRADEBOOK_GROUP_GRADE_DETAIL_LOAD]:(e,t)=>{let{columnId:n}=t;return(0,r.Ay)(e,e=>{w(e,n,!0)})},[(0,i.ok)(s.g.GRADEBOOK_GROUP_GRADE_DETAIL_LOAD)]:(e,t)=>{let{grade:n}=t;return(0,r.Ay)(e,e=>{O(e,[{value:n,status:c.U8}]),w(e,n.columnId,!1)})},[(0,i.fJ)(s.g.GRADEBOOK_GROUP_GRADE_DETAIL_LOAD)]:(e,t)=>{let{columnId:n}=t;return(0,r.Ay)(e,e=>{w(e,n,!1)})},[(0,i.ok)(a.g.GRADEBOOK_GROUP_ATTEMPT_UPDATE)]:(e,t)=>{let{groupAttempt:n}=t,{groupAssociationId:i,columnId:o}=n;return i&&o?(0,r.Ay)(e,e=>{let t=e.byColumnId[o];O(e,[null==t?void 0:t.grades[i]],!0)}):e},[(0,i.ok)(a.g.GRADEBOOK_GROUP_ATTEMPT_DELETE)]:(e,t)=>{let{groupAttempt:{groupAssociationId:n,columnId:i}}=t;return i&&n?(0,r.Ay)(e,e=>{T(e,n,i)}):e},[(0,i.ok)(f.g.GRADED_QUESTION_ATTEMPT_FOR_GROUP_PERSIST)]:(e,t)=>{var n;let{columnId:r,groupAssociationId:i}=t.data.dependents;if(!r||!i)return e;let o=null===(n=e.byColumnId[r])||void 0===n?void 0:n.grades[i];return o?C(e,[o]):e},[(0,i.ok)(s.g.GRADEBOOK_GROUP_GRADE_UPDATE_MEMBERS_GRADE_ID)]:(e,t)=>{var n;let{params:r}=t,{groupAssociationId:i,columnId:o}=r,s=null===(n=e.byColumnId[o])||void 0===n?void 0:n.grades[i];return s?C(e,[s]):e}}),M={loadGroupGradesBulkView:e=>(0,i.Vy)(s.g.GRADEBOOK_GROUP_BULKVIEW_LOAD,async()=>{try{return{data:await o.oC(e),query:e}}catch(t){throw new i.GS(t).setData({query:e})}},{data:{query:e},condition:N}),postGroupGradeByGroupAssociationId:(e,t,n)=>(0,i.Vy)(s.g.GRADEBOOK_GROUP_GRADE_POST_GRADE_BY_GROUP_ASSOCIATION_ID,async()=>(await o.Gq(e,t,n),{columnId:t,gradeId:n}),{data:{columnId:t,gradeId:n}}),invalidateGradebookGroupGradesByColumnId:e=>(0,i.rc)(s.g.GRADEBOOK_GROUP_GRADES_INVALIDATE_BY_COLUMN_ID,{columnId:e}),invalidateGradebookGroupGradeByColumndIdAndGroupAssociationId:(e,t)=>(0,i.rc)(s.g.GRADEBOOK_GROUP_GRADES_INVALIDATE_BY_COLUMN_ID_AND_GROUP_ASSOCIATION_ID,{columnId:e,groupAssociationId:t}),loadGroupGradeByGroupAssociationId:(e,t,n)=>(0,i.Vy)(s.g.GRADEBOOK_GROUP_GRADE_DETAIL_LOAD,async()=>{try{return{grade:await o.d$(e,t,n)}}catch(e){throw new i.GS(e).setData({columnId:t})}},{data:{columnId:t},condition:P}),updateGroupGradeByMemberGradeIds:(e,t,n,r)=>(0,i.Vy)(s.g.GRADEBOOK_GROUP_GRADE_UPDATE_MEMBERS_GRADE_ID,async()=>({grades:Object.values((await (0,b.hi)(e,t,n,r)).data).map(e=>e.result).filter(e=>!!e),params:e}))},B={getGroupAssociationIdsWithMissingOrInvalidatedGradesInColumn:g,getGradebookGradesByColumnIdAndGroupAssociationIds:E,getGroupGradeByColumnIdAndGroupAssociationId:(e,t,n)=>{var r;return null===(r=e.gradebookGroupGrade.byColumnId[t])||void 0===r?void 0:r.grades[n]}}},97082:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={GRADEBOOK_GROUP_BULKVIEW_LOAD:"gradebook-group-grade-bulk-view.load",GRADEBOOK_GROUP_GRADE_POST_GRADE_BY_GROUP_ASSOCIATION_ID:"gradebook-group-grade.post.grade.by.group.association.id",GRADEBOOK_GROUP_GRADE_DETAIL_LOAD:"gradebook-group-grade-detail.load",GRADEBOOK_GROUP_GRADES_INVALIDATE_BY_COLUMN_ID:"gradebook-group-grades.invalidate.byColumnId",GRADEBOOK_GROUP_GRADE_UPDATE_MEMBERS_GRADE_ID:"gradebook-group-grade.update.members.grade.id",GRADEBOOK_GROUP_GRADES_INVALIDATE_BY_COLUMN_ID_AND_GROUP_ASSOCIATION_ID:"gradebook-group-grades.invalidate.byColumnId.and.groupAssociationId"}},448056:function(e,t,n){"use strict";n.d(t,{o1:function(){return T},Ff:function(){return _},Lt:function(){return O}});var r=n(905898),i=n(968554),o=n(645250),s=n(400161);let a="gradebook-schema.load",l="gradebook-schema.load.by.course.id",u="gradebook-schema.persist.by.course.id",d="gradebook-schema.update.by.course.id",c="gradebook-schema.delete.by.course.id",p="gradebook-schema.invalidate.data";var m=n(895703),g=n(764209),E=n(758247),h=n(352290),y=n(159296),f=n(583596);let b=(e,t)=>{let n=e.views.byCourseId[t.courseId]||{},r=Object.keys(n).find(e=>{let r=n[e];return(0,o.isEqual)(r.query,t)});return r?{id:r,view:n[r]}:i.Vc},I=e=>["views","byCourseId",e.courseId],A=(e,t)=>{let n=e.views.byCourseId[t];n&&Object.values(n).forEach(e=>{e.isValid=!1})},v=(e,t)=>(0,r.Ay)(e,e=>{if(t){let n=e.views.byCourseId[t];n&&Object.keys(n).forEach(e=>n[e].isValid=!1)}}),S=(e,t)=>{let{view:n}=b(e.gradebookSchema,t);return!(null==n?void 0:n.isLoading)&&!(null==n?void 0:n.isValid)},_=(0,i.vy)({byId:{},isLoading:!1,isValid:!1,paging:null,permissions:{createGradingSchemas:!1},views:{byCourseId:{}}},{[a]:(0,i.Dh)(b,I),[l]:(0,i.Dh)(b,I),[(0,i.ok)(a)]:function(e,t){let{schema:n}=t;if(!n)return(0,i.Zg)(e,t);let o=(0,r.Ay)(e,e=>{n.id&&(e.byId[n.id]=n)});return(0,i.lY)(o,t,{viewResolver:b,viewsPathResolver:I,values:n.id?[n.id]:void 0})},[(0,i.ok)(u)]:function(e,t){let n=t.schema;if(!n)return(0,i.Zg)(e,t);let o=(0,r.Ay)(e,e=>{if(n.id&&(e.byId[n.id]=n,n.courseId&&e.views.byCourseId)){let t=e.views.byCourseId[n.courseId];t&&Object.keys(t).forEach(e=>{let r=t[e];(null==r?void 0:r.values)&&(null==n?void 0:n.id)&&!r.values.includes(n.id)&&r.values.push(n.id)})}});return(0,i.Zg)(o,t)},[(0,i.ok)(d)]:function(e,t){let n=t.schema,o=(0,r.Ay)(e,e=>{(null==n?void 0:n.id)&&(null==n?void 0:n.courseId)&&(e.byId[n.id]=n)});return(0,i.Zg)(o,t)},[(0,i.fJ)(a)]:i.Nh,[(0,i.fJ)(l)]:(0,i.To)(b,I),[(0,i.ok)(l)]:(e,t)=>{let{schema:n,paging:o,permissions:s}=t;if(!(null==n?void 0:n.byId))return(0,i.Zg)(e,t);let a=(0,r.Ay)(e,e=>{for(let t of Object.keys(n.byId))e.byId[t]=n.byId[t];o&&(e.paging=o),s&&(e.permissions=s)});return(0,i.lY)(a,t,{viewResolver:b,viewsPathResolver:I,values:Object.keys(n.byId||{})})},[(0,i.ok)(c)]:(e,t)=>{let{schemaId:n,courseId:s}=t.query,a=(0,r.Ay)(e,e=>{let t=e.views.byCourseId[s];t&&Object.keys(t).forEach(e=>{t[e]&&t[e].values&&(t[e].values=(0,o.filter)(t[e].values,e=>e!==n))}),e.byId[n]&&delete e.byId[n]});return(0,i.Zg)(a,t)},[(0,i.ok)(p)]:(e,t)=>{let{courseId:n}=t;return(0,r.Ay)(e,e=>{A(e,n)})},[h.g.GRANULAR_CONTENT_COPY_COMPLETE]:(e,t)=>{let{courseId:n}=t;return(0,r.Ay)(e,e=>{A(e,n)})},[(0,i.ok)(m.g.GRADEBOOK_COLUMN_DELETE)]:(e,t)=>{let n=t.gradebookColumn;return(null==n?void 0:n.courseId)?v(e,null==n?void 0:n.courseId):e},[(0,i.ok)(m.g.GRADEBOOK_COLUMN_PERSIST)]:(e,t)=>{let n=t.gradebookColumn,r=t.previousGradebookColumn;return(null==n?void 0:n.courseId)&&(void 0===r||n.gradingSchemaId!==r.gradingSchemaId)?v(e,n.courseId):e},[(0,i.ok)(g.g.CONTENT_DELETE_IN_STORE)]:(e,t)=>{let{invalidateGradingSchemas:n,courseId:r}=t;return r&&n?v(e,r):e},[(0,i.ok)(g.g.CONTENT_PERSIST)]:(e,t)=>{let n;let{contents:r,prevContent:i}=t,o=!!Object.values(r).find(e=>(void 0===n&&(n=e.courseId),e.contentHandler&&y.Ay.isLtiPlacement(e.contentHandler.toString()))?y.Ay.getGradingSchemaIdFromCourseContent(e)!==y.Ay.getGradingSchemaIdFromCourseContent(i):!!(0,f.iW)(e)&&(0,f.EO)(e)!==(0,f.EO)(i));return n&&o?v(e,n):e},[(0,i.ok)(E.A.ROUTER_STATE_CHANGE_SUCCESS)]:(e,t)=>{var n,r;let i=null===(r=null===(n=null==t?void 0:t.route)||void 0===n?void 0:n.params)||void 0===r?void 0:r.courseId;return i?v(e,i):e}}),T={loadGradebookSchema:e=>(0,i.Vy)(a,async()=>({schema:await s.Ip(e.courseId,e.schemaId),query:e}),{data:{query:e},condition:(t,{getState:n})=>S(n(),e)}),loadGradebookSchemasByCourseId:e=>(0,i.Vy)(l,async()=>{try{return{schema:await s.pW(e.courseId),query:e}}catch(t){throw new i.GS(t).setData({query:e})}},{data:{query:e},condition:(t,{getState:n})=>S(n(),e)}),persistGradebookSchema:({courseId:e,schema:t})=>(0,i.VP)(u,async()=>({schema:await s.oY(e,t)})),updateGradebookSchema:({courseId:e,schema:t})=>(0,i.VP)(d,async()=>({schema:await s.vK(e,t)})),deleteGradebookSchema:e=>(0,i.VP)(c,async()=>(await s.h0(e.courseId,e.schemaId),{query:e})),invalidateData:e=>(0,i.rc)((0,i.ok)(p),e)},O={areGradebookSchemasLoading:(e,t)=>{var n;let{view:r}=b(e.gradebookSchema,{courseId:t});return null!==(n=null==r?void 0:r.isLoading)&&void 0!==n&&n},getGradebookSchemaById:(e,t)=>(0,o.find)(e.gradebookSchema.byId,{id:t}),getGradebookSchemasByCourseId:(e,t)=>{var n;let{view:r}=b(e.gradebookSchema,{courseId:t});return r&&null!==(n=(r.values||[]).filter(t=>void 0!==e.gradebookSchema.byId[t]).map(t=>e.gradebookSchema.byId[t]))&&void 0!==n?n:[]},isGradebookSchemaDataValid:(e,t)=>{var n;let{view:r}=b(e.gradebookSchema,{courseId:t});return null!==(n=null==r?void 0:r.isValid)&&void 0!==n&&n}}},898569:function(e,t,n){"use strict";n.d(t,{o1:function(){return m},Ff:function(){return p},Lt:function(){return g}});var r=n(905898),i=n(968554);let o="gradebook-settings-load",s="gradebook-settings-update";var a=n(828736),l=n(612918);let u=(e,t,n)=>{e.byCourseId[t]={value:n,status:l.y_}},d=(e,t)=>{let n=t.getState().gradebookSettings.byCourseId[e.courseId];return(0,l.qO)(null==n?void 0:n.status)},c=e=>["byCourseId",e.courseId],p=(0,i.vy)({byCourseId:{}},{[o]:(0,l.vR)(c,l.vq),[(0,i.ok)(o)]:(e,t)=>{let{courseId:n,courseGradeBookSettings:i}=t;return(0,r.Ay)(e,e=>{u(e,n,i)})},[(0,i.ok)(s)]:(e,t)=>{let{courseId:n,courseGradeBookSettings:i}=t;return(0,r.Ay)(e,e=>{u(e,n,i)})},[(0,i.fJ)(o)]:(0,l.vR)(c,l.JL)}),m={loadGradebookSettings:e=>(0,i.Vy)(o,async()=>{try{return{courseGradeBookSettings:await (0,a.G3T)(e),courseId:e}}catch(t){throw new i.GS(t).setData({courseId:e})}},{data:{courseId:e},condition:d}),updateGradebookSettingsByCourseID:(e,t)=>(0,i.Vy)(s,async()=>{try{return{courseGradeBookSettings:await (0,a.lDP)(e,t),courseId:e}}catch(t){throw new i.GS(t).setData({courseId:e})}})},g={getGradebookSettings:(e,t)=>{var n,r,i;return null===(i=null===(r=null===(n=e.gradebookSettings)||void 0===n?void 0:n.byCourseId)||void 0===r?void 0:r[t])||void 0===i?void 0:i.value}}},352290:function(e,t,n){"use strict";n.d(t,{o:function(){return l},g:function(){return a}});var r=n(968554),i=n(318728),o=n(825271);let s=(0,n(853400).Y)(i.tYb,o.dZ),a={GRANULAR_CONTENT_COPY_COMPLETE:"granular.content.copy.complete",CREATE_COPY_TASK:"create.copy.task"},l={notifyGCCCompleted:e=>(0,r.rc)(a.GRANULAR_CONTENT_COPY_COMPLETE,{courseId:e}),createCourseCopyTask:(e,t,n,i)=>(0,r.Vy)(a.CREATE_COPY_TASK,async()=>({data:await s(e,t,n,i)}))}},43375:function(e,t){"use strict";t.A={GROUP_DELETE_BATCH:"group.delete.batch",GROUPS_LOAD:"groups.load",GROUPS_LOAD_BY_CONTENT_ID:"groups.load.by.content.id",GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY:"groups.load.by.content.id.by.query",GROUPS_LOAD_BY_GROUP_SET_ID_AND_QUERY:"groups.load.by.group.set.id.by.query",GROUPS_LOAD_BY_QUERY:"groups.load.by.query",GROUPS_ADD:"groups.add",GROUPS_UPDATE:"groups.update",GROUP_LOAD_BY_ID:"groups.load.by.id",GROUP_MEMBERSHIPS_LOAD:"group.memberships.load",ADD_GROUP_MEMBERSHIP:"group.membership.add",REMOVE_GROUP_MEMBERSHIP:"group.membership.remove",GROUP_STUDENT_COUNT_LOAD:"group.student.count.load"}},305190:function(e,t,n){"use strict";n.d(t,{Ff:function(){return a},Lt:function(){return u},o1:function(){return l}});var r=n(262284),i=n(968554),o=n(905898),s=n(828736);let a=(0,i.vy)({byCourseId:{},isLoading:!1},{[r.g.IMPORT_GROUP_MEMBERS]:i.r1,[(0,i.ok)(r.g.IMPORT_GROUP_MEMBERS)]:(e,t)=>{let n=(0,o.Ay)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"SUCCESS"}});return(0,i.Zg)(n,t)},[(0,i.fJ)(r.g.IMPORT_GROUP_MEMBERS)]:(e,t)=>{let n=(0,o.Ay)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"ERROR",responseCode:t.err.body.code}});return(0,i.Nh)(n,t)},[(0,i.ok)(r.g.CLEAR_IMPORT_GROUP_MEMBERS_STATUS)]:(e,t)=>{let n=(0,o.Ay)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"NONE",responseCode:void 0}});return(0,i.Zg)(n,t)},[(0,i.fJ)(r.g.FILE_UPLOAD_GROUP_MEMBERS_ERROR)]:(e,t)=>{let n=(0,o.Ay)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"ERROR"}});return(0,i.Nh)(n,t)}}),l={importGroupMembers:(e,t)=>(0,i.VP)(r.g.IMPORT_GROUP_MEMBERS,async()=>{try{return await (0,s.Dg6)(e,t),{courseId:e}}catch(t){throw{err:t,courseId:e}}}),clearImportGroupMembersStatus:e=>(0,i.rc)((0,i.ok)(r.g.CLEAR_IMPORT_GROUP_MEMBERS_STATUS),{courseId:e}),setFileUploadGroupMembersError:(e,t)=>(0,i.rc)((0,i.fJ)(r.g.FILE_UPLOAD_GROUP_MEMBERS_ERROR),{courseId:e,error:t})},u={getImportGroupMembersStatus:(e,t)=>e.groupMembersImport.byCourseId[t]}},314401:function(e,t,n){"use strict";n.d(t,{o1:function(){return c},Ff:function(){return d},Lt:function(){return p}});var r=n(968554),i=n(905898);let o="export.group.set",s="clear.export.group.set.status",a="get.exported.files",l="delete.exported.file";var u=n(828736);let d=(0,r.vy)({byCourseId:{},isLoading:!1},{[o]:r.r1,[(0,r.ok)(o)]:(e,t)=>{let n=(0,i.Ay)(e,e=>{e.byCourseId[t.courseId]={byGroupSetId:{},responseStatus:"SUCCESS",ui:{source:t.source}}});return(0,r.Zg)(n,t)},[(0,r.fJ)(o)]:(e,t)=>{let n=(0,i.Ay)(e,e=>{e.byCourseId[t.courseId]={byGroupSetId:{},responseStatus:"ERROR",ui:{source:t.source}}});return(0,r.Nh)(n,t)},[(0,r.ok)(s)]:(e,t)=>{let n=(0,i.Ay)(e,e=>{e.byCourseId[t.courseId]={byGroupSetId:{},responseStatus:"NONE",ui:{source:t.source}}});return(0,r.Zg)(n,t)},[a]:r.r1,[(0,r.ok)(a)]:(e,t)=>{let n=(0,i.Ay)(e,e=>{e.byCourseId[t.courseId]||(e.byCourseId[t.courseId]={byGroupSetId:{}}),e.byCourseId[t.courseId].byGroupSetId[t.groupSetId]={files:t.payload.results,paging:t.payload.paging}});return(0,r.Zg)(n,t)},[(0,r.fJ)(a)]:r.Nh,[l]:r.r1,[(0,r.ok)(l)]:r.Zg,[(0,r.fJ)(l)]:r.Nh}),c={exportGroupSet:(e,t,n,i)=>(0,r.VP)(o,async()=>{try{return await (0,u.dy8)(e,t,n),{courseId:e,groupSetId:t,source:i}}catch(n){throw{err:n,courseId:e,groupSetId:t,source:i}}}),clearExportGroupSetStatus:e=>(0,r.rc)((0,r.ok)(s),{courseId:e}),getExportedFiles:(e,t,n)=>(0,r.VP)(a,async()=>{try{let r=await (0,u.zY5)(e,t,n);return{courseId:e,groupSetId:t,payload:r}}catch(n){throw{err:n,courseId:e,groupSetId:t}}}),deleteFile:(e,t,n)=>(0,r.VP)(l,async()=>{try{await (0,u.cZP)(e,t,n)}catch(e){throw{err:e}}})},p={getExportGroupSet:(e,t)=>e.groupSetExport.byCourseId[t]}},836107:function(e,t,n){"use strict";n.d(t,{Ff:function(){return a},Lt:function(){return u},o1:function(){return l}});var r=n(262284),i=n(968554),o=n(905898),s=n(828736);let a=(0,i.vy)({byCourseId:{},isLoading:!1},{[r.g.IMPORT_GROUP_SET]:i.r1,[(0,i.ok)(r.g.IMPORT_GROUP_SET)]:(e,t)=>{let n=(0,o.Ay)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"SUCCESS"}});return(0,i.Zg)(n,t)},[(0,i.fJ)(r.g.IMPORT_GROUP_SET)]:(e,t)=>{let n=(0,o.Ay)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"ERROR",responseCode:t.err.body.code}});return(0,i.Nh)(n,t)},[(0,i.ok)(r.g.CLEAR_IMPORT_GROUP_SET_STATUS)]:(e,t)=>{let n=(0,o.Ay)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"NONE",responseCode:void 0}});return(0,i.Zg)(n,t)},[(0,i.fJ)(r.g.FILE_UPLOAD_GROUP_SET_ERROR)]:(e,t)=>{let n=(0,o.Ay)(e,e=>{e.byCourseId[t.courseId]={responseStatus:"ERROR"}});return(0,i.Nh)(n,t)}}),l={importGroupSet:(e,t)=>(0,i.VP)(r.g.IMPORT_GROUP_SET,async()=>{try{return await (0,s.Dg6)(e,t),{courseId:e}}catch(t){throw{err:t,courseId:e}}}),clearImportGroupSetStatus:e=>(0,i.rc)((0,i.ok)(r.g.CLEAR_IMPORT_GROUP_SET_STATUS),{courseId:e}),setFileUploadGroupSetError:(e,t)=>(0,i.rc)((0,i.fJ)(r.g.FILE_UPLOAD_GROUP_SET_ERROR),{courseId:e,error:t})},u={getImportGroupSetStatus:(e,t)=>e.groupSetImport.byCourseId[t]}},262284:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={IMPORT_GROUP_SET:"import.group.set",CLEAR_IMPORT_GROUP_SET_STATUS:"clear.import.group.set",FILE_UPLOAD_GROUP_SET_ERROR:"file.upload.group.set.error",IMPORT_GROUP_MEMBERS:"import.group.members",CLEAR_IMPORT_GROUP_MEMBERS_STATUS:"clear.import.group.members.status",FILE_UPLOAD_GROUP_MEMBERS_ERROR:"file.upload.group.members.error"}},326153:function(e,t,n){"use strict";n.d(t,{Ff:function(){return p},Lt:function(){return h},o1:function(){return E}});var r=n(905898),i=n(645250),o=n(968554),s=n(481367),a=n(318728),l=n(758247),u=n(353170),d=n(44564),c=n(300474);let p=(0,o.vy)({institutionBrands:{byId:{}},brandAssociations:{byId:{}},brandHosts:{hostnames:[],paging:null,isLoading:!1},paging:null,permissions:null,isLoading:!1},{[u.g.INSTITUTION_BRANDS_LOAD]:o.r1,[(0,o.ok)(u.g.INSTITUTION_BRANDS_LOAD)]:(e,t)=>{if(!t||!t.institutionBrands)return(0,o.Zg)(e,t);let{permissions:n,paging:i}=t,s=g(e,t);return(0,r.Ay)(s,e=>{e.isLoading=!1,e.paging=i,e.permissions=n})},[(0,o.fJ)(u.g.INSTITUTION_BRANDS_LOAD)]:o.Nh,[u.g.INSTITUTION_BRAND_LOAD]:o.r1,[(0,o.ok)(u.g.INSTITUTION_BRAND_LOAD)]:(e,t)=>(t&&t.institutionBrands&&(e=g(e,t)),(0,o.Zg)(e,t)),[(0,o.fJ)(u.g.INSTITUTION_BRAND_LOAD)]:o.Nh,[(0,o.ok)(u.g.INSTITUTION_BRAND_CREATE)]:(e,t)=>g(e,t),[(0,o.fJ)(u.g.INSTITUTION_BRAND_CREATE)]:o.Nh,[u.g.INSTITUTION_BRANDS_UPDATE]:(e,t)=>{let{ultraBranding:n,brandAssociations:o}=t,s=n.id,a=e;return a=(0,r.Ay)(a,e=>{e.institutionBrands.byId[s]||(e.institutionBrands.byId[s]={}),e.institutionBrands.byId[s].api||(e.institutionBrands.byId[s].api={}),e.institutionBrands.byId[s].api.isUpdating=!0}),(0,i.filter)(e.brandAssociations.byId,{brandId:s}).forEach(e=>{a=(0,i.find)(o,{id:e.id})?(0,r.Ay)(a,t=>{t.brandAssociations.byId[e.id]||(t.brandAssociations.byId[e.id]={}),t.brandAssociations.byId[e.id].api||(t.brandAssociations.byId[e.id].api={}),t.brandAssociations.byId[e.id].api.isUpdating=!0}):(0,r.Ay)(a,t=>{t.brandAssociations.byId[e.id]||(t.brandAssociations.byId[e.id]={}),t.brandAssociations.byId[e.id].api||(t.brandAssociations.byId[e.id].api={}),t.brandAssociations.byId[e.id].api.isDeleting=!0})}),a},[(0,o.ok)(u.g.INSTITUTION_BRANDS_UPDATE)]:(e,t)=>{let{institutionBrands:n,brandAssociations:o}=t,s=Object.keys(n.byId)[0],a=e,l=(0,i.chain)(e.brandAssociations.byId).filter({brandId:s}).filter(e=>!o.byId[e.id]).value();return g(a=(0,r.Ay)(a,e=>{l.forEach(t=>{delete e.brandAssociations.byId[t.id]})}),t)},[(0,o.fJ)(u.g.INSTITUTION_BRANDS_UPDATE)]:(e,t)=>{let{brandWithAssociations:n}=t,s=e;if(n){let t=n.ultraBranding.id,o=(0,i.filter)(e.brandAssociations.byId,{brandId:t});s=(0,r.Ay)(s,e=>{o.forEach(t=>{e.brandAssociations.byId[t.id]||(e.brandAssociations.byId[t.id]={}),e.brandAssociations.byId[t.id].api={isDeleting:!1,isUpdating:!1}}),e.institutionBrands.byId[t]||(e.institutionBrands.byId[t]={}),e.institutionBrands.byId[t].api||(e.institutionBrands.byId[t].api={}),e.institutionBrands.byId[t].api.isUpdating=!1})}return(0,o.Nh)(s,t)},[u.g.INSTITUTION_BRAND_DELETE]:(e,t)=>{let{brandId:n}=t,o=(0,i.filter)(e.brandAssociations.byId,{brandId:n});return(0,r.Ay)(e,e=>{o.forEach(t=>{e.brandAssociations.byId[t.id]||(e.brandAssociations.byId[t.id]={}),e.brandAssociations.byId[t.id].api||(e.brandAssociations.byId[t.id].api={}),e.brandAssociations.byId[t.id].api.isDeleting=!0}),e.institutionBrands.byId[n]||(e.institutionBrands.byId[n]={}),e.institutionBrands.byId[n].api||(e.institutionBrands.byId[n].api={}),e.institutionBrands.byId[n].api.isDeleting=!0})},[(0,o.ok)(u.g.INSTITUTION_BRAND_DELETE)]:(e,t)=>{let{brandId:n}=t,o=(0,i.filter)(e.brandAssociations.byId,{brandId:n});return(0,r.Ay)(e,e=>{o.forEach(t=>{delete e.brandAssociations.byId[t.id]}),delete e.institutionBrands.byId[n]})},[(0,o.fJ)(u.g.INSTITUTION_BRAND_DELETE)]:(e,t)=>{let{brandId:n}=t,s=(0,i.filter)(e.brandAssociations.byId,{brandId:n}),a=e;return a=(0,r.Ay)(a,e=>{s.forEach(t=>{e.brandAssociations.byId[t.id]||(e.brandAssociations.byId[t.id]={}),e.brandAssociations.byId[t.id].api||(e.brandAssociations.byId[t.id].api={}),e.brandAssociations.byId[t.id].api.isDeleting=!1}),e.institutionBrands.byId[n]||(e.institutionBrands.byId[n]={}),e.institutionBrands.byId[n].api||(e.institutionBrands.byId[n].api={}),e.institutionBrands.byId[n].api.isDeleting=!1}),(0,o.Nh)(a,t)},[u.g.DEFAULT_INSTITUTION_BRAND_LOAD]:o.r1,[(0,o.ok)(u.g.DEFAULT_INSTITUTION_BRAND_LOAD)]:(e,t)=>(t&&t.institutionBrands&&(e=g(e,t)),(0,o.Zg)(e,t)),[(0,o.fJ)(u.g.DEFAULT_INSTITUTION_BRAND_LOAD)]:o.Nh,[u.g.INSTITUTION_BRAND_HOSTNAMES_LOAD]:(e,t)=>(0,r.Ay)(e,e=>{e.brandHosts.isLoading=!0}),[(0,o.ok)(u.g.INSTITUTION_BRAND_HOSTNAMES_LOAD)]:(e,t)=>{if(!t||!t.hostnames)return(0,r.Ay)(e,e=>{e.brandHosts.isLoading=!1});let{hostnames:n,paging:i}=t;return(0,r.Ay)(e,e=>{e.brandHosts.hostnames=n,e.brandHosts.paging=i,e.brandHosts.isLoading=!1})},[(0,o.fJ)(u.g.INSTITUTION_BRAND_HOSTNAMES_LOAD)]:(e,t)=>(0,r.Ay)(e,e=>{e.brandHosts.isLoading=!1})}),m=e=>(0,i.find)(e.institutionBrand.institutionBrands.byId,{isDefault:!0}),g=(e,t)=>{let{institutionBrands:n,brandAssociations:i}=t;return(0,r.Ay)(e,e=>{Object.keys(n.byId).forEach(t=>{let r={...n.byId[t],api:{isUpdating:!1,isDeleting:!1}};e.institutionBrands.byId[r.id]=r}),Object.keys(i.byId).forEach(t=>{let n={...i.byId[t],api:{isUpdating:!1,isDeleting:!1}};e.brandAssociations.byId[n.id]=n})})},E={createBrand:e=>(0,o.VP)(u.g.INSTITUTION_BRAND_CREATE,()=>(0,s.K5)(e).catch(t=>{throw{err:t,brandWithAssociations:e}})),updateBrand:e=>(0,o.VP)(u.g.INSTITUTION_BRANDS_UPDATE,()=>(0,s.JL)(e.ultraBranding.id,e).catch(t=>{throw{err:t,brandWithAssociations:e}}),e),fetchInstitutionBrand:e=>(0,o.RA)((t,n)=>{var r;return t((0,o.rc)(u.g.INSTITUTION_BRAND_LOAD)),((r=n(),h.getInstitutionBrandById(r,e))?Promise.resolve(null):(0,s.__)(e).catch(t=>{throw{err:t,brandId:e}})).then(e=>t((0,o.rc)((0,o.ok)(u.g.INSTITUTION_BRAND_LOAD),e))).catch(e=>{let n=(0,d.xt)(e);if(t((0,o.rc)((0,o.fJ)(u.g.INSTITUTION_BRAND_LOAD),e)),!(0,c.rh)(n,[a.t3V.NotFound]))return t((0,o.rc)((0,o.ok)(l.A.APP_ERROR),{error:n})),null;throw n.originalException})}),fetchInstitutionBrands:()=>(0,o.VP)(u.g.INSTITUTION_BRANDS_LOAD,e=>null!=e().institutionBrand.paging?Promise.resolve(null):(0,s.rl)().catch(e=>{throw{err:e}})),deleteInstitutionBrand:e=>(0,o.VP)(u.g.INSTITUTION_BRAND_DELETE,()=>(0,s.Bs)(e).then(()=>({brandId:e})).catch(t=>{throw{err:t,brandId:e}}),{brandId:e}),fetchDefaultInstitutionBrand:()=>(0,o.VP)(u.g.DEFAULT_INSTITUTION_BRAND_LOAD,e=>{var t;return(t=e(),h.getDefaultInstitutionBrand(t))?Promise.resolve(null):(0,s.__)("default").catch(e=>{throw{err:e}})}),fetchInstitutionBrandHostnames:()=>(0,o.VP)(u.g.INSTITUTION_BRAND_HOSTNAMES_LOAD,e=>null!=e().institutionBrand.brandHosts.paging?Promise.resolve(null):(0,s.mj)().catch(e=>{throw{err:e}}))},h={getInstitutionBrandById:(e,t)=>t===u.Z?m(e):(0,i.find)(e.institutionBrand.institutionBrands.byId,{id:t}),getAssociationsByBrandId:(e,t)=>{let n=m(e),r=t===u.Z?n&&n.id:t;return(0,i.filter)(e.institutionBrand.brandAssociations.byId,{brandId:r})},getAllAssociationsByBrandId:e=>(0,i.groupBy)(e.institutionBrand.brandAssociations.byId,"brandId"),getDefaultInstitutionBrand:e=>m(e)}},353170:function(e,t,n){"use strict";n.d(t,{Z:function(){return i},g:function(){return r}});let r={INSTITUTION_BRAND_CREATE:"institution.brand.create",INSTITUTION_BRANDS_UPDATE:"institution.brand.update",INSTITUTION_BRAND_DELETE:"institution.brand.delete",INSTITUTION_BRAND_LOAD:"institution.brand.load",INSTITUTION_BRANDS_LOAD:"institution.brands.load",DEFAULT_INSTITUTION_BRAND_LOAD:"institution.brands.default.load",INSTITUTION_BRAND_HOSTNAMES_LOAD:"institution.brand.hostnames.load",INSTITUTION_CUSTOM_CSS_UPSERT:"institution.custom.css.upsert"},i="default"},886228:function(e,t,n){"use strict";n.d(t,{o1:function(){return p},Ff:function(){return d},Lt:function(){return m}});var r=n(905898),i=n(645250),o=n(968554),s=n(248928),a=n(353170);let l="institution.role.load",u="institution.roles.load",d=(0,o.vy)({institutionRoles:{byId:{}},paging:null,isLoading:!1},{[u]:o.r1,[(0,o.ok)(u)]:(e,t)=>{if(!t||!t.institutionRoles)return(0,o.Zg)(e,t);let{institutionRoles:n,paging:i}=t,s=e;return Object.keys(n.byId).forEach(e=>{let t={...n.byId[e],api:{isUpdating:!1,isDeleting:!1}};s=(0,r.Ay)(s,e=>{e.institutionRoles.byId[t.id]=t})}),(0,r.Ay)(s,e=>{e.isLoading=!1,e.paging=i})},[(0,o.fJ)(u)]:o.Nh,[l]:o.r1,[(0,o.ok)(l)]:(e,t)=>{if(!t||!t.institutionRole)return(0,o.Zg)(e,t);let{institutionRole:n}=t;return(0,o.Zg)(e,t,{institutionRoles:{byId:(0,r.Ay)(e.institutionRoles.byId,e=>{e[n.id]={...n,api:{isUpdating:!1,isDeleting:!1}}})}})},[(0,o.fJ)(l)]:o.Nh,[(0,o.ok)(a.g.INSTITUTION_BRANDS_LOAD)]:c,[(0,o.ok)(a.g.INSTITUTION_BRAND_LOAD)]:c});function c(e,t){if(!t||!t.institutionRoles)return e;let{institutionRoles:n}=t,i=e;return Object.keys(n).forEach(e=>{i=(0,r.Ay)(i,t=>{t.institutionRoles.byId[e]={...n[e],api:{isUpdating:!1,isDeleting:!1}}})}),i}let p={fetchInstitutionRole:e=>(0,o.VP)(l,t=>{var n;return(n=t(),m.getInstitutionRoleById(n,e))?Promise.resolve(null):(0,s.xh)(e).then(e=>({institutionRole:e})).catch(e=>{throw{err:e}})}),fetchInstitutionRoles:()=>(0,o.VP)(u,e=>null!=e().institutionRole.paging?Promise.resolve(null):(0,s.g7)().then(e=>e).catch(e=>{throw{err:e}}))},m={getInstitutionRoleById:(e,t)=>(0,i.find)(e.institutionRole.institutionRoles.byId,{id:t}),getAllInstitutionRolesById:e=>e.institutionRole.institutionRoles.byId}},506439:function(e,t,n){"use strict";n.d(t,{o1:function(){return b},Ff:function(){return f},Lt:function(){return I}});var r=n(968554);let i="knowledge-check-metric.load",o="knowledge-check-metric.invalidateData";var s=n(318728),a=n(905898),l=n(825271);async function u(e,t){return(0,s.jny)(l.dZ,{courseId:e,columnId:t})}var d=n(645250),c=n(842804);let p=(e,t)=>{let n=e.views.byColumnId[t.columnId]||{},i=Object.keys(n).find(e=>{let r=n[e];return(0,d.isEqual)(r.query,t)});return i?{id:i,view:n[i]}:r.Vc},m=e=>["views","byColumnId",e.columnId],g=(e,t)=>{let n=e.views.byColumnId[t];n&&Object.values(n).forEach(e=>{e.isValid=!1})},E=(e,t)=>{Object.values(e.views.byColumnId).reduce((e,t)=>e.concat(Object.values(t)),[]).forEach(e=>{e.query.documentContentId===t&&(e.isValid=!1)})},h=(e,t)=>{let{view:n}=p(t.knowledgeCheckMetric,e),r=t.knowledgeCheckMetric.byColumnId[e.columnId];return!(null==n?void 0:n.isLoading)&&(!r||!(null==n?void 0:n.isValid))},y=(0,r.To)(p,m),f=(0,r.vy)({byColumnId:{},views:{byColumnId:{}}},{[i]:(0,r.Dh)(p,m),[(0,r.ok)(i)]:(e,t)=>{let{query:n,knowledgeCheckMetric:i}=t,o=(0,a.Ay)(e,e=>{e.byColumnId[n.columnId]=i});return(0,r.lY)(o,t,{viewResolver:p,viewsPathResolver:m,values:[n.columnId]})},[(0,r.fJ)(i)]:y,[(0,r.cw)(i)]:(e,t)=>{let{query:n}=t;return y((0,a.Ay)(e,e=>{let{view:t}=p(e,n);t&&(t.isError=!0)}),t)},[(0,r.ok)(c.g.QUESTION_PERSIST)]:(e,t)=>{let{columnId:n}=t,i=(0,a.Ay)(e,e=>{n&&g(e,n)});return(0,r.Zg)(i,t)},[o]:(e,t)=>{let{documentContentId:n}=t,i=(0,a.Ay)(e,e=>{E(e,n)});return(0,r.Zg)(i,t)}}),b={loadKnowledgeCheckMetric:e=>{let{columnId:t,courseId:n}=e;return(0,r.Vy)(i,async()=>{try{return{knowledgeCheckMetric:await u(n,t),query:e}}catch(t){throw new r.GS(t).setData({query:e})}},{allowedErrors:[s.t3V.Forbidden],data:{query:e},condition:(t,{getState:n})=>h(e,n())})},invalidateData:(e,t)=>({type:o,courseId:e,documentContentId:t})},I={getKnowledgeCheckMetric:(e,t)=>e.knowledgeCheckMetric.byColumnId[t],getKnowledgeCheckMetricViewStatusByQuery:(e,t)=>{let{view:n}=p(e.knowledgeCheckMetric,t);if(n)return n}}},912991:function(e,t,n){"use strict";n.d(t,{o1:function(){return g},Ff:function(){return m},Lt:function(){return E}});var r=n(905898),i=n(645250),o=n(397965);async function s(e){return null==e.locale&&(e.locale="en_US"),(0,o.Jt)((0,o.c$)("/v1/locales/%locale%?exactMatch=false",e))}var a=n(318728),l=n(758247),u=n(968554);let d={LOCALE_SETTINGS_LOAD:"locale.load"};var c=n(44564),p=n(456585);let m=(0,u.vy)({byLocale:{},isLoading:!1},{[d.LOCALE_SETTINGS_LOAD]:(e,t)=>(0,u.r1)(e,t),[(0,u.ok)(d.LOCALE_SETTINGS_LOAD)]:(e,t)=>{let n=(0,r.Ay)(e,e=>{let{localeSettings:n}=t;e.byLocale[n.languageTag]=n});return(0,u.Zg)(n,t)},[(0,u.fJ)(d.LOCALE_SETTINGS_LOAD)]:(e,t)=>(0,u.Nh)(e,t),[(0,u.cw)(d.LOCALE_SETTINGS_LOAD)]:(e,t)=>(0,u.Zg)(e,t)}),g={getLocaleSettings:e=>(0,u.RA)((t,n)=>{var r,o;return(r=n(),o=e.locale,i.isEmpty(E.getLocaleSettings(r,o))&&!E.isLocaleLoading(r))?(t((0,u.rc)(d.LOCALE_SETTINGS_LOAD)),s(e).then(e=>(e&&(e.calendar.firstDayOfWeek=a.oJL[e.calendar.firstDayOfWeek]),t((0,u.rc)((0,u.ok)(d.LOCALE_SETTINGS_LOAD),{localeSettings:e})),{localeSettings:e})).catch(e=>{let n=(0,c.xt)(e);(0,p.r)(n,[a.t3V.NotFound])?t((0,u.rc)((0,u.cw)(d.LOCALE_SETTINGS_LOAD))):(t((0,u.rc)((0,u.fJ)(d.LOCALE_SETTINGS_LOAD),e)),t((0,u.rc)((0,u.ok)(l.A.APP_ERROR),{error:e})))})):Promise.resolve(null)})},E={getLocaleSettings:(e,t)=>i.get(e,["locale","byLocale",t],{}),isLocaleLoading:e=>i.get(e,["locale","isLoading"])}},590167:function(e,t,n){"use strict";n.d(t,{o1:function(){return m},Ff:function(){return p},Lt:function(){return g}});var r=n(645250),i=n(905898),o=n(968554),s=n(318728),a=n(825271);let l={DOMAINS_LOAD:"lti.domains.load",DOMAIN_CREATE:"lti.domain.create"};var u=n(839781);let d=(e,t)=>{let n=Object.keys(e.views).find(n=>{let i=e.views[n];return(0,r.isEqual)(i.query,t)});return{id:n,view:n?e.views[n]:null}},c=()=>["views"],p=(0,o.vy)({views:{},byDomainId:{}},{[l.DOMAINS_LOAD]:(0,o.Dh)(d,c),[(0,o.fJ)(l.DOMAINS_LOAD)]:(0,o.To)(d,c),[(0,o.ok)(l.DOMAINS_LOAD)]:(e,t)=>{let n=(0,i.Ay)(e,e=>{t.data.results.forEach(t=>{e.byDomainId[t.id]=t})});return(0,o.lY)(n,t,{viewResolver:d,viewsPathResolver:c,paging:t.data.paging,values:t.data.results.map(e=>e.id)})}}),m={loadDomains:e=>(0,o.RA)(async t=>{try{t((0,o.rc)(l.DOMAINS_LOAD,{query:e}));let n=await (0,s.NHx)(a.dZ,e);return t((0,o.rc)((0,o.ok)(l.DOMAINS_LOAD),{query:e,data:n})),{query:e,data:n}}catch(n){throw t((0,o.rc)((0,o.fJ)(l.DOMAINS_LOAD),{query:e,error:n})),n}}),createDomain:e=>(0,o.RA)(async t=>{try{t((0,o.rc)(l.DOMAIN_CREATE,{data:e}));let n=await (0,s.qBq)(a.dZ,e);return t((0,o.rc)((0,o.ok)(l.DOMAIN_CREATE),{data:n})),n}catch(e){throw t((0,o.rc)((0,o.fJ)(l.DOMAIN_CREATE),e)),e}})},g={shouldLoadView:(e,t)=>{let n=d(e.ltiDomain,t);return!n.view||!n.view.isValid&&!n.view.isLoading},domains:(0,u.n)((e,t)=>{var n,r,i;return null!==(i=null===(r=null===(n=d(e.ltiDomain,t).view)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(t=>e.ltiDomain.byDomainId[t]))&&void 0!==i?i:[]},e=>e)}},335654:function(e,t,n){"use strict";n.d(t,{o1:function(){return h},Ff:function(){return g},Lt:function(){return E}});var r=n(645250),i=n(905898),o=n(968554),s=n(318728),a=n(825271);let l={PLACEMENTS_LOAD:"lti.placements.load",PLACEMENT_CREATE:"lti.placement.create",ASSET_PROCESSOR_LINK_UPDATE:"lti.placement.processor.update",INVALIDATE_ASSET_PROCESSOR:"lti.placement.processor.invalidate"};var u=n(758247),d=n(839781);let c=(e,t)=>{let n=Object.keys(e.views).find(n=>{let i=e.views[n];return(0,r.isEqual)(i.query,t)});return{id:n,view:n?e.views[n]:null}},p=()=>["views"],m=(e,t)=>{let n=c(e,t);n.view&&(n.view.isValid=!1)},g=(0,o.vy)({views:{},byPlacementId:{},assetProcessorLinks:{byContentId:{}}},{[l.PLACEMENTS_LOAD]:(0,o.Dh)(c,p),[(0,o.fJ)(l.PLACEMENTS_LOAD)]:(0,o.To)(c,p),[(0,o.ok)(l.PLACEMENTS_LOAD)]:(e,t)=>{let n=(0,i.Ay)(e,e=>{t.data.results.forEach(t=>{var n;e.byPlacementId[t.id]=t,null===(n=t.processorLinks)||void 0===n||n.forEach(n=>{e.assetProcessorLinks.byContentId[n.contentId]={...n,placementId:t.id}})})});return(0,o.lY)(n,t,{viewResolver:c,viewsPathResolver:p,paging:t.data.paging,values:t.data.results.map(e=>e.id)})},[(0,o.ok)(l.ASSET_PROCESSOR_LINK_UPDATE)]:(e,t)=>(0,i.Ay)(e,e=>{let n=Object.values(e.byPlacementId).find(e=>e.handle===t.data.ltiPlacementHandle);n&&(e.assetProcessorLinks.byContentId[t.data.contentId]={...t.data,placementId:n.id})}),[(0,o.ok)(l.INVALIDATE_ASSET_PROCESSOR)]:(e,t)=>(0,i.Ay)(e,e=>{m(e,{pathParams:t.query})})}),E={shouldLoadView:(e,t)=>{let n=c(e.ltiPlacement,t);return!n.view||!n.view.isValid&&!n.view.isLoading},getPlacementsByQuery:(0,d.n)((e,t)=>{var n,r,i;return null!==(i=null===(r=null===(n=c(e.ltiPlacement,t).view)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(t=>e.ltiPlacement.byPlacementId[t]))&&void 0!==i?i:[]},e=>e),getPlacementById:(e,t)=>e.ltiPlacement.byPlacementId[t],getAssetProcessorLinkByContentId:(e,t)=>e.ltiPlacement.assetProcessorLinks.byContentId[t]},h={loadPlacements:e=>(0,o.RA)(async(t,n)=>{if(!E.shouldLoadView(n(),e))return{query:e,data:E.getPlacementsByQuery(n(),e)};try{t((0,o.rc)(l.PLACEMENTS_LOAD,{query:e}));let n=await (0,s.OfL)(a.dZ,e);return t((0,o.rc)((0,o.ok)(l.PLACEMENTS_LOAD),{query:e,data:n})),{query:e,data:n}}catch(n){throw t((0,o.rc)((0,o.fJ)(l.PLACEMENTS_LOAD),{query:e,error:n})),t((0,o.rc)((0,o.ok)(u.A.APP_ERROR),{error:n})),n}}),loadAssetProcessors:e=>(0,o.RA)(async(t,n)=>{if(!E.shouldLoadView(n(),{pathParams:e}))return{pathParams:e,data:E.getPlacementsByQuery(n(),{pathParams:e})};try{t((0,o.rc)(l.PLACEMENTS_LOAD,{query:{pathParams:e}}));let n=await (0,s.HyT)(a.dZ,e);return t((0,o.rc)((0,o.ok)(l.PLACEMENTS_LOAD),{query:{pathParams:e},data:n})),{pathParams:e,data:n}}catch(n){throw t((0,o.rc)((0,o.fJ)(l.PLACEMENTS_LOAD),{query:{pathParams:e},error:n})),t((0,o.rc)((0,o.ok)(u.A.APP_ERROR),{error:n})),n}}),updateAssetProcessorLink:(e,t,n,r)=>(0,o.VP)(l.ASSET_PROCESSOR_LINK_UPDATE,async()=>({data:await (0,s.lKM)(a.dZ,{courseId:e,contentId:t,placementHandle:n},r)})),invalidateAssetProcessor:e=>(0,o.rc)((0,o.ok)(l.INVALIDATE_ASSET_PROCESSOR),{query:e}),createPlacement:e=>(0,o.RA)(async t=>{try{t((0,o.rc)(l.PLACEMENT_CREATE,{data:e}));let n=await (0,s.d6l)(a.dZ,e);t((0,o.rc)((0,o.ok)(l.PLACEMENT_CREATE),{data:n}))}catch(e){t((0,o.rc)((0,o.fJ)(l.PLACEMENT_CREATE),e))}})}},851530:function(e,t,n){"use strict";n.d(t,{o1:function(){return h},Ff:function(){return E},Lt:function(){return y}});var r=n(905898),i=n(968554),o=n(397965);let s=e=>{let t={};return e.forEach(e=>{let n=e.context.toString()+"_"+e.source+"_"+e.event;t[n]?t[n].distributionMethods.push({method:e.method,isEnabled:e.isEnabled,isEditable:e.isEditable}):t[n]={context:e.context,source:e.source,event:e.event,distributionMethods:[{method:e.method,isEnabled:e.isEnabled,isEditable:e.isEditable}]}}),Object.values(t)},a=e=>{let t=[];return e.forEach(e=>{e.distributionMethods&&e.distributionMethods.forEach(n=>{let r={context:e.context,source:e.source,event:e.event,...n};t.push(r)})}),t},l=e=>{let t=e.courseId||"",n=e.ownerId||"";return e.context.toString()+"_"+e.source+"_"+e.event+"_"+e.method+"_"+t+"_"+n},u=e=>e.reduce((e,t)=>(e[l(t)]=t,e),{}),d="/public/v1/administration/notifications/settings";async function c(){let e=await (0,o.Jt)((0,o.c$)(d,{})),t=e.results;for(;e.paging&&e.paging.nextPage;)e=await (0,o.Jt)("/"+e.paging.nextPage.split("/").slice(3).join("/")),t=t.concat(e.results);return{notificationMethodSettings:u(a(t))}}async function p(e){return{notificationMethodSettings:u(a((await (0,o.F6)((0,o.c$)(d,{}),s(e))).results))}}let m="notification.method.settings.load.all",g="notification.method.settings.multiple.update",E=(0,i.vy)({byId:{},isLoading:!1},{[m]:i.r1,[(0,i.ok)(m)]:(e,t)=>{let n=e;return t.notificationMethodSettings&&(n=(0,r.Ay)(n,e=>{Object.entries(t.notificationMethodSettings).forEach(t=>{e.byId[t[0]]=t[1]})})),(0,i.Zg)(n,t)},[(0,i.fJ)(m)]:i.Nh,[g]:(e,t)=>{let{toUpdate:n}=t;return(0,r.Ay)(e,e=>{n.forEach(t=>{e.byId[l(t)]||(e.byId[l(t)]={}),e.byId[l(t)].api||(e.byId[l(t)].api={}),e.byId[l(t)].api.isUpdating=!0})})},[(0,i.ok)(g)]:(e,t)=>{let{notificationMethodSettings:n}=t;return(0,r.Ay)(e,e=>{Object.entries(n).forEach(t=>{e.byId[t[0]]=t[1],e.byId[t[0]].api||(e.byId[t[0]].api={}),e.byId[t[0]].api.isUpdating=!1})})},[(0,i.fJ)(g)]:(e,t)=>{let{toUpdate:n}=t;return(0,r.Ay)(e,e=>{n.forEach(t=>{e.byId[l(t)]||(e.byId[l(t)]={}),e.byId[l(t)].api||(e.byId[l(t)].api={}),e.byId[l(t)].api.isUpdating=!1})})}}),h={loadAdminNotificationMethodSettings:()=>(0,i.VP)(m,e=>f(e())?c():Promise.resolve(null)),persistAdminNotificationMethodSettings:e=>(0,i.VP)(g,()=>p(e).then(e=>({...e})).catch(t=>{throw{toUpdate:e,err:t}}),{toUpdate:e})},y={getAdminNotificationMethodSettings:e=>Object.values(e.notificationMethodSetting.byId).filter(e=>!e.courseId&&!e.ownerId),isLoading:e=>e.notificationMethodSetting.isLoading},f=e=>0===y.getAdminNotificationMethodSettings(e).length},385863:function(e,t,n){"use strict";n.d(t,{o1:function(){return l},Ff:function(){return a},Lt:function(){return u}});var r=n(905898),i=n(968554);let o="partner.cloud.settings.load";var s=n(828736);let a=(0,i.vy)({byId:{},isLoading:!1},{[o]:i.r1,[(0,i.ok)(o)]:(e,t)=>{let{providerId:n,settings:o}=t,s=e;return n&&o&&(s=(0,r.Ay)(e,e=>{e.byId[n]={settings:o}})),(0,i.Zg)(s,t)},[(0,i.fJ)(o)]:i.Nh}),l={loadProviderSettings:e=>(0,i.VP)(o,t=>{var n;return(n=t(),u.getProviderSettingsById(n,e))?Promise.resolve(null):(0,s.PZM)(e).then(t=>({providerId:e,settings:t}))})},u={getProviderSettingsById:(e,t)=>{var n;return null===(n=e.partnerCloud.byId[t])||void 0===n?void 0:n.settings}}},580208:function(e,t,n){"use strict";n.d(t,{o1:function(){return d},Ff:function(){return u},Lt:function(){return c}});var r=n(905898),i=n(968554),o=n(859795),s=n(318728);let a="proctoringServices.load",l=e=>e.reduce((e,t)=>({...e,[t.handle]:t}),{}),u=(0,i.vy)({byHandle:{},isLoading:!1},{[a]:i.r1,[(0,i.ok)(a)]:(e,t)=>{let{proctoringServices:n}=t;if(null===n)return(0,i.Zg)(e,t);let o=(0,r.Ay)(e,e=>{e.byHandle=n});return(0,i.Zg)(o,t)},[(0,i.fJ)(a)]:i.Nh}),d={loadProctoringServices:()=>(0,i.VP)(a,async e=>{if(0!==Object.keys(e().proctoringServices.byHandle).length)return Promise.resolve({proctoringServices:c.getProctoringServices(e())});try{let e=await (0,o.IF)();return{proctoringServices:l(e)}}catch(e){throw{err:e}}}),setProctoringServicesInStore:e=>(0,i.rc)((0,i.ok)(a),{proctoringServices:l(e)})},c={getAvailableProctoringServices:e=>Object.values(e.proctoringServices.byHandle).filter(e=>e.availability.available===s.FFW.Yes),getProctoringServices:e=>Object.values(e.proctoringServices.byHandle)}},258112:function(e,t,n){"use strict";n.d(t,{Ff:function(){return a},Lt:function(){return u},o1:function(){return l}});var r=n(905898),i=n(645250),o=n(968554),s=n(428555);let a=(0,o.vy)({isLoading:!1,byId:{}},{[s.g.QUESTION_DETAILS_LOAD]:o.r1,[(0,o.ok)(s.g.QUESTION_DETAILS_LOAD)]:(e,t)=>{let n=(0,r.Ay)(e,e=>{let{questionDetails:n}=t;e.byId=n});return(0,o.Zg)(n,t)},[(0,o.fJ)(s.g.QUESTION_DETAILS_LOAD)]:o.Nh}),l={},u={getByAnalysisId:(e,t)=>i.filter(e.questionAnalysis.questionDetails.byId,{analysisId:t})}},428555:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={QUESTION_DETAILS_LOAD:"question-analysis.question-details.load"}},46774:function(e,t,n){"use strict";n.d(t,{o1:function(){return m},Ff:function(){return p},Lt:function(){return g}});var r=n(905898),i=n(645250),o=n(968554),s=n(758247),a=n(428555),l=n(318728),u=n(828736),d=n(300474);let c={REPORTS_LOAD:"question-analysis.reports.load",REPORT_CREATE:"question-analysis.reports.create"},p=(0,o.vy)({byId:{},isLoading:!1},{[c.REPORTS_LOAD]:o.r1,[(0,o.ok)(c.REPORTS_LOAD)]:(e,t)=>{let n=(0,r.Ay)(e,e=>{let{reports:n}=t;n&&(e.byId=n)});return(0,o.Zg)(n,t)},[(0,o.fJ)(c.REPORTS_LOAD)]:o.Nh,[(0,o.ok)(c.REPORT_CREATE)]:(e,t)=>{let n=(0,r.Ay)(e,e=>{let{report:n}=t;e.byId[n.id]=n});return(0,o.Zg)(n,t)},[(0,o.fJ)(c.REPORT_CREATE)]:o.Nh}),m={fetchReports:e=>(0,o.RA)((t,n)=>(t((0,o.rc)(c.REPORTS_LOAD)),(0,u.eFJ)(e).then(e=>(t((0,o.rc)((0,o.ok)(c.REPORTS_LOAD),e)),t((0,o.rc)((0,o.ok)(a.g.QUESTION_DETAILS_LOAD),e)),{...e})).catch(e=>{t((0,o.rc)((0,o.ok)(s.A.APP_ERROR),{error:e})),t((0,o.rc)((0,o.fJ)(c.REPORTS_LOAD))),t((0,o.rc)((0,o.fJ)(a.g.QUESTION_DETAILS_LOAD)))}))),fetchReport:(e,t)=>(0,o.RA)((n,r)=>!function(e,t){let n=g.getMostRecentByAssessmentId(e,t);return!E(e)&&(null==n||n.analysisReportDetails.state===l.wod.InProgress)}(r(),t)?Promise.resolve(null):(n((0,o.rc)(c.REPORTS_LOAD)),(0,u.HXl)(e,t).then(e=>(n((0,o.rc)((0,o.ok)(c.REPORTS_LOAD),e)),n((0,o.rc)((0,o.ok)(a.g.QUESTION_DETAILS_LOAD),e)),{...e})).catch(e=>{n((0,o.rc)((0,o.ok)(s.A.APP_ERROR),{error:e})),n((0,o.rc)((0,o.fJ)(c.REPORTS_LOAD))),n((0,o.rc)((0,o.fJ)(a.g.QUESTION_DETAILS_LOAD)))}))),fetchMultipleReports:(e,t)=>(0,o.RA)((n,r)=>E(r())?Promise.resolve(null):(n((0,o.rc)(c.REPORTS_LOAD)),(0,u.sO6)(e,t).then(e=>(n((0,o.rc)((0,o.ok)(c.REPORTS_LOAD),e)),n((0,o.rc)((0,o.ok)(a.g.QUESTION_DETAILS_LOAD),e)),{...e})).catch(e=>{n((0,o.rc)((0,o.ok)(s.A.APP_ERROR),{error:e})),n((0,o.rc)((0,o.fJ)(c.REPORTS_LOAD))),n((0,o.rc)((0,o.fJ)(a.g.QUESTION_DETAILS_LOAD)))}))),generateReport:(e,t)=>(0,o.VP)(c.REPORT_CREATE,()=>(0,u.ohA)(e,t).then(e=>({...e})).catch(e=>{throw{err:(0,d.yo)(e)}}))},g={getById:(e,t)=>i.find(e.questionAnalysis.reports.byId,{id:t}),getMostRecentByAssessmentId:(e,t)=>{let n=i.filter(e.questionAnalysis.reports.byId,{assessmentId:t});return i.reduce(n,(e,t)=>{let n=e.analysisReportDetails.executionTimeStamp,r=t.analysisReportDetails.executionTimeStamp;return null==e||r>n?t:e})},getByCourseId:(e,t)=>i.filter(e.questionAnalysis.reports.byId,{courseId:t})};function E(e){return e.questionAnalysis.reports.isLoading}},886906:function(e,t,n){"use strict";n.d(t,{o:function(){return s}});var r=n(828736),i=n(968554),o=n(314557);let s={sendChatMessage(e,t,n,s){return(0,i.Vy)(o.g.QUESTION_ATTEMPT_CHAT_MESSAGE_SEND,async i=>{let o=await (0,r.z2U)(e,t,n,s);return{...i,attempt:o}},{data:{courseId:e,attemptId:t,questionAttemptId:n,message:s}})},retryChatMessage(e,t,n){return(0,i.Vy)(o.g.QUESTION_ATTEMPT_CHAT_MESSAGE_RETRY,async i=>{let o=await (0,r.Dbx)(e,t,n);return{...i,attempt:o}},{data:{courseId:e,attemptId:t,questionAttemptId:n}})},pollChatAttempt(e,t,n,s){return(0,i.Vy)(o.g.QUESTION_ATTEMPT_CHAT_POLL,async o=>{try{let i=await (0,r.rPJ)(e,t,n,s);return{...o,attempt:{...i,task:void 0}}}catch(e){throw new i.GS(e).setData({...o})}},{data:{courseId:e,attemptId:t,questionAttemptId:n}})}}},314557:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={QUESTION_ATTEMPT_CHAT_MESSAGE_SEND:"question.attempt.chat.message.send",QUESTION_ATTEMPT_CHAT_MESSAGE_RETRY:"question.attempt.chat.message.retry",QUESTION_ATTEMPT_CHAT_POLL:"question.attempt.chat.poll"}},74937:function(e,t,n){"use strict";n.d(t,{o1:function(){return A},Ff:function(){return b},Lt:function(){return v}});var r=n(905898),i=n(968554),o=n(139552);let s=e=>e.questionAttempt.questionAttemptsById,a=(0,o.Mz)(s,(e,t)=>t,(e,t)=>e[t]),l=(0,o.Mz)(s,(e,t)=>e.questionAttempt.questionAttemptsByAttemptIds[t],(e,t)=>null==t?void 0:t.map(t=>e[t]));var u=n(318728),d=n(447959),c=n(820656),p=n(246206),m=n(842804),g=n(314557);let E=(e,t,{initialize:n=!0,preserveAttemptIdOrder:r=!1}={})=>{let i=(e,t,i)=>{if(!t||!i)return;let o=e.questionAttemptsByAttemptIds[t];if(o){let e=o.indexOf(i);r&&-1!==e?(o.splice(e,1),o.push(i)):-1===e&&o.push(i)}else n&&(e.questionAttemptsByAttemptIds[t]=[i])};"groupAttemptId"in t&&i(e,t.groupAttemptId,t.id),i(e,t.attemptId,t.id)},h=(e,t,n,{initialize:i=!0,preserveAttemptIdOrder:o=!1}={})=>(0,r.Ay)(e,e=>{t.forEach(t=>{var r;let s=e.questionAttemptsById[t.id];E(e,t,{initialize:i,preserveAttemptIdOrder:o}),!t.questionType&&(null===(r=t.question)||void 0===r?void 0:r.questionType)&&(t.questionType=t.question.questionType);let a=(null!=n?n:null==s?void 0:s.api)&&{...null==s?void 0:s.api,...n};e.questionAttemptsById[t.id]={...s,...t,api:a}})});function y(e,t){let n=e.questionAttemptsById[t];return n?h(e,[{...n,task:void 0}]):e}let f=(e,t)=>({...e,id:e.id||"",attemptId:t||""}),b=(0,i.vy)({questionAttemptsById:{},questionAttemptsByAttemptIds:{}},{[(0,i.ok)(c.g.QUESTION_ATTEMPT_SET)]:(e,t)=>{let{data:n}=t;return h(e,[n])},[(0,i.ok)(c.g.QUESTION_ATTEMPTS_SET)]:(e,t)=>{let{data:n}=t;return h(e,n)},[(0,i.ok)(c.g.QUESTION_ATTEMPT_PERSIST)]:(e,t)=>{let{data:n}=t;return h(e,[n])},[(0,i.ok)(g.g.QUESTION_ATTEMPT_CHAT_MESSAGE_SEND)]:(e,t)=>{let{attempt:n}=t;return h(e,[n])},[(0,i.ok)(g.g.QUESTION_ATTEMPT_CHAT_POLL)]:(e,t)=>{let{attempt:n}=t;return h(e,[n])},[(0,i.fJ)(g.g.QUESTION_ATTEMPT_CHAT_POLL)]:(e,t)=>{let{questionAttemptId:n}=t;return y(e,n)},[(0,i.ok)(g.g.QUESTION_ATTEMPT_CHAT_MESSAGE_RETRY)]:(e,t)=>{let{attempt:n}=t;return h(e,[n])},[(0,i.fJ)(g.g.QUESTION_ATTEMPT_CHAT_MESSAGE_RETRY)]:(e,t)=>{let{questionAttemptId:n}=t;return y(e,n)},[p.g.GRADED_QUESTION_ATTEMPTS_LOAD]:i.r1,[(0,i.ok)(p.g.GRADED_QUESTION_ATTEMPTS_LOAD)]:(e,t)=>{let{results:n,attemptId:r}=t.data;return(0,i.Zg)(h(e,n.map(e=>f(e.questionAttempt,r)),{isInvalidated:!1},{preserveAttemptIdOrder:!0}),t)},[p.g.GRADED_QUESTION_ATTEMPT_LOAD]:i.r1,[(0,i.ok)(p.g.GRADED_QUESTION_ATTEMPT_LOAD)]:(e,t)=>{let{questionAttempt:n}=t.data;return(0,i.Zg)(h(e,[n],{isInvalidated:!1}),t)},[(0,i.ok)(p.g.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID)]:(e,t)=>{let{data:{results:n}}=t;return h(e,(n||[]).map((e,t)=>f(e.questionAttempt,n[t].questionAttempt.attemptId)),{isInvalidated:!1},{initialize:!1})},[(0,i.ok)(c.g.QUESTION_ATTEMPTS_LOAD)]:(e,t)=>{let{data:{results:n}}=t;return h(e,n,{isInvalidated:!1})},[(0,i.ok)(c.g.QUESTION_ATTEMPTS_PERSIST)]:(e,t)=>{let{data:n}=t;return h(e,Object.values(n).filter(e=>e.isOk).map(e=>e.result))},[(0,i.ok)(m.g.QUESTION_PERSIST)]:(e,t)=>{let{question:n}=t;return(0,r.Ay)(e,e=>{Object.values(e.questionAttemptsById).forEach(t=>{t.questionId===n.id&&(0,i.gD)(e,h(e,[{...t,question:n}],{isInvalidated:!0}))})})}}),I=async(e,t,n,r,i)=>{let o=n.map(t=>{if((null==t?void 0:t.id)===void 0)throw Error("no attempt id present");let n=v.getQuestionAttemptById(e(),t.id);return n?{questionType:n.questionType,attemptId:n.attemptId,...t}:t});return{data:(await (0,d.fN)(r,o)).data,columnId:i}},A={loadQuestionAttemptsByAttemptId:(e,t)=>(0,i.VP)(c.g.QUESTION_ATTEMPTS_LOAD,()=>(0,d.F)(t,e).then(t=>{if(t.results.length<1||t.results[0].attemptId===e)return{data:t};let n=t.results.map(t=>({...t,groupAttemptId:t.attemptId,attemptId:e}));return{data:{...t,results:n}}}).catch(e=>{throw{err:e}})),setQuestionAttemptInStore:e=>(0,i.rc)((0,i.ok)(c.g.QUESTION_ATTEMPT_SET),{data:e}),setQuestionAttemptsInStore:e=>(0,i.rc)((0,i.ok)(c.g.QUESTION_ATTEMPTS_SET),{data:e}),persistQuestionAttempts:(e,t,n)=>(0,i.VP)(c.g.QUESTION_ATTEMPTS_PERSIST,(r,i)=>I(r,i,e,t,n),{data:e}),markQuestionAttemptsMovedOn(e,t){let n=e.map(e=>({id:e,attemptStatus:u.ID3.InProgress}));return this.persistQuestionAttempts(n,t)}},v={getQuestionAttemptById:a,getQuestionAttemptsByAttemptId:l}},820656:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={QUESTION_ATTEMPT_PERSIST:"question.attempt.persist",QUESTION_ATTEMPT_SET:"question.attempt.set",QUESTION_ATTEMPTS_LOAD:"question.attempts.load",QUESTION_ATTEMPTS_SET:"question.attempts.set",QUESTION_ATTEMPTS_PERSIST:"question.attempts.persist"}},95649:function(e,t,n){"use strict";n.d(t,{o1:function(){return F},Ff:function(){return q},Lt:function(){return V}});var r=n(905898),i=n(968554),o=n(318728),s=n(828736),a=n(246206),l=n(591835),u=n(139552),d=n(443873),c=n(732583),p=n(645250),m=/*#__PURE__*/n.n(p);let g=e=>["views","byQuestionId",e.questionId];function E(e){return{questionId:e.questionId,assessmentId:"assessmentId"in e?e.assessmentId:void 0,courseId:"courseId"in e?e.courseId:void 0,paging:"paging"in e?e.paging:void 0,questionAttemptId:"questionAttemptId"in e?e.questionAttemptId:void 0,filterParams:"filterParams"in e?e.filterParams:void 0,includeOnlyAvailableUsers:"includeOnlyAvailableUsers"in e?e.includeOnlyAvailableUsers:void 0}}let h=["questionId","assessmentId","courseId","paging","questionAttemptId","filterParams","includeOnlyAvailableUsers"],y=(e,t)=>{if(!t)return{id:null,view:null};let n=e.views.byQuestionId[t.questionId];if(!n)return{id:null,view:null};let r=Object.keys(n).find(e=>{let r=n[e];return m().isEqual(m().pick(E(t),...h),m().pick(E(r.query),...h))});return{id:null!=r?r:null,view:r?n[r]:null}},f=(0,u.Ad)(d.UI,c.Y_),b=e=>e.questionAttemptGrade.questionAttemptGradeById,I=(0,u.Mz)(b,(e,t)=>t,(e,t)=>{var n;return(n={questionAttemptIds:t,allQuestionAttempts:e}).questionAttemptIds.map(e=>n.allQuestionAttempts[e])});function A(e){return e.allQuestionAttemptGrades[e.questionAttemptId]}let v=(0,u.Mz)(b,(e,t)=>t,(e,t)=>A({questionAttemptId:t,allQuestionAttemptGrades:e})),S=(0,u.Mz)(b,(e,t)=>e.questionAttemptGrade.questionAttemptIdsByAttemptIds[t],(e,t)=>null==t?void 0:t.map(t=>A({questionAttemptId:t,allQuestionAttemptGrades:e}))),_=f((e,t)=>t.map(t=>{var n;if(!t)return;let r=y(e.questionAttemptGrade,t);if(null==r?void 0:r.view)return{...r.view,values:(null!==(n=r.view.values)&&void 0!==n?n:[]).map(t=>v(e,t)).filter(e=>!!e)}}),e=>e);var T=n(76013),O=n(623409),C=n(457969),R=n(351663),L=n(808954),D=n(437272),N=n(842804),P=n(895703);let k=e=>"gradeId"in e,w=(e,t,n,r=!1)=>{let i=e.questionAttemptGradeById[t];if(r){let r;i&&k(i)&&(r={gradeId:i.gradeId,userId:i.userId}),e.questionAttemptGradeById[t]={...r,...n}}else e.questionAttemptGradeById[t]={...i,...n}},U=(e,t,n,r=!0)=>{let i=e.questionAttemptIdsByAttemptIds[t];i?-1===i.indexOf(n)&&i.push(n):r&&(e.questionAttemptIdsByAttemptIds[t]=[n])},M=(e,t)=>{for(let n of Object.values(e.views.byQuestionId))for(let e of Object.values(n))"assessmentId"in e.query&&e.query.assessmentId===t&&(e.isValid=!1)},B=(e,t)=>{let n=e.views.byQuestionId[t];n&&Object.values(n).forEach(e=>{e.isValid=!1})};function G(e,t,n,o=!0){return(0,r.Ay)(e,e=>{t.forEach(({questionAttempt:t,...r})=>{let s=t.id;if(!s)throw Error("Graded Question Attempts Load reducer failed: Question attempt has no `id` value");w(e,s,{...r,attemptId:n,questionAttemptId:s}),U(e,n,s,o);let a=t.questionId;a&&(0,i.gD)(e,(0,i.lY)(e,{query:{questionId:a,questionAttemptId:s}},{viewResolver:y,viewsPathResolver:g}))})})}let x=(e,t,n)=>{let r=e.views.byQuestionId[t];r&&Object.values(r).forEach(e=>{var t,r;"filterParams"in e.query&&n.gradeUpdated&&(null===(r=null===(t=e.query)||void 0===t?void 0:t.filterParams)||void 0===r?void 0:r.find(e=>e===o.dkq.NeedsGradingStudents))&&(e.isValid=!1)})},q=(0,i.vy)({questionAttemptGradeById:{},views:{byQuestionId:{}},questionAttemptIdsByAttemptIds:{}},{[(0,i.ok)(a.g.GRADED_QUESTION_ATTEMPTS_LOAD)]:(e,t)=>{let{data:{attemptId:n,results:r}}=t;return G(e,r,n)},[a.g.GRADED_QUESTION_ATTEMPT_LOAD]:(0,i.Dh)(y,g),[(0,i.ok)(a.g.GRADED_QUESTION_ATTEMPT_LOAD)]:(e,t)=>{if(!t.data)return e;let{attemptId:n,...r}=t.data;return(0,i.lY)(G(e,[r],n,!1),t,{viewResolver:y,viewsPathResolver:g})},[a.g.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID]:(0,i.Dh)(y,g),[(0,i.fJ)(a.g.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID)]:(0,i.To)(y,g),[(0,i.ok)(a.g.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID)]:(e,t)=>{let{data:{results:n,paging:o,permissions:s}}=t,l=(0,r.Ay)(e,e=>{n.forEach(t=>{var n;let{questionAttempt:r,...o}=t,s=r.id;if(!s)throw Error("Graded Question Attempts Load reducer failed: Question attempt has no `id` value");let l=t.questionAttempt.attemptId;if(!l)throw Error("Graded Question Attempts Load reducer failed: Attempt has no `id` value");w(e,s,{...o,attemptId:l,questionAttemptId:s});let u=null===(n=t.questionAttempt)||void 0===n?void 0:n.questionId;u&&(0,i.gD)(e,(0,i.lY)(e,{type:a.g.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID,query:{questionId:u,questionAttemptId:s}},{viewResolver:y,viewsPathResolver:g}))})});return(0,i.lY)(l,t,{viewResolver:y,viewsPathResolver:g,paging:o,permissions:s,values:n.map(e=>e.questionAttempt.id).filter(e=>!!e)})},[a.g.GRADED_QUESTION_ATTEMPT_PERSIST]:(e,t)=>{let{questionAttemptId:n,questionId:i}=t;return(0,r.Ay)(e,e=>{let{view:t}=y(e,{questionId:i,questionAttemptId:n});t&&(t.isUpdating=!0)})},[(0,i.ok)(a.g.GRADED_QUESTION_ATTEMPT_PERSIST)]:(e,t)=>{let{questionAttempt:n,dependents:i,...o}=t.data;return(0,r.Ay)(e,e=>{let{id:t,attemptId:r,questionId:s}=n;if(!t||!r)throw Error("Expected question attempt ID and attempt ID on question attempt object");let a={...o,attemptId:i.attemptId,questionAttemptId:t};if(w(e,t,a,!0),U(e,i.attemptId,t,!1),!s)throw Error("Expected question ID on the attempt object");let{view:l}=y(e,{questionId:s,questionAttemptId:t});l&&(l.isUpdating=!1),x(e,s,{gradeUpdated:!0})})},[(0,i.fJ)(a.g.GRADED_QUESTION_ATTEMPT_PERSIST)]:(e,t)=>{let{questionAttempt:n}=t.data,{id:i,questionId:o}=n;return(0,r.Ay)(e,e=>{let{view:t}=y(e,{questionId:o,questionAttemptId:i});t&&(t.isUpdating=!1)})},[a.g.GRADED_QUESTION_ATTEMPT_FOR_GROUP_PERSIST]:(e,t)=>{let{questionAttemptId:n,questionId:i}=t;return(0,r.Ay)(e,e=>{let{view:t}=y(e,{questionId:i,questionAttemptId:n});t&&(t.isUpdating=!0)})},[(0,i.ok)(a.g.GRADED_QUESTION_ATTEMPT_FOR_GROUP_PERSIST)]:(e,t)=>{let{questionAttempt:n,dependents:i,...o}=t.data;return(0,r.Ay)(e,e=>{let{id:t,attemptId:r,questionId:s}=n;if(!t||!r)throw Error("Expected question attempt ID and attempt ID on question attempt object");if(!s)throw Error("Expected question ID on the attempt object");let a={...o,attemptId:i.userAttemptId,questionAttemptId:t};w(e,t,a,!0),U(e,i.userAttemptId,t,!1);let{view:l}=y(e,{questionId:s,questionAttemptId:t});l&&(l.isUpdating=!1),x(e,s,{gradeUpdated:!0})})},[(0,i.fJ)(a.g.GRADED_QUESTION_ATTEMPT_FOR_GROUP_PERSIST)]:(e,t)=>{let{questionAttemptId:n,questionId:i}=t;return(0,r.Ay)(e,e=>{let{view:t}=y(e,{questionId:i,questionAttemptId:n});t&&(t.isUpdating=!1)})},[(0,i.ok)(L.g.GRADEBOOK_ATTEMPT_DELETE)]:(e,t)=>{let{attempt:{assessmentId:n}}=t;return(0,r.Ay)(e,e=>{n&&M(e,n)})},[(0,i.ok)(D.g.GRADEBOOK_GROUP_ATTEMPT_DELETE)]:(e,t)=>{let{groupAttempt:{assessmentId:n}}=t;return(0,r.Ay)(e,e=>{n&&M(e,n)})},[(0,i.ok)(N.g.QUESTION_PERSIST)]:(e,t)=>{var n;let i=null===(n=t.question)||void 0===n?void 0:n.id;return i?(0,r.Ay)(e,e=>{B(e,i)}):e}}),F={loadGradedQuestionAttemptsByAttemptId:(e,t,n)=>(0,i.VP)(a.g.GRADED_QUESTION_ATTEMPTS_LOAD,()=>(0,s.Wun)(e,t,n).then(e=>({data:{...e,attemptId:t}}))),loadGradedQuestionAttemptByQuestionAttemptId:(e,t,n,r)=>(0,i.VP)(a.g.GRADED_QUESTION_ATTEMPT_LOAD,async()=>{let i=await (0,s.bGG)(e,t,n.questionAttemptId,r);return{data:{attemptId:t,...i},query:n}},{query:n}),updateGradedQuestionAttempt:(e,t,n)=>(0,i.VP)(a.g.GRADED_QUESTION_ATTEMPT_PERSIST,async(r,i)=>{var o;let{courseId:a,questionAttemptId:u,attemptId:d}=e,c=V.getQuestionAttemptGradeById(u)(r()),p={manualPoints:null==c?void 0:c.points,...t},m=await (0,s.jKi)(e,p),{questionId:g}=m.questionAttempt;if(!d)throw Error("Expected Attempt ID in question attempt object");let{columnId:E,gradeId:h,assessmentId:y}={gradeId:void 0,columnId:void 0,assessmentId:void 0,...C.Lt.getGradebookAttemptByAttemptId(r(),d)},f=null!=y?y:E?null===(o=T.Lt.getAssessmentByCourseAndGradableItemId(r(),a,E))||void 0===o?void 0:o.id:void 0;return f&&g&&i(O.o1.refreshCachedQuestionGradeStatusesByQuestionId(a,f,g,n===P.W.MyStudentsToGrade?l.MM.MyStudents:l.MM.Default)),{data:{...m,dependents:{columnId:E,courseId:a,gradeId:h,attemptId:d}}}},{questionAttemptId:e.questionAttemptId,questionId:e.questionId}),updateGradedQuestionAttemptForGroup:(e,t)=>(0,i.Vy)(a.g.GRADED_QUESTION_ATTEMPT_FOR_GROUP_PERSIST,async(n,{getState:r,dispatch:i})=>{var o,a;let{courseId:u,questionAttemptId:d,attemptId:c,groupAttemptId:p}=e;if(!c)throw Error("Expected Attempt ID in question attempt object");let m=V.getQuestionAttemptGradeById(d)(r()),g={manualPoints:null==m?void 0:m.points,...t},E=await (0,s.jKi)(e,g),{questionId:h}=E.questionAttempt,{columnId:y,groupAssociationId:f,assessmentId:b}={columnId:void 0,...null===(o=R.Lt.getGradebookGroupAttemptById(r(),p))||void 0===o?void 0:o.value},I=null!=b?b:y?null===(a=T.Lt.getAssessmentByCourseAndGradableItemId(r(),u,y))||void 0===a?void 0:a.id:void 0;return I&&h&&i(O.o1.refreshCachedQuestionGradeStatusesByQuestionId(u,I,h,l.MM.Default)),{data:{...E,dependents:{courseId:u,columnId:y,groupAssociationId:f,userAttemptId:c,groupAttemptId:p}}}},{data:{questionAttemptId:e.questionAttemptId,questionId:e.questionId}}),loadGradedQuestionAttemptsByQuestionIdQuery:e=>(0,i.VP)(a.g.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID,async()=>({data:await (0,s.Pjj)(e.courseId,e.assessmentId,e.questionId,{paging:e.paging,expandParams:["questionAttempt.question","questionAttempt.question.usageCount","questionAttempt.question.sourceInfo","questionAttempt.answerCorrectness"],filterParams:e.filterParams,includeOnlyAvailableUsers:e.includeOnlyAvailableUsers}),query:e}),{query:e}),setGradedQuestionAttempts:(e,t)=>(0,i.rc)((0,i.ok)(a.g.GRADED_QUESTION_ATTEMPTS_LOAD),{data:{attemptId:e,...t}})},V={getQuestionAttemptGradesByAttemptId:e=>t=>S(t,e),getQuestionAttemptGradeById:e=>t=>v(t,e),getQuestionAttemptGradeByIds:e=>t=>I(t,e),getQuestionAttemptGradesByQuestionIdQuery:(...e)=>t=>_(t,e),getQuestionAttemptGradeViewStateByQuery:(e,t)=>{var n;return null!==(n=y(e.questionAttemptGrade,t).view)&&void 0!==n?n:null}}},246206:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={GRADED_QUESTION_ATTEMPTS_LOAD:"question.gradedAttempts.load",GRADED_QUESTION_ATTEMPT_LOAD:"question.gradedAttempt.load",GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID:"question.gradedAttempts.load.by.questionId",GRADED_QUESTION_ATTEMPT_PERSIST:"question.gradedAttempts.persist",GRADED_QUESTION_ATTEMPT_FOR_GROUP_PERSIST:"question.gradedAttemptForGroup.persist"}},715777:function(e,t,n){"use strict";n.d(t,{o1:function(){return B},Ff:function(){return M},Lt:function(){return G}});var r=n(905898),i=n(645250),o=n(968554),s=n(477305),a=n(318728),l=n(301398),u=n(122235),d=n(76013),c=n(897582),p=n(764209),m=n(352290),g=n(758247),E=n(842804),h=n(820656);let y=(0,n(139552).Mz)(e=>e.question.questions,(e,t)=>t,(e,t)=>i.filter(e,{assessmentId:t,questionType:a.xib.PageBreak}));var f=n(246206),b=n(591835),I=n(163785),A=/*#__PURE__*/n.n(I),v=n(728959);function S(e){a.xib.Matching===(null==e?void 0:e.questionType)&&e.answers.forEach(e=>{var t;(null===(t=null==e?void 0:e.ui)||void 0===t?void 0:t.id)||(e.ui={...e.ui,id:A().v4()})}),e&&(0,s.$$)(e)&&e.distractors.forEach(e=>{var t;(null===(t=null==e?void 0:e.ui)||void 0===t?void 0:t.id)||(e.ui={...e.ui,id:A().v4()})})}let _=(e,t,n,r)=>{let i=e[t];i?i[n]=r:e[t]={[n]:r}},T=(e,t,n)=>{let r=e[t];Object.keys(r).length>1?delete r[n]:delete e[t]},O=e=>["views","byCourseId",e.courseId],C=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=null!==(n=e.views.byCourseId[t.courseId])&&void 0!==n?n:{},s=Object.keys(r).find(e=>{let n=r[e];return"questionId"in n.query?"questionId"in t&&t.questionId===n.query.questionId&&t.courseId===n.query.courseId:!("questionId"in t)&&function(e,t){var n,r,o,s,a,l;let{assessmentId:u,courseId:d,filter:c,paging:p,refreshState:m,useSearch:g}=t,E=i.isEqual(p,e.paging)&&u===e.assessmentId&&d===e.courseId&&m===e.refreshState&&g===e.useSearch;if(!(null==e?void 0:e.filter)||!c)return E;if(!E)return!1;let{assessmentIds:h,categoryIds:y,excludeAssessmentIds:f,keywords:b,questionTypes:I,assessmentTypes:A}=c;return(!h||!!V(h,null===(n=e.filter)||void 0===n?void 0:n.assessmentIds))&&(!y||!!V(y,null===(r=e.filter)||void 0===r?void 0:r.categoryIds))&&(!f||!!V(f,null===(o=e.filter)||void 0===o?void 0:o.excludeAssessmentIds))&&(!b||!!V(b,null===(s=e.filter)||void 0===s?void 0:s.keywords))&&(!I||!!V(I,null===(a=e.filter)||void 0===a?void 0:a.questionTypes))&&(!A||!!V(A,null===(l=e.filter)||void 0===l?void 0:l.assessmentTypes))}(t,n.query)});return s?{id:s,view:r[s]}:o.Vc},R=(e,t,n,r)=>{let i=e[t];i?i[n]=r:e[t]={[n]:r}},L=(e,t,n)=>{let r=e[t];Object.keys(r).length>1?delete r[n]:delete e[t]};function D(e,t){var n;t&&Object.values(null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{}).forEach(e=>{e.isValid=!1})}function N(e,t,n){if(!t||!e.views.byCourseId[t])return;let r=Object.values(e.questions).filter(e=>(null==e?void 0:e.assessmentId)&&(null==n?void 0:n.includes(e.assessmentId))).map(e=>null==e?void 0:e.id);(!n||n.length<=0||r.length<=0)&&D(e,t),Object.values(e.views.byCourseId[t]).forEach(e=>{(null==e?void 0:e.values)&&e.values.find(e=>r.includes(e))&&(e.isValid=!1)})}let P=(e,t,n)=>{var r;return null===(r=e.question.copyQuestionsTaskByCourseId[t])||void 0===r?void 0:r[n].queueTask},k=e=>`questionsCopyShowTaskStatus${e.replace(/\_/g,".")}`,w=(e,t)=>({key:k(e),isRequired:!0,value:JSON.stringify({[t.taskId]:!0})}),U=new Set([a.rw8.Complete,a.rw8.CompleteErrors]),M=(0,o.vy)({copyQuestionsTaskByCourseId:{},fileUploadTasksByCourseId:{},importTasksByCourseId:{},isLoading:!1,paging:null,permissions:null,questions:{},views:{byCourseId:{}}},{[E.g.QUESTION_LOAD]:(0,o.Dh)(C,O),[(0,o.ok)(E.g.QUESTION_LOAD)]:(e,t)=>{if(!t||!t.data)return(0,o.Zg)(e,t);let{data:n}=t,{paging:s,permissions:a,questionIds:l,questions:u}=n,d=(0,r.Ay)(e,t=>{Object.keys(u).forEach(n=>{let r=e.questions[n],o=u[n],s=i.pickBy({contentId:null==r?void 0:r.contentId,permissions:(null==o?void 0:o.permissions)?null==o?void 0:o.permissions:null==r?void 0:r.permissions,ui:null==r?void 0:r.ui,questionIdsInBlock:null==r?void 0:r.questionIdsInBlock,sourceInfo:null==r?void 0:r.sourceInfo});S(u[n]),t.questions[n]={...u[n],ui:{},...s,api:{isUpdating:!1,isDeleting:!1}}})});return(0,o.lY)(d,t,{viewResolver:C,viewsPathResolver:O,paging:s,permissions:a,values:l})},[(0,o.fJ)(E.g.QUESTION_LOAD)]:(0,o.To)(C,O),[(0,o.ok)(E.g.QUESTION_CREATE)]:(e,t)=>(0,r.Ay)(e,n=>{let{nextQuestion:r}=t;S(r),"start"!==r.positionAfter&&(r={...r,position:e.questions[r.positionAfter].position+1});let i=e.questions[r.positionAfter]?e.questions[r.positionAfter].position+1:1,o=x(e.questions,r.assessmentId,!0,i);o.questions[r.id]=r,n.questions={...n.questions,...o.questions}}),[(0,o.ok)(E.g.QUESTIONS_CREATE)]:(e,t)=>(0,r.Ay)(e,e=>{let{courseId:n,assessmentId:r}=t;N(e,n,[r])}),[E.g.QUESTION_PERSIST]:(e,t)=>(0,r.Ay)(e,e=>{let{prevQuestion:n}=t;(null==n?void 0:n.id)&&(e.questions[n.id]={...e.questions[n.id],api:{...null==n?void 0:n.api,isUpdating:!0}})}),[(0,o.ok)(E.g.QUESTION_PERSIST)]:(e,t)=>(0,r.Ay)(e,n=>{var r;let{prevQuestion:i,question:o}=t;if(!(null==i?void 0:i.id)||!(null==o?void 0:o.id))return;if(S(o),0===i.id.indexOf(s.Gw)){let e={...o,api:{isUpdating:!1,isDeleting:!1}};n.questions[o.id]=e,delete n.questions[i.id],D(n,e.courseId);return}let a=e.questions[o.id],l={...o,...a.questionIdsInBlock&&{questionIdsInBlock:a.questionIdsInBlock},...a.sourceInfo&&{sourceInfo:a.sourceInfo},api:{...a.api,isUpdating:!1},...a.ui&&{ui:a.ui}};if((null==i?void 0:i.position)&&(null==l?void 0:l.position)&&i.position!==l.position){let t=l.position<i.position,o=t?l.position:i.position+1,s=t?i.position-1:l.position,a=x(e.questions,null!==(r=null==l?void 0:l.assessmentId)&&void 0!==r?r:"",t,o,s);n.questions={...n.questions,...a.questions}}n.questions={...n.questions,[l.id]:l},D(n,l.courseId)}),[(0,o.fJ)(E.g.QUESTION_PERSIST)]:(e,t)=>(0,r.Ay)(e,e=>{let{prevQuestion:n}=t;(null==n?void 0:n.id)&&(e.questions[n.id]={...e.questions[n.id],api:{...null==n?void 0:n.api,isUpdating:!1}})}),[(0,o.ok)(E.g.QUESTIONS_COPY_QUEUED)]:(e,t)=>(0,r.Ay)(e,e=>{let{courseId:n,assessmentId:r,queueTask:i}=t;R(e.copyQuestionsTaskByCourseId,n,i.taskId,{queueTask:i,assessmentId:r,questionCount:t.questionCount})}),[(0,o.ok)(E.g.QUESTIONS_COPY_TASK_REMOVE)]:(e,t)=>(0,r.Ay)(e,e=>{let{courseId:n,taskId:r}=t;L(e.copyQuestionsTaskByCourseId,n,r)}),[(0,o.fJ)(E.g.QUESTIONS_COPY_TASK_REMOVE)]:(e,t)=>(0,o.Nh)(e,t),[E.g.QUESTIONS_COPY_TASK_UPDATE]:(e,t)=>(0,r.Ay)(e,n=>{let{courseId:r,queueTask:i}=t;n.copyQuestionsTaskByCourseId[r][i.taskId].queueTask=i;let o=e.copyQuestionsTaskByCourseId[r][i.taskId].queueTask;i.taskStatus!==(null==o?void 0:o.taskStatus)&&U.has(i.taskStatus)&&D(n,t.courseId)}),[(0,o.ok)(E.g.QUESTIONS_COPY)]:(e,t)=>(0,r.Ay)(e,e=>{D(e,t.courseId)}),[E.g.QUESTION_DELETE]:(e,t)=>(0,r.Ay)(e,e=>{let{prevQuestion:n}=t;(null==n?void 0:n.id)&&e.questions[n.id]&&(e.questions[n.id]={...e.questions[n.id],api:{...null==n?void 0:n.api,isDeleting:!0}})}),[(0,o.ok)(E.g.QUESTION_DELETE)]:(e,t)=>(0,r.Ay)(e,n=>{var r,o,s;let{prevQuestion:l}=t;if(!(null==l?void 0:l.id))return;let u=function(e,t){let n={};return e.forEach(e=>{let r=e.questionIdsInBlock&&e.questionIdsInBlock.filter(e=>e!==t),i={...e,questionIdsInBlock:r};n[i.id]=i}),n}((o=e.questions,s=null==l?void 0:l.id,i.filter(o,e=>a.xib.QuestionBlock===e.questionType&&i.includes(e.questionIdsInBlock,s))),null==l?void 0:l.id);n.questions={...n.questions,...u};let d=x(n.questions,null!==(r=null==l?void 0:l.assessmentId)&&void 0!==r?r:"",!1,l.position+1);n.questions={...n.questions,...d.questions};let c=n.questions[l.id];delete n.questions[l.id],D(n,c.courseId)}),[(0,o.fJ)(E.g.QUESTION_DELETE)]:(e,t)=>(0,r.Ay)(e,e=>{let{prevQuestion:n}=t;(null==n?void 0:n.id)&&(e.questions[n.id]={...e.questions[n.id],api:{...null==n?void 0:n.api,isDeleting:!1}})}),[(0,o.ok)(c.g.ASSESSMENT_DELETE)]:(e,t)=>(0,r.Ay)(e,e=>{let{assessmentId:n,courseId:r}=t;N(e,r,n?[n]:[])}),[(0,o.ok)(p.g.CONTENT_DELETE)]:(e,t)=>(0,r.Ay)(e,e=>{let{courseAssessmentIds:n}=t;n&&Object.keys(n).forEach(t=>{let r=n[t].filter(e=>!!e);N(e,t,r)})}),[(0,o.ok)(p.g.CONTENT_DELETE_IN_STORE)]:(e,t)=>(0,r.Ay)(e,e=>{let{assessmentId:n,courseId:r}=t;N(e,r,n?[n]:[])}),[(0,o.ok)(p.g.CONTENT_IMPORT_COMPLETE)]:(e,t)=>{let{courseId:n}=t;return(0,r.Ay)(e,e=>{D(e,n)})},[E.g.QUESTION_BLOCK_CLEAR_QUESTIONS]:(e,t)=>{let{questionBlockId:n}=t,i=e.questions[n];return i&&i.questionIdsInBlock?(0,r.Ay)(e,e=>{let t={...i,questionIdsInBlock:[]};(null==t?void 0:t.id)&&(e.questions[t.id]=t)}):e},[E.g.QUESTION_BLOCK_LOAD_QUESTIONS]:o.r1,[(0,o.ok)(E.g.QUESTION_BLOCK_LOAD_QUESTIONS)]:(e,t)=>{let n=(0,r.Ay)(e,n=>{let{questions:r,questionBlockId:i}=t,o=e.questions[i];o||(o={id:i,api:{isUpdating:!1,isDeleting:!1}}),Object.keys(r).forEach(t=>{let i=e.questions[t];S(r[t]),n.questions[t]={...r[t],api:{isUpdating:!1,isDeleting:!1},ui:i&&i.ui},o={...o,questionIdsInBlock:Array.from(new Set([...o.questionIdsInBlock||[],t]))}}),n.questions[o.id]=o});return(0,o.Zg)(n,t)},[E.g.QUESTION_BLOCKS_LOAD_QUESTIONS]:(0,o.Dh)(C,O),[(0,o.ok)(E.g.QUESTION_BLOCKS_LOAD_QUESTIONS)]:(e,t)=>{let{results:n,permissions:i}=t.data,s=(0,r.Ay)(e,t=>{n.forEach(({blockId:n,questions:r})=>{var i,o;let s=e.questions[n]&&{...e.questions[n],questionIdsInBlock:[]},a={...s},l=new Set;s||(a={id:n,api:{isUpdating:!1,isDeleting:!1}}),r.forEach(n=>{if(!n.id)return;l.add(n.id);let r=e.questions[n.id];S(n),t.questions[n.id]={...n,api:{isUpdating:!1,isDeleting:!1},ui:null==r?void 0:r.ui},a={...a,questionIdsInBlock:Array.from(new Set([...(null==a?void 0:a.questionIdsInBlock)||[],n.id]))}}),(null==a?void 0:a.id)&&(a.questionIdsInBlock=null!==(o=null===(i=a.questionIdsInBlock)||void 0===i?void 0:i.filter(e=>l.has(e)))&&void 0!==o?o:[],t.questions[a.id]=a)})});return(0,o.lY)(s,t,{viewResolver:C,viewsPathResolver:O,permissions:i})},[(0,o.ok)(E.g.QUESTION_BLOCK_DELETE_QUESTION)]:(e,t)=>(0,r.Ay)(e,e=>{let{prevQuestion:n,questionBlockId:r}=t,o=e.questions[r];e.questions[r].questionIdsInBlock=i.without(o.questionIdsInBlock,n.id),D(e,n.courseId)}),[(0,o.ok)(E.g.QUESTION_BLOCK_ADD_QUESTIONS)]:(e,t)=>{let n=(0,r.Ay)(e,n=>{let{questionBlockId:r}=t,i=e.questions[r];i||(i={id:r,api:{isUpdating:!1,isDeleting:!1}}),t.results.forEach(t=>{if(t.isOk){let r=t.result,o=e.questions[r.id];S(r={...r,api:{isUpdating:!1,isDeleting:!1},ui:o&&o.ui}),i={...i,questionIdsInBlock:Array.from(new Set([...i.questionIdsInBlock||[],r.id]))},n.questions={...n.questions,...(0,s.jD)([r,i])},D(n,r.courseId)}})});return(0,o.Zg)(n,t)},[(0,o.ok)(E.g.QUESTIONS_FILE_UPLOAD)]:(e,t)=>(0,r.Ay)(e,e=>{let{courseId:n}=t;D(e,n)}),[(0,o.ok)(h.g.QUESTION_ATTEMPT_SET)]:(e,t)=>{let{data:{question:n}}=t;return n?(0,r.Ay)(e,e=>{if(null==n?void 0:n.id){let t=e.questions[n.id];S(n),e.questions[n.id]={api:{isUpdating:!1,isDeleting:!1},...t,...n}}}):e},[(0,o.ok)(h.g.QUESTION_ATTEMPTS_SET)]:(e,t)=>{let{data:n}=t;return(0,r.Ay)(e,e=>{n.forEach(t=>{let{question:n}=t;if(null==n?void 0:n.id){let t=e.questions[n.id];S(n),e.questions[n.id]={api:{isUpdating:!1,isDeleting:!1},...t,...n}}})})},[(0,o.ok)(h.g.QUESTION_ATTEMPTS_LOAD)]:(e,t)=>{let{data:{results:n}}=t;return(0,r.Ay)(e,e=>{n.forEach(t=>{let{question:n}=t;if(null==n?void 0:n.id){S(n);let t=e.questions[n.id];e.questions[n.id]={api:{isUpdating:!1,isDeleting:!1},...t,...n}}})})},[(0,o.ok)(f.g.GRADED_QUESTION_ATTEMPTS_LOAD)]:(e,t)=>{let{data:{results:n}}=t;return(0,r.Ay)(e,e=>{n.forEach(t=>{let{questionAttempt:n}=t,{question:r}=n;if(S(r),null==r?void 0:r.id){let t=e.questions[r.id];e.questions[r.id]={api:{isUpdating:!1,isDeleting:!1},...t,...r}}})})},[(0,o.ok)(f.g.GRADED_QUESTION_ATTEMPTS_LOAD_BY_QUESTION_ID)]:(e,t)=>{let{data:{results:n}}=t;return(0,r.Ay)(e,e=>{n.forEach(t=>{let{questionAttempt:n}=t,{question:r}=n;if(S(r),null==r?void 0:r.id){let t=e.questions[r.id];e.questions[r.id]={...t,...r}}})})},[(0,o.ok)(b.gK.QUESTIONS_GRADE_STATUS_LOAD)]:(e,t)=>{let{data:{results:n}}=t;return(0,r.Ay)(e,e=>{n.forEach(t=>{let{question:n}=t;if(S(n),null==n?void 0:n.id){let t=e.questions[n.id];e.questions[n.id]={...t,...n}}})})},[(0,o.ok)(b.gK.QUESTION_BLOCKS_GRADE_STATUS_LOAD)]:(e,t)=>{let{data:{results:n}}=t;return(0,r.Ay)(e,e=>{n.forEach(t=>{let{question:n}=t;if(S(n),null==n?void 0:n.id){let t=e.questions[n.id];e.questions[n.id]={...t,...n}}})})},[c.g.ASSESSMENT_FILE_UPLOAD_TASK_ADD]:(e,t)=>(0,r.Ay)(e,e=>{let{courseId:n,taskId:r,fileName:i}=t;_(e.fileUploadTasksByCourseId,n,r,{taskId:r,fileName:i,progress:0})}),[c.g.ASSESSMENT_FILE_UPLOAD_TASK_REMOVE]:(e,t)=>(0,r.Ay)(e,e=>{let{courseId:n,taskId:r}=t;T(e.fileUploadTasksByCourseId,n,r)}),[c.g.ASSESSMENT_FILE_UPLOAD_TASK_UPDATE]:(e,t)=>(0,r.Ay)(e,e=>{let{courseId:n,taskId:r,progress:i,fileLocation:o}=t,s=e.fileUploadTasksByCourseId[n][r];e.fileUploadTasksByCourseId[n][r]={...s,progress:i,fileLocation:o}}),[c.g.ASSESSMENT_IMPORT_TASK_ADD]:(e,t)=>(0,r.Ay)(e,e=>{let{courseId:n,queueTask:r}=t;_(e.importTasksByCourseId,n,r.taskId,r)}),[c.g.ASSESSMENT_IMPORT_TASK_UPDATE]:(e,t)=>(0,r.Ay)(e,n=>{let{courseId:r,queueTasks:i}=t;i.forEach(i=>{var o;n.importTasksByCourseId[r][i.taskId]=i;let s=null===(o=e.importTasksByCourseId[r])||void 0===o?void 0:o[i.taskId];i.taskStatus!==(null==s?void 0:s.taskStatus)&&U.has(i.taskStatus)&&D(n,t.courseId)})}),[(0,o.ok)(c.g.ASSESSMENT_IMPORT_TASK_REMOVE)]:(e,t)=>(0,r.Ay)(e,e=>{let{courseId:n,taskId:r}=t;T(e.importTasksByCourseId,n,r)}),[m.g.GRANULAR_CONTENT_COPY_COMPLETE]:(e,t)=>{let{courseId:n}=t;return(0,r.Ay)(e,e=>{D(e,n)})}}),B={loadQuestion:e=>{let{assessmentId:t,courseId:n,questionId:r}=e;return B.loadQuestionById({assessmentId:t,courseId:n,questionId:r})},loadQuestions:e=>{let{assessmentId:t,courseId:n,offset:r,refreshState:i}=e;return B.loadQuestionsByQuery({assessmentId:t,courseId:n,paging:{offset:r,limit:100},refreshState:i})},loadQuestionById:({courseId:e,assessmentId:t,questionId:n})=>(0,o.RA)(r=>{let i={assessmentId:t,courseId:e,questionId:n};return r((0,o.rc)(E.g.QUESTION_LOAD,{query:i})),(0,u.X6)({assessmentId:t,courseId:e,questionId:n}).then(e=>(r((0,o.rc)((0,o.ok)(E.g.QUESTION_LOAD),{data:{questions:{[e.id]:e},questionIds:[e.id]},query:i})),e)).catch(e=>{throw r((0,o.rc)((0,o.ok)(g.A.APP_ERROR),{error:e})),r((0,o.rc)((0,o.fJ)(E.g.QUESTION_LOAD),{query:i})),e})}),loadQuestionsByQuery:e=>(0,o.RA)(async(t,n)=>{var r;let{view:s}=C(null===(r=n())||void 0===r?void 0:r.question,e);return!function(e,t,n=!1,r){let o=i.isEmpty(G.getQuestionsByCourseId(e,t));if(r)return!r.isLoading&&(o||n);let s=e.question.views.byCourseId[t],a=!1;return s&&(a=Object.keys(s).some(e=>!0===s[e].isLoading)),!a&&(o||n)}(n(),e.courseId,null==e?void 0:e.refreshState,s)?Promise.resolve(null):(t((0,o.rc)(E.g.QUESTION_LOAD,{query:e})),(0,u.Xc)(e).then(n=>(t((0,o.rc)((0,o.ok)(E.g.QUESTION_LOAD),{data:n,query:e})),{...n})).catch(n=>{throw t((0,o.rc)((0,o.ok)(g.A.APP_ERROR),{error:n})),t((0,o.rc)((0,o.fJ)(E.g.QUESTION_LOAD),{query:e})),n}))}),loadAssessmentQuestionsByQuery:e=>(0,o.Vy)(E.g.QUESTION_LOAD,async()=>{try{return{data:await (0,u.Xc)(e),query:e}}catch(t){throw new o.GS(t).setData({query:e})}},{data:{query:e},condition:F}),persistQuestion:(e,t,n)=>(0,o.VP)(E.g.QUESTION_PERSIST,async()=>{try{let r={...await (0,u.JZ)(e,t,n),assessmentId:n.assessmentId,courseId:n.courseId};return{prevQuestion:e,question:r,...n.columnId&&{columnId:n.columnId}}}catch(t){throw{prevQuestion:e,err:t}}},{prevQuestion:e}),createQuestion:(e,t,n,r)=>(0,o.RA)(async(i,s)=>{let l;i((0,o.rc)(E.g.QUESTION_CREATE,{assessmentId:e,positionAfter:t,questionType:n,questionOptions:r}));let c=d.Lt.getAssessmentById(s(),e);if((null==c?void 0:c.type)===a.PAn.Test&&(l=c.subtype),c&&c.id&&c.courseId)return(0,u.hG)(c.id,c.courseId,t,n,c.type,l,r).then(e=>(i((0,o.rc)((0,o.ok)(E.g.QUESTION_CREATE),{nextQuestion:e})),{nextQuestion:e})).catch(e=>{throw i((0,o.rc)((0,o.fJ)(E.g.QUESTION_CREATE),e)),i((0,o.rc)((0,o.ok)(g.A.APP_ERROR),{error:e})),e});throw i((0,o.rc)((0,o.fJ)(E.g.QUESTION_CREATE))),i((0,o.rc)((0,o.ok)(g.A.APP_ERROR))),Error("Unable to create question")}),removeCopyQuestionsTask:(e,t)=>(0,o.VP)(E.g.QUESTIONS_COPY_TASK_REMOVE,async n=>{let r=P(n(),e,t),i=w(e,r);return await (0,v.xy)(i),{courseId:e,taskId:t}}),updateCopyTaskStatus:(e,t)=>(0,o.RA)(async n=>{let r=await (0,l.D)(t);return n((0,o.rc)(E.g.QUESTIONS_COPY_TASK_UPDATE,{courseId:e,queueTask:r})),r}),copyQuestionsQueued:(e,t)=>(0,o.VP)(E.g.QUESTIONS_COPY_QUEUED,async()=>{let n=await (0,u.E$)(e),r=w(e.courseId,n);return(0,v.xy)(r),{courseId:e.courseId,assessmentId:e.assessmentId,queueTask:n,questionCount:t}}),copyQuestions:e=>(0,o.VP)(E.g.QUESTIONS_COPY,async()=>{let{type:t,...n}=await (0,u.t)(e);return{...n,courseId:e.courseId}}),copyQuestionsCompleted:e=>(0,o.RA)(t=>{t((0,o.rc)((0,o.ok)(E.g.QUESTIONS_COPY),{courseId:e}))}),deleteQuestion:e=>(0,o.VP)(E.g.QUESTION_DELETE,t=>{let n=d.Lt.getAssessmentById(t(),e.assessmentId);return(0,u.ul)(e,{courseId:n.courseId,assessmentId:n.id}).then(()=>({prevQuestion:e})).catch(t=>{throw{prevQuestion:e,err:t}})},{prevQuestion:e}),deleteQuestions:e=>(0,o.RA)((t,n)=>{let r=d.Lt.getAssessmentById(n(),e[0].assessmentId);return(0,u.vM)(e,{courseId:r.courseId,assessmentId:r.id}).then(n=>{let r=new Map(e.map(e=>[e.id,e]));return Object.keys(n.results).forEach(e=>{let i=n.results[e],s=r.get(i.id);i.isOk?t((0,o.rc)((0,o.ok)(E.g.QUESTION_DELETE),{prevQuestion:s})):t((0,o.rc)((0,o.fJ)(E.g.QUESTION_DELETE),{prevQuestion:s}))}),n})}),loadQuestionsFromQuestionBlock:e=>(0,o.RA)((t,n)=>{var r;return n(),t((0,o.rc)(E.g.QUESTION_BLOCK_LOAD_QUESTIONS)),(0,u.dI)(e).then(e=>(t((0,o.rc)((0,o.ok)(E.g.QUESTION_BLOCK_LOAD_QUESTIONS),{...e})),e)).catch(e=>{t((0,o.rc)((0,o.fJ)(E.g.QUESTION_BLOCK_LOAD_QUESTIONS),e)),t((0,o.rc)((0,o.ok)(g.A.APP_ERROR),{error:e}))})}),loadAllQuestionsFromQuestionBlocks:e=>(0,o.Vy)(E.g.QUESTION_BLOCKS_LOAD_QUESTIONS,async()=>{if(!(null==e?void 0:e.assessmentId)||!(null==e?void 0:e.courseId))return Promise.resolve(null);try{return{data:await (0,u.KX)(e.courseId,e.assessmentId),query:e}}catch(e){throw new o.GS(e).setData({error:e})}},{data:{query:e},condition:(e,t)=>q(e,t)}),clearQuestionsFromQuestionBlock:e=>(0,o.rc)(E.g.QUESTION_BLOCK_CLEAR_QUESTIONS,{questionBlockId:e}),addQuestionsToQuestionBlock:(e,t)=>(0,o.RA)(async n=>{let r;try{r=await (0,u.v$)(e,t),n((0,o.rc)((0,o.ok)(E.g.QUESTION_BLOCK_ADD_QUESTIONS),r))}catch(e){throw n((0,o.rc)((0,o.fJ)(E.g.QUESTION_BLOCK_ADD_QUESTIONS),e)),n((0,o.rc)((0,o.ok)(g.A.APP_ERROR),{error:e})),e}let{assessmentId:i,courseId:s,questionBlockId:a}=t;return await n(B.loadQuestionById({courseId:s,assessmentId:i,questionId:a})),r}),updateQuestionsInQuestionBlock:(e,t,n,r)=>(0,o.RA)(async i=>{let s;try{s=await (0,u.$m)(e,t,n,r),i((0,o.rc)((0,o.ok)(E.g.QUESTION_BLOCK_UPDATE_QUESTIONS),s))}catch(e){throw i((0,o.rc)((0,o.fJ)(E.g.QUESTION_BLOCK_UPDATE_QUESTIONS),e)),i((0,o.rc)((0,o.ok)(g.A.APP_ERROR),{error:e})),e}return await i(B.loadQuestionById({courseId:e,assessmentId:t,questionId:n})),s}),deleteQuestionFromQuestionBlock:(e,t)=>(0,o.RA)(async n=>{let r={prevQuestion:e,questionBlockId:t.questionBlockId};try{await (0,u.Vx)(e,t),n((0,o.rc)((0,o.ok)(E.g.QUESTION_BLOCK_DELETE_QUESTION),r))}catch(e){throw n((0,o.rc)((0,o.fJ)(E.g.QUESTION_BLOCK_DELETE_QUESTION),e)),n((0,o.rc)((0,o.ok)(g.A.APP_ERROR),{error:e})),e}let{assessmentId:i,courseId:s}=t;return await n(B.loadQuestionsByQuery({courseId:s,assessmentId:i})),r}),addQuestionsToAssessment:(e,t,n)=>{let r={courseId:e,assessmentId:t,questions:n};return(0,o.Vy)(E.g.QUESTIONS_CREATE,async()=>{for(let r of n)await (0,u.JZ)(null,r,{courseId:e,assessmentId:t});return r},{data:r})},uploadQuestionsFromFile:e=>(0,o.RA)(async t=>{let{courseId:n,assessmentId:r}=e;t((0,o.rc)(E.g.QUESTIONS_FILE_UPLOAD,{args:e}));try{let i=await (0,u.Nv)(e);return t(i.success>0?(0,o.rc)((0,o.ok)(E.g.QUESTIONS_FILE_UPLOAD),{...i,courseId:n,assessmentId:r}):(0,o.rc)((0,o.fJ)(E.g.QUESTIONS_FILE_UPLOAD),{...i,courseId:n,assessmentId:r})),i}catch(e){throw t((0,o.rc)((0,o.ok)(g.A.APP_ERROR),{error:e})),t((0,o.rc)((0,o.fJ)(E.g.QUESTIONS_FILE_UPLOAD),{courseId:n,assessmentId:r})),e}})},G={getByQuestionId:(e,t)=>i.find(e.question.questions,{id:t}),getQuestionsByAssessmentId:(e,t)=>i.filter(e.question.questions,{assessmentId:t}),getPageBreakQuestionsByAssessmentId:y,getQuestionByPosition:(e,t)=>i.find(e.question.questions,{position:t}),getQuestionsByContentId:(e,t)=>{let n=d.Lt.getAssessmentByContentId(e,t);return n?i.filter(e.question.questions,{assessmentId:n.id,api:{isDeleting:!1}}):[]},getQuestionsByCourseId:(e,t)=>{let n=d.Lt.getAssessmentsByCourseId(e,t);return i.filter(e.question.questions,e=>i.includes(i.map(n,"id"),e.assessmentId))},getQuestionsByQuery:(e,t)=>{let{view:n}=C(e.question,t);return n?(n.values||[]).map(t=>G.getByQuestionId(e,t)).filter(e=>!!e):[]},getQuestionsByQueries:(e,t)=>{let n=new Set;return t.reduce((t,r)=>{let{view:i}=C(e.question,r);return[...t,...((null==i?void 0:i.values)||[]).map(t=>G.getByQuestionId(e,t)).filter(e=>!(!(null==e?void 0:e.id)||n.has(e.id))&&(n.add(e.id),!0))]},[])},getQuestionViewStatusByQuery:(e,t)=>{var n;let{view:r}=C(e.question,t);return r?{isLoading:r.isLoading,isValid:r.isValid,paging:null!==(n=r.paging)&&void 0!==n?n:null,permissions:r.permissions}:null},getQuestionViewStatusByQueries:(e,t)=>t.reduce((t,n)=>{var r;let{view:i}=C(e.question,n),o=null;return i&&(o={isLoading:i.isLoading,isValid:i.isValid,paging:null!==(r=i.paging)&&void 0!==r?r:null,permissions:i.permissions}),[...t,{query:n,view:o}]},[]),getQuestionsByQuestionBlockId:(e,t)=>{let n=i.find(e.question.questions,{id:t}),r=[];return(null==n?void 0:n.questionIdsInBlock)?(n.questionIdsInBlock.forEach(t=>{let n=e.question.questions[t];n&&r.push(n)}),i.sortBy(r,j,K)):r},getCopyQuestionsTask:(e,t)=>e.question.copyQuestionsTaskByCourseId[t]};function x(e,t,n,r,o,a=1){var l;let u={questions:{}};return(l={assessmentId:t,minPosition:r,maxPosition:o},i.filter(i.values(e),e=>{var t;return e.assessmentId===l.assessmentId&&(null===(t=e.id)||void 0===t?void 0:t.indexOf(s.Gw))===-1&&e.position>=l.minPosition&&(!l.maxPosition||e.position<=l.maxPosition)})).forEach(t=>{let r=t.id;u.questions[r]={...e[r],position:n?t.position+a:t.position-a}}),u}let q=(e,t)=>{var n;if(!(null===(n=e.query)||void 0===n?void 0:n.assessmentId)||!e.query.courseId)return!1;let{view:r}=C(t.getState().question,e.query),i=!!(null==r?void 0:r.isLoading),o=!(null==r?void 0:r.isValid)||!!e.query.refreshState;return!i&&o},F=(e,t)=>{var n;if(!(null===(n=e.query)||void 0===n?void 0:n.assessmentId))return!1;let r=t.getState(),o=e.query.assessmentId,{view:s}=C(r.question,e.query),a=i.isEmpty(G.getQuestionsByAssessmentId(r,o));return s?!s.isLoading&&(a||!!e.query.refreshState):a||!!e.query.refreshState};function V(e,t){return void 0===e&&void 0===t||void 0!==e&&void 0!==t&&(null==e?void 0:e.length)===(null==t?void 0:t.length)&&e.every(e=>t.includes(e))}function j(e){return parseInt(H(e.id)[0],10)}function K(e){return parseInt(H(e.id)[1],10)}function H(e){return e.split("_").slice(1)}},842804:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={QUESTION_LOAD:"question.load",QUESTION_CREATE:"question.create",QUESTIONS_COPY:"questions.copy",QUESTIONS_COPY_QUEUED:"questions.copy.queued",QUESTIONS_COPY_TASK_ADD:"questions.copyTask.add",QUESTIONS_COPY_TASK_REMOVE:"questions.copyTask.remove",QUESTIONS_COPY_TASK_LOAD:"questions.copyTask.load",QUESTIONS_COPY_TASK_UPDATE:"questions.copyTask.update",QUESTION_PERSIST:"question.persist",QUESTION_DELETE:"question.delete",QUESTIONS_DELETE:"questions.delete",QUESTIONS_CREATE:"questions.create",QUESTIONS_FILE_UPLOAD:"questions.upload",QUESTION_BLOCK_ADD_QUESTIONS:"question.block.add.questions",QUESTION_BLOCK_LOAD_QUESTIONS:"question.block.load.questions",QUESTION_BLOCKS_LOAD_QUESTIONS:"question.blocks.load.questions",QUESTION_BLOCK_DELETE_QUESTION:"question.block.delete.questions",QUESTION_BLOCK_UPDATE_QUESTIONS:"question.block.update.questions",QUESTION_BLOCK_CLEAR_QUESTIONS:"question.block.clear.questions"}},623409:function(e,t,n){"use strict";n.d(t,{o1:function(){return x},Ff:function(){return G},Lt:function(){return q}});var r=n(318728),i=n(968554),o=n(591835),s=n(905898),a=n(825271),l=n(645250),u=/*#__PURE__*/n.n(l),d=n(139552),c=n(443873),p=n(732583);let m=(0,d.Ad)(c.UI,p.Cu);function g(e){return e.allQuestionGradeStatuses[e.asiObjectId]}let E=e=>e.questionGradeStatus.questionGradeStatusByAsiObjectId,h=(0,d.Mz)(E,(e,t,n=o.MM.Default)=>n,(e,t)=>{let n={};return Object.entries(e).forEach(e=>{let r=e[1][t];(0,o.uj)(r)&&(n[e[0]]=r)}),n}),y=(0,d.Mz)(E,(e,t,n=o.MM.Default)=>n,(e,t)=>{let n={};return Object.entries(e).forEach(e=>{let r=e[1][t];(0,o.uj)(r)&&(n[e[0]]=r)}),n}),f=m((e,t,n)=>t.reduce((t,r)=>{var i,o;return{...t,[r]:null===(o=null===(i=e.questionGradeStatus.questionIdsByQuestionBlockId[r])||void 0===i?void 0:i[n])||void 0===o?void 0:o.ids}},{}),e=>e),b=(e,t,n=o.MM.Default)=>{var r,i;return(null===(i=null===(r=e.questionGradeStatus.questionIdsByAssessmentId[t])||void 0===r?void 0:r[n])||void 0===i?void 0:i.isLoading)===!0},I=(e,t,n=o.MM.Default)=>{var r,i;return(null===(i=null===(r=e.questionGradeStatus.questionIdsByAssessmentId[t])||void 0===r?void 0:r[n])||void 0===i?void 0:i.isValid)===!0},A=(0,d.Mz)(h,(e,t,n=o.MM.Default)=>{var r,i;return null===(i=null===(r=e.questionGradeStatus.questionIdsByAssessmentId[t])||void 0===r?void 0:r[n])||void 0===i?void 0:i.ids},(e,t)=>Array.isArray(t)?t.map(t=>g({asiObjectId:t,allQuestionGradeStatuses:e})):void 0),v=m((e,t,n)=>t.reduce((t,r)=>{var i,o;return{...t,[r]:(null===(o=null===(i=e.questionGradeStatus.questionIdsByQuestionBlockId[r])||void 0===i?void 0:i[n])||void 0===o?void 0:o.isLoading)===!0}},{}),e=>e),S=m((e,t,n)=>t.reduce((t,r)=>{var i,o;return{...t,[r]:(null===(o=null===(i=e.questionGradeStatus.questionIdsByQuestionBlockId[r])||void 0===i?void 0:i[n])||void 0===o?void 0:o.isValid)===!0}},{}),e=>e),_=m(y,f,(e,t)=>u().mapValues(t,t=>Array.isArray(t)?t.map(t=>g({asiObjectId:t,allQuestionGradeStatuses:e})):void 0));var T=n(842804),O=n(808954),C=n(437272),R=n(764209),L=n(457969);function D(e,t){var n,r,i,s;if(e.questionIdsByAssessmentId[t]){for(let a of Object.values(o.MM))if(e.questionIdsByAssessmentId[t][a])for(let o of(e.questionIdsByAssessmentId[t]={...e.questionIdsByAssessmentId[t],[a]:{...e.questionIdsByAssessmentId[t][a],isValid:!1}},null!==(i=null===(r=null===(n=e.questionIdsByAssessmentId[t])||void 0===n?void 0:n[a])||void 0===r?void 0:r.ids)&&void 0!==i?i:[]))(null===(s=e.questionIdsByQuestionBlockId[o])||void 0===s?void 0:s[a])&&(e.questionIdsByQuestionBlockId[o]={...e.questionIdsByQuestionBlockId[o],[a]:{...e.questionIdsByQuestionBlockId[o][a],isValid:!1}})}}let N=(e,t,n)=>(0,s.Ay)(e,e=>{var r,i,o,s,a;e.questionIdsByAssessmentId[t]={...e.questionIdsByAssessmentId[t],[n]:{ids:null===(i=null===(r=e.questionIdsByAssessmentId[t])||void 0===r?void 0:r[n])||void 0===i?void 0:i.ids,isLoading:!0,isValid:null===(a=null===(s=null===(o=e.questionIdsByAssessmentId[t])||void 0===o?void 0:o[n])||void 0===s?void 0:s.isValid)||void 0===a||a}}}),P=(e,t,n,r)=>(0,s.Ay)(e,e=>{M(e,n,r,t),t.forEach(t=>{U(e,{...t},r)})}),k=(e,t,n,r,i)=>(0,s.Ay)(e,e=>{B(e,r,i,t),t.forEach(t=>{U(e,{...t},i)})}),w=(e,t,n,r)=>(0,s.Ay)(e,e=>{var t,i;e.questionIdsByQuestionBlockId[n]={...e.questionIdsByQuestionBlockId[n],[r]:{ids:null===(i=null===(t=e.questionIdsByQuestionBlockId[n])||void 0===t?void 0:t[r])||void 0===i?void 0:i.ids,isLoading:!0,isValid:!0}}}),U=(e,t,n)=>{t.id&&(e.questionGradeStatusByAsiObjectId[t.id]={...e.questionGradeStatusByAsiObjectId[t.id]||null,[n]:{...t}})},M=(e,t,n,r)=>{e.questionIdsByAssessmentId[t]={...e.questionIdsByAssessmentId[t],[n]:{ids:r.map(e=>e.id).filter(e=>!!e),isLoading:!1,isValid:!0}}},B=(e,t,n,r)=>{e.questionIdsByQuestionBlockId[t]={...e.questionIdsByQuestionBlockId[t],[n]:{ids:r.map(e=>e.id).filter(e=>!!e),isLoading:!1,isValid:!0}}},G=(0,i.vy)({questionGradeStatusByAsiObjectId:{},questionIdsByAssessmentId:{},questionIdsByQuestionBlockId:{}},{[o.gK.QUESTIONS_GRADE_STATUS_LOAD]:(e,{assessmentId:t,questionGradeStatusType:n})=>N(e,t,n),[(0,i.ok)(o.gK.QUESTIONS_GRADE_STATUS_LOAD)]:(e,t)=>{let{data:{assessmentId:n,results:r,questionGradeStatusType:i}}=t;return P(e,r,n,i)},[o.gK.QUESTION_BLOCKS_GRADE_STATUS_LOAD]:(e,{assessmentId:t,questionBlockId:n,questionGradeStatusType:r})=>w(e,t,n,r),[(0,i.ok)(o.gK.QUESTION_BLOCKS_GRADE_STATUS_LOAD)]:(e,t)=>{let{data:{assessmentId:n,questionBlockId:r,results:i,questionGradeStatusType:o}}=t;return k(e,i,n,r,o)},[(0,i.ok)(T.g.QUESTION_PERSIST)]:(e,t)=>{let{question:{id:n}}=t;return(0,s.Ay)(e,e=>{n&&function(e,t){for(let n of Object.values(e.questionIdsByAssessmentId))for(let e of Object.values(o.MM)){let r=n[e];if((0,o.x8)(r)){let{ids:e=[]}=r;-1!==e.indexOf(t)&&(r.isValid=!1)}}for(let n of Object.values(e.questionIdsByQuestionBlockId))for(let e of Object.values(o.MM)){let r=n[e];if((0,o.x8)(r)){let{ids:e=[]}=r;-1!==e.indexOf(t)&&(r.isValid=!1)}}}(e,n)})},[(0,i.ok)(O.g.GRADEBOOK_ATTEMPT_DELETE)]:(e,{attempt:{assessmentId:t}})=>(0,s.Ay)(e,e=>{t&&D(e,t)}),[(0,i.ok)(O.g.GRADEBOOK_ATTEMPT_UPDATE)]:(e,t)=>{var n;let{attempt:r,resultGradeBookAttempt:i}=t;if(i&&"exempt"in i){let t=null===(n=(0,L.kK)(r))||void 0===n?void 0:n.id;if(t)return(0,s.Ay)(e,e=>{D(e,t)})}return e},[(0,i.ok)(C.g.GRADEBOOK_GROUP_ATTEMPT_DELETE)]:(e,{groupAttempt:{assessmentId:t}})=>(0,s.Ay)(e,e=>{t&&D(e,t)}),[(0,i.ok)(R.g.CONTENT_PERSIST)]:(e,t)=>(0,s.Ay)(e,e=>{var n,r;let{contents:i,prevContent:o,columns:s}=t;if(i&&(null==o?void 0:o.id)&&s){let t=i[o.id];(null===(n=null==t?void 0:t.gradingColumn)||void 0===n?void 0:n.aggregationModel)!==(null===(r=null==o?void 0:o.gradingColumn)||void 0===r?void 0:r.aggregationModel)&&t.assessmentId&&D(e,t.assessmentId)}})}),x={loadQuestionGradeStatusesByAssessmentId:(e,t,n=o.MM.Default)=>(0,i.VP)(o.gK.QUESTIONS_GRADE_STATUS_LOAD,()=>{let i=n===o.MM.MyStudents?r.a1g.MyStudentsToGrade:void 0;return(0,r.B1V)(a.dZ,{courseId:e,assessmentId:t},i?{filter:i}:void 0).then(e=>({data:{...e,assessmentId:t,questionGradeStatusType:n}}))},{assessmentId:t,questionGradeStatusType:n}),loadQuestionGradingStatusesByQuestionBlockId:(e,t,n,s=o.MM.Default)=>(0,i.VP)(o.gK.QUESTION_BLOCKS_GRADE_STATUS_LOAD,()=>(0,r.qg4)(a.dZ,{courseId:e,assessmentId:t,questionBlockId:n}).then(e=>({data:{...e,assessmentId:t,questionBlockId:n,questionGradeStatusType:s}})),{assessmentId:t,questionBlockId:n,questionGradeStatusType:s}),refreshCachedQuestionGradeStatusesByQuestionId:(e,t,n,r=o.MM.Default)=>(0,i.VP)(o.gK.QUESTIONS_GRADE_STATUS_REFRESH,async(i,o)=>{var s,a,l;let u=i(),d=null!==(l=null===(a=null===(s=u.questionGradeStatus.questionIdsByAssessmentId[t])||void 0===s?void 0:s[r])||void 0===a?void 0:a.ids)&&void 0!==l?l:[];if(d.includes(n)){await o(x.loadQuestionGradeStatusesByAssessmentId(e,t,r));return}let c=d.find(e=>{var t,i;let o=null===(i=null===(t=u.questionGradeStatus.questionIdsByQuestionBlockId[e])||void 0===t?void 0:t[r])||void 0===i?void 0:i.ids;return null==o?void 0:o.includes(n)});c&&await o(x.loadQuestionGradingStatusesByQuestionBlockId(e,t,c,r))})},q={getQuestionGradeStatusesByAssessmentId:(e,t=o.MM.Default)=>n=>A(n,e,t),isQuestionGradeStatusesLoadingByAssessmentId:(e,t=o.MM.Default)=>n=>b(n,e,t),isQuestionGradeStatusesValidByAssessmentId:(e,t=o.MM.Default)=>n=>I(n,e,t),getQuestionGradeStatusesByQuestionBlockIds:(e,t=o.MM.Default)=>n=>_(n,e,t),isQuestionGradeStatusesLoadingByQuestionBlockIds:(e,t=o.MM.Default)=>n=>v(n,e,t),isQuestionGradeStatusesValidByQuestionBlockIds:(e,t=o.MM.Default)=>n=>S(n,e,t)}},591835:function(e,t,n){"use strict";var r,i;n.d(t,{MM:function(){return r},gK:function(){return o},uj:function(){return a},x8:function(){return s}});let o={QUESTIONS_GRADE_STATUS_LOAD:"questions.gradeStatus.load",QUESTION_BLOCKS_GRADE_STATUS_LOAD:"questionsBlocks.gradeStatus.load",QUESTIONS_GRADE_STATUS_REFRESH:"questions.gradeStatus.refresh"};(i=r||(r={})).Default="default",i.MyStudents="myStudents";let s=e=>!!e&&["ids","isLoading","isValid"].some(t=>t in e),a=e=>!!e&&["id","question","responsesNeedingGrading","responsesGraded","responsesInProgress","isQuestionSet"].some(t=>t in e)},228866:function(e,t,n){"use strict";n.d(t,{o1:function(){return m},Ff:function(){return p},Lt:function(){return g}});var r=n(905898),i=n(921776),o=n(758247),s=n(842804);let a="question.tag.load";var l=n(968554);let u=(e,t)=>{var n;t&&Object.values(null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{}).forEach(e=>{e.isValid=!1})},d=e=>["views","byCourseId",e.courseId],c=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=null!==(n=e.views.byCourseId[t.courseId])&&void 0!==n?n:{},i=Object.keys(r).find(e=>{let n=r[e];return"courseId"in n.query&&"courseId"in t&&(null==t?void 0:t.limit)===n.query.limit&&(null==t?void 0:t.offset)===n.query.offset});return{id:i,view:i?r[i]:null}},p=(0,l.vy)({isLoading:!1,paging:null,permissions:null,questionTags:{},views:{byCourseId:{}}},{[a]:(0,l.Dh)(c,d),[(0,l.ok)(a)]:(e,t)=>{let{paging:n,permissions:i,questionTagIds:o,questionTags:s}=t.data,a=(0,r.Ay)(e,e=>{Object.keys(s).forEach(t=>{e.questionTags[t]={...s[t]}})});return(0,l.lY)(a,t,{viewResolver:c,viewsPathResolver:d,paging:n,permissions:i,values:o})},[(0,l.fJ)(a)]:(0,l.To)(c,d),[(0,l.ok)(s.g.QUESTION_DELETE)]:(e,t)=>(0,r.Ay)(e,e=>{let{courseId:n}=t.prevQuestion;u(e,n)})}),m={loadQuestionTags:e=>(0,l.RA)(t=>(t((0,l.rc)(a,{query:e})),(0,i.e)(e).then(n=>(t((0,l.rc)((0,l.ok)(a),{data:n,query:e})),{...n})).catch(n=>{throw t((0,l.rc)((0,l.ok)(o.A.APP_ERROR),{error:n})),t((0,l.rc)((0,l.fJ)(a),{query:e})),n})))},g={getByTagId:(e,t)=>Object.values(e.questionTag.questionTags).find(e=>e.id===t),getQuestionTagsByQuery:(e,t)=>{let{view:n}=c(e.questionTag,t);return n?(n.values||[]).map(t=>g.getByTagId(e,t)).filter(e=>!!e):[]},getQuestionTagsByQueries:(e,t)=>{let n=new Set;return t.reduce((t,r)=>{let{view:i}=c(e.questionTag,r);return[...t,...((null==i?void 0:i.values)||[]).map(t=>g.getByTagId(e,t)).filter(e=>!(!(null==e?void 0:e.id)||n.has(e.id))&&(n.add(e.id),!0))]},[])},getQuestionTagViewStatusByQuery:(e,t)=>{let{view:n}=c(e.questionTag,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging,permissions:n.permissions}:null},getQuestionTagViewStatusByQueries:(e,t)=>t.reduce((t,n)=>{let{view:r}=c(e.questionTag,n),i=null;return r&&(i={isLoading:r.isLoading,isValid:r.isValid,paging:r.paging,permissions:r.permissions}),[...t,{query:n,view:i}]},[])}},627789:function(e,t,n){"use strict";n.d(t,{o1:function(){return I},Ff:function(){return b},Lt:function(){return v}});var r=n(905898),i=n(340496),o=n(842804);let s="question.type.load";var a=n(968554),l=n(477305),u=n(352290),d=n(897582),c=n(764209),p=n(732583),m=n(839781),g=n(139552),E=n(443873);let h=e=>["views","byCourseId",e.courseId],y=(e,t)=>{var n;if(!t)return{id:null,view:null};let r=null!==(n=e.views.byCourseId[t.courseId])&&void 0!==n?n:{},i=Object.keys(r).find(e=>{let n=r[e];return"courseId"in n.query&&"courseId"in t&&(0,p.Y_)(t,n.query)});return i?{id:i,view:r[i]}:a.Vc},f=(e,t)=>{var n;t&&Object.values(null!==(n=e.views.byCourseId[t])&&void 0!==n?n:{}).forEach(e=>{e.isValid=!1})},b=(0,a.vy)({permissions:null,questionTypes:{},views:{byCourseId:{}}},{[s]:(0,a.Dh)(y,h),[(0,a.ok)(s)]:(e,t)=>{if(!(null==t?void 0:t.data))return(0,a.Zg)(e,t);let{data:n}=t,{permissions:i,questionTypes:o}=n,s=(0,r.Ay)(e,e=>{o.forEach(t=>{e.questionTypes[t]||(e.questionTypes[t]=t)})});return(0,a.lY)(s,t,{viewResolver:y,viewsPathResolver:h,permissions:i,values:o})},[(0,a.fJ)(s)]:(0,a.To)(y,h),[(0,a.ok)(d.g.ASSESSMENT_DELETE)]:(e,t)=>{let{courseId:n}=t;return(0,r.Ay)(e,e=>{f(e,n)})},[(0,a.ok)(d.g.ASSESSMENT_IMPORT_TASK_UPDATE)]:(e,t)=>{let{courseId:n}=t;return(0,r.Ay)(e,e=>{f(e,n)})},[(0,a.ok)(c.g.CONTENT_DELETE)]:(e,t)=>(0,r.Ay)(e,e=>{let{courseAssessmentIds:n}=t;n&&Object.keys(n).forEach(t=>{f(e,t)})}),[(0,a.ok)(c.g.CONTENT_DELETE_IN_STORE)]:(e,t)=>{let{courseId:n}=t;return(0,r.Ay)(e,e=>{f(e,n)})},[(0,a.ok)(c.g.CONTENT_IMPORT_COMPLETE)]:(e,t)=>{let{courseId:n}=t;return(0,r.Ay)(e,e=>{f(e,n)})},[u.g.GRANULAR_CONTENT_COPY_COMPLETE]:(e,t)=>{let{courseId:n}=t;return(0,r.Ay)(e,e=>{f(e,n)})},[(0,a.ok)(o.g.QUESTION_DELETE)]:(e,t)=>{let{courseId:n}=t.prevQuestion;return(0,r.Ay)(e,e=>{f(e,n)})},[(0,a.ok)(o.g.QUESTION_PERSIST)]:(e,t)=>(0,r.Ay)(e,e=>{let{prevQuestion:n,question:r}=t;(null==n?void 0:n.id)&&0===n.id.indexOf(l.Gw)&&f(e,r.courseId)})}),I={loadQuestionTypesByQuery:e=>(0,a.VP)(s,()=>(0,i.Y)(e).catch(e=>{throw{err:e}}),{query:e})},A=(0,g.Ad)(E.UI,p.Y_),v={getQuestionTypesByQuery:(0,m.n)((e,t)=>{let{view:n}=y(e.questionType,t);return n?(n.values||[]).map(t=>v.getQuestionTypeByString(e,t)).filter(e=>!!e):[]},e=>e),getQuestionTypeViewStatusByQuery:A((e,t)=>{let{view:n}=y(e.questionType,t);return n?{isLoading:n.isLoading,isValid:n.isValid,permissions:n.permissions}:null},e=>e),getQuestionTypeByString:(e,t)=>Object.values(e.questionType.questionTypes).find(e=>e===t)}},119481:function(e,t,n){"use strict";n.d(t,{o:function(){return o}});var r=n(968554),i=n(846576);let o={postDirectSubmitAddSubmission:(e,t)=>(0,r.VP)("direct.submit.add.submission",async()=>(await (0,i.rt)(e,t)).ok,{})}},988078:function(e,t,n){"use strict";n.d(t,{Ff:function(){return l},Lt:function(){return d},o1:function(){return u}});var r=n(968554),i=n(905898),o=n(846576);let s={pluginStatus:n(318728).shv.Unavailable,registered:!1,mdbUp:!1,enabledSaOnCourse:!1},a="load.direct.submit.plugin.status",l=(0,r.vy)({byCourseId:{}},{[(0,r.ok)(a)]:(e,t)=>(0,i.Ay)(e,e=>{e.byCourseId[t.courseId]=t.payload})}),u={loadSafeAssignCourseSettings:e=>(0,r.VP)(a,async()=>{try{return{payload:await (0,o._p)({courseId:e}),courseId:e}}catch(t){throw{...s,courseId:e}}},{})},d={loadSafeAssignCourseSettings:(e,t)=>e.directSubmitCoursesSettings.byCourseId[t]}},244224:function(e,t,n){"use strict";n.d(t,{Ff:function(){return a},Lt:function(){return u},o1:function(){return l}});var r=n(968554),i=n(905898),o=n(846576);let s="load.direct.submit.results",a=(0,r.vy)({papers:{byCourseId:{}}},{[(0,r.ok)(s)]:(e,t)=>(0,i.Ay)(e,e=>{let{courseId:n,papers:r}=t;n&&(e.papers.byCourseId[n]=r)})}),l={loadDirectSubmitResults:e=>(0,r.VP)(s,async()=>{let t=await (0,o.bX)(e);return{courseId:e.courseId,papers:t.papers}},{})},u={loadDirectSubmitResultsByCourseId:(e,t)=>e.directSubmitResults.papers.byCourseId[t]}},568211:function(e,t,n){"use strict";n.d(t,{Ff:function(){return l},Lt:function(){return d},o1:function(){return u}});var r=n(968554),i=n(905898),o=n(846576);let s=n(318728).shv.Available,a="load.direct.submit.plugin.status",l=(0,r.vy)({status:!1},{[(0,r.ok)(a)]:(e,t)=>(0,i.Ay)(e,e=>{let{status:n}=t;e.status=!!n})}),u={loadSafeAssignPluginStatus:()=>(0,r.VP)(a,async()=>{try{let e=await (0,o.bc)();return{status:e.registered&&e.pluginStatus===s}}catch(e){throw{status:!1}}},{})},d={loadSafeAssignPluginStatusGlobal:e=>e.directSubmitPluginStatus.status}},680087:function(e,t,n){"use strict";n.d(t,{o:function(){return o}});var r=n(968554),i=n(846576);let o={postDirectSubmitUploadSubmission:(e,t)=>(0,r.VP)("direct.submit.upload.submission",()=>(0,i.$i)(e,t).then(e=>e.ok),{})}},173371:function(e,t,n){"use strict";n.d(t,{o1:function(){return c},Ff:function(){return d},Lt:function(){return p}});var r=n(905898),i=n(968554),o=n(318728),s=n(828736);let a="sessionDebug.submit",l="sessionDebug.resetState",u={logCode:"",isUpdating:!1,submissionErrorCode:0},d=(0,i.vy)(u,{[a]:(e,t)=>(0,r.jM)(e,e=>{e.isUpdating=!0}),[(0,i.fJ)(a)]:(e,t)=>{var n,r;return(0,i.Nh)(e,t,{submissionErrorCode:(null===(r=null===(n=null==t?void 0:t.err)||void 0===n?void 0:n.error)||void 0===r?void 0:r.status)||o.t3V.BadRequest})},[(0,i.ok)(a)]:(e,t)=>(0,r.jM)(e,e=>{e.logCode=t.logCode}),[l]:(e,t)=>(0,r.jM)(e,e=>{(0,i.gD)(e,u)})}),c={submitSessionDebug:e=>(0,i.VP)(a,()=>(0,s.QuO)(e).catch(e=>{throw{err:e}})),resetSessionDebugState:()=>(0,i.rc)(l)},p={getLogCode:e=>e.sessionDebug.logCode,isUpdating:e=>e.sessionDebug.isUpdating,getSubmissionErrorCode:e=>e.sessionDebug.submissionErrorCode}},939504:function(e,t,n){"use strict";n.d(t,{o1:function(){return f},Ff:function(){return y},Lt:function(){return I}});var r=n(645250),i=/*#__PURE__*/n.n(r),o=n(905898),s=n(839781),a=n(139552),l=n(443873),u=n(732583),d=n(968554);let c="studentActivityLog.load";var p=n(828736);let m=e=>["views","byCourseId",e.courseId],g=(e,t)=>{if(!t)return d.Vc;let n=e.views.byCourseId[t.courseId]||{},r=Object.keys(n).find(e=>{let r=n[e];return i().isEqual(r.query,t)});return r?{id:r,view:n[r]}:d.Vc},E=(e,t)=>{let{view:n}=g(e.studentActivityLog,t);return!n||!n.isLoading&&!n.isValid},h=(e,t)=>{0!==Object.keys(t).length&&Object.keys(t).forEach(n=>{e.byId[n]={...e.byId[n],...t[n]}})},y=(0,d.vy)({byId:{},views:{byCourseId:{}}},{[c]:(0,d.Dh)(g,m),[(0,d.ok)(c)]:(e,t)=>{if(!(null==t?void 0:t.data))return(0,d.Zg)(e,t);let{studentActivityLogs:n,paging:r,permissions:i}=t.data,s=(0,o.Ay)(e,e=>{h(e,n)});return(0,d.lY)(s,t,{viewResolver:g,viewsPathResolver:m,values:Object.keys(n),paging:r,permissions:i})},[(0,d.fJ)(c)]:(0,d.To)(g,m)}),f={loadStudentActivityLogsByQuery:e=>(0,d.Vy)(c,async()=>{try{return{data:await (0,p.K8G)(e),query:e}}catch(t){throw new d.GS(t).setData({query:e})}},{data:{query:e},condition:(t,{getState:n})=>E(n(),e)})},b=(0,a.Ad)(l.UI,u.Y_),I={getByLogId:(e,t)=>Object.values(e.studentActivityLog.byId).find(e=>e.id===t),getStudentActivityLogsByQuery:(0,s.n)((e,t)=>{let{view:n}=g(e.studentActivityLog,t);return n?(n.values||[]).map(t=>I.getByLogId(e,t)).filter(e=>!!e):null},e=>e),getStudentActivityLogViewStatusByQuery:b((e,t)=>{let{view:n}=g(e.studentActivityLog,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging,permissions:n.permissions}:null},e=>e)}},598606:function(e,t,n){"use strict";n.d(t,{o1:function(){return d},Ff:function(){return u},Lt:function(){return c}});var r=n(905898),i=n(825271),o=n(318728),s=n(968554),a=n(95418);let l={isLoading:!1,previewing:void 0,courseMembershipId:void 0,user:void 0},u=(0,s.vy)(l,{[a.g.STUDENT_PREVIEW_LOAD]:s.r1,[(0,s.ok)(a.g.STUDENT_PREVIEW_LOAD)]:(e,t)=>{let{studentPreviewInfo:n}=t,i=e;return i=(0,r.Ay)(e,e=>{e.previewing=!!(null==n?void 0:n.previewing),e.user=null==n?void 0:n.user,e.courseMembershipId=null==n?void 0:n.courseMembershipId}),(0,s.Zg)(i,t)},[(0,s.fJ)(a.g.STUDENT_PREVIEW_LOAD)]:s.Nh,[(0,s.ok)(a.g.STUDENT_PREVIEW_EXIT)]:e=>(0,r.Ay)(e,e=>{e.courseMembershipId=l.courseMembershipId,e.previewing=l.previewing,e.user=l.user})}),d={exitStudentPreview:e=>(0,s.RA)(t=>(t((0,s.rc)((0,s.ok)(a.g.STUDENT_PREVIEW_EXIT),{data:{courseId:e}})),Promise.resolve(null))),loadStudentPreviewUser:e=>(0,s.VP)(a.g.STUDENT_PREVIEW_LOAD,t=>{var n;return(n=t(),void 0===c.getIsPreviewing(n))?(0,o.ZqD)(i.dZ,e).then(e=>({studentPreviewInfo:e})):Promise.resolve({studentPreviewInfo:c.getStudentPreviewUserInfo(t())})}),setStudentPreviewUserInStore:e=>(0,s.rc)((0,s.ok)(a.g.STUDENT_PREVIEW_LOAD),{studentPreviewInfo:e})},c={getStudentPreviewUserInfo:e=>({previewing:e.studentPreview.previewing,courseMembershipId:e.studentPreview.courseMembershipId,user:e.studentPreview.user}),getIsPreviewing:e=>e.studentPreview.previewing}},95418:function(e,t,n){"use strict";n.d(t,{g:function(){return r}});let r={STUDENT_PREVIEW_EXIT:"studentPreview.exit",STUDENT_PREVIEW_LOAD:"studentPreview.load"}},954849:function(e,t,n){"use strict";n.d(t,{o1:function(){return v},Ff:function(){return A},Lt:function(){return _}});var r=n(968554),i=n(905898),o=n(318728),s=n(825271);let a=async e=>{let t=await (0,o.kVB)(s.dZ,e);return{...e,results:t}},l=async e=>{let t=await (0,o.J5O)(s.dZ,e);return{...e,...t}};var u=n(758247),d=n(139552),c=n(645250),p=n(918814);let m={LOAD_SUBMISSION_RESULTS_BY_ATTEMPT_ID:"load.submission.results.by.attempt.id",LOAD_SUBMISSION_RESULTS_AVERAGE_BY_COLUMN_ID:"load.submission.results.average.by.column.id",INVALIDATE_SUBMISSION_RESULTS_BY_ATTEMPT_ID:"invalidate.submission.results.by.attempt.id",LOAD_SUBMISSION_RESULTS_BY_GROUP_ATTEMPT_ID:"load.submission.results.by.group.attempt.id"},g=(e,t)=>{let n=Object.keys(e.views).find(n=>{let r=e.views[n];return(0,c.isEqual)(r.query,t)});return n?{id:n,view:e.views[n]}:r.Vc},E=(e,t)=>{let{view:n}=g(t.getState().submissionResults,e.params);return!n||!n.isValid&&!n.isLoading},h=(e,t)=>{let{view:n}=g(t.getState().submissionResults,e.params);return(null==n?void 0:n.isLoading)===!0},y=(e,t)=>{var n,r;let{courseId:i,columnId:o,groupAttemptId:s}=e.params,a=_.getSafeAssignSubmissionResponseForGroupAttempt(t.getState(),i,o,s);if(!a)return!1;let{results:l}=a,u=(null!==(n=l["mdb-sa"].answerOriginalities)&&void 0!==n?n:[]).concat(null!==(r=l["mdb-sa"].attemptOriginality)&&void 0!==r?r:[]);return u.length>0&&u.every(e=>e.originalityProcessed)},f=(e,t)=>{var n;let{courseId:r,columnId:i,groupAttemptId:s}=e.params,a=_.getAssetProcessorSubmissionResponseByCourseAndGroupAttemptId(t.getState(),r,i,s);if(!a)return!1;let l=null!==(n=a.results[o.iQy].assetProcessorResults)&&void 0!==n?n:[];return l.length>0&&(0,p.F)(l)},b=(e,t)=>{let n=g(e,t);n.view&&(n.view.isValid=!1)},I=()=>["views"],A=(0,r.vy)({views:{},byCourseId:{}},{[m.LOAD_SUBMISSION_RESULTS_BY_ATTEMPT_ID]:(0,r.Dh)(g,I),[(0,r.fJ)(m.LOAD_SUBMISSION_RESULTS_BY_ATTEMPT_ID)]:(0,r.To)(g,I),[(0,r.ok)(m.LOAD_SUBMISSION_RESULTS_BY_ATTEMPT_ID)]:(e,t)=>{let n=(0,i.Ay)(e,e=>{var n,r,i,o,s,a;t.data&&t.data.results&&t.data.attemptId&&t.data.courseId&&t.data.columnId&&((null!==(r=(s=(null!==(n=(i=e.byCourseId)[o=t.data.courseId])&&void 0!==n?n:i[o]={byColumnId:{}}).byColumnId)[a=t.data.columnId])&&void 0!==r?r:s[a]={byAttemptId:{},byGroupAttemptId:{}}).byAttemptId[t.data.attemptId]=t.data.results.results)});return(0,r.lY)(n,t,{viewResolver:g,viewsPathResolver:I})},[m.LOAD_SUBMISSION_RESULTS_BY_GROUP_ATTEMPT_ID]:(0,r.Dh)(g,I),[(0,r.fJ)(m.LOAD_SUBMISSION_RESULTS_BY_GROUP_ATTEMPT_ID)]:(0,r.To)(g,I),[(0,r.ok)(m.LOAD_SUBMISSION_RESULTS_BY_GROUP_ATTEMPT_ID)]:(e,t)=>{let n=(0,i.Ay)(e,e=>{var n,r,i,o,s,a;t.data&&t.data.results&&t.data.groupAttemptId&&t.data.courseId&&t.data.columnId&&((null!==(r=(s=(null!==(n=(i=e.byCourseId)[o=t.data.courseId])&&void 0!==n?n:i[o]={byColumnId:{}}).byColumnId)[a=t.data.columnId])&&void 0!==r?r:s[a]={byAttemptId:{},byGroupAttemptId:{}}).byGroupAttemptId[t.data.groupAttemptId]=t.data.results)});return(0,r.lY)(n,t,{viewResolver:g,viewsPathResolver:I})},[(0,r.ok)(m.LOAD_SUBMISSION_RESULTS_AVERAGE_BY_COLUMN_ID)]:(e,t)=>(0,i.Ay)(e,e=>{var n,r,i,s,a,l;t.courseId&&t.columnId&&((null!==(r=(a=(null!==(n=(i=e.byCourseId)[s=t.courseId])&&void 0!==n?n:i[s]={byColumnId:{}}).byColumnId)[l=t.columnId])&&void 0!==r?r:a[l]={byAttemptId:{},byGroupAttemptId:{}}).submissionResults=t.submissionResults.map(e=>e.results[o.iMy]))}),[(0,r.ok)(m.INVALIDATE_SUBMISSION_RESULTS_BY_ATTEMPT_ID)]:(e,t)=>(0,i.Ay)(e,e=>{b(e,t.query)})}),v={loadAttemptSubmissionResults:e=>(0,r.RA)(async(t,n)=>{var i,s,l;let d,c;let{courseId:g,columnId:h,attemptId:y}=e,f=_.getSafeAssignSubmissionResponseForAttempt(n(),g,h,y);if(f){let e=(null!==(i=(c=f).results.results["mdb-sa"].answerOriginalities)&&void 0!==i?i:[]).concat(null!==(s=c.results.results["mdb-sa"].attemptOriginality)&&void 0!==s?s:[]);d=e.length>0&&e.every(e=>e.originalityProcessed)}else{let e=null!==(l=null==(c=_.getAssetProcessorSubmissionResponseByCourseAndAttemptId(n(),g,h,y))?void 0:c.results.results[o.iQy].assetProcessorResults)&&void 0!==l?l:[];d=e.length>0&&(0,p.F)(e)}if(!E({params:e},{getState:n})&&c&&d)return c;try{return t((0,r.rc)(m.LOAD_SUBMISSION_RESULTS_BY_ATTEMPT_ID)),c=await a(e),t((0,r.rc)((0,r.ok)(m.LOAD_SUBMISSION_RESULTS_BY_ATTEMPT_ID),{query:e,data:c})),c}catch(e){throw t((0,r.rc)((0,r.fJ)(m.LOAD_SUBMISSION_RESULTS_BY_ATTEMPT_ID),{error:e})),t((0,r.rc)((0,r.ok)(u.A.APP_ERROR),{error:e})),e}}),loadGroupAttemptSubmissionResults:e=>(0,r.Vy)(m.LOAD_SUBMISSION_RESULTS_BY_GROUP_ATTEMPT_ID,async()=>{try{let t=await l(e);return{query:e,data:t}}catch(t){throw new r.GS(t).setData({params:e})}},{data:{query:e},condition:(e,t)=>E({params:e.query},t)||!h({params:e.query},t)&&!y({params:e.query},t)&&!f({params:e.query},t)}),setAverageSubmissionResultsByColumnId:(e,t,n)=>(0,r.rc)((0,r.ok)(m.LOAD_SUBMISSION_RESULTS_AVERAGE_BY_COLUMN_ID),{submissionResults:e,columnId:n,courseId:t}),invalidateSubmissionResults:e=>(0,r.rc)((0,r.ok)(m.INVALIDATE_SUBMISSION_RESULTS_BY_ATTEMPT_ID),{query:e})},S=(e,t,n,r)=>{var i,s,a,l,u;return null===(u=null===(l=null===(a=null===(s=null===(i=e.submissionResults.byCourseId[t])||void 0===i?void 0:i.byColumnId[n])||void 0===s?void 0:s.byAttemptId)||void 0===a?void 0:a[r])||void 0===l?void 0:l[o.iQy])||void 0===u?void 0:u.assetProcessorResults},_={getSafeAssignSubmissionResultsForAttempt:(e,t,n,r)=>{var i,s,a,l,u;return null===(u=null===(l=null===(a=null===(s=null===(i=e.submissionResults.byCourseId[t])||void 0===i?void 0:i.byColumnId)||void 0===s?void 0:s[n])||void 0===a?void 0:a.byAttemptId)||void 0===l?void 0:l[r])||void 0===u?void 0:u[o.iMy]},getSafeAssignSubmissionResultsForGroupAttempt:(e,t,n,r)=>{var i,s,a,l,u;return null===(u=null===(l=null===(a=null===(s=null===(i=e.submissionResults.byCourseId[t])||void 0===i?void 0:i.byColumnId)||void 0===s?void 0:s[n])||void 0===a?void 0:a.byGroupAttemptId)||void 0===l?void 0:l[r])||void 0===u?void 0:u[o.iMy]},getSafeAssignSubmissionResponseForAttempt:(e,t,n,r)=>{let i=_.getSafeAssignSubmissionResultsForAttempt(e,t,n,r);if(i)return{courseId:t,columnId:n,attemptId:r,results:{results:{[o.iMy]:i}}}},getSafeAssignSubmissionResponseForGroupAttempt:(e,t,n,r)=>{let i=_.getSafeAssignSubmissionResultsForGroupAttempt(e,t,n,r);if(i)return{courseId:t,columnId:n,groupAttemptId:r,results:{[o.iMy]:i}}},getAverageSafeAssignSubmissionResultsForColumn:(e,t,n)=>{var r,i;return null===(i=null===(r=e.submissionResults.byCourseId[t])||void 0===r?void 0:r.byColumnId[n])||void 0===i?void 0:i.submissionResults},getAssetProcessorSubmissionResultByCourseAndAttemptId:(0,d.Mz)(S,e=>null==e?void 0:e.reduce((e,t)=>{var n;return t.qtiResultDataId?e:t.bbFileUuid?e.filesResult?{...e,filesResult:[...null!==(n=e.filesResult)&&void 0!==n?n:[],t]}:{...e,filesResult:[t]}:{...e,textResult:t}},{})),getAssetProcessorResultsByGroupAttemptId:(e,t,n,r)=>{var i,s,a,l,u;return null===(u=null===(l=null===(a=null===(s=null===(i=e.submissionResults.byCourseId[t])||void 0===i?void 0:i.byColumnId[n])||void 0===s?void 0:s.byGroupAttemptId)||void 0===a?void 0:a[r])||void 0===l?void 0:l[o.iQy])||void 0===u?void 0:u.assetProcessorResults},getAssetProcessorSubmissionResponseByCourseAndAttemptId:(e,t,n,r)=>{let i=S(e,t,n,r);if(null==i?void 0:i.length)return{courseId:t,columnId:n,attemptId:r,results:{results:{[o.iQy]:{assetProcessorResults:i}}}}},getAssetProcessorSubmissionResponseByCourseAndGroupAttemptId:(e,t,n,r)=>{let i=_.getAssetProcessorResultsByGroupAttemptId(e,t,n,r);if(null==i?void 0:i.length)return{courseId:t,columnId:n,groupAttemptId:r,results:{[o.iQy]:{assetProcessorResults:i}}}}}},427146:function(e,t,n){"use strict";n.d(t,{o1:function(){return m},Ff:function(){return c},Lt:function(){return p}});var r=n(905898),i=n(968554),o=n(318728),s=n(276636),a=n(764209);let l="submissionServices.load",u="submissionService.save";function d(e){let t=e();if(t)return Object.values(t).find(e=>{var t,n;return(null==e?void 0:e.available)&&(null===(n=null===(t=null==e?void 0:e.capabilities)||void 0===t?void 0:t.OriginalityReport)||void 0===n?void 0:n.default)})}let c=(0,i.vy)({byColumnId:{},isLoading:!1},{[l]:i.r1,[(0,i.ok)(l)]:(e,t)=>{let n=(0,r.Ay)(e,e=>{e.byColumnId={...e.byColumnId,...t.submissionServices}});return(0,i.Zg)(n,t)},[(0,i.fJ)(l)]:i.Nh,[u]:i.r1,[(0,i.ok)(u)]:(e,t)=>{let n=(0,r.Ay)(e,e=>{let{submissionServices:n}=t;Object.keys(n).forEach(t=>{Object.keys(n[t]||{}).forEach(r=>{e.byColumnId[t][r]=n[t][r]})})});return(0,i.Zg)(n,t)},[(0,i.fJ)(u)]:i.Nh,[(0,i.ok)(a.g.CONTENT_PERSIST)]:(e,t)=>(0,r.Ay)(e,e=>{let{contents:n,assessments:r}=t;Object.values(n||{}).forEach(t=>{var n,i;if((null==t?void 0:t.safeAssignOptions)&&(null==t?void 0:t.assessmentId)&&r[t.assessmentId]&&r[t.assessmentId].gradableItemId){let{safeAssignOptions:s}=t,a=r[t.assessmentId].gradableItemId,l=d(()=>{var t;return null===(t=e.byColumnId)||void 0===t?void 0:t[a]});l&&l.uniqueHandle===o.iMy&&(null===(i=null===(n=null==l?void 0:l.capabilities)||void 0===n?void 0:n.OriginalityReport)||void 0===i?void 0:i.enabled)!==(null==s?void 0:s.checkAttempts)&&(l.capabilities.OriginalityReport.enabled=s.checkAttempts,e.byColumnId[a]={[l.uniqueHandle]:l})}})})}),p={getDefaultOriginalityReportSubmissionService:(e,t)=>d(()=>{var n;return null===(n=e.submissionServices.byColumnId)||void 0===n?void 0:n[t]})},m={loadSubmissionServices:(e,t)=>(0,i.VP)(l,async n=>{var r;if(null===(r=n().submissionServices.byColumnId)||void 0===r?void 0:r[t])return;let i=(await (0,s.$)(e,t)).reduce((e,t)=>({...e,[t.uniqueHandle]:t}),{});return{submissionServices:{[t]:i}}},null,[o.t3V.Forbidden]),saveSubmissionService:(e,t,n)=>(0,i.VP)(u,async()=>{let r=await (0,s.n)(e,t,n);return{submissionServices:{[t]:{[r.uniqueHandle]:r}}}})}},5601:function(e,t,n){"use strict";n.d(t,{o1:function(){return A},Ff:function(){return I},Lt:function(){return _}});var r=n(645250),i=/*#__PURE__*/n.n(r),o=n(905898),s=n(139552),a=n(443873),l=n(732583),u=n(968554);let d="system-announcement-single.load",c="system-announcements.load";var p=n(828736),m=n(612918);let g=e=>["views","byUserId",e.userId],E=(e,t)=>{if(!t)return u.Vc;let n=e.views.byUserId[t.userId]||{},r=Object.keys(n).find(e=>{let r=n[e];return i().isEqual(r.query,t)});return r?{id:r,view:n[r]}:u.Vc},h=e=>["byId",e.query.announcementId],y=(e,t)=>{let{view:n}=E(t.getState().systemAnnouncements,e.query);return!n||!n.isLoading&&!n.isValid},f=(e,t)=>{let n=t.getState().systemAnnouncements.byId[e.query.announcementId];return(0,m.qO)(null==n?void 0:n.status)},b=(e,t)=>{0!==Object.keys(t).length&&Object.keys(t).forEach(n=>{var r;e.byId[n]={value:{...null===(r=e.byId[n])||void 0===r?void 0:r.value,...t[n]},status:m.y_}})},I=(0,u.vy)({byId:{},views:{byUserId:{}}},{[c]:(0,u.Dh)(E,g),[(0,u.ok)(c)]:(e,t)=>{if(!(null==t?void 0:t.data))return(0,u.Zg)(e,t);let{announcements:n,paging:r}=t.data,i=(0,o.Ay)(e,e=>{b(e,n)});return(0,u.lY)(i,t,{viewResolver:E,viewsPathResolver:g,values:n?Object.keys(n):[],paging:r})},[(0,u.fJ)(c)]:(0,u.To)(E,g),[d]:(0,m.vR)(h,m.vq),[(0,u.ok)(d)]:(e,t)=>{let{announcement:n}=t.data;return(0,o.Ay)(e,e=>{var t;e.byId[n.id]={value:{...null===(t=e.byId[n.id])||void 0===t?void 0:t.value,...n},status:m.y_}})},[(0,u.cw)(d)]:(0,m.vR)(h,m.JL),[(0,u.fJ)(d)]:(0,m.vR)(h,m.JL)}),A={loadSystemAnnouncementsByQuery:e=>(0,u.Vy)(c,async()=>{try{return{data:await (0,p.Auu)(e),query:e}}catch(t){throw new u.GS(t).setData({query:e})}},{data:{query:e},condition:y}),loadSystemAnnouncementByQuery:(e,t)=>(0,u.Vy)(d,async()=>{try{return{data:await (0,p.ti9)(e.announcementId),query:e}}catch(n){throw new u.GS(n).setData({query:e,allowedErrors:t})}},{data:{query:e},condition:f,allowedErrors:t})},v=(0,s.Ad)(a.UI,l.oJ),S=(0,s.Ad)(a.UI,l.Y_),_={getById:(e,t)=>{var n;return null===(n=e.systemAnnouncements.byId[t])||void 0===n?void 0:n.value},getByIdStatus:(e,t)=>{var n;return null===(n=e.systemAnnouncements.byId[t])||void 0===n?void 0:n.status},getSystemAnnouncementsByQuery:v((e,t)=>{let{view:n}=E(e.systemAnnouncements,t);return n&&void 0!==n.values?n.values.map(t=>_.getById(e,t)).filter(e=>!!e):null},e=>e),getSystemViewStatusByQuery:S((e,t)=>{let{view:n}=E(e.systemAnnouncements,t);return n?{isLoading:n.isLoading,isValid:n.isValid,paging:n.paging}:null},e=>e)}},76996:function(e,t,n){"use strict";n.d(t,{o1:function(){return m},Ff:function(){return c},Lt:function(){return g}});var r=n(905898),i=n(968554),o=n(825271),s=n(318728),a=n(612918);let l="systemEntitlements.load",u={byEntitlementId:{status:a.E1,value:{}}},d=()=>["byEntitlementId"],c=(0,i.vy)(u,{[l]:(0,a.vR)(d,a.vq),[(0,i.ok)(l)]:(e,t)=>{let n=t.entitlements;return(0,r.Ay)(e,e=>{var t;let r=null!==(t=e.byEntitlementId.value)&&void 0!==t?t:{};n.forEach(e=>{r[e.uid]=e}),e.byEntitlementId={status:a.y_,value:r}})},[(0,i.fJ)(l)]:(0,a.vR)(d,a.JL)});function p(e,t){return(0,a.qO)(t.getState().systemEntitlements.byEntitlementId.status)}let m={loadSystemEntitlements:()=>(0,i.Vy)(l,async()=>({entitlements:(await (0,s.yoy)(o.dZ)).results}),{condition:p})},g={hasSystemEntitlement:(e,t)=>{var n;let r=e.systemEntitlements.byEntitlementId;return{isLoading:r.status!==a.y_,hasEntitlement:!!(null===(n=r.value)||void 0===n?void 0:n[t])}}}},695299:function(e,t,n){"use strict";n.d(t,{o1:function(){return f},Ff:function(){return h},Lt:function(){return y}});var r=n(905898),i=n(968554),o=n(397965),s=n(847948),a=n(645250),l=n(318728);class u extends s.Z{constructor(e){super(e,"SystemPreferenceValueMissing")}}let d=e=>{var t,n;return(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.status)===l.t3V.NotFound&&(0,a.includes)(null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.message,"No value was found for given preference key")?new u(e.error):e},c="/v1/systemPreferences/%key%";async function p(e){try{return await (0,o.Jt)((0,o.c$)(c,e))}catch(e){throw d(e)}}async function m(e){let t=(0,o.c$)(c,{key:e.key});return(0,o.yJ)(t,e)}var g=n(758247);let E={SYSTEM_PREFERENCE_LOAD:"system-preference.load",SYSTEM_PREFERENCE_PERSIST:"system-preference.persist"},h=(0,i.vy)({systemPreferences:{}},{[E.SYSTEM_PREFERENCE_LOAD]:(e,t)=>(0,r.Ay)(e,e=>{e.systemPreferences[t.key]||(e.systemPreferences[t.key]={api:{},key:t.key}),e.systemPreferences[t.key].api.isLoading=!0}),[(0,i.ok)(E.SYSTEM_PREFERENCE_LOAD)]:(e,t)=>{let{systemPreference:n}=t;return(0,r.Ay)(e,e=>{var t;e.systemPreferences[n.key]={...n,api:{isUpdating:!1,isDeleting:!1,isLoading:!1},ui:null===(t=e.systemPreferences[n.key])||void 0===t?void 0:t.ui}})},[(0,i.cw)(E.SYSTEM_PREFERENCE_LOAD)]:(e,t)=>(0,r.Ay)(e,e=>{e.systemPreferences[t.key]||(e.systemPreferences[t.key]={api:{},key:t.key}),e.systemPreferences[t.key].api.isLoading=!1}),[(0,i.fJ)(E.SYSTEM_PREFERENCE_LOAD)]:(e,t)=>(0,r.Ay)(e,e=>{e.systemPreferences[t.key]||(e.systemPreferences[t.key]={api:{},key:t.key}),e.systemPreferences[t.key].api||(e.systemPreferences[t.key].api={}),e.systemPreferences[t.key].api.isLoading=!1}),[E.SYSTEM_PREFERENCE_PERSIST]:(e,t)=>(0,r.Ay)(e,e=>{e.systemPreferences[t.nextSystemPreference.key]||(e.systemPreferences[t.nextSystemPreference.key]={}),e.systemPreferences[t.nextSystemPreference.key].api||(e.systemPreferences[t.nextSystemPreference.key].api={}),e.systemPreferences[t.nextSystemPreference.key].api.isUpdating=!0}),[(0,i.ok)(E.SYSTEM_PREFERENCE_PERSIST)]:(e,t)=>{let{systemPreference:n}=t,i={...n,api:{...e.systemPreferences[n.key].api,isUpdating:!1},ui:e.systemPreferences[n.key]&&e.systemPreferences[n.key].ui};return(0,r.Ay)(e,e=>{e.systemPreferences[i.key]=i})},[(0,i.fJ)(E.SYSTEM_PREFERENCE_PERSIST)]:(e,t)=>(0,r.Ay)(e,e=>{e.systemPreferences[t.nextSystemPreference.key]||(e.systemPreferences[t.nextSystemPreference.key]={}),e.systemPreferences[t.nextSystemPreference.key].api||(e.systemPreferences[t.nextSystemPreference.key].api={}),e.systemPreferences[t.nextSystemPreference.key].api.isUpdating=!1})}),y={getSystemPreferenceByKey:(e,t)=>{var n,r;return null===(r=null===(n=null==e?void 0:e.systemPreference)||void 0===n?void 0:n.systemPreferences)||void 0===r?void 0:r[t]},isSystemPreferenceLoading:(e,t)=>{var n,r;return!!(null===(r=null===(n=y.getSystemPreferenceByKey(e,t))||void 0===n?void 0:n.api)||void 0===r?void 0:r.isLoading)}},f={loadSystemPreference:e=>(0,i.RA)(async(t,n)=>{let{key:r,shouldLoadWhilePending:o}=e;if(!function(e,t,n){let r=!!y.getSystemPreferenceByKey(e,t),i=y.isSystemPreferenceLoading(e,t);return(!r||!!i)&&(!r||n)}(n(),r,o))return{systemPreference:y.getSystemPreferenceByKey(n(),e.key)};t((0,i.rc)(E.SYSTEM_PREFERENCE_LOAD,{key:r}));try{let n=await p(e);return t((0,i.rc)((0,i.ok)(E.SYSTEM_PREFERENCE_LOAD),{key:r,systemPreference:n})),{systemPreference:n}}catch(e){if(e instanceof u)return t((0,i.rc)((0,i.cw)(E.SYSTEM_PREFERENCE_LOAD),{key:r})),null;throw t((0,i.rc)((0,i.fJ)(E.SYSTEM_PREFERENCE_LOAD),{key:r})),t((0,i.rc)((0,i.ok)(g.A.APP_ERROR),{error:e})),e}}),persistSystemPreference:e=>(0,i.VP)(E.SYSTEM_PREFERENCE_PERSIST,()=>m(e).then(e=>({systemPreference:e})).catch(e=>{throw{err:e}}),{nextSystemPreference:e})}},933898:function(e,t,n){"use strict";n.d(t,{o1:function(){return u},Ff:function(){return l}});var r=n(905898),i=n(968554),o=n(102806);let s="theme.create",a="theme.delete",l=(0,i.vy)({themes:{byId:{}},paging:null,isLoading:!1},{[(0,i.ok)(s)]:(e,t)=>{let n={...t.theme,api:{isUpdating:!1,isDeleting:!1}};return(0,r.Ay)(e,e=>{e.themes.byId[n.id]=n})},[(0,i.fJ)(s)]:i.Nh,[a]:(e,t)=>(0,r.Ay)(e,e=>{e.themes.byId[t.id].api.isDeleting=!0}),[(0,i.ok)(a)]:(e,t)=>(0,r.Ay)(e,e=>{delete e.themes.byId[t.id]}),[(0,i.fJ)(a)]:(e,t)=>{let n=(0,r.Ay)(e,e=>{e.themes.byId[t.id].api.isDeleting=!1});return(0,i.Nh)(n,t)}}),u={createTheme:e=>(0,i.VP)(s,()=>(0,o.an)(e).catch(e=>{throw{err:e}})),deleteTheme:e=>(0,i.VP)(a,()=>(0,o.vc)(e).then(()=>({id:e})).catch(e=>{throw{err:e}}),{id:e})}},218028:function(e,t,n){"use strict";n.d(t,{o1:function(){return c},Ff:function(){return u},Lt:function(){return d}});var r=n(905898),i=n(645250),o=n(968554),s=n(985866);let a="ultra-settings.load",l="ultra-settings.persist",u=(0,o.vy)({ultraSettings:null,isLoading:!1},{[a]:(e,t)=>(0,o.r1)(e,t),[(0,o.ok)(a)]:(e,t)=>{let{ultraSettings:n}=t,i=(0,r.Ay)(e,e=>{let t={...n,api:{isUpdating:!1}};e.ultraSettings=t});return(0,o.Zg)(i,t)},[(0,o.fJ)(a)]:(e,t)=>(0,o.Nh)(e,t),[l]:(e,t)=>(0,r.Ay)(e,e=>{let t=e.ultraSettings;e.ultraSettings={...t,api:{...null==t?void 0:t.api,isUpdating:!0}}}),[(0,o.ok)(l)]:(e,t)=>{let{ultraSettings:n}=t,i=(0,r.Ay)(e,e=>{let t={...n,api:{isUpdating:!1}};e.ultraSettings=t});return(0,o.Zg)(i,t)},[(0,o.fJ)(l)]:(e,t)=>(0,r.Ay)(e,e=>{e.ultraSettings.api.isUpdating=!1})}),d={getUltraSettings:e=>e.ultraSettings,isSettingLoading:e=>(0,i.get)(e,["ultraSettings","isLoading"])},c={loadUltraSetting:()=>(0,o.VP)(a,async e=>{try{return{ultraSettings:await (0,s.i)()}}catch(e){throw{err:e}}}),persistUltraSettings:e=>(0,o.VP)(l,()=>(0,s.m)(e).then(e=>({ultraSettings:e})).catch(e=>{throw{err:e}}),{ultraSettings:e})}},32245:function(e,t,n){"use strict";n.d(t,{o1:function(){return p},Ff:function(){return d},Lt:function(){return c}});var r=n(318728),i=n(905898),o=n(300474),s=n(163398),a=n(758247),l=n(968554);let u={SETTINGS_LOAD:"unsplash.settings.load"};(0,l.ok)(u.SETTINGS_LOAD),(0,l.fJ)(u.SETTINGS_LOAD);let d=(0,l.vy)({settings:{byCourseId:{}}},{[u.SETTINGS_LOAD]:(e,t)=>(0,i.Ay)(e,e=>{let n=t.meta.courseId;e.settings.byCourseId[n]?e.settings.byCourseId[n].isLoading=!0:e.settings.byCourseId[n]={isLoading:!0}}),[(0,l.ok)(u.SETTINGS_LOAD)]:(e,t)=>(0,i.Ay)(e,e=>{e.settings.byCourseId[t.meta.courseId]={value:t.payload.settings,isLoading:!1}}),[(0,l.fJ)(u.SETTINGS_LOAD)]:(e,t)=>(0,i.Ay)(e,e=>{let n=t.meta.courseId;e.settings.byCourseId[n]?e.settings.byCourseId[n].isLoading=!1:e.settings.byCourseId[n]={isLoading:!1}})}),c={getSettings:(e,t)=>{var n;return null===(n=e.unsplash.settings.byCourseId[t])||void 0===n?void 0:n.value},isLoadingSettings:(e,t)=>{var n,r;return null!==(r=null===(n=e.unsplash.settings.byCourseId[t])||void 0===n?void 0:n.isLoading)&&void 0!==r&&r}},p={getSettings:e=>(0,l.RA)(async(t,n)=>{if(!(c.isLoadingSettings(n(),e)||c.getSettings(n(),e)))try{let n={type:u.SETTINGS_LOAD,meta:{courseId:e}};t(n);let r=await (0,s.yz)(e),i={type:(0,l.ok)(u.SETTINGS_LOAD),payload:{settings:r},meta:{courseId:e}};t(i)}catch(n){if((0,o.rh)((0,o.xt)(n),[r.t3V.NotFound])){t({type:(0,l.ok)(u.SETTINGS_LOAD),payload:{settings:{applicationId:"",available:!1}},meta:{courseId:e}});return}t({type:(0,l.fJ)(u.SETTINGS_LOAD),meta:{courseId:e}}),t((0,l.rc)((0,l.ok)(a.A.APP_ERROR),{error:n}))}})}},909892:function(e,t,n){"use strict";n.d(t,{o1:function(){return E},Ff:function(){return g},Lt:function(){return h}});var r=n(905898),i=n(43375),o=n(368737),s=n(968554),a=n(633666),l=n(566416),u=n(818339);let d="user.load",c="user.load.me",p=(e,t)=>(0,r.Ay)(e,n=>{for(let[r,i]of Object.entries(t.users))n.byId[r]={...e.byId[r],...i}});function m(e,t){return t.forEach(t=>{let{memberships:n}=t;n&&n.forEach(t=>{let{user:n}=t;n&&(e=(0,r.Ay)(e,e=>{e.byId[n.id]=n}))})}),e}let g=(0,s.vy)({byId:{},isLoading:!1},{[d]:s.r1,[(0,s.ok)(d)]:(e,t)=>{let{user:n}=t,i=e;return n&&(i=(0,r.Ay)(e,e=>{e.byId[n.id]=n})),(0,s.Zg)(i,t)},[(0,s.ok)(l.g.COURSE_MEMBERSHIP_LOAD)]:(e,t)=>{let{data:n}=t;if(!n.user)return e;let{user:i}=n;return(0,r.Ay)(e,e=>{e.byId[i.id]=i})},[(0,s.ok)(l.g.COURSE_MEMBERSHIPS_LOAD)]:(e,t)=>{let{data:n}=t;if(!n.users)return e;let{users:i}=n;return(0,r.Ay)(e,e=>{Object.keys(i).forEach(t=>{e.byId[t]=i[t]})})},[(0,s.fJ)(d)]:s.Nh,[(0,s.ok)(i.A.GROUPS_LOAD_BY_CONTENT_ID)]:(e,t)=>{let{groups:n}=t;return n&&(e=m(e,Object.values(n))),e},[(0,s.ok)(i.A.GROUPS_LOAD_BY_CONTENT_ID_AND_QUERY)]:(e,t)=>{let{data:n}=t;if(!n)return e;let r=Object.values(n.groups);return r&&(e=m(e,r)),e},[(0,s.ok)(o.g.BLOG_PARTICIPANTS_LOAD)]:(e,t)=>{let n=(0,r.Ay)(e,e=>{let{byCourseMembershipId:n}=t.data;n&&Object.keys(n||{}).forEach(t=>{let r=n[t].user;r&&(e.byId[r.id]=r)})});return(0,s.Zg)(n,t)},[(0,s.ok)(u.g.COMPLETED_DELEGATED_ATTEMPT_GRADE_BY_GRADER_LOAD)]:p,[(0,s.ok)(u.g.COMPLETED_DELEGATED_ATTEMPT_GRADE_ON_ATTEMPT_LOAD)]:p,[c]:s.r1,[(0,s.ok)(c)]:(e,t)=>{let{user:n}=t,i=e;return n&&(i=(0,r.Ay)(e,e=>{e.current=n,e.byId[n.id]=n})),(0,s.Zg)(i,t)},[(0,s.fJ)(c)]:s.Nh}),E={loadUser:e=>(0,s.VP)(d,t=>{var n;return(n=t(),h.getUserById(n,e))?Promise.resolve(null):(0,a.i)(e).then(e=>({user:e}))}),loadCurrentUser:()=>(0,s.VP)(c,e=>{var t;return(t=e(),h.getCurrentUser(t))?Promise.resolve(null):(0,a.i)("me").then(e=>({user:e}))}),setUserInStore:e=>(0,s.rc)((0,s.ok)(c),{user:e})},h={getUserById:(e,t)=>e.user.byId[t],getUsersByIds:(e,t)=>{let n={};return t.forEach(t=>{e.user.byId[t]&&(n[t]=e.user.byId[t])}),n},getCurrentUser:e=>e.user.current}},429837:function(e,t,n){"use strict";n.d(t,{o1:function(){return b},Ff:function(){return E},Lt:function(){return I}});var r=n(905898),i=n(318728),o=n(968554),s=n(728959);let a="user-preference.load",l="user-preference.delete",u="user-preference.persist";var d=n(612918);let c=e=>["byKey",e.key],p=e=>["byKey",e.userPreference.key],m=e=>(t,n)=>(0,r.jM)(t,t=>{let{userPreference:r}=n,{key:i}=r;t.byKey[i]={value:r,status:(0,d.Lx)(e,t.byKey[i],d.U8)}}),g=(e,t)=>(0,r.jM)(e,e=>{let n=e.byKey[t.key];n&&(delete n.value,n.status=(0,d.Lx)(d.hu.Load,e.byKey[t.key],d.U8),e.byKey[t.key]=n)}),E=(0,o.vy)({byKey:{}},{[a]:(0,d.rK)(c,d.hu.Load,d.p_),[(0,o.ok)(a)]:m(d.hu.Load),[(0,o.cw)(a)]:(0,d.rK)(c,d.hu.Load,d.U8),[(0,o.fJ)(a)]:(0,d.rK)(c,d.hu.Load,d.XP),[(0,o.ok)(l)]:g,[(0,o.cw)(l)]:g,[u]:(0,d.rK)(p,d.hu.Update,d.J7),[(0,o.ok)(u)]:m(d.hu.Update),[(0,o.fJ)(u)]:(0,d.rK)(p,d.hu.Update,d.XP)});function h(e,t){let n=I.getUserPreferenceByKey(t.getState(),e.key);return(0,d.gE)(null==n?void 0:n.status)}function y(e,t){let n=I.getUserPreferenceByKey(t.getState(),e.key);return!n||(0,d.PH)(n.status)}function f(e,t){let n=I.getUserPreferenceByKey(t.getState(),e.userPreference.key);return!n||(0,d.zO)(n.status)}let b={loadUserPreference:e=>(0,o.Vy)(a,async()=>({userPreference:await (0,s.xO)(e)}),{allowedErrors:[i.t3V.NotFound],data:e,condition:h}),deleteUserPreference:e=>(0,o.Vy)(l,async()=>(await (0,s.jz)(e),{key:e}),{allowedErrors:[i.t3V.NotFound],data:{key:e},condition:y}),persistUserPreference:(e,t)=>(0,o.Vy)(u,async()=>({userPreference:await (0,s.xy)(e,t?{userId:t}:void 0)}),{data:{userPreference:e},condition:f})},I={getUserPreferenceByKey:(e,t)=>e.userPreference.byKey[t]}},605737:function(e,t,n){"use strict";n.d(t,{o1:function(){return p},Ff:function(){return c},Lt:function(){return m}});var r=n(905898),i=n(968554),o=n(318728),s=n(807727),a=n(300474),l=n(758247);let u={USER_PRONOUNS_LOAD:"user-pronouns.load",USER_PRONOUN_ADD:"user-pronoun.add",USER_PRONOUN_DELETE:"user-pronoun.delete"},d=(e,t)=>(0,r.jM)(e,n=>{let r={...e.approvedPronounsById},i={...e.pendingPronounsById};t.forEach(e=>{let t={...e,api:{isDeleting:!1,isUpdating:!1,isInvalidated:!1}};e.status===o.uVk.Approved?(r[t.id]=t,delete i[t.id]):(i[t.id]=t,delete r[t.id])}),n.approvedPronounsById=r,n.pendingPronounsById=i}),c=(0,i.vy)({approvedPronounsById:{},pendingPronounsById:{},isLoading:!1},{[u.USER_PRONOUNS_LOAD]:(e,t)=>(0,i.r1)(e,t),[(0,i.ok)(u.USER_PRONOUNS_LOAD)]:(e,t)=>{let n=t.results;return(0,i.Zg)(d(e,n),t)},[(0,i.ok)(u.USER_PRONOUN_ADD)]:(e,t)=>d(e,t.pronoun.id?[t.pronoun]:[]),[(0,i.ok)(u.USER_PRONOUN_DELETE)]:(e,t)=>{let n=t.pronounId;return(0,r.jM)(e,t=>{let r={...e.approvedPronounsById},i={...e.pendingPronounsById};delete r[n],delete i[n],t.approvedPronounsById=r,t.pendingPronounsById=i})}}),p={loadSystemPronouns:e=>(0,i.VP)(u.USER_PRONOUNS_LOAD,async()=>{try{return await (0,s.c9)(e)}catch(e){throw{err:e}}}),addSystemPronoun:e=>(0,i.RA)(async t=>{let n;try{return t((0,i.rc)(u.USER_PRONOUN_ADD,{pronoun:e})),n=await (0,s.l$)(e),t((0,i.rc)((0,i.ok)(u.USER_PRONOUN_ADD),{pronoun:n})),{pronoun:n}}catch(e){if(e instanceof a.Li)throw e;throw t((0,i.rc)((0,i.ok)(l.A.APP_ERROR),{error:e})),e}}),deleteSystemPronoun:e=>(0,i.VP)(u.USER_PRONOUN_DELETE,async()=>{try{return await (0,s.Ed)(e),{pronounId:e}}catch(e){throw{err:e}}})},m={getApprovedPronouns:e=>Object.values(e.userPronouns.approvedPronounsById),getPendingPronouns:e=>Object.values(e.userPronouns.pendingPronounsById),getAllPronouns:e=>[...m.getApprovedPronouns(e),...m.getPendingPronouns(e)]}},456585:function(e,t,n){"use strict";n.d(t,{e:function(){return i},r:function(){return r}});let r=(e,t)=>(null==e?void 0:e.type)==="api"&&t.includes(e.status),i=e=>(null==e?void 0:e.type)==="network"},880235:function(e,t,n){"use strict";n.d(t,{Zn:function(){return o},wf:function(){return s}});var r=n(318728),i=n(847948);class o extends i.Z{constructor(e){super(e,"AssessmentConflictNotEnoughPeerReviews")}}function s(e){return e.error.status===r.t3V.Conflict&&"bb-assessment-conflict-not-enough-peer-reviews"===e.error.code?new o(e.error):e}},843996:function(e,t,n){"use strict";n.d(t,{$$:function(){return a},$G:function(){return p},$u:function(){return d},H3:function(){return u},X7:function(){return s},dC:function(){return l},ny:function(){return c}});var r,i,o=n(847948);(r=i||(i={})).GROUP_ENROLLMENT_EXPIRED_ERROR_CODE="enrollmentEndDateViolation",r.GROUP_IS_FULL_ERROR_CODE="maximumEnrollmentsExceeded",r.SOURCE_GROUP_SUBMITTED_ATTEMPT_ERROR_CODE="sourceGroupContainsAttempt",r.TARGET_GROUP_SUBMITTED_ATTEMPT_ERROR_CODE="targetGroupContainsAttempt",r.SOURCE_GROUP_GRADE_ERROR_CODE="sourceGroupContainsGrade",r.TARGET_GROUP_GRADE_ERROR_CODE="targetGroupContainsGrade";class s extends o.Z{constructor(e){super(e,"GroupEnrollmentExpiredError")}}class a extends o.Z{constructor(e){super(e,"GroupFullError")}}class l extends o.Z{constructor(e){super(e,"TargetGroupSubmittedAttemptError")}}class u extends o.Z{constructor(e){super(e,"SourceGroupSubmittedAttemptError")}}class d extends o.Z{constructor(e){super(e,"SourceGroupGradesError")}}class c extends o.Z{constructor(e){super(e,"TargetGroupGradesError")}}function p(e){var t;switch(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.code){case i.GROUP_ENROLLMENT_EXPIRED_ERROR_CODE:return new s(e.error);case i.GROUP_IS_FULL_ERROR_CODE:return new a(e.error);case i.TARGET_GROUP_SUBMITTED_ATTEMPT_ERROR_CODE:return new l(e.error);case i.SOURCE_GROUP_SUBMITTED_ATTEMPT_ERROR_CODE:return new u(e.error);case i.TARGET_GROUP_GRADE_ERROR_CODE:return new c(e.error);case i.SOURCE_GROUP_GRADE_ERROR_CODE:return new d(e.error);default:return e}}},503508:function(e,t,n){"use strict";n.d(t,{D:function(){return r}});class r extends Error{}},547262:function(e,t,n){"use strict";n.d(t,{yo:function(){return a}});var r=n(645250),i=n(318728),o=n(847948);class s extends o.Z{constructor(e){super(e,"QuestionAnalysisNoSubmittedAttemptsError")}}function a(e){return e.error.status===i.t3V.BadRequest&&(r.includes(e.error.message,"Item Analysis can only be run once there are submitted attempts")||r.includes(e.error.message,"There are no questions"))?new s(e.error):e}},847948:function(e,t,n){"use strict";n.d(t,{Z:function(){return r}});class r extends Error{constructor(e,t,n){super(n),this.error=e,Object.setPrototypeOf(this,new.target.prototype),this.name=t}}},56763:function(e,t,n){"use strict";n.d(t,{L:function(){return s},e:function(){return a}});var r=n(847948),i=n(645250),o=n(318728);class s extends r.Z{constructor(e){super(e,"UserPronounsUnsafeName")}}let a=e=>{var t,n;return(null===(t=null==e?void 0:e.error)||void 0===t?void 0:t.status)===o.t3V.BadRequest&&(0,i.includes)(null===(n=null==e?void 0:e.error)||void 0===n?void 0:n.code,o.SfP)?new s(e.error):e}},804577:function(e,t,n){"use strict";var r=n(318728),i=n(830030),o=n(320186);let s=e=>(null==e?void 0:e.type)===r.PAn.Test&&(null==e?void 0:e.subtype)===r.XW.Assignment;t.Ay={isAssignment:s,requiresInitialAttempt:e=>{var t;return!s(null===(t=(0,o.TK)(e))||void 0===t?void 0:t.assessment)||(0,i.BG)(e)||(0,i.FM)(e)||(0,i.DK)(e)||(0,i.Hh)(e)}}},217981:function(e,t,n){"use strict";var r,i;n.d(t,{L:function(){return r}}),(i=r||(r={})).Default="default",i.MyStudents="myStudents",i.Overview="overview"},604705:function(e,t,n){"use strict";n.d(t,{eq:function(){return l},hu:function(){return a}});var r=n(202277),i=n(318728),o=n(830030);let s=e=>r._h.LearningModule.isEqualTo(e.contentHandler),a=e=>{var t,n;return s(e)&&!!(null===(n=null===(t=e.contentDetail)||void 0===t?void 0:t[i.Sa9.LearningModule])||void 0===n?void 0:n.isSequential)};function l(e){return!0===e.inSequence}t.Ay={isLearningModule:s,isForcedSequenceModule:a,isInForcedSequenceLearningModule:l,isFolderOrLearningModule:e=>(0,o.BC)(e)||s(e)}},647059:function(e,t,n){"use strict";n.d(t,{Gw:function(){return r},I$:function(){return o},R7:function(){return i},jD:function(){return a}});let r="new_",i=e=>!!e.id;class o{constructor(e){if(this.previousState=e,null==e)throw Error("Unable to instantiate RestModel with null state object");this.state={...e}}isNew(){return!this.state.id||0===this.state.id.indexOf(r)}}function s(e,t){return t&&t.id&&(e[t.id]=t),e}function a(e,t){return e.reduce(t||s,{})}},728090:function(e,t,n){"use strict";n.d(t,{$U:function(){return d},Ab:function(){return a},JE:function(){return p},Oh:function(){return h},QG:function(){return u},dH:function(){return E},dy:function(){return l},f7:function(){return m},h9:function(){return c},u5:function(){return g}});var r=n(60039),i=n(825271),o=n(647059),s=n(853400);let a=(0,s.Y)(r.G2,i.vG),l=(0,s.Y)(r.nk,i.vG),u=(0,s.Y)(r.cN,i.vG),d=(0,s.Y)(r.Dv,i.vG),c=async e=>{let{courseFoundationsId:t}=e;return function(e){let{results:t}=e;return{achievementsById:(0,o.jD)(t),achievementIds:t.map(e=>e.id)}}(await (0,s.Y)(r.ph,i.vG)(t))},p=(0,s.Y)(r.zx,i.vG),m=(0,s.Y)(r.fn,i.vG),g=(0,s.Y)(r.MA,i.vG),E=(0,s.Y)(r.Tl,i.vG),h=(0,s.Y)(r.e4,i.vG)},764556:function(e,t,n){"use strict";n.d(t,{Hp:function(){return d},Oi:function(){return a},Z0:function(){return c},hb:function(){return u},vQ:function(){return l}});var r=n(318728),i=n(825271),o=n(477305),s=n(853400);let a=(0,s.Y)(r.TYp,i.dZ),l=(0,s.Y)(r.zkU,i.dZ),u=(0,s.Y)(r.TPX,i.dZ),d=async e=>{let{courseId:t,contentId:n,paging:a={offset:0,limit:1e3}}=e;return function(e){let{results:t,paging:n,permissions:r}=e;return{rules:(0,o.jD)(t),permissions:r,paging:n}}(await (0,s.Y)(r.Zed,i.dZ)(t,n,a))},c=(0,s.Y)(r.ydu,i.dZ)},144978:function(e,t,n){"use strict";n.d(t,{Au:function(){return d},No:function(){return g},P3:function(){return h},Wy:function(){return y},Xh:function(){return u},cD:function(){return c},f9:function(){return p},ti:function(){return f},xI:function(){return m}});var r=n(825271),i=n(318728),o=n(647059),s=n(588335),a=n(853400);function l(e){let{results:t,paging:n}=e;return{announcements:(0,o.jD)(t),paging:n}}let u=async e=>{let{courseId:t,filter:n={searchText:""},paging:o={offset:0,limit:s.sQ},sort:a}=e,{offset:u,limit:d}=o;if(n.searchText){let e=new i.lDE({courseId:t}).withSession(r.dZ).withPaging({offset:u,limit:d}).withQueryParams({q:n.searchText});return a&&e.withSort(...a),(0,i.waJ)(e).then(l)}return(0,i.cT5)(r.dZ,t,{offset:u,limit:d},a).then(e=>l(e))};async function d(e){let{paging:t}=e;return l(await (0,i._WI)(r.dZ,t))}let c=(e,t)=>(t.id?(0,i.OZz)(r.dZ,e,t.id,t):(0,i.RxA)(r.dZ,e,t)).then(e=>({announcement:e})),p=(0,a.Y)(i.Ogg,r.dZ),m=(e,t)=>(0,i.uWx)(r.dZ,e,t),g=e=>(0,i.PJl)(r.dZ,e).then(t=>({announcementsCounts:t,courseId:e}));async function E(e){let t=new i.$KS({courseId:e}).withSession(r.dZ).withQueryParams({membershipAvailable:!0});return(0,i.waJ)(t)}let h=e=>Promise.all([(0,i.EDV)(r.dZ,e),E(e)]).then(e=>{let t=e.shift(),{count:n}=e.shift();return{courseContext:{...t,membershipCount:n}}}),y=(e,t)=>(0,i.RO0)(r.dZ,e,t).then(e=>({announcement:e})),f=async e=>({announcement:await (0,i.jnv)(r.dZ,e)})},179181:function(e,t,n){"use strict";n.d(t,{K:function(){return o}});var r=n(825271),i=n(318728);function o(e){return(0,i.OWT)(r.dZ,e)}},840449:function(e,t,n){"use strict";n.d(t,{_:function(){return o}});var r=n(318728),i=n(825271);function o(e){return(0,r.EUY)(i.dZ,e)}},487967:function(e,t,n){"use strict";n.d(t,{A3:function(){return y},BC:function(){return I},C:function(){return A},EP:function(){return _},F8:function(){return f},Tu:function(){return v},V9:function(){return S},Yg:function(){return b},aQ:function(){return h},qW:function(){return T},zW:function(){return E}});var r=n(645250),i=n(397965),o=n(647059);let s="/v1/courses/%courseId%/journals",a=`${s}/%blogId%`,l=`${s}/%blogId%/entries`,u=`${l}/membership/%assignedUserId%`,d=`${l}/%entryId%`,c=`${d}/comments`,p=`${c}/%commentId%`,m=`${s}/%blogId%/participants`,g=`${s}/%blogId%/summary`;async function E(e){let{courseId:t,blogId:n,expandHasEntries:r,options:o}=e,s=(0,i.c$)(a,{courseId:t,blogId:n,expand:r?"hasEntries":null});return await (0,i.Jt)(s,o)}async function h(e){let t=function(e){let{courseId:t,paging:n,expand:r,assignedUserId:i,blogId:o}=e;return{...n?{limit:n.limit,offset:n.offset}:{},assignedUserId:i,blogId:o,courseId:t,expand:r}}(e),{results:n,paging:r,permissions:s}=await (0,i.Jt)((0,i.c$)(u,t));return{byId:(0,o.jD)(n),entriesId:n.map(e=>e.id),paging:r,permissions:s}}async function y(e,t="permissions"){let{courseId:n,blogId:r,nextEntry:s}=e,a=await (0,i.bE)((0,i.c$)(`${l}?expand=%expand%`,{courseId:n,blogId:r,expand:t}),s);return{byId:(0,o.jD)([a])}}async function f(e){let{courseId:t,blogId:n,nextEntry:s,prevEntry:a}=e,l=(0,i.BI)(a,s);if((0,r.isEmpty)(l))return null;let u=(0,i.c$)(d,{courseId:t,blogId:n,entryId:null==s?void 0:s.id}),c=await (0,i.F6)(u,s);return{byId:(0,o.jD)([c])}}let b=e=>{let{courseId:t,blogId:n,entryId:r}=e;return(0,i.TF)((0,i.c$)(d,{courseId:t,blogId:n,entryId:r}))};async function I(e){let{courseId:t,blogId:n,entryId:r,nextComment:o}=e,s=(0,i.c$)(c,{courseId:t,blogId:n,entryId:r});return await (0,i.bE)(s,o)}async function A(e){let{courseId:t,blogId:n,entryId:o,nextComment:s,prevComment:a}=e,l=(0,i.BI)(a,s);if((0,r.isEmpty)(l))return null!=a?a:null;let u=(0,i.c$)(p,{courseId:t,blogId:n,entryId:o,commentId:null==s?void 0:s.id});return await (0,i.F6)(u,s)}let v=async e=>{let{courseId:t,blogId:n,entryId:r,commentId:o}=e,s=(0,i.c$)(p,{courseId:t,blogId:n,entryId:r,commentId:o});return(0,i.TF)(s)};async function S(e,t,n,r={}){let{permissions:s,results:a,paging:l}=await (0,i.Jt)((0,i.c$)(c,{courseId:e,blogId:t,entryId:n,...r}));return{paging:l,permissions:s,byId:(0,o.jD)(a)}}async function _(e,t="user"){var n,r;let o=[];e.sortColumn&&e.sortDirection&&o.push({field:e.sortColumn,direction:e.sortDirection});let s={limit:null===(n=e.paging)||void 0===n?void 0:n.limit,offset:null===(r=e.paging)||void 0===r?void 0:r.offset,searchText:e.searchText,submissionStatus:e.submissionStatus,gradingStatus:e.gradingStatus,blogId:e.blogId,courseId:e.courseId,expand:t,sort:(0,i.vo)(o)},{results:a,paging:l}=await (0,i.Jt)((0,i.c$)(m,s));return{paging:l,byCourseMembershipId:a.reduce((e,t)=>(e[t.membershipId]=t,e),{})}}async function T(e,t){let n=await (0,i.Jt)((0,i.c$)(g,{courseId:e,blogId:t}));return{byBlogId:(0,o.jD)([n])}}},559667:function(e,t,n){"use strict";n.d(t,{m:function(){return o}});var r=n(318728),i=n(825271);let o=(0,n(853400).Y)(r.cfv,i.dZ)},92958:function(e,t,n){"use strict";n.d(t,{F9:function(){return d},l$:function(){return s},uW:function(){return c},xP:function(){return u}});var r=n(397965),i=n(318728),o=n(825271);function s(e,t,n,i){let o=(0,r.c$)("/v1/courses/%courseId%/gradebook/columns/%columnId%/summary",{courseId:e,columnId:t,...n});return(0,r.Jt)(o,i).then(e=>e)}function a(e){return e.reduce((e,t)=>({...e,[t.columnId]:t}),{})}let l="fetchColumnSummaries";async function u(e,t,n){(0,r.$D)(l);let i=[];for(let r of t)i.push(s(e,r,n,{batchKey:l}));return{columnSummaries:a(await Promise.all(i))}}async function d(e){var t,n;let s;let l=null===(t=e.paging)||void 0===t?void 0:t.limit,u=null===(n=e.paging)||void 0===n?void 0:n.offset,d={courseId:e.courseId};e.sort&&(s=(0,r.vo)(e.sort));let c={filter:e.filter,expand:e.expandParam,includeCount:e.includeCount},{results:p,paging:m}=await (0,i.OJU)(o.dZ,d,{...c,limit:l,offset:u,sort:s});return{columnSummaryType:e.columnSummaryType,columnSummariesOverview:a(p),columnIds:p.reduce((e,t)=>[...e,t.columnId],[]),paging:m}}async function c(e){let t={courseId:e.courseId},n={filter:e.filter},r=await (0,i.$t4)(o.dZ,t,n);return{courseId:e.courseId,needsGrading:r.needsGradingCount,needsPosting:r.needsPostingCount,needsReconciling:r.needsReconcilingCount}}},6600:function(e,t,n){"use strict";n.d(t,{O:function(){return a},x:function(){return s}});var r=n(318728),i=n(707962),o=n(825271);async function s(e,t){return await (0,r.oM0)(o.dZ,{courseId:e,contentId:t})}async function a(e,t,{fileName:n,fileLocation:s},a){if(!n||!s)throw Error("Tried to convert with no file name or location");let{id:l,body:u}=await (0,r.Pwr)(o.dZ,{courseId:e,contentId:t},{fileName:n,fileLocation:s},a);return u||(0,i.w)(async()=>(await (0,r.HHX)(o.dZ,{courseId:e,contentId:t,conversionId:l})).body,e=>!!e,a)}},294268:function(e,t,n){"use strict";n.d(t,{U:function(){return i}});var r=n(397965);async function i(e,t){let n=(0,r.c$)("/v1/courses/%courseId%/imports",e);return(0,r.bE)(n,t)}},452657:function(e,t,n){"use strict";n.d(t,{j:function(){return i}});var r=n(397965);async function i(e){let{results:t}=await (0,r.Jt)((0,r.c$)("/v1/courses/%courseId%/contents/indicators",{courseId:e}));return{indicators:t}}},769224:function(e,t,n){"use strict";n.d(t,{D:function(){return l},EX:function(){return u},J4:function(){return s},aR:function(){return a}});var r=n(397965),i=n(318728),o=n(825271);function s(e,t,n){let s=(0,r.BI)(e,t);return s.hasOwnProperty("startDate")&&!s.startDate?s.startDate="":s.hasOwnProperty("durationType")&&"DATE_RANGE"===s.durationType&&(s.startDate=t.startDate),s.hasOwnProperty("endDate")&&!s.endDate?s.endDate="":s.hasOwnProperty("durationType")&&"DATE_RANGE"===s.durationType&&(s.endDate=t.endDate),(0,i.Zee)(o.dZ,t.id,{...s,id:t.id},n)}function a(e){return(0,i.EDV)(o.dZ,e)}let l=(0,n(853400).Y)(i.NJo,o.dZ);async function u(e){let{STUDENT:t}=(await (0,i.GyT)(o.dZ,e)).results;return t}},824033:function(e,t,n){"use strict";n.d(t,{T:function(){return i}});var r=n(397965);function i(e){return(0,r.Jt)((0,r.c$)("/v1/courses/%courseId%/entitlements",{courseId:e})).then(t=>({entitlements:t.results,courseId:e}))}},800996:function(e,t,n){"use strict";n.d(t,{Z:function(){return a},z:function(){return s}});var r=n(318728),i=n(825271),o=n(477305);async function s(e){var t;let{results:n,paging:s}=await (0,r.Pre)(i.dZ,e.courseId,null!==(t=e.queryParams)&&void 0!==t?t:{},e.paging);return{logs:(0,o.jD)(n,(e,t)=>(t&&(e[t.logId]=t),e)),logIds:n.map(e=>e.logId),paging:s}}function a(e,t){return(0,r.Jkd)(i.dZ,e,t)}},467338:function(e,t,n){"use strict";n.d(t,{l1:function(){return a},pp:function(){return u},wE:function(){return d},yi:function(){return l}});var r=n(397965),i=n(825271),o=n(318728),s=n(853400);async function a(e){let t=(0,r.c$)("/v1/courses/conversations/counts",{});return e?(0,r.Jt)(t,e):(0,r.Jt)(t)}async function l(e){return(0,o.gYf)(i.dZ,e)}let u=(0,s.Y)(o.Sjt,i.dZ),d=(0,s.Y)(o.s$U,i.dZ)},196973:function(e,t,n){"use strict";n.d(t,{p:function(){return s}});var r=n(825271),i=n(318728),o=n(449454);let s=(e={offset:0,limit:o.N})=>(0,i.Zlz)(r.dZ,e).then(e=>(function(e){let{results:t,paging:n}=e;return{courses:t.reduce((e,t)=>(e[t.courseId]=t,e),{}),paging:n}})(e))},776601:function(e,t,n){"use strict";n.d(t,{M0:function(){return a},PY:function(){return s},rM:function(){return o}});var r=n(397965);let i="/v1/courses/%courseId%/preferences/%key%";function o(e){return(0,r.Jt)((0,r.c$)(i,e))}function s(e,t){let n=(0,r.c$)(i,{courseId:t.courseId,key:e.key});return(0,r.yJ)(n,e)}function a(e){return(0,r.TF)((0,r.c$)(i,e))}},744756:function(e,t,n){"use strict";n.d(t,{$:function(){return s},f:function(){return o}});var r=n(397965);let i="/v1/courses/%courseId%/progress/configuration",o=e=>(0,r.Jt)((0,r.c$)(i,e)),s=(e,t)=>{let n=(0,r.c$)(i,{courseId:t.courseId});return(0,r.F6)(n,e)}},584424:function(e,t,n){"use strict";n.d(t,{l:function(){return o},w:function(){return s}});var r=n(318728),i=n(825271);function o(e,t){return(0,r.wXA)(i.dZ,e,t)}async function s(e){var t;let{courseResources:n,paging:o,unusedFilesTotal:s}=await (0,r.sH_)(i.dZ,e.courseId,null!==(t=e.queryParams)&&void 0!==t?t:{},e.paging);return{resources:n.reduce((e,t)=>(t&&(e[t.resourceId]=t),e),{}),resourceIds:n.map(e=>e.resourceId),paging:o,unusedFilesTotal:s}}},3266:function(e,t,n){"use strict";n.d(t,{E:function(){return s},l:function(){return a}});var r=n(318728),i=n(825271),o=n(853400);let s=(0,o.Y)(r.Gzw,i.dZ),a=(0,o.Y)(r.tpQ,i.dZ)},193752:function(e,t,n){"use strict";n.d(t,{C:function(){return u},Gq:function(){return l},Th:function(){return d}});var r=n(397965),i=n(477305);let o="/v1/courses/%courseId%/gradebook/columns/%columnId%/grades/%gradeId%/attempts/%attemptId%/stagedAttemptGrades",s=`${o}/%stagedAttemptId%`,a=(e,t)=>{let{paging:n,permissions:r,results:o}=t,s={},a=(0,i.jD)(o,(t,n)=>{let{grader:r,userBeingGraded:i,...o}=n;return o.columnId=e,o.graderId=null==r?void 0:r.id,o.userBeingGradedId=null==i?void 0:i.id,r&&!s[r.id]&&(s[r.id]={...r}),i&&!s[i.id]&&(s[i.id]={...i}),t[n.stagedAttemptId]=o,t});return{paging:n,permissions:r,users:s,byStagedAttemptId:a}},l=async e=>{let{columnId:t}=e;return a(t,await (0,r.Jt)((0,r.c$)("/v1/courses/%courseId%/gradebook/columns/%columnId%/grader/%userId%/peerReviews",e)))},u=async e=>{let{columnId:t}=e;return a(t,{results:(await (0,r.Jt)((0,r.c$)(o,e))).stagedAttemptGrades})},d=async e=>{let{updatedProperties:t}=e,n={courseId:e.courseId,columnId:e.columnId,gradeId:e.gradeId,attemptId:e.attemptId,stagedAttemptId:e.stagedAttemptId};return{stagedAttempt:await (0,r.F6)((0,r.c$)(s,n),t)}}},56518:function(e,t,n){"use strict";n.d(t,{V9:function(){return l},gF:function(){return a},pA:function(){return s}});var r=n(825271),i=n(318728),o=n(853400);let s=(0,o.Y)(i.zCf,r.dZ),a=(0,o.Y)(i._HO,r.dZ),l=(0,o.Y)(i.$gS,r.dZ)},349134:function(e,t,n){"use strict";n.d(t,{s:function(){return o}});var r=n(318728),i=n(825271);async function o(e,t){var n,o;let s;let a=[],l=t.limit,u=t.offset;do{let{results:d,paging:c}=await (0,r.kvF)(i.dZ,e,{...t,limit:l,offset:u});s=null!==(n=null==c?void 0:c.nextPage)&&void 0!==n?n:"",u=(null!==(o=null==c?void 0:c.offset)&&void 0!==o?o:0)+l,a=a.concat(d)}while(s);return{learnExceptionDetails:a}}},611826:function(e,t,n){"use strict";n.d(t,{CL:function(){return o},_D:function(){return s},tz:function(){return a}});var r=n(318728),i=n(825271);function o(){return(0,r.oJV)(i.dZ).then(e=>{let{results:t}=e,n={};return t.forEach(e=>{n[e.flagKey]=e}),{featureFlags:{byKey:n}}})}function s(e){return(0,r.Dvw)(i.dZ,e.flagKey)}function a(e){return(0,r.rT9)(i.dZ,e.flagKey,e)}},11144:function(e,t,n){"use strict";n.d(t,{Y:function(){return o},v:function(){return s}});var r=n(825271),i=n(318728);async function o(e,t={},n){return(0,i.UMy)(r.dZ,e,t,n)}function s(e,t={},n){return(0,i.tUS)(r.dZ,e,t,n)}},239152:function(e,t,n){"use strict";n.d(t,{H:function(){return o}});var r=n(318728),i=n(825271);function o(){return(0,r.FS6)(i.dZ)}},91129:function(e,t,n){"use strict";n.d(t,{Dh:function(){return u},Tm:function(){return p},ZG:function(){return c},tX:function(){return d}});var r=n(318728),i=n(853400),o=n(825271),s=n(477305),a=n(106535);function l(e){let{results:t}=e;return{performance:t,performanceIds:t.map(e=>(0,a.j)({goalId:e.goalId,userId:e.userId}))}}let u=(0,i.Y)(r.lav,o.dZ),d=async e=>{let{courseId:t,paging:n}=e;return function(e){let{results:t}=e;return{paging:e.paging,goalsById:(0,s.jD)(t),goalIds:t.map(e=>e.id)}}(await (0,r.z8F)(o.dZ,t,n))},c=async e=>{let{courseId:t,userIds:n,goalIds:i}=e;return l(await (0,r.JUT)(o.dZ,t,n,i))},p=async e=>{let{courseId:t,userId:n,parentId:i}=e;return l(i?await (0,r.WPt)(o.dZ,t,n,i):await (0,r.ZnZ)(o.dZ,t,n))}},504566:function(e,t,n){"use strict";n.d(t,{Lf:function(){return c},QN:function(){return a},T8:function(){return o},Yn:function(){return d},gB:function(){return l},ml:function(){return u},n6:function(){return s}});var r=n(318728),i=n(825271);function o(e,t){return(0,r.jNO)(i.dZ,e,t)}function s(e){return(0,r.bS6)(i.dZ,e)}function a(e,t){return(0,r.ehj)(i.dZ,e,t)}function l(e){return(0,r.eUG)(i.dZ,e)}async function u(e,t){var n,o;let{results:s}=await (0,r.GWV)(i.dZ,e,t),a={columnId:e.columnId,courseId:e.courseId,...t};return(null===(n=null==t?void 0:t.membershipIds)||void 0===n?void 0:n.length)&&(a.byCourseMembershipId=s.reduce((e,t)=>(t.membershipId&&(e[t.membershipId]=t),e),{})),(null===(o=null==t?void 0:t.groupIds)||void 0===o?void 0:o.length)&&(a.byGroupId=s.reduce((e,t)=>(t.groupId&&(e[t.groupId]=t),e),{})),a}async function d(e,t){let{results:n}=await (0,r.e5l)(i.dZ,e,t);return{membershipId:e.membershipId,byColumnId:n.reduce((e,t)=>(e[t.columnId]=t,e),{})}}function c(e){return(0,r.BEZ)(i.dZ,e)}},232955:function(e,t,n){"use strict";n.d(t,{Cz:function(){return p},EJ:function(){return l},JN:function(){return g},Rg:function(){return d},dO:function(){return c},lq:function(){return u},v8:function(){return m}});var r=n(397965),i=n(477305),o=n(300474),s=n(318728),a=n(825271);async function l(e){let{courseId:t,columnId:n}=e;return{courseId:t,columnId:n,attempt:await (0,r.Jt)((0,r.c$)("/v1/courses/%courseId%/gradebook/attempts/%attemptId%",e))}}async function u(e){let{courseId:t,columnId:n}=e;return(0,r.Jt)((0,r.c$)("/v1/courses/%courseId%/gradebook/columns/%columnId%/attempts",e)).then(e=>{let{lookup:r,paging:o}=e,s=[],a=[];return r&&Object.values(r).forEach(e=>{e.forEach(e=>{e.deletedAttempt?a.push(e):s.push(e)})}),{courseId:t,columnId:n,byGradebookAttemptId:(0,i.jD)(s),deletedAttempts:a,paging:o}})}function d(e){return e.overrideStatus===s.YLS.FeedbackOverride||e.feedbackToUser&&(e.feedbackToUser={rawText:"",fileLocation:"",webLocation:"",displayText:""}),e}async function c(e,t,n,{columnId:r}={},i){let o=await (0,s.EhG)(a.dZ,{courseId:e,attemptId:t},n,i,["toolAttemptDetail","attemptReceipt.lateSubmission"]);return o.groupAttemptId&&(o=d(o)),{attempt:{...o,courseId:e,...r?{columnId:r}:{}},resultGradeBookAttempt:n}}function p(e,t,n){return(0,s.s4F)(a.dZ,{courseId:e,columnId:n},t)}async function m(e,t){return(0,s.RQU)(a.dZ,{courseId:e,attemptId:t})}async function g(e){return(0,r.bE)((0,r.c$)("/v1/courses/%courseId%/gradebook/columns/%columnId%/grader/%userId%/users",e),{}).catch(e=>{throw(0,o.wf)(e)})}},143276:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(397965);let i=async e=>{let t=(0,r.c$)("/v1/courses/%courseId%/gradebook/categories",{courseId:e}),{paging:n,permissions:i,results:o}=await (0,r.Jt)(t);return{results:o,paging:n,permissions:i}}},323691:function(e,t,n){"use strict";n.d(t,{Gq:function(){return s},d$:function(){return a},oC:function(){return o}});var r=n(318728),i=n(825271);async function o(e){let{courseId:t,columnId:n,groupAssociationIds:o}=e;return await (0,r.Q5)(i.dZ,{courseId:t,columnId:n},{groupAssociationIds:o})}async function s(e,t,n){return await (0,r.w6f)(i.dZ,{courseId:e,columnId:t,groupAssociationId:n})}function a(e,t,n,o){return(0,r.awz)(i.dZ,{courseId:e,columnId:t,groupAssociationId:n},o)}},400161:function(e,t,n){"use strict";n.d(t,{Ip:function(){return a},h0:function(){return p},oY:function(){return d},pW:function(){return l},vK:function(){return c}});var r=n(318728),i=n(477305),o=n(825271);function s(e){if(e.localizableTitle){let t=e.localizableTitle.languageKey.replace(/[\W_]+/g,"_").toLowerCase();e.ui={displayTitleKey:`components.services.grade.schema.${t}`}}else e.ui={displayTitle:e.title}}async function a(e,t){let n=await (0,r._$j)(o.dZ,{courseId:e,schemaId:t});return s(n),n}async function l(e,t,n){var a;let{paging:l,permissions:u,results:d}=await (0,r.Nx6)(o.dZ,{courseId:e},t||n?{offset:t,limit:n}:void 0);for(let t of d)s(t),null!==(a=t.courseId)&&void 0!==a||(t.courseId=e);return{byId:(0,i.jD)(d),paging:l,permissions:u}}async function u(e,t){let n;let i=t.id;n=i?(0,r.$Gn)(o.dZ,{courseId:e,schemaId:i},t):(0,r.YcW)(o.dZ,{courseId:e},t);let a=await n;return s(a),a}async function d(e,t){return u(e,t)}async function c(e,t){return u(e,t)}async function p(e,t){return(0,r.zpr)(o.dZ,{courseId:e,schemaId:t})}},372739:function(e,t,n){"use strict";n.d(t,{G:function(){return o},l:function(){return s}});var r=n(825271),i=n(318728);function o(e){return(0,i._FW)(e,r.dZ)}function s(e,t){return(0,i.ebA)(e,r.dZ,t)}},942285:function(e,t,n){"use strict";n.d(t,{Dg:function(){return l},cZ:function(){return a},dy:function(){return o},zY:function(){return s}});var r=n(825271),i=n(318728);async function o(e,t,n){return(0,i.gSs)(r.dZ,e,t,n)}async function s(e,t,n){return(0,i.zmp)(r.dZ,e,t,n)}async function a(e,t,n){return(0,i.Ow5)(r.dZ,e,t,n)}async function l(e,t){return(0,i.Gul)(r.dZ,e,t)}},481367:function(e,t,n){"use strict";n.d(t,{Bs:function(){return d},JL:function(){return u},K5:function(){return l},__:function(){return o},mj:function(){return a},rl:function(){return s}});var r=n(397965);let i="/v1/brands";async function o(e){return c({},await (0,r.Jt)(`${i}/${e}`))}async function s(e=1e3){let{results:t,paging:n}=await (0,r.Jt)((0,r.c$)(i,{limit:e}));return{...t.reduce(c,{}),paging:n}}async function a(e=1e3){let{results:t,paging:n}=await (0,r.Jt)((0,r.c$)(`${i}/hosts`,{limit:e}));return{hostnames:t.map(e=>e.hostname),paging:n}}async function l(e){return c({},await (0,r.bE)(`${i}`,{...e}))}async function u(e,t){return c({},await (0,r.yJ)(`${i}/${e}`,{...t}))}async function d(e){return(0,r.TF)(`${i}/${e}`)}function c(e,t){let{ultraBranding:n,brandAssociations:r}=t,i=n.id;return e.institutionBrands||(e.institutionBrands={byId:{}}),e.brandAssociations||(e.brandAssociations={byId:{}}),e.institutionRoles||(e.institutionRoles={}),e.institutionBrands.byId[i]={...n,id:n.id},r.forEach(t=>{let{institutionRole:n,hostName:r}=t,o={id:t.id,brandId:i};r&&(o.hostName=r),n&&(e.institutionRoles[n.roleId]={...n,id:n.roleId},o.institutionRoleId=n.roleId),e.brandAssociations.byId[t.id]=o}),e}},248928:function(e,t,n){"use strict";n.d(t,{g7:function(){return s},xh:function(){return o}});var r=n(397965);let i="/v1/roles/institutionRoles";async function o(e){let{result:t}=await (0,r.Jt)(`${i}/${e}`);return t}async function s(e=1e3){let{results:t,institutionId:n,paging:o}=await (0,r.Jt)((0,r.c$)(i,{limit:e}));return{institutionId:n,institutionRoles:{byId:t.reduce((e,t)=>(e[t.roleId]={id:t.roleId,...t},e),{})},paging:o}}},886419:function(e,t,n){"use strict";n.d(t,{X:function(){return o}});var r=n(318728),i=n(825271);function o(e){return(0,r.p1k)(e,i.dZ)}},647494:function(e,t,n){"use strict";n.d(t,{P:function(){return o}});var r=n(318728),i=n(825271);async function o(e){return(0,r.MA7)(i.dZ,e)}},447959:function(e,t,n){"use strict";n.d(t,{F:function(){return l},Pj:function(){return p},Wu:function(){return d},Y$:function(){return s},bG:function(){return u},fN:function(){return a},jK:function(){return c}});var r=n(825271),i=n(318728),o=n(647059);function s(e,t,n,o){return(0,i._V_)(r.dZ,{courseId:e,attemptId:t,questionAttemptId:n},o)}async function a(e,t){let n=await (0,i.XuD)(r.dZ,e,t);return{data:(0,o.jD)(n)}}function l(e,t){return(0,i.Vgq)(r.dZ,{courseId:e,attemptId:t})}function u(e,t,n,o=[]){return(0,i.BhX)(r.dZ,{courseId:e,attemptId:t,questionAttemptId:n},o)}function d(e,t,n=[]){return(0,i.wEN)(r.dZ,{courseId:e,attemptId:t},n)}function c(e,t){let{courseId:n,attemptId:o,questionAttemptId:s,groupAttemptId:a}=e;return s&&o?(0,i.wzV)(r.dZ,{courseId:n,attemptId:o,questionAttemptId:s},t,a?{groupAttemptId:a}:void 0):Promise.reject(Error("Missing the question attempt id and attempt id."))}function p(e,t,n,{paging:o,expandParams:s,filterParams:a,includeOnlyAvailableUsers:l}={}){let u={};return a&&(u.filter=a),l&&(u.includeOnlyAvailableUsers=!0),(0,i.dBj)(r.dZ,{courseId:e,assessmentId:t,questionId:n},o,s,u)}},921776:function(e,t,n){"use strict";n.d(t,{e:function(){return o}});var r=n(318728),i=n(825271);async function o(e){let{courseId:t,limit:n,offset:o}=e,{paging:s,permissions:a,results:l}=await (0,r.p9E)(i.dZ,t,{limit:n,offset:o});return{paging:s,permissions:a,questionTagIds:l.map(e=>e.id),questionTags:Object.assign({},...l.map(e=>({[e.id]:e})))}}},340496:function(e,t,n){"use strict";n.d(t,{Y:function(){return o}});var r=n(318728),i=n(825271);async function o(e){var t;let{permissions:n,results:o}=await (0,r.veW)(i.dZ,e.courseId,null===(t=e.filter)||void 0===t?void 0:t.assessmentIds);return{data:{permissions:n,questionTypes:o.map(e=>e.key)},query:e}}},846576:function(e,t,n){"use strict";n.d(t,{$i:function(){return d},_p:function(){return l},bX:function(){return s},bc:function(){return a},rt:function(){return u}});var r=n(825271),i=n(318728),o=n(853400);let s=(0,o.Y)(i.$1r,r.dZ),a=(0,o.Y)(i.t1H,r.dZ),l=(0,o.Y)(i.w3m,r.dZ),u=(0,o.Y)(i.ZfO,r.dZ),d=(0,o.Y)(i.X7K,r.dZ)},301398:function(e,t,n){"use strict";n.d(t,{D:function(){return o}});var r=n(825271),i=n(318728);async function o(e){return(0,i.Dw$)(r.dZ,e)}},369082:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});var r=n(397965);async function i(e){return(0,r.yJ)("/v1/utilities/userSessionDebugLog",{sessionDebug:e})}},492407:function(e,t,n){"use strict";n.d(t,{K:function(){return o}});var r=n(825271),i=n(318728);async function o(e){var t,n,o,s;let a;let{courseId:l,userId:u,dateInterval:d,...c}=e;d&&(a={since:d.since.toISOString(),until:d.until.toISOString(),handlers:(null===(n=null===(t=e.eventTypeFilter)||void 0===t?void 0:t.handlers)||void 0===n?void 0:n.length)?e.eventTypeFilter.handlers:void 0,eventTypes:(null===(s=null===(o=e.eventTypeFilter)||void 0===o?void 0:o.eventTypes)||void 0===s?void 0:s.length)?e.eventTypeFilter.eventTypes:void 0});let{results:p,paging:m,permissions:g}=await (0,i.GXm)(r.dZ,{courseId:l,userId:u},c,a);return{studentActivityLogs:Object.assign({},...p.map(e=>({[e.id]:e}))),paging:m,permissions:g}}},276636:function(e,t,n){"use strict";n.d(t,{$:function(){return i},n:function(){return o}});var r=n(397965);async function i(e,t){return(0,r.Jt)((0,r.c$)("/v1/courses/%courseId%/gradebook/columns/%columnId%/submissionServices",{courseId:e,columnId:t})).then(e=>e.submissionServices)}async function o(e,t,n){if(!e||!t)return Promise.reject();let i=n.uniqueHandle;return(0,r.F6)((0,r.c$)("/v1/courses/%courseId%/gradebook/columns/%columnId%/submissionServices/%uniqueHandle%",{courseId:e,columnId:t,uniqueHandle:i}),n)}},102806:function(e,t,n){"use strict";n.d(t,{an:function(){return o},vc:function(){return s}});var r=n(397965);let i="/v1/themes";async function o(e){return(0,r.bE)(i,{...e})}async function s(e){return(0,r.TF)(`${i}/${e}`)}},985866:function(e,t,n){"use strict";n.d(t,{i:function(){return o},m:function(){return s}});var r=n(397965);let i="/v1/ultra-ui/ultrasettings";async function o(){return(0,r.Jt)((0,r.c$)(i,[]))}async function s(e){let t=(0,r.c$)(i,[]);return(0,r.bE)(t,e)}},633666:function(e,t,n){"use strict";n.d(t,{i:function(){return o}});var r=n(825271),i=n(318728);function o(e){return(0,i.qN5)(r.dZ,e)}},728959:function(e,t,n){"use strict";n.d(t,{jz:function(){return u},xO:function(){return a},xy:function(){return l}});var r=n(397965),i=n(318728),o=n(825271);let s="/v1/users/%userId%/preferences/%key%";function a(e){return null==e.userId&&(e.userId="me"),(0,r.Jt)((0,r.c$)(s,e))}async function l(e,t){let n=t&&t.userId||"me",i=(0,r.c$)(s,{userId:n,key:e.key});return(0,r.yJ)(i,e)}async function u(e){return(0,i.dvE)(o.dZ,{key:e})}},807727:function(e,t,n){"use strict";n.d(t,{Ed:function(){return u},c9:function(){return a},l$:function(){return l}});var r=n(397965),i=n(300474);let o="/public/v1/pronouns",s=`${o}/%pronounId%`;async function a(e){var t;let n=e&&"nextPage"in e?await (0,r.Jt)(e.nextPage):await (0,r.Jt)((0,r.c$)(o,{offset:null==e?void 0:e.offset,limit:null==e?void 0:e.limit}));if(null===(t=n.paging)||void 0===t?void 0:t.nextPage){let e=n.paging.nextPage.split("/"),t=e.findIndex(e=>"public"===e),r="";e.splice(t).forEach(e=>r=r+"/"+e),n.paging.nextPage=r}return n}async function l(e){try{return await (0,r.bE)(o,e)}catch(e){throw(0,i.ew)(e)}}async function u(e){return(0,r.TF)((0,r.c$)(s,{pronounId:e}))}},853400:function(e,t,n){"use strict";function r(e,t){return(...n)=>e(t,...n)}n.d(t,{Y:function(){return r}})},616611:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(571568);let i={getRenderedGroupSets:(e,t)=>{var n,i;return null!==(i=null===(n=e.groupWorkspace.groupSets.byCourseId[t])||void 0===n?void 0:n.map(t=>{var n;return{id:t,...e.groupWorkspace.groupSets.byId[t],assignedGroups:null===(n=r.Lt.getGroupsByGroupSetId(e,t))||void 0===n?void 0:n.map(e=>e.id)}}))&&void 0!==i?i:[]}}},839040:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(683900);let i=(0,r.makeStyles)(e=>(0,r.createStyles)({containerPeekPanel:{position:"absolute",top:0,left:0,bottom:0,right:0,overflowY:"auto","& section":{borderBottom:`1px solid ${e.palette.border.main}`,marginTop:"20px",paddingBottom:"20px","&:first-child":{marginTop:"0px"},"&:last-child":{borderBottom:"none"}}},containerBody:{padding:"30px 30px 90px 30px"},description:{marginLeft:"20px",color:e.palette.text.hint},header:{"& .ms-Panel-subTitle, .ms-Panel-headerText":{paddingLeft:"16px",[e.breakpoints.up("xl")]:{paddingLeft:"30px"}}},footer:{position:"absolute",left:0,bottom:0,right:0,"& .ms-Panel-footer":{justifyContent:"center"}},additionalToolIcon:{display:"inline-block",verticalAlign:"top",paddingLeft:"10px",paddingTop:"3px"},additionalTools:{fontWeight:e.typography.fontWeightSemiBold},additionalToolTextContainer:{flex:"1",display:"inline-block",verticalAlign:"top",paddingLeft:"10px",minHeight:"32px",maxWidth:"272px",lineHeight:"16px",[e.breakpoints.up("sm")]:{minWidth:"200px"}},additionalToolText:{display:"block",fontWeight:e.typography.fontWeightBold},additionalToolLink:{display:"block"},descriptionBox:{"& div":{border:`1px solid ${e.palette.background.b5}`},"& textarea":{height:"146px"}},additionalToolsItemContainer:{display:"flex"},additionalToolsItemContainerTrashCanIcon:{display:"flex",justifyContent:"space-between"},unassignGroupButton:{marginLeft:"auto",marginRight:"10px",marginTop:"-5px","& [disabled] span":{color:e.palette.action.disabled}},groupsSectionHint:{marginTop:"10px",color:e.palette.text.hint},groupsSection:{"& button":{opacity:0,[e.breakpoints.down("xs")]:{opacity:1},"@media (hover: none) and (pointer: coarse)":{opacity:1},"&:focus":{opacity:1}},"&:hover":{"& button":{opacity:1,transition:"transform 100ms, background-color 250ms, color 250ms, box-shadow 250ms, opacity 250ms"}}}}))},650160:function(e,t,n){"use strict";n.d(t,{K:function(){return a}});var r=n(514041),i=n(882386),o=n(374980),s=n(865004);let a=({titleText:e,contentText:t,analyticsId:n,rootId:a,confirmationText:l,exitCallback:u})=>{let d=(0,s.W)();return r.createElement(i.gT,{analyticsId:`${n}.dialog`,open:!0,onClose:()=>u(),"aria-labelledby":`${a}.dialog-title`},r.createElement(o.AnalyticsDialogTitle,{analyticsId:`${n}.dialog-title`,onClose:()=>u(),id:`${a}.dialog-title`},d(e)),r.createElement(o.AnalyticsDialogContent,{analyticsId:`${n}.dialog-content`},r.createElement(o.AnalyticsDialogContentText,{analyticsId:`${n}.dialog-description`,id:`${a}.dialog-description`},d(t))),r.createElement(o.AnalyticsDialogActions,{analyticsId:`${n}.dialog-events`},r.createElement(o.AnalyticsDefaultButton,{analyticsId:`${n}.dialog.cancel.button`,onClick:()=>u()},d("global.cancel")),r.createElement(o.AnalyticsPrimaryButton,{analyticsId:`${n}.dialog.confirm.button`,onClick:()=>u(!0)},d(l))))}},73729:function(e,t,n){"use strict";n.d(t,{I:function(){return i}});var r=n(683900);let i=(0,r.makeStyles)(e=>(0,r.createStyles)({mathEditor:{"& .wrs_editor":{[e.breakpoints.down("sm")]:{whiteSpace:"normal","& .wrs_multipleRowPanel":{minHeight:"66px",height:"auto"},"& .wrs_toolbar .wrs_header":{width:"calc(100% - 18px)","& button":{marginLeft:0,marginRight:"4px"}}}}}}))},414008:function(e,t,n){"use strict";n.d(t,{p:function(){return c}});var r=n(514041),i=n(526660),o=/*#__PURE__*/n.n(i),s=n(906616),a=/*#__PURE__*/n.n(s);class l{constructor(e){if(l.isWirisLoaded&&l.apiBasePathUsedForLoading!==e)throw Error(`WIRIS editor source already loaded from ${l.apiBasePathUsedForLoading}. Cannot load from ${e}`);this.apiBasePath=e}async newInstance(e){if(l.isWirisLoaded)return Promise.resolve(l.getNewInstance(e));let t=await this.getConfiguration(),n=(await l.getConfigurationjs(t.data.contextPath)).data.editorUrl;return this.loadWirisJS(n,e)}convertToAbsoluteUrl(e){return`${this.apiBasePath}${e}`}getConfiguration(){let e=this.convertToAbsoluteUrl("/v1/editor/v4/configurations");return o().get(e)}static getConfigurationjs(e){return o().get(`${e}app/configurationjs`)}static getNewInstance(e){let t=e?{...e}:{language:"en"};return t.fontFamily||(t.fontFamily=l.wirisDefaultFontFamily),null!=t.mml&&t.mml.trim()||delete t.mml,t.language||(t.language="en"),com.wiris.jsEditor.JsEditor.newInstance(t)}loadWirisJS(e,t){return new Promise((n,r)=>{a()(e,()=>{try{l.apiBasePathUsedForLoading=this.apiBasePath,l.isWirisLoaded=!0,n(l.getNewInstance(t))}catch(e){l.isWirisLoaded=!1,r(e)}})})}}l.apiBasePathUsedForLoading="",l.isWirisLoaded=!1,l.wirisDefaultFontFamily="Times New Roman";let u={initError:null,isReady:!1,wirisEditorInstance:null},d=(e,t)=>{switch(t.type){case"get-new-instance":return{...u};case"ready":return{...e,isReady:!0,wirisEditorInstance:t.wirisEditorInstance};case"error":return{...e,isReady:!1,initError:t.error};default:throw Error(`Unrecognized action: ${t}`)}},c=(e,t,n,i)=>{let[{isReady:o,initError:s,wirisEditorInstance:a},c]=(0,r.useReducer)(d,u);return(0,r.useEffect)(()=>{let r;let o=new l(t);return c({type:"get-new-instance"}),o.newInstance({mml:n,language:i,fontFamily:l.wirisDefaultFontFamily}).then(t=>{(r=t).insertInto(e.current),c({type:"ready",wirisEditorInstance:r})},e=>{c({type:"error",error:e})}),()=>{r&&r.close()}},[e]),(0,r.useEffect)(()=>{a&&a.getEditorModel().getParam("language")!==i&&a.setParam("language",i)},[i,a]),{initError:s,isReady:o,wirisEditorInstance:a}}},965800:function(e,t,n){"use strict";n.d(t,{M:function(){return s}});var r=n(906616),i=/*#__PURE__*/n.n(r);function o(e){let t=e;return e&&0>e.indexOf("//")&&("/"!==e[0]&&(t=`/${e}`),t=window.location.origin+e),t}class s{static get isWirisPluginsLoaded(){var e,t,n;return!!(null===(n=null===(t=null===(e=window.com)||void 0===e?void 0:e.wiris)||void 0===t?void 0:t.js)||void 0===n?void 0:n.JsPluginViewer)}constructor({courseId:e,apiBasePath:t,locale:n,xsrfToken:r}){this.waitForLoaded=(e,t)=>{s.isWirisPluginsLoaded?(clearInterval(s.interval),s.interval=void 0,e()):void 0===s.interval?(s.retry=3,s.interval=setInterval(this.waitForLoaded,500,e,t)):void 0!==s.interval&&(s.retry>0?s.retry-=1:(clearInterval(s.interval),s.interval=void 0,t()))},this.courseId=e,this.apiBasePath=t,this.locale=n,this.xsrfToken=r}async load(){if(s.isWirisPluginsLoaded)return this.getInstance(this.locale);let e=await this.getConfiguration(),t=`${e.contextPath}app/WIRISplugins.js?viewer=image&lang=${this.locale}&async=true`;return this.loadWirisPlugins(t,this.locale)}async parseElement(e){let t=await this.load();await new Promise(n=>{t.parseElement(e,!0,n)})}async getImageMetadataFromMathML(e){let t=document.createElement("span");"string"==typeof e?t.innerHTML=e:t.appendChild(e);let n=t.innerHTML;await this.parseElement(t);let r=t.getElementsByTagName("img")[0];return{dataMathML:n,src:r.src,alt:r.alt}}latexToMathml(e){let t=s.latexConverterCache.get(e);if(t)return t;let n=this.fetchLatex(e).catch(t=>{throw s.latexConverterCache.delete(e),t});return s.latexConverterCache.set(e,n),n}async fetchLatex(e){var t;let n=new URLSearchParams({service:"latex2mathml",latex:e}),r=o("/webapps/vtbe-tinymce/app/service"),i=await fetch(r,{method:"POST",headers:{...this.xsrfToken?{"X-Blackboard-XSRF":this.xsrfToken}:null},body:n});if(!i.ok)throw Error("Unexpected Error");let s=await i.json();if("ok"!==s.status)throw Error("Error Converting Latex input");let a=document.createElement("div");a.innerHTML=s.result.text;let l=null!==(t=a.firstElementChild)&&void 0!==t?t:document.createElement("math"),u=document.createElement("semantics"),d=document.createElement("annotation");return d.setAttribute("encoding","LaTeX"),d.textContent=e.replace(/^\${2}/,"").replace(/\${2}$/,""),u.innerHTML=l.innerHTML,u.appendChild(d),l.innerHTML=u.outerHTML,l.outerHTML}hasLatex(e){let t;e instanceof Node?t=e.nodeValue||"":t=e;let n=t.indexOf("$$");if(-1===n)return!1;let r=t.indexOf("$$",n+2);return!(-1===r||t.substring(n+2,r).indexOf("\n")>-1)}getNextLatexPos(e,t){let n=t.indexOf("$$",e);if(-1===n)return null;let r=t.indexOf("$$",n+2);return -1===r?null:{start:n,end:r}}getConfiguration(){if(s.configurationPromise)return s.configurationPromise;let e=this.courseId?`/courses/${this.courseId}`:"",t=o(`${this.apiBasePath}/v1${e}/editor/v4/configurations`);return s.configurationPromise=fetch(t,{method:"GET",headers:{...this.xsrfToken?{"X-Blackboard-XSRF":this.xsrfToken}:null}}).then(e=>e.json()),s.configurationPromise.catch(()=>{s.configurationPromise=void 0}),s.configurationPromise}waitForLoadedPromise(){return new Promise((e,t)=>{s.retry=3,this.waitForLoaded(()=>e(void 0),()=>t(Error("WIRISplugins.js was not loaded")))})}loadWirisPlugins(e,t){return s.wirisPluginsPromise||(s.wirisPluginsPromise=new Promise((n,r)=>{i()(e,()=>{this.waitForLoadedPromise().then(()=>n(this.getInstance(t))).catch(r)})}),s.wirisPluginsPromise.catch(()=>{s.configurationPromise=void 0,s.wirisPluginsPromise=void 0})),s.wirisPluginsPromise}getInstance(e){var t,n,r;let i=window,o=null!==(r=null===(n=null===(t=null==document?void 0:document.body)||void 0===t?void 0:t.parentElement)||void 0===n?void 0:n.lang)&&void 0!==r?r:"en";return i.com.wiris.js.JsPluginViewer.lang=e||o,i.com.wiris.js.JsPluginViewer}}s.latexConverterCache=new Map},957410:function(e,t,n){"use strict";var r,i;n.d(t,{A1:function(){return a},pi:function(){return o}});let o="audio/webm; codecs=opus";(i=r||(r={})).Inactive="inactive",i.Recording="recording",i.Paused="paused";class s{constructor(){this.currentRecordingSession=null,this.mediaRecorder=null,this.mediaStream=null,this.autoStop=null}static getInstance(){return s.instance||(s.instance=new s),this.instance}static getBlobOptionsFromRecorderOptions(e){return{type:null==e?void 0:e.mimeType}}get recordingState(){var e;return(null===(e=this.mediaRecorder)||void 0===e?void 0:e.state)||r.Inactive}get isRecording(){return this.recordingState===r.Recording}isCurrentRecordingSession(e){return null!==this.currentRecordingSession&&this.currentRecordingSession===e}async enableRecording(e){if(this.isRecording)throw Error("Recording in progress");try{this.mediaStream=await navigator.mediaDevices.getUserMedia(e.streamConstraints),this.currentRecordingSession=e}catch(e){throw Error("Unable to start recording")}}async startRecording(e){if(this.isRecording)throw Error("Recording in progress");return this.mediaStream&&this.isCurrentRecordingSession(e)||await this.enableRecording(e),this.mediaRecorder=new MediaRecorder(this.mediaStream,this.currentRecordingSession.recorderOptions),this.mediaRecorder.start(),this.configureAutoStop(e),this.recordingState}async stopRecording(e){if(!this.isRecording)throw Error("No recording in progress");if(!this.isCurrentRecordingSession(e))throw Error("Cannot stop non-respective recording");let{currentRecordingSession:t,mediaRecorder:n}=this,{onRecordingComplete:r,recorderOptions:i}=t,o=new Promise(e=>{let t=s.getBlobOptionsFromRecorderOptions(i);n.ondataavailable=({data:n})=>{e(new Blob([n],t))}}),a=new Promise(e=>{n.onstop=()=>{this.mediaStream&&this.mediaStream.getTracks().forEach(e=>{e.stop()}),e()}});return n.stop(),await Promise.all([o,a]).then(([e])=>{r(e),this.currentRecordingSession=null}),this.autoStop&&clearTimeout(this.autoStop),this.recordingState}async toggleRecording(e){return this.isRecording?this.stopRecording(e):this.startRecording(e)}configureAutoStop(e){var t,n;let r=null===(n=null===(t=this.currentRecordingSession)||void 0===t?void 0:t.recordingOptions)||void 0===n?void 0:n.maxDuration;r&&(this.autoStop=setTimeout(()=>{this.isCurrentRecordingSession(e)&&this.stopRecording(this.currentRecordingSession)},r))}}class a{constructor(e,t,n,r){this.recorder=s.getInstance(),this.onRecordingComplete=e,this.recorderOptions=t,this.streamConstraints=n,this.recordingOptions=r||{},this.onRecordToggle=this.onRecordToggle.bind(this),this.onRecordStart=this.onRecordStart.bind(this),this.onRecordStop=this.onRecordStop.bind(this)}async onEnableRecording(){return this.recorder.enableRecording(this)}async onRecordStart(){return this.recorder.startRecording(this)}async onRecordStop(){return this.recorder.stopRecording(this)}async onRecordToggle(){return this.recorder.toggleRecording(this)}}},765633:function(e,t,n){"use strict";n.d(t,{g:function(){return a}});var r=n(118419),i=n(251079),o=n(514041),s=n(25288);let a=(0,o.forwardRef)(function(e,t){let{open:n}=e,a=(0,i.Bi)();return(0,o.useEffect)(()=>(n?s.P.getInstance().addModal(a):s.P.getInstance().removeModal(a),()=>{s.P.getInstance().removeModal(a)}),[a,n]),o.createElement(r.Z,{...e,ref:t})})},446535:function(e,t,n){"use strict";n.d(t,{k:function(){return a}});var r=n(374980),i=n(251079),o=n(514041),s=n(25288);let a=o.forwardRef((e,t)=>{let{open:n}=e,a=(0,i.Bi)();return o.useEffect(()=>(null!=n&&n?s.P.getInstance().addModal(a):s.P.getInstance().removeModal(a),()=>{s.P.getInstance().removeModal(a)}),[a,n]),o.createElement(r.AnalyticsModal,{...e,ref:t})});a.displayName="BbUiModal"},26211:function(e,t,n){"use strict";n.d(t,{Y:function(){return a}});var r=n(212035),i=n(251079),o=n(514041),s=n(25288);let a=e=>{let{isOpen:t,hidden:n}=e,a=(0,i.Bi)();return o.useEffect(()=>{let e=!n;return void 0===n&&(e=void 0!==t&&t),e?s.P.getInstance().addModal(a):s.P.getInstance().removeModal(a),()=>{s.P.getInstance().removeModal(a)}},[a,n,t]),o.createElement(r.Dialog,{...e})};a.displayName="UltraModalDialog"},25288:function(e,t,n){"use strict";n.d(t,{P:function(){return r}});class r{constructor(){this.modalList=new Set,this.modalDisplayingListeners=new Set,this.modalDisplayingLatch=!1}static getInstance(){return r.INSTANCE||(r.INSTANCE=new r),r.INSTANCE}updateListeners(){let e=this.isModalDisplaying();e!==this.modalDisplayingLatch&&(this.modalDisplayingLatch=e,this.modalDisplayingListeners.forEach(t=>{try{t(e)}catch(e){}}))}addModal(e){this.modalList.add(e),this.updateListeners()}removeModal(e){this.modalList.delete(e),this.updateListeners()}isModalDisplaying(){return this.modalList.size>0}addOnModalDisplayingChanged(e){this.modalDisplayingListeners.add(e)}removeOnModalDisplayingChanged(e){this.modalDisplayingListeners.delete(e)}}},736150:function(e,t,n){"use strict";n.d(t,{Q:function(){return i}});class r{async goToRoute(){throw Error("routeHandler.goToRoute called before setting routeHandler")}async goPeekState(){throw Error("routeHandler.goPeekState called before setting routeHandler")}async getPeekHref(){throw Error("routeHandler.getPeekHref called before setting routeHandler")}async leavePeekState(){throw Error("routeHandler.leavePeekState called before setting routeHandler")}async search(){throw Error("routeHandler.search called before setting routeHandler")}getHref(){throw Error("routeHandler.getHref called before setting routeHandler")}onRouteChanging(){throw Error("routeHandler.onRouteChanging called before setting routeHandler")}getCurrentRoute(){throw Error("routeHandler.getCurrentRoute called before setting routeHandler")}}let i=new class{constructor(){this.routeHandler=new r}setRouteHandler(e){this.routeHandler=e}goRoute(e,t,n){return this.routeHandler.goToRoute(e,t,n)}goPeekState(e,t){return this.routeHandler.goPeekState(e.routeName,e.getArgs(),t)}getPeekHref(e,t){return this.routeHandler.getPeekHref(e.routeName,e.getArgs(),t)}getHref(e,t,n){return this.routeHandler.getHref(e,t,n)}leavePeekState(e,t){return this.routeHandler.leavePeekState(e,t)}search(e,t){return this.routeHandler.search(e,t)}onRouteChanging(e){return this.routeHandler.onRouteChanging(e)}getCurrentRoute(){return this.routeHandler.getCurrentRoute()}}},394621:function(e,t,n){"use strict";n.d(t,{b:function(){return o}});var r=n(514041),i=n(736150);let o=e=>{let t=(0,r.useRef)();t.current=e,(0,r.useEffect)(()=>i.Q.onRouteChanging(e=>{var n;return null===(n=t.current)||void 0===n?void 0:n.call(t,e)}),[])}},103517:function(e,t,n){"use strict";n(295124)},638476:function(e,t,n){"use strict";n(295124)},391155:function(e,t,n){"use strict";n(603754)},451208:function(e,t,n){"use strict";n(295124)},320948:function(e,t,n){"use strict";n(828851)},935025:function(e,t,n){"use strict";n(295124)},52287:function(e,t,n){"use strict";n.d(t,{u:function(){return r}});let r={CREATE_ACHIEVEMENT:"create-achievement",MODIFY_ACHIEVEMENT:"modify-achievement",IMPORT_OPEN_BADGE:"import-open-badge"}},405339:function(e,t,n){"use strict";n.d(t,{a:function(){return r}});let r={ULTRA_SETTINGS_PEEK:"ultra-settings-admin",ULTRA_EDIT_APPROVED_PRONOUNS_PEEK:"ultra-edit-approved-pronouns-admin",ULTRA_LOCALIZATION_EDITOR:"localization"}},723609:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});let r={ANNOUNCEMENT_DETAIL:"announcement-detail",READ_ANNOUNCEMENT:"read-announcement",ANNOUNCEMENT:"announcement"}},829684:function(e,t,n){"use strict";n.d(t,{l:function(){return r}});let r={ASSESSMENT:"assessment",ASSESSMENT_OVERVIEW:"assessment.overview",ASSESSMENT_DETAILS:"assessment-details",ASSESSMENT_OPEN:"assessment.open",ASSESSMENT_EXTERNAL_OVERVIEW:"assessment.external-overview",ASSESSMENT_FLEXIBLE_ATTEMPT_GRADING:"flexible-attempt-grading",ASSESSMENT_PEER_GRADING:"peer-grading",ASSESSMENT_PEER_GRADING_SUBMISSION_FEEDBACK_TAB:"peer-grading.assessment-submission-feedback-tab",ASSESSMENT_SETTINGS:"assessment-settings",ASSESSMENT_SETTINGS_DELEGATED_GRADERS:"delegated-graders",ASSESSMENT_SETTINGS_DISTRIBUTED_GRADERS:"distributed-graders",ASSESSMENT_SETTINGS_RUBRIC_SETTINGS:"assessment-settings.peek.rubric.mode",ASSESSMENT_ATTEMPT:"assessment.overview.attempt",ASSESSMENT_ATTEMPT_REVIEW:"assessment.overview.attempt.review",ASSESSMENT_ATTEMPT_REVIEW_FEEDBACK_TAB:"assessment.overview.attempt.review.assessment-submission-feedback-tab",ASSESSMENT_ATTEMPT_REVIEW_RUBRICS_TAB:"assessment.overview.attempt.review.inline-rubric",ASSESSMENT_ATTEMPT_REVIEW_ORIGINALITY_TAB:"assessment.overview.attempt.review.originality-tab",ASSESSMENT_ATTEMPT_IMS_PROCTORING:"assessment.ims-proctoring",ASSESSMENT_ATTEMPT_RESPONDUS_REQUIREMENT:"assessment.respondus-requirement",ASSESSMENT_MULTIPLE_ATTEMPTS_TAB:"assessment.overview.multiple-attempt",ASSESSMENT_AUTO_GENERATE:"auto-generate-assessment",ASSESSMENT_AUTO_GENERATE_QUESTION:"auto-generate-question",ASSESSMENT_OPEN_ATTEMPT_LOG:"open-attempt-log",ASSESSMENT_PRINT_CONTENTS:"assessment-print",ASSESSMENT_STUDENT_SUBMISSION_VIEW:"student-submission-view"}},464655:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});let r={BASE_CALENDAR:"base.calendar",BASE_COURSES:"base.courses",BASE_COURSES_FILTERS:"base-courses-filters",BASE_MESSAGES:"base.messages",BASE_PROCTORING_ATTEMPT:"base.proctoring-attempt",BASE_DASHBOARD:"base.dashboard",BASE_ACTIVITY:"base.recentActivity"}},295124:function(e,t,n){"use strict";n.d(t,{l:function(){return r}});let r={CALENDAR_SETTINGS:"calendar-settings",CREATE_EVENT:"event-create",COURSE_SCHEDULE:"class-schedule",EDIT_EVENT:"event-edit",OFFICE_HOURS:"office-hours",VIEW_EVENT:"event-view"}},560449:function(e,t,n){"use strict";n.d(t,{C:function(){return r}});let r={CONTENT_COLLECTION:"content-collection",CONTENT_COLLECTION_SETTINGS:"content-collection-settings",CONTENT_COLLECTION_PICKER:"content-collection-picker"}},63189:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});let r={CONTENT_MARKET:"content-market"}},775877:function(e,t,n){"use strict";n.d(t,{c:function(){return r}});let r={CONDITIONAL_RELEASE_PEEK_PANEL:"conditional-release",BULK_EDIT_CONTENT_PEEK_PANEL:"bulk-edit-content",CONTENT_MANAGE:"content-manage",CONTENT_MANAGE_EDIT:"content-manage.edit",CONTENT_PICKER:"content-picker",FILE_MANAGEMENT_PANEL:"file-management",CREATE_CONTENT_PEEK_PANEL:"content-manage.create",CREATE_LEARNING_MODULE_PEEK_PANEL:"content-manage.create.learningModule",COPY_CONTENT_PEEK_PANEL:"content-manage.copy",EDIT_LEARNING_MODULE_PEEK_PANEL:"content-manage.edit.learningModule",CREATE_DOCUMENT:"content-manage.create.document",DOCUMENT:"content-manage.edit.document",DOCUMENT_SETTINGS:"document-settings",CREATE_CLOUD_DOCUMENT_MODULE_PEEK_PANEL:"content-manage.create.cloud-document",VIDEO:"content-manage.video",EDIT_VIDEO:"content-manage.edit.video",VIDEO_SETTINGS:"video-settings",CREATE_FOLDER:"content-manage.create.folder",EDIT_FOLDER:"content-manage.edit.folder",COPY_REPORT_PEEK_PANEL:"content-manage.copy-report",IMPORT_CONTENT_PEEK_PANEL:"content-manage.import",IMPORT_REPORT_PEEK_PANEL:"content-manage.import-report",COPY_DETAILS_PEEK_PANEL:"content-manage.copy-details",GENERIC_STUDENT_PROGRES_PEEK_PANEL:"content-manage.progress",CONTENT_SEARCH:"content-search",GENERATE_STRUCTURE:"content-manage.generate-structure",CONTENT_NAVIGATOR_TRANSITION_PEEK:"content-navigator-transition-peek",CONTENT_NAVIGATOR_TRANSITION_FULL:"content-navigator-transition-full",CONTENT_NAVIGATOR_PLACEHOLDER:"content-navigator-placeholder",CONTENT_GOAL_ALIGNMENT_FOR_STUDENT:"content-goal-alignment-for-student",LEARNING_OBJECT_REPOSITORY:"learning-object-repository"}},906933:function(e,t,n){"use strict";n.d(t,{k:function(){return o}});let r="create-coverage-report",i="create-performance-report",o={CREATE_COVERAGE_REPORT:r,VIEW_COVERAGE_REPORT:`${r}.view-report`,CREATE_PERFORMANCE_REPORT:i,VIEW_PERFORMANCE_REPORT:`${i}.view-report`}},196775:function(e,t,n){"use strict";n.d(t,{M:function(){return r}});let r={ACCOMMODATION:"accommodation",COURSE:"course",COURSE_ACHIEVEMENTS:"course.achievements",COURSE_ANALYTICS:"course.analytics",COURSE_ANALYTICS_QUESTION_ANALYSIS:"course.analytics.question-analysis",COURSE_ANALYTICS_ACTIVITY:"course.analytics.course-activity",COURSE_ANALYTICS_REPORTS:"course.analytics.reports",COURSE_ANALYTICS_SCORM_REPORTS:"course.analytics.scorm-reports",COURSE_ANALYTICS_COURSE_REPORTS:"course.analytics.course-reports",COURSE_ANNOUNCEMENT_LIST:"course.announcements",COURSE_CALENDAR:"course.calendar",COURSE_CLASSIC:"course.classic",COURSE_CLASSIC_OUTLINE:"course.classic.outline",COURSE_CLASSIC_OUTLINE_ULTRA_COURSE_SELF_ENROLL:"course.classic.outline.ultra-course-self-enroll",COURSE_CONTENT_MARKET:"content-market",COURSE_DISCUSSION_PARTICIPANTS:"discussion-participants",COURSE_ENGAGEMENT:"course.engagement",COURSE_GRADES:"course.grades",COURSE_GRADES_MULTIPLE_ATTEMPT:"multiple-attempt-grading",COURSE_GROUPS:"course.groups",COURSE_GROUPS_STUDENT:"course.groups-student",COURSE_LTI:"lti",COURSE_MESSAGE:"message",COURSE_MESSAGES:"course.messages",COURSE_OUTLINE:"course.outline",EDIT_BANNER:"course-edit-banner",EDIT_ENROLLMENT:"edit-enrollment",SETTINGS:"course-settings"}},953601:function(e,t,n){"use strict";n.d(t,{c:function(){return r}});let r={COURSE_TASKS_LOGS:"course-tasks",COURSE_TASKS_PANEL:"course-tasks.tasks",COURSE_LOGS_PANEL:"course-tasks.logs"}},532893:function(e,t,n){"use strict";n.d(t,{s:function(){return r}});let r={CONVERSATION:"conversations",DISCUSSION:"discussion",DISCUSSION_DETAILS:"discussion-details",DISCUSSION_FEEDBACK:"discussion-feedback",DISCUSSION_PARTICIPANTS:"discussion-participants",DISCUSSION_SETTINGS:"discussion-settings",DISCUSSIONS_SETTINGS:"discussions-settings",DISCUSSION_VIEW:"discussion.view",DISCUSSION_VIEW_WITH_GRADING:"discussion.view.with-grading",SUBMISSION_LIST:"submission-list",DISCUSSION_GENERATE:"discussion-generate"}},441465:function(e,t,n){"use strict";n.d(t,{W:function(){return r}});let r={EDIT_EXTERNAL_LINK:"content-manage.edit.link",WEB_LINK_LAUNCH_FRAME:"content-manage.url-launch-frame"}},573704:function(e,t,n){"use strict";n.d(t,{l:function(){return r}});let r={PREVIEW_FILE:"preview-file",PREVIEW_FILE_EDIT:"preview-file-edit",EDIT_FILE:"content-manage.edit.file"}},621885:function(e,t,n){"use strict";n.d(t,{C:function(){return r}});let r={ADD_GOALS:"goal-picker-legacy"}},345615:function(e,t,n){"use strict";n.d(t,{e:function(){return r}});let r={CREATE_OFFLINE_ATTEMPT:"assessment-create-attempt",GRADE_AND_FEEDBACK:"grade-and-feedback",STUDENT_GRADE_AND_FEEDBACK:"student-grade-and-feedback",OFFLINE_GRADE_AND_FEEDBACK:"offline-feedback",GRADEBOOK_ITEM:"gradebook-item",GRADEBOOK_ITEM_ASSESSMENT:"gradebook-item.assessment",GRADE_ITEM_OVERALL_GRADE:"gradebook-item.overall-grade",GRADE_ITEM_TOTAL_CALCULATION:"gradebook-item.total-calculation",GRADE_SETTING:"grade-setting",GRADING_SCHEMA:"grading-schema",GROUP_SUBMISSION_GRADING:"group-submission-grading",RECONCILE_GRADE:"reconcile-grade",SUBMISSION_DEEP_LINK:"submission-deep-link",SUBMISSION_DEEP_LINK_FEEDBACK_TAB:"submission-deep-link.assessment-submission-feedback-tab",SUBMISSION_GRADING:"submission-grading",SUBMISSION_GRADING_FEEDBACK_TAB:"submission-grading.assessment-submission-feedback-tab",SUBMISSION_GRADING_RUBRICS_TAB:"submission-grading.inline-rubric",SUBMISSION_GRADING_ORIGINALITY_TAB:"submission-grading.originality-tab",GROUP_SUBMISSION_GRADING_FEEDBACK_TAB:"group-submission-grading.assessment-submission-feedback-tab",GROUP_SUBMISSION_GRADING_RUBRICS_TAB:"group-submission-grading.inline-rubric",GROUP_SUBMISSION_GRADING_ORIGINALITY_TAB:"group-submission-grading.originality-tab",GRADEBOOK_GRID_ADVANCED_FILTERS:"gradebook-grid-advanced-filters",GRADE_DOWNLOAD_SETTINGS:"grade-download-setting",DOWNLOAD_TEST_RESULTS:"download-test-results",ATTEMPT_RECEIPT_SEARCH:"attempt-receipt-search",GRADE_UPLOAD:"grade-upload-setting",PER_GRADABLE_ITEM_SETTINGS:"per-gradable-item-settings",PER_ASSESSMENT_SETTINGS:"per-assessment-settings",PER_ASSESSMENT_GROUP_SETTING:"per-assessment-group-settings",GRADABLE_ITEM_STATISTICS:"column-statistics",GRADE_ITEM_EDIT:"grade-item.edit",OBSERVEE_VIEW:"observee-view",ATTENDANCE:"attendance",ATTENDANCE_STUDENT_RECORDS:"attendance-student-records",VIEW_INDIVIDUAL_GRADES:"view-individual-grades",GRADES_BULK_DOWNLOAD:"grades-bulk-download",GRADE_ITEM_MANAGEMENT_SETTINGS:"items-management-settings"}},828851:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});let r={VIEW:"course-group",VIEW_GROUP_ENROLL:"content-group-enroll",IMPORT_GROUP_SET:"import-group-set",EXPORT_GROUP_SET:"export-group-set",IMPORT_GROUP_MEMBERS:"import-groups-members",GROUP_MEMBERS_LIST:"group-members-list",GROUP_SPACE:"group-space",GROUP_SET_DETAIL:"group-set-detail",GROUP_SET_LIST:"group-set-list",COURSE_GROUP_ENROLL:"course-group-enroll"}},458606:function(e,t,n){"use strict";n.d(t,{F:function(){return r}});let r={INTEGRATION_BASE:"base.integration"}},367083:function(e,t,n){"use strict";n.d(t,{_:function(){return r}});let r={JOURNAL:"journal",JOURNAL_VIEW:"journal.view",JOURNAL_DETAILS:"journal-details",JOURNAL_SETTINGS:"journal-settings",JOURNAL_VIEW_WITH_PARTICIPATION:"journal.view.with-participation",JOURNAL_PARTICIPATION_DETAIL:"journal-participation-detail",JOURNAL_SUBMISSION_FEEDBACK:"journal-submission-feedback",JOURNAL_VIEW_WITH_PARTICIPATION_AND_RUBRIC_EVALUATION:"journal.view.with-participation.peek.rubric-evaluation",JOURNAL_VIEW_WITH_PARTICIPATION_AND_RUBRIC_VIEW:"journal.view.with-participation.peek.rubric-view",JOURNAL_GENERATE:"journal-generate"}},294007:function(e,t,n){"use strict";n.d(t,{E:function(){return r}});let r={LTI:"lti",LTI_LAUNCH:"lti.launch",LTI_LAUNCH_CLOUD_CREATE:"lti.launch-cloud-create",LTI_LAUNCH_FRAME:"lti.launch-frame",LTI_LAUNCH_PEEK:"lti.launch-peek",LTI_EDIT:"content-manage.edit.lti",LTI_EDIT_PLACEMENT:"content-manage.edit.placement",LTI_EDIT_CLOUD_DOCUMENT:"cloud-document-edit"}},271001:function(e,t,n){"use strict";n.d(t,{k:function(){return r}});let r={EDIT_PARTNER_CONTENT:"content-manage.edit.partner-content"}},581917:function(e,t,n){"use strict";n.d(t,{i:function(){return r}});let r={PROFILE_BASE:"base.profile",UPDATE_AVATAR_PEEK:"update-avatar",UPDATE_LANGUAGE_PEEK:"update-language",UPDATE_PASSWORD_PEEK:"update-password",UPDATE_PROFILE_PEEK:"update-profile",NOTIFICATION_SETTINGS:"notification-settings",NOTIFICATION_SETTINGS_PEEK_PANEL:"notification-settings.content"}},963900:function(e,t,n){"use strict";n.d(t,{R:function(){return r}});let r={QUESTION_ANALYSIS_REPORT:"question-analysis.report"}},970784:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});let r={QUESTION_BANKS:"question-banks",IMPORT_DETAILS:"import-details",EDIT_QUESTION_BANK:"question-bank-edit",CREATE_QUESTION_BANK:"question-bank-create",GENERATE_QUESTION_BANK:"question-bank-generate"}},654602:function(e,t,n){"use strict";n.d(t,{t:function(){return r}});let r={ALIGN_GOALS_FOR_INSTRUCTOR:"question-goal-alignment",ALIGN_GOALS_FOR_STUDENT:"question-goal-alignment-for-student"}},862147:function(e,t,n){"use strict";n.d(t,{K:function(){return r}});let r={RUBRIC:"rubric",RUBRIC_MODE:"rubric.mode",RUBRIC_EVALUATION:"rubric-evaluation",RUBRIC_VIEW:"rubric-view",RUBRIC_GENERATE:"rubric-generate"}},603754:function(e,t,n){"use strict";n.d(t,{z:function(){return r}});let r={SAFE_ASSIGN:"safe-assign",ATTEMPT_SAFE_ASSIGN_SETTING:"attempt-safe-assign-setting"}},127242:function(e,t,n){"use strict";n.d(t,{H:function(){return r}});let r={GRADEBOOK_ITEM_SCORM_SUBMISSIONS:"gradebook-item.scorm-submissions",SCORM_EDIT:"scorm-settings",SCORM_ANALYTICS_REPORT:"scorm-analytics-report",SCORM_LAUNCH_FRAME:"scorm-launch-frame",SCORM_OVERVIEW:"scorm-overview",SCORM_OVERVIEW_STUDENT:"scorm-overview.student"}},251699:function(e,t,n){"use strict";n.d(t,{O:function(){return r}});let r={ContentCollection:"myContents",Portfolios:"portfolios",Goals:"goals",BlackboardStore:"blackboardStore",EnterpriseSurveys:"enterpriseSurveys",GoalPerformance:"goalPerformance",Observer:"observer",Rubrics:"rubrics",LOR:"lor"}},716968:function(e,t,n){"use strict";n.d(t,{l:function(){return i}});let r="tracing.core";class i{constructor(){this.sinks=new Set}notifySink(e){this.sinks.forEach(t=>{try{t(e)}catch(e){console.error(`[${r}]: Encountered exception while dispatching error to sink ${t.name}`,e)}})}addSink(e){this.sinks.add(e),console.debug(r,`[${r}] Added new sink ${e.name}`)}removeSink(e){this.sinks.delete(e)||console.warn(`[${r}] Tried to remove a sink ${e.name} but the sink wasn't in our list; this could be a potential memory leak`)}}},601615:function(e,t,n){"use strict";n.d(t,{m:function(){return s}});var r=n(716968),i=n(440209);class o extends r.l{error(e,t,n){let r;r=t instanceof Error?t:Error("Error logged",{cause:t}),this.notifySink({ts:Date.now(),level:i.$.Error,topic:e,context:n,exception:r})}warn(e,t,n){this.notifySink({ts:Date.now(),level:i.$.Warning,topic:e,context:n,message:t})}info(e,t,n){this.notifySink({ts:Date.now(),level:i.$.Information,topic:e,context:n,message:t})}debug(e,t,n){this.notifySink({ts:Date.now(),level:i.$.Debug,topic:e,context:n,message:t})}}let s=new o},880861:function(e,t,n){"use strict";n.d(t,{I:function(){return u},f:function(){return a}});var r=n(716968);let i="(unknown)",o=e=>"body"in e,s=async e=>{var t;let n=e.clone(),r=e.url?new URL(e.url):null,o=i;try{o=await n.text()}catch(e){}return{ts:Date.now(),status:n.status,path:r?r.pathname+r.search:i,host:null!==(t=null==r?void 0:r.host)&&void 0!==t?t:i,response:o}},a=(e,t)=>{var n,r;let o=e.url?new URL(e.url):null;return{ts:Date.now(),status:-1,path:o?o.pathname+o.search:i,host:null!==(n=null==o?void 0:o.host)&&void 0!==n?n:i,response:null!==(r=null==t?void 0:t.toString())&&void 0!==r?r:""}};class l extends r.l{async logResponse(e){if(o(e)){let t=await s(e);this.notifySink(t);return}this.notifySink(e)}}let u=new l},111730:function(e,t,n){"use strict";n.d(t,{b:function(){return i}});let r=e=>{let t={};return e&&Object.keys(e).forEach(n=>{"object"==typeof e[n]?"domNode"!==n&&(t[n]=r(e[n])):t[n]=e[n]}),t},i=(e,t)=>JSON.stringify(r(e))===JSON.stringify(r(t))},673609:function(e,t,n){"use strict";n.d(t,{P:function(){return i}});var r=n(681908);function i(e,t){let n=(0,r.xA)((0,r.F3)(e,t));window.open(n,"_self")}},75165:function(e,t,n){"use strict";var r,i;n.d(t,{w:function(){return r}}),(i=r||(r={})).AppendSection="appendSection",i.Outdated_PrependSection="prependSection"},567111:function(e,t,n){"use strict";n.d(t,{_:function(){return i},c:function(){return o}});var r=n(514041);function i(e){let t=(0,r.useRef)(e);return(0,r.useLayoutEffect)(()=>{t.current=e}),(0,r.useCallback)((...e)=>t.current(...e),[])}function o(e){let t=i((...t)=>null==e?void 0:e(...t));return e?t:void 0}},637942:function(e,t,n){"use strict";n.d(t,{B:function(){return o}});var r=n(514041);let i=-1;function o(){let[e]=(0,r.useState)(()=>`:r${i+=1}:`);return e}},648179:function(e,t,n){"use strict";n.d(t,{G2:function(){return k},nk:function(){return w},cN:function(){return U},zx:function(){return B},fn:function(){return G},MA:function(){return x},Tl:function(){return q},e4:function(){return F},Dv:function(){return M},ph:function(){return P}});var r=n(992227),i=n(542633);n(362420),n(332014),n(935539),n(828650);let o="Authorization";class s{constructor(e,t,n){this.pathParams={},this.session=void 0,this.method=e,this.path=t,this.query=new URLSearchParams,this.headers=new Headers,n&&this.withPathParams(n)}getRelativeUrl(){var e,t,n,i,o,s;let a=this.path;if(this.pathParams)for(let[e,t]of Object.entries(this.pathParams))a=a.replace(`%${e}%`,encodeURIComponent(t));if(a.includes("%tenantId%")){if(!(null===(t=null===(e=this.session)||void 0===e?void 0:e.foundationsTokenContext)||void 0===t?void 0:t.tenantId))throw new r.R("Request is missing required session value: [tenantId]");a=a.replace("%tenantId%",encodeURIComponent(this.session.foundationsTokenContext.tenantId))}if(a.includes("%personId%")){if(!(null===(i=null===(n=this.session)||void 0===n?void 0:n.foundationsTokenContext)||void 0===i?void 0:i.personId))throw new r.R("Request is missing required session value: [personId]");a=a.replace("%personId%",encodeURIComponent(this.session.foundationsTokenContext.personId))}let l=a.substring(1,a.indexOf("/",1));if(l&&(null===(s=null===(o=this.session)||void 0===o?void 0:o.foundationsTokenContext)||void 0===s?void 0:s.capabilities[l])){let e=this.session.foundationsTokenContext.capabilities[l];a=`/foundations/${e.region}/${e.stage}${a}`}let u=this.getQueryString();return u&&(a+=`?${u}`),a}getUrl(){return i.tU.getUrl(this.getRelativeUrl())}getQueryString(){return this.query.toString()}withPathParams(e){return Object.assign(this.pathParams,null!=e?e:{}),this}withQuery(e){for(let[t,n]of Object.entries(e))Array.isArray(n)?this.query.set(t,n.join(",")):void 0!==n&&this.query.set(t,String(n));return this}withQueryParams(e){return this.withQuery(e)}withExpand(...e){return this.withQuery({expand:e})}getSession(){return this.session}withSession(e){var t;return this.session=e,(null===(t=e.foundationsToken)||void 0===t?void 0:t.accessToken)&&this.headers.set(o,`Bearer ${e.foundationsToken.accessToken}`),e.cookies&&this.headers.set("Cookie",e.cookies),this}requiresSession(){return!1}validate(){return Promise.resolve().then(async()=>{var e,t;if(this.requiresSession()){if(!this.session)throw new r.R("Request requires session but no session info was added");if(!this.session.fetchFoundationsToken)throw new r.R("Request session is invalid, unable to fetch Foundations Token");if(this.session=await this.session.fetchFoundationsToken(),!this.session.fetchFoundationsContext)throw new r.R("Request session is invalid, unable to fetch Foundations Context");if(this.session=await this.session.fetchFoundationsContext(),!(null===(e=this.session.foundationsToken)||void 0===e?void 0:e.accessToken))throw new r.R("Request requires authorization via the Foundations JWT but no token was found");this.headers.set(o,`Bearer ${this.session.foundationsToken.accessToken}`)}let n=(null!==(t=this.path.match(/%\w+%/g))&&void 0!==t?t:[]).map(e=>e.slice(1,-1)).filter(e=>"tenantId"!==e&&"personId"!==e&&!this.pathParams[e]);if(n.length>0)throw new r.R(`Request is missing required path params: [${n}]`)})}async failed(e){throw new r.o(await e.json())}getRequestInit(){return{credentials:"same-origin",method:this.method,headers:this.headers}}toRequest(e){return new Request(null!=e?e:this.getUrl(),this.getRequestInit())}toString(){return`[FoundationsRequest: ${this.method} ${this.getUrl()}]`}}n(362420),n(332014),n(935539),n(828650);class a extends s{getUrl(){return i.tU.getUrl(super.getRelativeUrl())}requiresSession(){return!0}toString(){return`[FoundationsApiRequest: ${this.method} ${this.getUrl()}]`}async failed(e){throw new r.o(await e.json())}}class l extends a{constructor(e,t,n){super(e,t,n),this.getContentType()&&this.headers.set("Content-Type",this.getContentType())}getRequestInit(){return Object.assign(super.getRequestInit(),{body:this.getBodyInit()})}withBody(e){return this.body=e,this}validate(){return super.validate().then(()=>{if(void 0===this.body)throw new r.R("Request requires a body but none was provided")})}getBody(){return this.body}}class u extends l{getContentType(){return"application/json"}getBodyInit(){return JSON.stringify(this.body)}}class d extends a{constructor(e,t){super(i.ym.Get,e,t)}}class c extends d{withPaging(e){return this.withQuery({limit:e.limit,lastEvaluatedKey:e.lastEvaluatedKey})}async validate(){await super.validate(),this.query.has("limit")||this.query.has("cursor")||console.warn(`Attempting to get paged collection at ${this.path} without a filter, this might be a performance issue.`)}}class p extends a{constructor(e,t){super(i.ym.Delete,e,t)}}class m extends u{constructor(e,t){super(i.ym.Patch,e,t)}}class g extends u{constructor(e,t){super(i.ym.Post,e,t)}}n(362420),n(332014),n(935539),n(828650),n(362420),n(332014),n(935539),n(828650),n(362420),n(332014),n(935539),n(828650),n(362420),n(332014),n(935539),n(828650),n(362420),n(332014),n(935539),n(828650);let E="/lms-achievements/api/v1/tenants/%tenantId%/courses/%courseFoundationsId%",h=`${E}/achievements`,y=`${h}/%achievementId%`,f=`${h}/memberships/count`,b=`${y}/memberships`,I=`${b}/%membershipFoundationsId%`,A=`${E}/memberships/%membershipFoundationsId%/achievements`;class v extends d{constructor(e){super(h,e)}}class S extends g{constructor(e){super(h,e)}}class _ extends p{constructor(e){super(y,e)}}class T extends d{constructor(e){super(y,e)}}class O extends m{constructor(e){super(y,e)}}class C extends d{constructor(e){super(f,e)}}class R extends c{constructor(e){super(b,e)}}class L extends d{constructor(e){super(A,e)}}class D extends d{constructor(e){super(I,e)}}class N extends m{constructor(e){super(I,e)}}async function P(e,t){let n=new v({courseFoundationsId:t}).withSession(e);return(0,i.w)(n)}async function k(e,t,n){let r=new S({courseFoundationsId:t}).withSession(e).withBody(n);return(0,i.w)(r)}async function w(e,t,n){let r=new _({courseFoundationsId:t,achievementId:n}).withSession(e);await (0,i.S2)(r)}async function U(e,t,n){let r=new T({courseFoundationsId:t,achievementId:n}).withSession(e);return(0,i.w)(r)}async function M(e,t,n,r){let o=new O({courseFoundationsId:t,achievementId:n}).withSession(e).withBody(r);return(0,i.w)(o)}async function B(e,t){let n=new C({courseFoundationsId:t}).withSession(e);return(0,i.w)(n)}async function G(e,t,n,r){let o=new D({courseFoundationsId:t,achievementId:n,membershipFoundationsId:r}).withSession(e);return(0,i.w)(o)}async function x(e,t,n,r,o){let s=new N({courseFoundationsId:t,achievementId:n,membershipFoundationsId:r}).withSession(e).withBody(o);return(0,i.w)(s)}async function q(e,t,n,r){let o=new R({courseFoundationsId:t,achievementId:n}).withSession(e);return r&&o.withPaging(r),(0,i.w)(o)}async function F(e,t,n){let r=new L({courseFoundationsId:t,membershipFoundationsId:n}).withSession(e);return(0,i.w)(r)}n(362420),n(332014),n(935539),n(828650),n(362420),n(332014),n(935539),n(828650)},992227:function(e,t,n){"use strict";n.d(t,{R:function(){return r},o:function(){return i}}),n(362420),n(332014),n(935539),n(828650);class r extends Error{}n(362420),n(332014),n(935539),n(828650);class i extends Error{get body(){return this.responseBody}constructor(e){super(e.message),this.responseBody=e,Object.setPrototypeOf(this,new.target.prototype)}}n(362420),n(332014),n(935539),n(828650)},226906:function(e,t,n){"use strict";n(362420),n(332014),n(935539),n(828650),n(362420),n(332014),n(935539),n(828650),n(362420),n(332014),n(935539),n(828650)},492320:function(e,t,n){"use strict";n(362420),n(332014),n(935539),n(828650)},651512:function(e,t,n){"use strict";n(542633),n(56684),n(362420),n(332014),n(935539),n(828650),n(362420),n(332014),n(935539),n(828650),n(362420),n(332014),n(935539),n(828650)},341427:function(e,t,n){"use strict";n.d(t,{bT:function(){return i},eE:function(){return o},yS:function(){return s}});var r=n(56684);n(362420),n(332014),n(935539),n(828650);class i extends r.kz{constructor(){super("/v1/foundationsToken"),this.headers.set("Suppress-Session-Timestamp-Update","true")}}class o extends r.w_{constructor(){super("/v1/foundationsToken/refresh"),this.headers.set("Suppress-Session-Timestamp-Update","true")}}class s extends r.mj{constructor(){super("/v1/foundationsToken/context")}}},343320:function(e,t,n){"use strict";var r,i;n(362420),n(332014),n(935539),n(828650),(i=r||(r={})).WAITING="Waiting",i.STARTED="Started"},33918:function(e,t,n){"use strict";n(362420),n(332014),n(935539),n(828650)},956857:function(e,t,n){var r={"./af":543726,"./af.js":543726,"./ar":428754,"./ar-dz":481241,"./ar-dz.js":481241,"./ar-kw":424873,"./ar-kw.js":424873,"./ar-ly":936008,"./ar-ly.js":936008,"./ar-ma":677721,"./ar-ma.js":677721,"./ar-sa":378155,"./ar-sa.js":378155,"./ar-tn":932245,"./ar-tn.js":932245,"./ar.js":428754,"./az":944586,"./az.js":944586,"./be":529852,"./be.js":529852,"./bg":891846,"./bg.js":891846,"./bm":880420,"./bm.js":880420,"./bn":605005,"./bn-bd":325776,"./bn-bd.js":325776,"./bn.js":605005,"./bo":544302,"./bo.js":544302,"./br":334649,"./br.js":334649,"./bs":945162,"./bs.js":945162,"./ca":962457,"./ca.js":962457,"./cs":539335,"./cs.js":539335,"./cv":734364,"./cv.js":734364,"./cy":615057,"./cy.js":615057,"./da":278498,"./da.js":278498,"./de":114830,"./de-at":711614,"./de-at.js":711614,"./de-ch":91416,"./de-ch.js":91416,"./de.js":114830,"./dv":953147,"./dv.js":953147,"./el":824968,"./el.js":824968,"./en-au":194073,"./en-au.js":194073,"./en-ca":811387,"./en-ca.js":811387,"./en-gb":841386,"./en-gb.js":841386,"./en-ie":53537,"./en-ie.js":53537,"./en-il":267050,"./en-il.js":267050,"./en-in":203008,"./en-in.js":203008,"./en-nz":296963,"./en-nz.js":296963,"./en-sg":814865,"./en-sg.js":814865,"./eo":43713,"./eo.js":43713,"./es":606341,"./es-do":534611,"./es-do.js":534611,"./es-mx":265247,"./es-mx.js":265247,"./es-us":671554,"./es-us.js":671554,"./es.js":606341,"./et":517776,"./et.js":517776,"./eu":541927,"./eu.js":541927,"./fa":42148,"./fa.js":42148,"./fi":725756,"./fi.js":725756,"./fil":830754,"./fil.js":830754,"./fo":227002,"./fo.js":227002,"./fr":635997,"./fr-ca":61762,"./fr-ca.js":61762,"./fr-ch":806185,"./fr-ch.js":806185,"./fr.js":635997,"./fy":595020,"./fy.js":595020,"./ga":98493,"./ga.js":98493,"./gd":778162,"./gd.js":778162,"./gl":311402,"./gl.js":311402,"./gom-deva":891987,"./gom-deva.js":891987,"./gom-latn":28052,"./gom-latn.js":28052,"./gu":776785,"./gu.js":776785,"./he":801338,"./he.js":801338,"./hi":830894,"./hi.js":830894,"./hr":335443,"./hr.js":335443,"./hu":231754,"./hu.js":231754,"./hy-am":199637,"./hy-am.js":199637,"./id":174380,"./id.js":174380,"./is":218889,"./is.js":218889,"./it":927900,"./it-ch":416230,"./it-ch.js":416230,"./it.js":927900,"./ja":627544,"./ja.js":627544,"./jv":189757,"./jv.js":189757,"./ka":813953,"./ka.js":813953,"./kk":663607,"./kk.js":663607,"./km":697685,"./km.js":697685,"./kn":316108,"./kn.js":316108,"./ko":482195,"./ko.js":482195,"./ku":487821,"./ku.js":487821,"./ky":903145,"./ky.js":903145,"./lb":121655,"./lb.js":121655,"./lo":703284,"./lo.js":703284,"./lt":893509,"./lt.js":893509,"./lv":602883,"./lv.js":602883,"./me":274559,"./me.js":274559,"./mi":687283,"./mi.js":687283,"./mk":685877,"./mk.js":685877,"./ml":485376,"./ml.js":485376,"./mn":583594,"./mn.js":583594,"./mr":440718,"./mr.js":440718,"./ms":150381,"./ms-my":684592,"./ms-my.js":684592,"./ms.js":150381,"./mt":257944,"./mt.js":257944,"./my":773219,"./my.js":773219,"./nb":674677,"./nb.js":674677,"./ne":50880,"./ne.js":50880,"./nl":866239,"./nl-be":980097,"./nl-be.js":980097,"./nl.js":866239,"./nn":385057,"./nn.js":385057,"./oc-lnc":32513,"./oc-lnc.js":32513,"./pa-in":20068,"./pa-in.js":20068,"./pl":445993,"./pl.js":445993,"./pt":322625,"./pt-br":858250,"./pt-br.js":858250,"./pt.js":322625,"./ro":267486,"./ro.js":267486,"./ru":148828,"./ru.js":148828,"./sd":278310,"./sd.js":278310,"./se":309029,"./se.js":309029,"./si":425297,"./si.js":425297,"./sk":171247,"./sk.js":171247,"./sl":393742,"./sl.js":393742,"./sq":230169,"./sq.js":230169,"./sr":895872,"./sr-cyrl":265023,"./sr-cyrl.js":265023,"./sr.js":895872,"./ss":53527,"./ss.js":53527,"./sv":248556,"./sv.js":248556,"./sw":37427,"./sw.js":37427,"./ta":50898,"./ta.js":50898,"./te":951742,"./te.js":951742,"./tet":373600,"./tet.js":373600,"./tg":949812,"./tg.js":949812,"./th":379513,"./th.js":379513,"./tk":778464,"./tk.js":778464,"./tl-ph":103502,"./tl-ph.js":103502,"./tlh":190193,"./tlh.js":190193,"./tr":485903,"./tr.js":485903,"./tzl":959459,"./tzl.js":959459,"./tzm":777820,"./tzm-latn":41476,"./tzm-latn.js":41476,"./tzm.js":777820,"./ug-cn":647927,"./ug-cn.js":647927,"./uk":561997,"./uk.js":561997,"./ur":762902,"./ur.js":762902,"./uz":804990,"./uz-latn":235494,"./uz-latn.js":235494,"./uz.js":804990,"./vi":483756,"./vi.js":483756,"./x-pseudo":823792,"./x-pseudo.js":823792,"./yo":798893,"./yo.js":798893,"./zh-cn":61329,"./zh-cn.js":61329,"./zh-hk":213005,"./zh-hk.js":213005,"./zh-mo":447696,"./zh-mo.js":447696,"./zh-tw":885861,"./zh-tw.js":885861};function i(e){return n(o(e))}function o(e){if(!n.o(r,e)){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}i.keys=function(){return Object.keys(r)},i.resolve=o,e.exports=i,i.id=956857},830414:function(e){e.exports='<svg width="51" height="51" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><defs><path d="M17.429 13c-.226 0-.452.053-.66.163A1.448 1.448 0 0 0 16 14.444v10.112c0 .538.296 1.032.769 1.28a1.418 1.418 0 0 0 1.48-.097l7.142-5.055a1.454 1.454 0 0 0-.001-2.368l-7.143-5.056a1.41 1.41 0 0 0-.818-.26Z" id="a"/><mask id="b" maskContentUnits="userSpaceOnUse" maskUnits="objectBoundingBox" x="0" y="0" width="10" height="13" fill="#fff"><use xlink:href="#a"/></mask></defs><g transform="translate(6 6)" fill="none" fill-rule="evenodd"><path d="M37.143 39H2.857C1.286 39 0 37.7 0 36.111V2.89C0 1.3 1.286 0 2.857 0h34.286C38.714 0 40 1.3 40 2.889V36.11C40 37.7 38.714 39 37.143 39Z" fill="#FFF"/><path d="M7 39H2.8C1.26 39 0 37.7 0 36.111V2.89C0 1.3 1.26 0 2.8 0H7v39Zm26 0h4.2c1.54 0 2.8-1.3 2.8-2.889V2.89C40 1.3 38.74 0 37.2 0H33v39Z" fill="#CEE0F3"/><path d="M6 1h1v37H6V1Zm27 0h1v37h-1V1Zm4.538 0C38.342 1 39 1.666 39 2.48v34.04c0 .814-.658 1.48-1.462 1.48H2.462A1.475 1.475 0 0 1 1 36.52V2.48C1 1.666 1.658 1 2.462 1h35.076ZM2.858 0C1.285 0 0 1.3 0 2.889V36.11C0 37.7 1.286 39 2.857 39h34.286C38.714 39 40 37.7 40 36.111V2.89C40 1.3 38.714 0 37.143 0H2.857Z" fill="#777677"/><use stroke="#777677" mask="url(#b)" stroke-width="2" fill="#CEE0F3" xlink:href="#a"/><path fill="#777677" d="M1 19h6v1H1zM34 19h6v1h-6zM1 31h6v1H1zM34 31h6v1h-6zM1 25h6v1H1zM34 25h6v1h-6zM1 13h6v1H1zM34 13h6v1h-6zM1 7h6v1H1zM34 7h6v1h-6z"/></g></svg>'},540037:function(e,t,n){"use strict";let r;n.d(t,{A:function(){return d}});var i=n(92050),o=n(79475),s=n(621425);let a=e=>{let t=/locales\/([a-zA-Z0-9\-]+)\//.exec(e);if(!t||t.length<=0)throw Error(`Could not find locale in path ${e}`);return t[1]};var l=n(222096);class u extends i.Babelfish{getBundlePath(e,t){if(o.A.unitTesting){if(t.match(/^force\!/))t=t.replace(/^force\!/,"");else{if(!t.match(/^forcereset$/))return;this.reset();return}}return t.indexOf("://")>0?t:"locales/"+this.normalizeLocale(e)+"/_combined.json"}loadIncludedBundle(e){let t=a(e);return new s.InstantPromise(r=>{n(928617)("./"+e.replace("locales/","").replace(t,this.normalizeLocale(t))).then(e=>{var t;return r(JSON.parse(null!==(t=null==e?void 0:e.default)&&void 0!==t?t:e))}).catch(()=>r(null))})}loadPath(e){return e.indexOf("://")>=0?l.y.loadFromRemotePath(e):this.loadIncludedBundle(e)}load(e){return this.loadedBundles[e]||(this.loadedBundles[e]=this.loadPath(e)),this.loadedBundles[e]}onOverrideAdded(e){this.preferredLocalesCache=new Map}loadBundles(e){"string"==typeof e&&(e=[e]);let t=[];return this.normalizeLocales(e).forEach(e=>{t.push(this.overrideLoader.getOverridePathForLocale(e).then(e=>{if(e&&e.path)return this.loadBundle(e.ultraLocale,e.path)}),super.loadBundles(e))}),s.InstantPromise.all(t)}getPreferredLocales(e){"string"==typeof e&&(e=[e]);let t=e.join("|");if(!this.preferredLocalesCache.has(t)){let n=[];this.normalizeLocales(e).forEach(e=>{n=n.concat(this.overrideLoader.getPreferredLocales(e))}),this.preferredLocalesCache.set(t,Array.from(new Set(n)))}return this.preferredLocalesCache.get(t)}getLocaleForFormatting(e){return this.overrideLoader.getBaseLocale(e)||e}constructor(e,t=l.y.getInstance()){super(e),this.preferredLocalesCache=new Map,this.overrideLoader=t,this.overrideLoader.onOverrideAdded(this.onOverrideAdded.bind(this))}}var d=class{static getInstance(){return null==r&&(r=new u({fallbackLocales:[]})),r}static getTestInstance(e){if(!o.A.unitTesting)throw Error("Use getInstance() instead");return new u({fallbackLocales:[]},e)}}},222096:function(e,t,n){"use strict";n.d(t,{y:function(){return o}});var r=n(884270);function i(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s}class o{static getInstance(){return this.instance||(this.instance=new o),this.instance}onOverrideAdded(e){this.overrideAddedHandlers.add(e)}notifyOverrideAdded(e){this.overrideAddedHandlers.forEach(t=>{try{t(e)}catch(e){}})}static normalizeLocale(e){return e.toLocaleLowerCase().replace(/_/g,"-")}get root(){return this._root}get siteId(){return this._siteId}setOverrideLocation(e,t){e.endsWith("/")&&(e=e.substring(0,e.length-1)),this._root=e,this._siteId=t}addOverrideBundle(e,t){e=o.normalizeLocale(e);let n=o.normalizeLocale(t),r=o.getFallbackLocale(n);this.overrideBundles[e]={ultraLocale:n,localeForPath:t},this.baseLocaleMap[e]=this.baseLocaleMap[n]=r,this.notifyOverrideAdded(e)}getOverridePathForLocale(e){return(e=o.normalizeLocale(e),this.overrideBundles[e])?(this.overridePathPromises[e]||(this.overridePathPromises[e]=this.internalGetOverridePath(e)),this.overridePathPromises[e]):Promise.resolve(null)}async internalGetOverridePath(e){let t=this.overrideBundles[e].ultraLocale,n=this.overrideBundles[e].localeForPath,r=await this.getPathToLocale(n);return t&&r?{path:r,ultraLocale:t}:null}static getFallbackLocale(e){return e.split("-").slice(0,-1).join("-")}getPreferredLocales(e){if(e=o.normalizeLocale(e),!this.overrideBundles[e])return[e];let t=this.overrideBundles[e].ultraLocale,n=o.getFallbackLocale(t);return[t,n].filter(e=>!!e)}async getPathToLocale(e){if(!this._root||!this._siteId)return null;try{if(void 0===this.pathMap[e]){let t=`${this._root}/${this._siteId}/mapping.json`,n=await fetch(t);if(!n.ok)return this.pathMap[e]=null,null;let r=await n.json();if(!r[e])return this.pathMap[e]=null,null;this.pathMap[e]=`${this._root}${r[e][0].url}`}return this.pathMap[e]}catch(e){return null}}getBaseLocale(e){return(e=o.normalizeLocale(e),void 0===this.baseLocaleMap[e])?"":this.baseLocaleMap[e]||"en"}static async loadFromRemotePath(e){try{let t=await fetch(e);if(!t.ok)return{};return await t.json()}catch(e){return{}}}constructor(){this.overrideBundles={},this.baseLocaleMap={},this.pathMap={},this.overrideAddedHandlers=new Set,this.overridePathPromises={}}}i([(0,r.LRUMemoize)()],o,"normalizeLocale",null),i([(0,r.LRUMemoize)(2)],o,"getFallbackLocale",null)},252145:function(e,t,n){"use strict";n.d(t,{A:function(){return a}});var r=n(621425),i=/*#__PURE__*/n.n(r),o=n(884270),s=n(222096);class a extends i(){setUltraLocaleData(e){this.options.localeData=e}_load(e){return a._loadPromises[e]||(a._loadPromises[e]=new r.InstantPromise(t=>{n(828601)("./"+e+"/_combined.json").then(e=>{var n;return t(JSON.parse(null!==(n=null==e?void 0:e.default)&&void 0!==n?n:e))}).catch(()=>t(null))})),a._loadPromises[e]}getPreferredLocales(e){return[e].concat(super.getPreferredLocales(this.overrideLoader.getBaseLocale(e)||e))}constructor(e,t={defaultLocale:"en",production:!1,urlRoot:""}){super(e,t),this.babelfishInstance=e,this.options=t,this.overrideLoader=s.y.getInstance()}}a._loadPromises={},function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);o>3&&s&&Object.defineProperty(t,n,s)}([(0,o.LRUMemoize)(2)],a.prototype,"getPreferredLocales",null)},79475:function(e,t,n){"use strict";n.d(t,{A:function(){return y}});var r={};n.r(r),n.d(r,{default:function(){return o}});var i=n(645250),o={},s={batchRestAPI:!0,collab:!0,devtools_allyMock:!1,devtools_digestHub:!0,devtools_disableFtue:!1,devtools_enableSetLangQuery:!1,externalCourse:!1,httpEase:!0,journal:!1,learnApiCaching:!0,organizationA4L:!1,overallGradeAlert:!1,rightToLeftSupport:!0,useReactRendererForDocumentEditor:!1,multipleAttemptsInGroupAssessments:!0};let a={externalCourse:!1,devtools_allyMock:!1,devtools_disableFtue:!1},l={externalCourse:!1,devtools_allyMock:!1,devtools_disableFtue:!1},u={devtools_enableSetLangQuery:!0},d=function(e,t,n){return!(e in n)||n[e]},c=(e,t,n)=>e in n?n[e]:s[e];var p={"^(https://ultra-integ.int.bbpd.io)$":(e,t)=>d(e,t,a),"^(https://ultra-canary.bbpd.io)$":(e,t)=>d(e,t,l),".*(bbpd.io)":(e,t)=>c(e,t,u)},m=n(694795),g=(()=>{let e={...s},t=m.at(),n=p[Object.keys(p).find(e=>!!t.match(e))];if("all"===n)for(let t of Object.keys(e))e[t]=!0;else if("function"==typeof n)for(let t of Object.keys(e))e[t]=n(t,e[t]);else null!=n&&Object.assign(e,n);return e})();let E={apiBasePath:"/learn/api",basePath:"/ultra",buildInfo:"undefined"!=typeof window&&window.__buildInfo||{},chartsApiBasePath:"/charts/api",institutionApiBasePath:"/institution/api",partnerCloudBasePath:"/webapps/partner-cloud/app",defaultBasePage:"base.recentActivity",localeLoader:{fallbackLocales:["en-us","en"]},directivesPerf:!1,features:Object.assign(g,{}),storageKeyForFeatureFlags:"bb_feature_flags",showFeaturePrototypes:!1,errorDetails:!1,infiniteScrollThrottleMS:500,production:!0,unitTesting:!1,showComingSoonScreens:!0,showDigestHud:!0,streamLoadingInterval:12e4,telemetryApiBasePath:"/telemetry/api",telemetryApiTimeoutMS:2e3,telemetryAppId:"ultra",trialSiteSuggestionsUrl:"https://community.blackboard.com/community/ideas",trialSiteContactSalesUrl:"http://bbbb.blackboard.com/EducatorPreviewcontact",trialSiteLiveChatUrl:"https://chat.edusupportcenter.com/chat/websiteChat?short_name=educatorpreview&key=educatorpreview1707",trialSiteSupportPhone:"1-844-435-2162",cloudStorageIntegrationServices:[],disableAllFtueGuidance:!1,allyAutoUpdateInterval:500,allyClearCacheInterval:1e4,allyInitializationTimeout:1e4,cloudStorageIntegrationInitializationTimeout:1e4},h=JSON.parse(sessionStorage.getItem(E.storageKeyForFeatureFlags)||"{}");i.isEmpty(h)||(console.warn("Attention! Feature flags are overridden by client setting!",h),console.warn("To clear, please logout and re-login"),Object.assign(E.features,h)),r&&Object.assign(E,r),E.production=!0;var y=E},545653:function(e,t,n){n.p=window.publicPath||n.p}}]);